const cheerio=require("cheerio");hexo.extend.filter.register("after_post_render",(function(t){return"post"===t.layout&&(t.content='<div id="postchat_postcontent">'+t.content+"</div>"),t})),hexo.extend.filter.register("after_render:html",(function(t){const e=cheerio.load(t),n=hexo.config.postchat||{},{account:i={},summary:s={},chat:a={}}=n,{key:o="70b649f150276f289d1025508f60c5f58a"}=i,{enableSummary:r=!0,postSelector:l="#postchat_postcontent",title:c="文章摘要",summaryStyle:p="/postchat/css/postChatUser_summary.min.css",postURL:h="/^https?://[^/]+/[0-9]{4}/[0-9]{2}/[0-9]{2}/",blacklist:u="",wordLimit:d="1000",typingAnimate:m=!0,beginningText:f="这篇文章介绍了",summaryTheme:$="default"}=s,{enableAI:g=!0,backgroundColor:y="#3e86f6",fill:_="#FFFFFF",bottom:b="16px",left:T="16px",width:x="44px",frameWidth:C="375px",frameHeight:k="600px",defaultInput:P=!0,upLoadWeb:G=!0,showInviteLink:L=!0,userTitle:S="PostChat",userDesc:w="如果你对网站的内容有任何疑问，可以来问我哦～",addButton:I=!0,userIcon:j="https://ai.tianli0.top/static/img/PostChat.webp",userMode:F="magic",defaultChatQuestions:v=["你好","你是谁"],defaultSearchQuestions:U=["视频压缩","设计"]}=a,Q=`\n    <link rel="stylesheet" href="${p}">\n    <script>\n        let tianliGPT_key = '${o}';\n        let tianliGPT_postSelector = '${l}';\n        let tianliGPT_Title = '${c}';\n        let tianliGPT_postURL = '${h}';\n        let tianliGPT_blacklist = '${u}';\n        let tianliGPT_wordLimit = '${d}';\n        let tianliGPT_typingAnimate = ${m};\n        let tianliGPT_theme = '${$}';\n        var postChatConfig = {\n          backgroundColor: "${y}",\n          bottom: "${b}",\n          left: "${T}",\n          fill: "${_}",\n          width: "${x}",\n          frameWidth: "${C}",\n          frameHeight: "${k}",\n          defaultInput: ${P},\n          upLoadWeb: ${G},\n          showInviteLink: ${L},\n          userTitle: "${S}",\n          userDesc: "${w}",\n          addButton: ${I},\n          beginningText: "${f}",\n          userIcon: "${j}",\n          userMode: "${F}",\n          defaultChatQuestions: ${JSON.stringify(v)},\n          defaultSearchQuestions: ${JSON.stringify(U)}\n        };\n    <\/script>\n    <script data-postChat_key="${o}" src="%s"><\/script>\n  `;let W;return W=g&&r?"/postchat/js/postChatUser_summary.min.js":g?"/postchat/js/postChatUser.min.js":r?"/postchat/js/tianli_gpt.min.js":"",W&&e("body").append(Q.replace("%s",W)),t=e.html()}));