---
title: é”™è¯¯çš„ä»£ç å†™æ³•
categories:
  - Java
tags:
  - Other
abbrlink: c43d4ea4
date: 2018-07-09 00:00:00
---

æ•´ç†ä¸€ä¸‹é¡¹ç›®ä¸­ä¸å¥½çš„ä»£ç å†™æ³•

![image_source/2018/07091944/1111.png](1111.webp)

ä»¥ä¸‹æ˜¯ä¸€äº›å…·æœ‰ä»£è¡¨æ€§çš„é—®é¢˜, éƒ½æ˜¯ä¸€äº›ä¸€çœ‹å°±æ˜ç™½çš„é—®é¢˜, è¿˜æœ‰ä¸€äº›ä»£ç çš„å‘, æ…¢æ…¢å¡«å§.

åªé’ˆå¯¹ä»£ç , ä¸é’ˆå¯¹è°, å¦‚æœå†™çš„ä¸å¯¹çš„å¯¹æ–¹, ä½ å’¬æˆ‘å•Š

## ä»£ç é—®é¢˜

### è¿˜å¤±è´¥é‡è¯•? å¤±è´¥é‡è¯•ä¸ªå•¥? ç›´æ¥è¿”å›äº† è€é“!!

ä»£ç  1 åé¢, è·å–äº† batchResult, ä¸åº”è¯¥é‡æ–°èµ‹å€¼ code å˜›?

ä»£ç  2 ä¸ºä¿®æ”¹å

![image_source/2018/07091944/15325189812902.jpg](15325189812902.webp)

### Intellij idea æ˜¯ä¸ªå¥½ä¸œè¥¿

![image_source/2018/07091944/15325191868917.jpg](15325191868917.webp)
![image_source/2018/07091944/15325192695231.jpg](15325192695231.webp)

ä¿®æ”¹ä¸º:

![image_source/2018/07091944/15325193077721.jpg](15325193077721.webp)

catch é‡Œé¢ä½¿ç”¨ printStackTrace(), é”™è¯¯æ—¥å¿—å…¨éƒ¨è¾“å‡ºåˆ° `catalina.out`, ä½ è€ƒè™‘è¿‡ catalina çš„æ„Ÿå—å—?

**æ—¥å¿—é—®é¢˜åé¢è¯´**

### è¿™æ˜¯å…ˆæ–©åå¥å—?

å‰é¢éƒ½è°ƒç”¨äº† list çš„ size æ–¹æ³•, åé¢å†æ¥åˆ¤æ–­ list æ˜¯å¦ä¸º null?

è¿™ç§ä»£ç æˆ‘çœ‹è§èµ·ç ä¸ä¸‹ 10 å¤„, ç³»ç»Ÿèƒ½ç¨³å®šå—è€é“?

![image_source/2018/07091944/15325195481267.jpg](15325195481267.webp)

idea éƒ½çŸ¥é“çš„é—®é¢˜, ä½ ä¸åº”è¯¥ä¸çŸ¥é“

![image_source/2018/07091944/15325198758977.jpg](15325198758977.webp)

logger.info è¾“å‡ºé—®é¢˜:

ç”¨ `log.info("{}", xxxx)`, ä¸è¦è‡ªå·±æ‹¼æ¥å­—ç¬¦ä¸²

### è€é“, ä½ å¯é•¿ç‚¹å¿ƒå§

![image_source/2018/07091944/15325240857455.jpg](15325240857455.webp)

### è€é“, æˆ‘å°±æœä½ 

![image_source/2018/07091944/15325200536825.jpg](15325200536825.webp)

google : logger.error() æ­£ç¡®ä½¿ç”¨å§¿åŠ¿

![image_source/2018/07091944/15325201553323.jpg](15325201553323.webp)

### JDK7 ä¹‹åçš„å˜åŒ–

JDK7 ä¹‹ é’»çŸ³è¯­æ³•

![image_source/2018/07091944/15325202427415.jpg](15325202427415.webp)
![image_source/2018/07091944/15325202977026.jpg](15325202977026.webp)

### ç”»è›‡æ·»è¶³

value å°±æ˜¯ String ç±»å‹äº†, å†™ toString() æ˜¯ä¸ºäº†ç»ƒæ‰“å­—å—?

![image_source/2018/07091944/15311368667283.jpg](15311368667283.webp)

### å¼ºè¿«ç—‡å¯èƒ½è¦æ€¥æ­»

çœ‹è§é»„è‰²è­¦å‘Šäº†å—? çŸ¥é“æ€ä¹ˆæ”¹å—?

![image_source/2018/07091944/15325212228871.jpg](15325212228871.webp)

![image_source/2018/07091944/15325212784156.jpg](15325212784156.webp)

### ä½ å°±å‘Šè¯‰æˆ‘éœ€è¦å¤šå®½çš„æ˜¾ç¤ºå™¨?

è€é“, å…¬å¸æ²¡ç»™é…è¿™ä¹ˆå®½çš„æ˜¾ç¤ºå™¨å•Š... å•Š, 27 å¯¸çš„ä¹Ÿçœ‹ä¸è¿‡æ¥å•Š

**è¶…è¿‡ 120 åˆ—å®½å¿…é¡»éœ€è¦æ¢è¡Œ**

![image_source/2018/07091944/15325214131546.jpg](15325214131546.webp)

![image_source/2018/07091944/15325214458089.jpg](15325214458089.webp)

**è¶…è¿‡ 5 ä¸ªå‚æ•°, æ¨èä½¿ç”¨å®ä½“ç±»**

### ä½ è¿˜æ˜¯å»å†™ python å§

![image_source/2018/07091944/15311374744373.jpg](15311374744373.webp)

### çŸ¥é“ä»€ä¹ˆå« util å—?

![image_source/2018/07091944/15311378124879.jpg](15311378124879.webp)

### Intellij IDEA éƒ½çŸ¥é“ä¼šæœ‰ç©ºæŒ‡é’ˆ, ä½ è¿˜è¿™ä¹ˆå†™?

![image_source/2018/07091944/15311379696500.jpg](15311379696500.webp)

### ä¸èƒ½ç›´æ¥ return å—? ç»ƒæ‰“å­—å—?

![image_source/2018/07091944/15311380540319.jpg](15311380540319.webp)

### é¢è¯•é¢˜ä¹‹ String, StringBuilder, StringBuffer

> JDK 5 ä»¥å JVM å¯¹å­—ç¬¦ä¸²å¾ªç¯æ‹¼æ¥çš„å¤„ç†æ–¹å¼

![image_source/2018/07091944/15311381199583.jpg](15311381199583.webp)

### è€é“, ç±»æ³¨é‡Š, æ–¹æ³•æ³¨é‡Šå‘¢

**ç±»æ³¨é‡Šå‘¢?**

**æ–¹æ³•æ³¨é‡Šè™½ç„¶æœ‰, ä½†æ˜¯ä¸æ ‡å‡†å•Š, è€é“**

æ²¡çœ‹è§é‚£ä¹ˆå¤šé»„è‰²è­¦å‘Šå—?

![image_source/2018/07091944/15325219772861.jpg](15325219772861.webp)

**ä»£ç è§„èŒƒæˆ‘ä»¬åé¢è¯´**

![image_source/2018/07091944/15325221233995.jpg](15325221233995.webp)

æ¯ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ä¸ª StringUtil, è¿˜æœ‰å« StringUtils çš„

è€é“, å†™ä¹‹å‰å…ˆçœ‹çœ‹èƒ½ä¸èƒ½å¤ç”¨å•Š, æˆ–è€…å¤åˆ¶ä¹‹å‰, çœ‹æ˜¯ä¸æ˜¯å·²ç»æœ‰äº†å•Š.

### ä½ ä»¥ä¸ºæŠŠ DDL è¯­å¥æ‹·è´è¿‡æ¥å°±ä¸ç”¨å†™å­—æ®µæ³¨é‡Šäº†å—?

è€é“, ä½ è¿™æ ·éªšæ“ä½œæˆ‘å¾ˆä¸ºéš¾å•Š

![image_source/2018/07091944/15325226017793.jpg](15325226017793.webp)

åœ¨ç±»ä¸ŠæŒ‰ F1 çœ‹ä¸åˆ°ç±»æ³¨é‡Šå•Š

![image_source/2018/07091944/15325227597361.jpg](15325227597361.webp)

è¿™æ ·æ”¹å•Š

![image_source/2018/07091944/15325228899844.jpg](15325228899844.webp)

F1 ç›´æ¥çœ‹ç±»æ³¨é‡Šå•Š, ä¸ç”¨è·³è½¬äº†å•Š

![image_source/2018/07091944/15325228697589.jpg](15325228697589.webp)

F1 ç›´æ¥çœ‹å­—æ®µæ³¨é‡Šå•Š, ä¸ç”¨å†å»æŸ¥ DDL äº†å•Š, ä¸ä¼šåœ¨è’™åœˆäº†å•Š

![image_source/2018/07091944/15325228196153.jpg](15325228196153.webp)

### è€é“, ä¸æ˜¯ä¸­æ–‡çœ‹ä¸æ‡‚å•Š

é¢, è¿™ä¸ªè¦æ€ª idea äº†, å±…ç„¶æ²¡æœ‰é»˜è®¤è½¬æ¢

![image_source/2018/07091944/15325232263464.jpg](15325232263464.webp)

![image_source/2018/07091944/15325233014643.jpg](15325233014643.webp)

è€é“, æŠŠ transpartent æ‰“å¼€, ä½ å°±è®¤è¯†ä¸­æ–‡äº†

![image_source/2018/07091944/15325233990286.jpg](15325233990286.webp)

è€é“, çœ‹è§é»„è‰²è­¦å‘Šäº†? å¦‚æœæ˜¯è‡ªå·±è§£æé…ç½®, æ²¡æœ‰å¤„ç†ç©ºç™½ç¬¦çš„è¯, åˆå‡º bug äº†å•Š.. å•Š.

### è€é“, ä»£ç ç”¨ UTF-8 å•Š, ä¸ç„¶è¦ä¹±ç å•Š

![image_source/2018/07091944/15325253775665.jpg](15325253775665.webp)

å…¨éƒ½è¦ UTF-8 å•Š, è¦è·Ÿå›½é™…æ¥è½¨å•Š

![image_source/2018/07091944/15325254466365.jpg](15325254466365.webp)

### è€é“, 0 æ˜¯å•¥, 1 æ˜¯å•¥, 2 åˆæ˜¯å•¥å•Š? è„‘å£³éƒ½å¤§äº†å•Š...

å®šä¹‰ä¸ªå¸¸é‡å•Š, å¸¸é‡åç”¨æ‹¼éŸ³ä¹Ÿæ¯”æ²¡æœ‰å¥½å•Š, è€é“

![image_source/2018/07091944/15325236499284.jpg](15325236499284.webp)

![image_source/2018/07091944/15325235962477.jpg](15325235962477.webp)

### è®º MVC æ¶æ„çš„èŒè´£

dao å°±æ˜¯å¯¹è¡¨çš„æ“ä½œ, ä¸€ä¸ª dao å¯¹åº”ä¸€å¼ è¡¨;
service ç»„åˆå¤šä¸ª dao è¿›è¡Œä¸šåŠ¡å¤„ç†;
controller åšå‚æ•°æ£€æŸ¥, ç»“æœå°è£…, è·³è½¬é¡µé¢;

![image_source/2018/07091944/15311384292902.jpg](15311384292902.webp)

### ä½ å’‹ä¸æŠŠæ‰€æœ‰çš„ sql éƒ½å†™åœ¨ä¸€ä¸ª xml é‡Œé¢å‘¢?

![image_source/2018/07091944/15311385097765.jpg](15311385097765.webp)

### è¿™ä¸ªä¹Ÿè¦æ³¨å…¥? ä¹Ÿèƒ½æ³¨å…¥?

ğŸ˜…ğŸ˜‚ğŸ¤£

![image_source/2018/07091944/15311421939156.jpg](15311421939156.webp)

### å¤šä½™çš„ finally

> redis-proxy å·²ç»å¯¹ jedis èµ„æºçš„å®‰å…¨é‡Šæ”¾åšäº†å¤„ç†, ä¸ç”¨è‡ªå·±åœ¨å†™è¿™äº›å†—ä½™çš„ä»£ç 

![image_source/2018/07091944/15311434304599.jpg](15311434304599.webp)

### catch é‡Œé¢ä¸è¦åšæµç¨‹æ§åˆ¶, OK?

![image_source/2018/07091944/15311475450147.jpg](15311475450147.webp)

æ”¹ä¸º

![image_source/2018/07091944/15311950867272.jpg](15311950867272.webp)

### log è¾“å‡ºé”™è¯¯

> æ—¥å¿—çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿, ä½ å€¼å¾—äº†è§£ä¸€ä¸‹

æ¨èå»æœä¸€ä¸‹ log çš„æ­£ç¡®è¾“å‡ºæ–¹å¼.

![image_source/2018/07091944/15311496127819.jpg](15311496127819.webp)

```java
log.error("è®¿é—® redis å¼‚å¸¸", e);
```

### åšäººèƒ½ä¸èƒ½çœŸè¯šä¸€ç‚¹, å†™ä»£ç èƒ½ä¸èƒ½ç®€å•ä¸€ç‚¹

![image_source/2018/07091944/15311935198608.jpg](15311935198608.webp)

æ”¹ä¸º:

```java
IavpResponse iavpResponse = HttpUtil.sendPost(inputParams, "gatherkey", Integer.parseInt(timeOut));
if(iavpResponse.getStatusCode() == HttpStatus.SC_OK){
    return XmlConverUtil.readGatherKeyXmlOut(iavpResponse.getContent());
}
```

XmlConverUtil.java

```java
public static List<GatherKeyInfo> readGatherKeyXmlOut(String xml) {
        if(StringUtils.isBlank(xml)){
            return null;
        }
        ...
}
```

### isNotEmpty å’Œ isNotBlank çš„åŒºåˆ«çŸ¥é“å—?

![image_source/2018/07091944/15311943295264.jpg](15311943295264.webp)

æ”¹ä¸º:

![image_source/2018/07091944/15311947889326.jpg](15311947889326.webp)

### 3 è¡Œä»£ç æå®šçš„äº‹, éè¦å†™å‡ åè¡Œ, ç»ƒæ‰“å­—å—?

**åŸå§‹ä»£ç **

ç”¨äºæ£€æŸ¥æ˜¯å¦æ˜¯ä¼šå‘˜

```java
public boolean judgeMiguSuperVIP(String caller) {
        boolean VIPReturn = false;
        // isMiguGameMothMember è¡¨ç¤ºæ¸¸æˆä¼šå‘˜çŠ¶æ€ï¼Œ1 è¡¨ç¤ºæ˜¯åŒ…æœˆä¼šå‘˜ï¼Œ0 è¡¨ç¤ºä¸æ˜¯åŒ…æœˆä¼šå‘˜
        String isMiguGameMothMember = "0";
        try {
            GameAccount gameAccount = miguGameProvider.queryUserInfo(caller);
            if (gameAccount != null) {
                isMiguGameMothMember = gameAccount.getMiguSupperMember();
            } else {
                isMiguGameMothMember = "0";
            }
            if ("1".equals(isMiguGameMothMember)) {
                // æ˜¯å’ªå’•è¶…çº§ä¼šå‘˜
                VIPReturn = true;
                return VIPReturn;
            } else {
                // ä¸æ˜¯å’ªå’•è¶…çº§ä¼šå‘˜
                VIPReturn = false;
                return VIPReturn;
            }
        } catch (Exception e) {
            // æŸ¥è¯¢æ¸¸æˆè´¦å·çŠ¶æ€å¼‚å¸¸
            VIPReturn = false;
            return VIPReturn;
        }
    }
```

**é‡æ„ 1**

åˆ é™¤ boolean VIPReturn

```java
    public boolean judgeMiguSuperVIP(String caller, String type) {
        // isMiguGameMothMember è¡¨ç¤ºæ¸¸æˆä¼šå‘˜çŠ¶æ€ï¼Œ1 è¡¨ç¤ºæ˜¯åŒ…æœˆä¼šå‘˜ï¼Œ0 è¡¨ç¤ºä¸æ˜¯åŒ…æœˆä¼šå‘˜
        String isMiguGameMothMember = "0";
        try {
            GameAccount gameAccount = miguGameProvider.queryUserInfo(caller, type);
            if (gameAccount != null) {
                isMiguGameMothMember = gameAccount.getMiguSupperMember();
            } else {
                isMiguGameMothMember = "0";
            }
            return "1".equals(isMiguGameMothMember);
        } catch (Exception e) {
            return false;
        }
    }
```

**é‡æ„ 2**

åˆ é™¤ isMiguGameMothMember

```java
public boolean judgeMiguSuperVIP(String caller, String type) {
        // isMiguGameMothMember è¡¨ç¤ºæ¸¸æˆä¼šå‘˜çŠ¶æ€ï¼Œ1 è¡¨ç¤ºæ˜¯åŒ…æœˆä¼šå‘˜ï¼Œ0 è¡¨ç¤ºä¸æ˜¯åŒ…æœˆä¼šå‘˜
        try {
            GameAccount gameAccount = miguGameProvider.queryUserInfo(caller, type);
            return gameAccount != null && "1".equals(gameAccount.getMiguSupperMember());
        } catch (Exception e) {
            return false;
        }
    }
```

**é‡æ„ 3**

queryUserInfo å·²ç»å¤„ç†çš„ä¸‹å±‚æŠ›å‡ºçš„å¼‚å¸¸, è¿™é‡Œä¸éœ€è¦å†å¤„ç†

```java
public boolean judgeMiguSuperVIP(String caller, String type) {
        // isMiguGameMothMember è¡¨ç¤ºæ¸¸æˆä¼šå‘˜çŠ¶æ€ï¼Œ1 è¡¨ç¤ºæ˜¯åŒ…æœˆä¼šå‘˜ï¼Œ0 è¡¨ç¤ºä¸æ˜¯åŒ…æœˆä¼šå‘˜
        GameAccount gameAccount = miguGameProvider.queryUserInfo(caller, type);
        return gameAccount != null && "1".equals(gameAccount.getMiguSupperMember());
    }
```

## æ—¥å¿—é—®é¢˜

![image_source/2018/07091944/15325258386238.jpg](15325258386238.webp)

### è€é“, æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶è¦ç”¨ UTF-8 å•Š

ä¸ç„¶ä¹±ç çœ‹ä¸æ‡‚å•Š

![image_source/2018/07091944/15325238883862.jpg](15325238883862.webp)

### è€é“, æ—¥å¿—è¾“å‡ºèƒ½ä¸èƒ½ç»Ÿä¸€æ ¼å¼å•Š?

### è€é“, æ—¥å¿—è¾“å‡ºèƒ½ä¸èƒ½åˆ†çº§åˆ«å•Š?

### è€é“, æ—¥å¿—æ¡†æ¶èƒ½ä¸èƒ½ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªå•Š?

ä¸€ä¼š log4j, ä¸€ä¼š log4j2 çš„
åšäººå–œæ–°åŒæ—§å¯ä»¥ (log4j2 æ›´æ–°, æ•ˆç‡æ›´å¥½)
ä½†ä¹Ÿè¦ä¸“ä¸€, è¯´å¥½æ”¾å­¦åˆ«èµ°å°±ä¸èƒ½èµ°, è¦è·‘...
è¯´å¥½ç”¨ log4j2 + slf4j, å°±ä¸è¦ç”¨ System.out.println() OK?

## Maven é—®é¢˜

### è€é“, ä¸€ä¸ªæ¨¡å—è¿™ä¹ˆå¤šç‰ˆæœ¬å•Š, æ€ä¹ˆç®¡ç†å•Š

maven ç”¨æ¥ç®¡ç†é¡¹ç›®ä¸­çš„ä¾èµ–å…³ç³»çš„, è¿™ä¸ªæ²¡ä½¿ç”¨ maven æœ‰ä»€ä¹ˆåŒºåˆ«?

![image_source/2018/07091944/15311370387038.jpg](15311370387038.webp)

### æ‹·è´ä¾èµ–çš„æ—¶å€™çœ‹æ²¡çœ‹æ˜¯ä¸æ˜¯å­˜åœ¨äº†?

![image_source/2018/07091944/15311371885577.jpg](15311371885577.webp)

### è€é“, ä¸è¦åªæ™“å¾—æ‹·è´ä¾èµ–, ä¸çœ‹çœ‹ä¾èµ–å†²çªå•Š

![image_source/2018/07091944/15311372443892.jpg](15311372443892.webp)

## é¡¹ç›®ç»“æ„é—®é¢˜

### 1000 ä¸ªäººçœ¼é‡Œ, æœ‰ 1000 ä¸ªå“ˆå§†é›·ç‰¹, 1000 ä¸ªäººå†™ä»£ç , å°±æœ‰ 1000 ç§ä»£ç é£æ ¼

![image_source/2018/07091944/15311372952594.jpg](15311372952594.webp)

## ä¸‹ä¸€ç¯‡ musearch-project ä»‹ç»

å·²ç»é‡æ„çš„æ¨¡å—

![image_source/2018/07091944/15325262456132.jpg](15325262456132.webp)

```lua
.
â”œâ”€â”€ musicsearch-business            # ä¸šåŠ¡ä¸»æ¨¡å—
â”‚     â”œâ”€â”€ business-common             # ä¸šåŠ¡å…¬å…±ç±»åº“
â”‚     â”œâ”€â”€ mservice-migu-game          # migu-game ä¸šåŠ¡
â”‚     â””â”€â”€ service-meeting             # meeting æœåŠ¡æ¨¡å—
â”œâ”€â”€ musicsearch-common              # musicsearch é¡¹ç›® å…¬å…±æ¨¡å—
â”œâ”€â”€ musicsearch-component           # ç»„ä»¶ä¸»æ¨¡å—
â”‚     â”œâ”€â”€ component-iavp              # iavp æ¨¡å—, å°è£… iavp ç›¸å…³å®ä½“å’Œæ¥å£, ç›´æ¥æ³¨å…¥å³å¯
â”‚     â”œâ”€â”€ component-mybatis           # mybatis æ¨¡å—, æä¾›ä»£ç ç”Ÿæˆå’Œ mybatis ç›¸å…³åŠŸèƒ½
â”‚     â”œâ”€â”€ component-redis             # redis æ¨¡å—, æ³¨å…¥ RedisService å³å¯, æä¾›å¤šç§æ¨¡å¼
â”‚     â””â”€â”€ component-websocket         # websocket æ¨¡å— netty-socket.io å°è£…
â”œâ”€â”€ musicsearch-demo                # demo ä¸»æ¨¡å—
â”‚     â”œâ”€â”€ component-mybatis-demo
â”‚     â””â”€â”€ component-redis-demo
â”œâ”€â”€ musicsearch-dependencies-bom    # ç®¡ç†ç¬¬ä¸‰æ–¹ jar ç‰ˆæœ¬å’Œä¾èµ–å…³ç³»
â”œâ”€â”€ musicsearch-monitor             # æš‚å®š
â”œâ”€â”€ musicsearch-parent              # musicsearch å·¥ç¨‹ä¸»æ¨¡å—, ç®¡ç†æ•´ä¸ªåŠŸèƒ½çš„ç‰ˆæœ¬åŠä¾èµ–
â”‚     â””â”€â”€ docs                        # æ”¾å·¥ç¨‹ç›¸å…³æ–‡æ¡£
â””â”€â”€ musicsearch-support             # æ”¯æ’‘æ¨¡å—ä¸»æ¨¡å—
    â”œâ”€â”€ musicsearch-code-generator
    â”œâ”€â”€ musicsearch-management-system
    â””â”€â”€ musicsearch-timer-task

```
