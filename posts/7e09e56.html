<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>HomeLab 网络续集：升级 10G 网络-再战 10 年 | 司机带你开车</title><meta name="keywords" content="HomeLab,网络升级,万兆网络,雷电接口,USB4.0,JHL7440,ASM2464PD"><meta name="author" content="dong4j"><meta name="copyright" content="dong4j"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="HomeLab 网络续集：升级 10G 网络-再战 10 年"><meta name="application-name" content="HomeLab 网络续集：升级 10G 网络-再战 10 年"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="HomeLab 网络续集：升级 10G 网络-再战 10 年"><meta property="og:url" content="https://blog.dong4j.site/posts/7e09e56.html"><meta property="og:site_name" content="司机带你开车"><meta property="og:description" content="本文介绍了博主升级家庭网络到万兆的经验，包括从犹豫不决到决定升级的过程、第一次接触光纤和光模块的相关知识、设备购买、网络拓扑设计、网络环境配置和网络测试等方面的细节。文章详细探讨了雷电 4&amp;#x2F;3 和 USB4.0 的差异，以及 JHL7440 和 ASM2464PD 两款主控芯片的性能对比。最后，博主"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://cdn.dong4j.site/source/image/20241229154732_0ssj32bq.webp"><meta property="article:author" content="dong4j"><meta property="article:tag" content="dong4j, Java, Python, Golang, HomeLab, SpringBoot, 架构"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.dong4j.site/source/image/20241229154732_0ssj32bq.webp"><meta name="description" content="本文介绍了博主升级家庭网络到万兆的经验，包括从犹豫不决到决定升级的过程、第一次接触光纤和光模块的相关知识、设备购买、网络拓扑设计、网络环境配置和网络测试等方面的细节。文章详细探讨了雷电 4&amp;#x2F;3 和 USB4.0 的差异，以及 JHL7440 和 ASM2464PD 两款主控芯片的性能对比。最后，博主"><link rel="shortcut icon" href="https://cdn.dong4j.site/source/image/favicon.ico"><link rel="canonical" href="https://blog.dong4j.site/posts/7e09e56.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//hm.baidu.com"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="codeva-D4HsBP841S"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media=&quot;all&quot;"><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?61a751ac36d18d3ba293fe8ef3ec53eb",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script><script>let GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"与数百名博主无限进步",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"Local",mode:"online",switchBtn:!0,btnLink:"https://github.com/dong4j/blog-summary-assistant-server",randomNum:3,basicWordCount:1999,key:"84yT3Gkl6fp",Referer:"https://blog.dong4j.site:1024",apiUrl:"https://oneapi.dong4j.ink:1024/api/summary",audioUrl:"https://api.dong4j.ink:1024/audio"},diytitle:{enable:!0,leaveTitle:"兄台留步 🙏",backTitle:"兄台,别来无恙 👋"},LA51:{enable:!0,ck:"3Ki5mmyy6E5xtXuf",LingQueMonitorID:"3Ki5mmyy6E5xtXuf"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.dong4j.ink:1024",commentBarrageConfig:{enable:!0,maxBarrage:1,barrageTime:4e3,accessToken:"3a358103e6024cfb97546ec8f8408f5a",mailMd5:"3435c7a74ba1cad3f5d57b0b61b9b25cee221b97599c47b32edbdb36038c5411"},music_page_default:"nav_music",root:"/",preloader:{source:"car"},friends_vue_info:{apiurl:"https://friends.dong4j.ink:1024/"},navMusic:!0,mainTone:{mode:"both",api:"https://img2color.dong4j.ink:1024/api?img=",cover_change:!0},authorStatus:{skills:["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","😎 HomeLab 折腾专家","🏃 脚踏实地行动派","🧱 团队小组发动机","👶 尿不湿更换专家"]},algolia:{appId:"JFMEP32WXP",apiKey:"8e3acd038435dda872706ba6777a54b3",indexName:"blog-index",hits:{per_page:10},languages:{input_placeholder:"输入关键词后按下回车查找",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"该内容距离上次更新已经过了",messageNext:"天，文章内容可能已经过时。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!0},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: dong4j",link:"链接: ",source:"来源: 司机带你开车",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"mediumZoom",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!0,shortcutKey:{enable:!0,delay:100,shiftDelay:200},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"司机带你开车",title:"HomeLab 网络续集：升级 10G 网络-再战 10 年",postAI:"本文介绍了博主升级家庭网络到万兆的经验，包括从犹豫不决到决定升级的过程、第一次接触光纤和光模块的相关知识、设备购买、网络拓扑设计、网络环境配置和网络测试等方面的细节。文章详细探讨了雷电 4/3 和 USB4.0 的差异，以及 JHL7440 和 ASM2464PD 两款主控芯片的性能对比。最后，博主分享了网络拓扑图、硬件和软件的部署情况，并对升级效果进行了测试。",pageFillDescription:"简介, MBP 万兆参考方案, 成品网卡, DIY, 雷雳 4x2F3 和 USB4.0, 雷雳 4x2F3, USB4.0, 主控芯片, JHL7440, 各型号区别, ASM2464PD, 参考方案, 硬盘盒转 PCIe, 方案一(300+), 方案二(600+), 方案三(300+), 雷雳扩展坞, 雷雳核心板, 方案一(500+), 方案二(600+), 准备工作, 电口 Or 光口, 万兆光转电模块, 优势, 缺点, DAC 线缆, AOC 线缆, 光纤+光模块, 光纤技术, 光纤类型, 颜色区分, 传输距离, 纤芯的直径差异, 光源差异, 单模单芯x2F单模双芯x2F多模双芯, 光纤接口类型, 光模块类型, 封装类型分类, 光纤类型分类, 光模块的命名, 光纤和光模块组合, 网卡, MBP 网卡驱动, Intel 网卡, Mellanox, 网卡选择, Station 网卡, M920x 网卡, 基础知识, GbE Gbps GBps, 带宽与下载速度, 网卡接口类型, MTU, 巨型帧, 使用建议, 交换机, 二层 Or 三层, 产品选择, MBP 万兆最终方案, 首选方案, 备选方案, 网络拓扑, 现状, 规划, 设备购买, 施工环节, 硬件, 加装散热, MBP 网卡部署, 部署交换机, 光纤布线, 软件, 万兆交换机, 网口连接, Management 端口连接, Console 端口连接, tenlet 连接, 远程管理, MTU 设置, MBP, Mac mini, Ubuntu, DS923+, 效果测试, iperf3, 非 MBP 设备, MBP, 文件拷贝, Mac mini 2018, MBP, scp, rsync, 遗留问题, MBP MTU, 拓展坞带宽, 多台 Mac 互联, 雷雳技术, 雷雳组网, 雷雳网桥, 测试, iperf3, SMB 测试, scp, 未知状态, 总结简介步入中年的人生道路以太网口不只是性能的简单提升它更像是一扇通往新生活的大门这扇门之后是丰盈的路由器交换机和的世界能够让你的中年时光更加充实更加快乐在我家网络的陪伴下已经度过了三个充满活力的年头这段时光里我的网络稳定可靠成为了家中信息高速公路的坚实基石然而随着科技的快速发展和生活需求的变化我发现原本强大的网络已经无法满足未来几年日益增长的需求期间一直在犹豫是否升级到万兆因为作为我的主力机担心万兆网卡兼容性和稳定性问题当然也有成熟的雷雳网卡可供选择但是价格高的离谱最近各种升级方案陆续出现价格也逐渐符合我的预算同时家中使用的万兆设备也越来越多这一切让我意识到升级到万兆网络的时机已经到了在这篇博客中我将分享从犹豫不决到决定升级网络的决策过程详细介绍第一次接触的光纤和光模块的相关知识一步步地讲解设备购买网络拓扑设计网络环境配置和网络测试等方面的细节相关文章先导篇我的概要硬件篇介绍我所拥有的硬件设备网络篇包括网络环境异地组网与网络安全服务篇使用搭建的各类服务数据篇包括数据存储方案备份方案和数据恢复方案数据同步构建高效的数据同步网络数据备份打造坚实的数据安全防线网络续集升级网络再战年内网穿透详解揭秘网络连接背后的奥秘万兆参考方案目前市面上有许多成品雷雳转万兆网卡可供选择这些网卡通常支持或接口可以直接插入的雷雳或雷雳端口无需额外的硬件转换只需连接一根光缆即可实现高速网络传输另一种方式是可以更低成本实现万兆网络方案主要分为两种雷雳转和硬盘盒的转成品网卡我们先来看一下支持的万兆成品网卡反正不买看看总可以吧首先是威联通的与现在二手成本和是两款高性能的万兆网卡分别采用和接口支持连网能力它们体积小巧易于携带能够显著提升数据传输速度特点高速传输支持连网能力将数据传输速度提升至倍以上小巧轻便体积小巧易于携带方便用户随时随地使用多种接口采用接口支持多种连接模式采用接口适用于多种场景高效散热铝合金外壳具有良好的散热性能确保长时间运行易于安装无需额外供电直接连接设备即可使用系统需要安装驱动程序市面上为数不多的拓展坞和万兆口结合产品价格感人特点技术提供高达的传输速度支持网络多种存储卡读取多种接口连接等多功能扩展内置等接口可扩展电脑的多种功能充电功能支持充电可为笔记本等设备充电兼容性支持和操作系统另一款支持万兆的扩展坞具有高速连接乙太网多种读卡器接口和丰富的连接可满足各种连接需求提升工作效率特点高速连接和乙太网实现高速数据传输和连接多功能读卡器和读卡器方便快速读写卡丰富接口多个和接口满足各种外设连接需求小巧便携紧凑设计便于携带和安装的以太网转接器该转接器可将计算机连接到以太网络提供高达的传输速度适用于企业工作室电竞和家庭网络等场景特点以太网速度比传统以太网快支持最长米的连接距离支持音频视频桥接功能可替换式传输线总线供电无需外接电源兼容多种网络线缆包括和支持网络唤醒功能铝制外壳设计散热良好支持和系统的这是一款将网络连接到和计算机的设备该适配器通过连接提供高速的网络连接并支持多种操作系统特点支持高达的网络速度通过连接提供高速数据传输支持多种操作系统和包含光纤模块可连接到基础设施轻巧便携无需外部电源其他品牌兮克雷雳转万兆网卡万兆电口兼容雷雳雷雳转万兆网卡乐扩万兆网卡兼容雷雳电口网络转换器网卡奥睿科雷雳转万兆网络转换器王炸网卡双端口至双端口以太网适配器附带模块支持和操作系统非常适合带宽密集型应用例如数据备份和恢复集群计算内容交付医学成像和视频渲染双端口带和设备菊花链支持兼容每个端口吞吐量高达包含模块支持和支持和校验和卸载卸载以及分段卸载独家先进数据流技术安全插槽可通过锁提供额外的安全保护相对于价格高昂但稳定的成品网卡来说方式才应该是我的最终选择因为升级到万兆并不是必须性价比显然比稳定性更重要现在主流的种万兆网卡方案为转主控芯片一般的或转主控芯片一般的为了搞清楚和主控芯片对速度的影响决定先学习一下种主控芯片的差异传输速度的区别雷雳和首先简单介绍一下关于雷雳和它们都是目前常见的用于高速数据传输和视频输出的接口标准共享相同的接口但各自有不同的特点和优势雷雳核心技术由主导开发基于协议提供高速数据传输视频输出和供电功能主要特点高速传输最高可达的传输速度适用于大文件传输和高分辨率视频传输视频输出支持多个显示器或个显示器满足高品质视频需求供电能力最高可提供的供电可为笔记本电脑等设备充电优势性能强劲功能丰富适用于对性能要求较高的用户如视频编辑游戏玩家等核心技术由组织制定整合了雷雳的先进技术向下兼容等协议主要特点高速传输最高可达的传输速度与雷雳相同视频输出支持和雷雳同等的视频拓展能力供电能力具备大功率电力传输功能优势兼容性强向下兼容等协议价格相对较便宜雷雳和的区别特点雷雳开发者组织协议兼容性向下兼容向下兼容等协议价格较高相对较低功能更丰富性能更强兼容性更广总结来说雷雳更适合对性能有较高要求的用户如专业创作者游戏玩家等具有更好的兼容性适用于普通用户性价比更高主控芯片是来自英特尔生产的控制芯片得益于自家是雷雳接口的主要开发者在性能和传兼容性上有很好的表现其实你会发现大多数的硬盘盒品牌在介绍的时候宣称与兼容事实上这样说好像也没什么问题但其实该芯片只是兼容但实际上只是时期的产物芯片组该芯片组提供高达的传输速度实际速度最高约为很多朋友可能好奇雷雳接口不是最高支持的传输速度吗怎么到这里最高仅提供的速度确实和接口理论上支持高达的传输速度然而在实际应用中由于硬件设计和技术限制某些控制芯片如并不能完全达到这个速率下面是造成这种差异的几个原因带宽分配限制芯片设计之初定位主要是规范并主要用于接口扩展虽然它兼容的高达的带宽但在具体设计上往往只能分配其中的用于数据传输接口的是总带宽实际应用中需要分配给数据传输显示输出等用途而主要为数据传输设计因此仅分配通道限制连接到主板时通常仅通过通道与系统通信而非全速的因此这一设计在接口层面上就限制了最大数据传输速度约为也就是实际的左右兼容性和成本考量的设计主要面向性价比市场意在降低设备成本并提供可靠的性能因此对极限性能的支持相对较低对于日常数据传输需求已经能满足大多数场景如高清视频剪辑数据备份等因此对于多数厂商而言是一个性能和成本的平衡之选实际应用中的速率损耗实际中传输速率会受多种因素影响如硬盘类型散热情况数据传输协议等即便硬件接口支持更高速度但本身的写入读取速度也会成为瓶颈各型号区别和几个型号和这两款芯片都是推出的雷雳主控芯片根据官方参数和与旧款的和在单双口的功耗封装面积输出标准等方面没有区别的功耗为相比之下的功耗为也是一款雷雳主控芯片但它被设计为同时支持的提高了设备的运用弹性这使得新一代的显示器可以降级到模式下使用与相比在显存读取带宽上提升了其读取带宽可达到而的读取带宽最多为在性能测试中使用的显卡坞在帧数上比使用的显卡坞高出约这些型号之间的主要区别在于性能和兼容性和是较早的型号而和提供了更高的性能和更好的兼容性是公司华硕子公司推出的一款控制芯片其实该芯片是的产物不过也同样兼容雷雳接口与英特尔的相比更具性价比从实体体验上来说芯片的硬盘盒似乎能提供更高的传输速度因为与设计不同没有为或传统规范保留带宽所以你可以从网络上看到采用芯片的硬盘盒的传输速度能来到出头的成绩虽然速度上更胜且价格相对低廉但其实也有缺点在兼容性与发热上似乎比更严重不同主控芯片的硬盘盒速度对比供应商主控芯片上游接口下游接口理论速度真实速度参考方案硬盘盒转硬盘盒有类能满足要求基于或主控芯片的雷雳硬盘盒基于主控芯片的硬盘盒方案一偶然刷到块搞定苹果雷雳万兆网卡这个视频主使用的硬盘盒实现了万兆实现方式为硬盘盒关键词硬盘盒雷雳硬盘盒扩展坞音频改装万网卡某多多主控芯片是现在涨价到了转小板免驱万兆网卡曙光单口万兆网卡顾虑不是系列芯片且不是最新的系统不是双光口网卡这种方案因为没有外接供电会出现掉卡的情况所以评论中就有外接供电的方案方案二双硬盘盒主控转小板转供电网卡使用的是雷雳双盘硬盘盒扩展坞价格顾虑不知道作者的具体配置是什么且整套设备价格超预算方案三另一个主方案雷雳万兆网卡廉价方案硬盘盒主控转小板转供电网卡移动雷雳硬盘盒另一款主控芯片为的同类产品价格贵了顾虑不是系列芯片且不是最新的系统不是双光口网卡雷雳扩展坞这类方案就比较多了主要是通过一个雷雳核心板外接其他元器件焊接成一个具备插槽的电路板方便的地方是不需要转小板雷雳核心板动手能力强的还可直接购买雷雳核心板来组装价格一些雷雳拓展坞就是是用上面的核心板来提供雷雳功能比如绿联雷电多功能接口扩展坞方案一雷雳万兆网卡主控芯片网卡这个方案也是使用了上述的雷雳核心板顾虑不是系列芯片且不是最新的系统不是双光口网卡方案二最廉价的电脑芯片雷雳转万兆网卡方案测试雷雳拓展坞主控芯片网卡顾虑不是最新的系统不是双光口网卡在了解了万兆的可行方案后接下就是其他的准备工作准备工作电口光口万兆网络涉及到一个交换机网口选择问题使用光口还是电口我目前的网络情况是千兆和设备全部使用的电口个万兆光口则使用线连接交换机的光口我的需求是至少需要个网口才能将主要设备通过交换机组成万兆局域网首先就排除了全电口方案一是成本考虑二是噪音口全电口交换机优点是可以兼容我现在所有的设备而不需要换线缺点就是比全光口的交换机贵上不少另外因为发热量大必须得加散热风扇那么噪音又是一个需要考虑的问题选择全光口的话缺点就是需要重新布线以及为仅支持电口的设备添加万兆光转电模块万兆光转电模块它的作用是可以将交换机上的光口转换为电口以满足交换机上端口不足的需求如图所示万兆电口模块一端是端口另一端为接口优势更灵活的连接方式转端口提供了一种灵活的解决方案将端口转换为使其更适合数据中心和企业网络的需要成本效益采用普通连接器支持向下兼容使网络升级成本更低相比额外购买电口交换机更经济高效传输距离转端口模块可以在米的距离内提供的数据传输解决了高速线缆只能传输有限距离的问题节省能源与嵌入式端口相比使用转端口模块每个端口至少节省的功耗降低了能源消耗多速率支持支持多种传输速率及使其易于操作和管理缺点功耗和热量连接多个端口时相比光纤布线转端口解决方案的功耗和热量可能会较高网络延迟在连接多个节点时可能会增加网络延迟万兆光转电模块关键数据规格描述传输速率向下兼容和光纤端口插槽支持多模和单模光模块如电口接口支持或电缆光模块标准最大米最大公里供电方式或外接电源部分支持协议支持标准支持全双工和半双工模式工作温度到功耗至物理尺寸桌面型或插卡式机架安装而其他设备则全部使用光模块连接说到这里也会有种选择无缘铜缆有源光缆和独立的光纤光模块线缆简称一般译为直接连接电缆或直连铜缆是指直接连接服务器和网络设备的高速铜缆它采用差分信号传输技术能够提供高速率低损耗的数据传输高速线缆通常用于短距离的设备互联如服务器集群存储区域网络等分两种转个这种线缆都不可更换端口模块头和铜缆不能分离线缆简称译为有源光缆是由集成光电器件组成的用于数据中心高性能计算机大容量存储器等设备间进行高速率高可靠性互连的传输设备它通常满足工业标准的点接口通过内部的电光电转换使用光缆的优越性进行数据的传输这种线缆同样不可更换端口与的区别属性传输介质铜线光纤类型被动无信号放大器或主动带信号放大器主动型内置光电转换模块传输距离通常支持米最远约米通常支持米到米部分型号可达数百米功耗较低特别是被动几乎不耗电较高需要光电转换模块工作价格相对便宜适合短距离连接相对昂贵适合长距离连接柔韧性较差铜线较硬不适合狭小空间或需要多次弯折的环境更灵活光纤材质可以弯曲适合复杂布线信号完整性短距离内信号完整性较好但距离增加会受限于铜线电磁干扰优秀光纤抗电磁干扰能力强适合长距离传输接口兼容性支持等标准接口同样支持等标准接口典型应用场景服务器机柜内短距离连接交换机到服务器机柜间楼层间数据中心之间的长距离高速连接光纤光模块属性光纤光模块成品线缆结构光纤线缆与可更换光模块的组合一体化设计线缆与模块固定为一体传输距离支持较长距离传输几百米到数公里取决于光模块和光纤类型通常适用于短距离连接灵活性光模块和光纤可根据需求自由更换受限于固定长度和规格价格光模块和光纤分开购买整体成本较高相对便宜尤其是在短距离应用中功耗光模块需要供电功耗相对较高无需供电功耗最低有源设计功耗较光模块略低维护与扩展更换单个光模块或光纤即可灵活升级或维修整根线缆损坏需整体更换接口类型支持支持多种接口标准如等通常与网卡或设备固定接口匹配适用场景数据中心核心网络长距离互联数据中心机架内或机架间短距离连接二手的和线缆大概一根不过上次给选购线缆时出现了不兼容的问题后来就换成了线缆这次准备使用光纤光模块的方案可以更换光模块的方式应该更灵活一些二手的价格也贵不了多少接下来就是介绍一下光纤和光模块了因为是第一次接触光纤所以需要先学习了解一下基础知识光纤技术在现代网络通信中光纤传输技术是高速和远距离数据传输的关键它通过光信号在光纤中传输数据以实现更高的带宽更低的延迟和更远的传输距离与传统的铜缆相比光纤在数据中心企业网络和广域网中已成为主流选择因为目前搭建万兆光纤网络离不开对光纤类型光纤接口类型和光模块类型的基本了解所以就从这三个方面介绍一下基础知识光纤类型光纤是由玻璃或塑料制成的一种传输介质能够通过光信号传递数据根据用途和传输距离光纤分为两种主要类型单模光纤只允许单一模式的光通过适用于长距离通信可达几十公里甚至上百公里适用于跨楼层或跨建筑物的通信多模光纤允许多种模式的光通过适合短距离传输通常在米以内成本较低多用于机房或局域网内设备的连接颜色区分通过光纤的外护套颜色可快速区分单模光纤和多模光纤根据标准定义单模光纤的外护套颜色为黄色而多模光纤的外护套颜色为橙色或水绿色其中多模光纤采用橙色外护套多模光纤采用水绿色外护套多模光纤则采用绿色外护套传输距离单模光纤常用于长距离传输多模光纤一般用于短距离传输而不同类型的单模和多模光纤应用在不同速率以太网中传输距离各不相同如下表所示光纤类型以太网以太网以太网以太网以太网单模光纤多模光纤多模光纤多模光纤多模光纤多模光纤通信用多模光纤主要有哪些类型有什么区别参考单模光纤与多模光纤有什么区别哪个好怎么用纤芯的直径差异单模光纤的纤芯直径一般为由于纤芯窄它只能在以及波长上传输一种模式的光也正因如此单模光纤色散较小带宽高而多模光纤的纤芯直径一般为纤芯宽它能在给定的工作波长或波长上传输多种模式的光但因为多模光纤中传输的模式多达数百个各个模式的传输常数和群速率不同导致多模光纤的带宽窄色散大损耗也大光源差异单模光纤和多模光纤采用的光源不同单模光纤一般采用激光光源而多模光纤一般采用光源单模单芯单模双芯多模双芯在光纤通信中单模单芯单模双芯和多模双芯是常见的光纤类型它们的区别主要体现在光纤模式芯数传输性能以及适用场景上以下是详细对比定义与特性类型定义特点单模单芯单根单模光纤光以单一模式传播适用于长距离通信支持远距离和高带宽传输常与波分复用技术结合使用单模双芯两根单模光纤分别用于发送和接收适合中短距离通信广泛用于数据中心和企业网络的设备互联多模双芯两根多模光纤光以多种模式传播分别用于发送和接收适合短距离高带宽传输主要用于数据中心内部设备间的高速互联光纤模式与传输性能特性单模单芯单模双芯多模双芯光纤模式单模单模多模传输距离最长几十公里到上百公里较长几公里到几十公里最短一般在米以内传输带宽高支持高较低支持或更高但距离受限抗干扰能力极强极强较弱多模光纤模式干扰较多使用场景类型典型应用场景单模单芯长距离通信如骨干网跨机房连接电信级应用单模双芯数据中心企业园区网络中短距离互联如交换机到服务器的连接多模双芯数据中心内部短距离高速互联如到的设备互联通常为米以内连接方式与成本对比属性单模单芯单模双芯多模双芯光纤芯数单根光纤双根光纤双根光纤布线复杂度最低较高需两根光纤较高设备成本较高需技术支持较低最低光纤成本最低只需一根光纤较高双根光纤较低多模光纤通常成本更低常用接口类型适配光模块类型推荐光模块类型单模单芯单纤双向光模块模块支持技术单模双芯双纤光模块如模块多模双芯多模光模块如支持的模块常用于短距离高速通信总结特性单模单芯单模双芯多模双芯传输距离长距离几十公里到上百公里中短距离几公里到几十公里短距离一般在米以内应用场景长距离骨干网跨区域通信数据中心企业园区网络数据中心内部设备互联成本光模块和设备成本高成本适中光纤和模块成本最低单模单芯适合长距离高带宽传输设备成本高适合电信级应用单模双芯中短距离的全双工通信优选方案兼顾性能和成本多模双芯经济高效的短距离方案适合数据中心内设备间的高速连接光纤接口类型型光纤接口全名为是一种常见的光纤接口类型它的外部加强方式是采用金属套紧固方式为螺丝扣接口在电信网络中被广泛采用具有牢靠防灰尘的优点不过安装时间相对较长通常在光纤配线架侧使用较多型光纤接口即是一种卡接式接口它的外壳呈矩形紧固方式是采用插拔销闩式不需要旋转接口的使用非常方便但容易掉出来因此在路由器和交换机上使用较多型光纤接口全称为是一种圆形的接口它的紧固方式为螺丝扣插入后需要旋转半周以固定接口的缺点是容易折断但在光纤配线架中使用较多尤其是对于连接来说型光纤接口即是一种小型化的光纤接口它的外壳呈矩形紧固方式为插拔销闩式接口适用于模块采用模块化插孔闩锁机理制成便于操作和维护运营商进户光纤都是单芯单模皮线光纤到光猫这里都必须是单模光纤才能正常使用没有其他选择单模光纤通常都是接口到光猫这段距离通常也是运营商负责维护属于接入网无源光网络是目前有线接入网的主流技术光纤到户让大家享受到了超高网速带来的便利性光模块类型封装类型分类光模块按照封装形式来分有以下几种常见类型的升级版最高速率可达主要由激光器构成特点是小型可热插拔的加强版传输速率为可以满足光纤通道和以太网的应用传输速率为它的优点是功耗较低端口密度较高且支持热插拔传输速率为支持光纤连接器和光纤连接器特点是小型可热插拔采用个通道并行传输传输速率为满足以太网的应用更高规格的模块有采用通道电接口单通道速率提供高达到总最大数据速率是一种新型光模块比略大同样具有个高速电通道支持高达的总吞吐量光纤类型分类光模块根据适用的光纤类型的不同可被分为单模光模块和多模光模块其中单模和多模指的是光纤在光模块中的传输方式单模光模块多用在远距离传输中而多模光模块多用在短距离传输中多模光模块的工作波长为单模光模块的工作波长为单模光模块中使用的器件是多模光模块的两倍所以单模光模块的总体成本要远远高于多模光模块单模光模块的传输距离可达至多模光模块的传输距离可达光模块的命名比如是的缩写意为可热插拔的小型模块可以简单理解为的缩写升级版本代表其最大传输速率为适用于以太网代表等表示光模块的传输距离和是标准中比较常见的模块类型在光纤通信中和是光模块传输中的一种距离术语表示短距离表示长距离表示长度延伸多点模式表示超长距离则表示最长距离目前市面上万兆光模组型号繁多如用于多模传输的万兆光模组用于单模传输的万兆光模组以及既能用于单模传输又能用于多模传输的万兆光模组下面是部分万兆光模组的区别型号波长光纤类型传输距离接口标准多模双工单模双工多模双工单模双工单模双工短距离是一种常见的模块它可以在多模光纤中连接高达米的光纤一般情况下模块多为多模工作波长为这些模块是可热插拔的相互之间可以轻松实现切换长距离用于远程数据传输如大型组合或地铁区域网络具有成本低功耗低体积小密度高的优点长度延伸多点模式符合以太网的标准适用于传统光纤和新型多模光纤它在多模光纤上的最小支持距离为米在单模光纤上的最小支持距离为米还有超远距离传输的模块超长距离在标准单模光纤上支持长达公里的传输距离广泛应用于数据中心和企业工业园区最长距离在标准单模光纤上支持高达公里的传输距离其波长为符合和标准它可应用于数据网络光网络参考单模多模还傻傻分不清楚关于光模块介绍看这一篇就够啦光纤和光模块组合光模块类型光纤类型是否能正常工作单模光模块多模光纤短距离可以工作但无法保障效果需要使用光纤收发器转换光纤类型单模光模块单模光纤正常工作多模光模块单模光纤无法工作多模光模块多模光纤正常工作单模光模块与单模光纤配套使用单模光纤传输频带宽传输容量大适用于长距传输多模光模块与多模光纤配套使用多模光纤有模式色散缺陷其传输性能比单模光纤差但成本低适用于较小容量短距传输在了解相关基础知识后满足最低速度需求的前提下考虑性价比后目前多模光纤更合适因为搭配的多模光模块更便宜所以我我选择使用多模双芯光纤接口多模光模块来组建我的万兆光纤网络这应该是家庭万兆光纤网络比较常见的配置了网卡网卡驱动首先需要确定系统为版本能够免驱哪些万兆网卡原生驱动有驱动驱动驱动驱动各驱动区别驱动名称支持的硬件芯片组用途描述系列网卡千兆以太网支持的千兆网卡系列网卡万兆以太网支持的万兆网卡系列网卡支持的高速网卡系列网卡支持高性能网卡我们关注的是网卡驱动所以对应的是下面是驱动信息驱动唯一标识驱动程序依赖的内核扩展为的网络栈框架系列该驱动程序实现的类通过类代码进行设备匹配表示匹配所有网络控制器类设备屏蔽了子类代码的影响通过设备和供应商匹配表示匹配供应商生产的设备且忽略设备的具体细节表明此驱动支持隧道技术如隧道表示该驱动兼容此功能指定设备提供者的类名在这里是表示该驱动的服务提供者是设备指定驱动程序的实现类名指定与此驱动程序关联的用户空间服务名如上所示比较关键的是表示为且忽略设备供应商将英特尔标识为设备制造商供应商可以在这里查询网卡网卡与驱动信息型号主芯片型号协议标准接口类型驱动网卡鉴赏环节型号协议标准接口类型驱动最适合的雷电网卡这位主使用网卡实现了在下内网糟了心动的感觉这不和的方案不就有了网卡选择满足需求的似乎就只有和这个产品类别但价格上肯定更便宜而且网上的成功案例绝大部分都是因此决定购买的双网口版本确认了网卡类别后就需要选择网口数量了我的需求是双光口而双光口版本有多个分别是其中和的区别仅在于购买时带不带光模块带不带而则需要单模的光模块它的价格更贵系列网卡的主芯片现在主要有个型号他们三者的区别芯片型号功耗典型特点应用场景支持企业级功能虚拟化支持性能最强高性能企业数据中心虚拟化环境类似于去除较低功耗适合高吞吐量应用数据中心高带宽需求的网络设备低功耗和低成本去除高级功能适用于成本敏感应用嵌入式系统低功耗和低成本应用是一种虚拟化技术允许单一的物理设备如网卡被虚拟化并分配给多个虚拟机使得多个虚拟机能够直接访问硬件资源而无需经过传统的虚拟化中间层如或虚拟化驱动的核心特点包括虚拟功能每个虚拟机被分配一个虚拟功能这些虚拟功能可以直接访问物理网卡的一部分资源物理功能物理设备的主要功能它负责管理和分配虚拟功能并与虚拟机进行通信硬件直接访问通过虚拟机可以绕过操作系统和的网络堆栈直接与物理硬件交互提高性能减少延迟和使用率总结起来就是如果需要玩和的话最好还是上芯片的这三个型号中只能支持单口万兆和则都能支持双口万兆这是它们三者之间最显著的差异相比则多了对接光模块和设备内部背板内接类型的支持对接口的支持则表示芯片可以配合模块使用也就是说相比多了对光口的支持最常用的双口光纤万兆网卡就是采用的芯片另外需要注意的是的总线类型是需要使用或的插槽如果使用需要版本否则无法达到线速下面贴一个各版本的的理论速度表版本理论带宽理论带宽理论带宽理论带宽理论带宽传输速率一路从原生驱动到对网卡的关知识的基础了解最终确定选购的网卡为目前二手价格也非常便宜应该算是最具性价比的万兆网卡参考了解以太网术语数据速率互连介质和物理层乙太网路连接规格概览形形色色的连接方式网卡主机原来有一张浪潮的万兆双电口网卡这张卡可以称得上是年轻人的第一张万兆网卡价格低的离谱因为这个卡是非标准的买回来不能直接用需要魔改一下小黄鱼有成品参考双口万兆网卡低到元这个万兆网卡性价比天花板就行现在的问题是大热量大所以索性就一次性全部换成还能少买个光转电模块网卡网卡也是但是上次拆机时发现已经弯曲变形了不过并不影响使用等彻底报废的时候再考虑更换或者下次升级到网卡信息芯片最大传输单元是指网络能够传输的最大数据包大小以字节为单位的大小决定了发送端一次能够发送报文的最大字节数如果超过了接收端所能够承受的最大值或者是超过了发送路径上途经的某台设备所能够承受的最大值就会造成报文分片甚至丢弃加重网络传输的负担如果太小那实际传送的数据量就会过小影响传输效率假设待发送的数据总共字节假设以太网设备一帧最多只能承载字节很明显数据需要划分成片再通过个帧进行发送的特点特点描述默认值以太网设备的默认为字节影响过小更多数据包增加和网络设备的开销过大可能导致设备间不兼容数据包丢弃或分片分片问题当数据包大小超过时网络需要对数据包进行分片可能增加延迟并带来丢包风险适配场景不同场景下应根据需要调整以平衡性能和兼容性巨型帧特点描述定义将设置为字节或更大通常用于高性能传输场景优势降低包头开销减少拆分与重组操作提高大文件传输效率约提升劣势无标准可能存在兼容性问题需要网卡和交换机都支持巨型帧模式适用场景大型文件传输数据同步等高带宽需求场景当你在特定的网络任务下将从设置为会发现网络文件传输速度会有的提升这是因为在巨型帧模式下网络传输设备相应地减少了拆开组合数据包的次数一个巨型帧的数据包可以携带之前多个数据包所携带的数据量在大型文件传输的时候效率也就自然提高了使用建议双网卡双网络一个网络使用默认的用于日常上网另一个网络使用巨型帧用于高性能存储数据传输这正好符合我现在的网络环境一电信宽带一联通宽带参考什么是入坑万兆网卡必须知道巨型帧与的坑家里网络复杂度提高如何最大限度发挥网络的效率交换机我对交换机的要求为能够设置至少个网口可以是电口光口也可以是光口体积不能过大最好没有内置散热需要时我可执行添加外置散热风扇随时启停交换机大致分为非管理型交换机傻瓜交换机二层管理交换机和三层管理交换机傻瓜交换机的工作原理是通过学习每个设备的地址将设备的地址和连接的端口映射到一个内部表称为地址表当数据包进入交换机时交换机会查看数据包的目标地址并查找对应的端口如果地址在表中数据包直接转发到目标端口如果地址不在表中交换机会将数据包广播到所有端口除源端口外傻瓜交换机的优势是简单不需要任何配置即可工作便宜稳定非常适合没有网络管理需求的场景要满足可设置的需求则必须上二层或三层交换机那下面对两类交换机做个简单的对比二层三层特性二层交换机三层交换机工作层级数据链路层模型的第层网络层模型的第层主要功能根据地址转发数据提供支持基于地址转发数据提供路由功能应用场景局域网内部设备互联适用于小型网络跨子网通信适用于大型网络与多子网硬件性能通常转发速度更快成本较低包含路由功能成本较高支持支持的划分但需通过三层设备进行跨通信支持跨路由直接实现不同间通信路由功能不支持路由功能依赖外部路由器内置路由功能可直接实现网络互联广播范围广播域受限制可隔离广播域减少广播对网络的影响支持仅负责在二层转发不解析报头不支持对的动态调整可基于三层协议对进行动态调整支持最大传输单元的优化配置的对比二层交换机中的仅在数据链路层转发帧对分片和超过时的处理不敏感不支持动态调整默认通常为字节适用于一般以太网传输三层交换机中的在网络层处理时支持动态调整或告警如消息支持更高如通常为字节可减少分片开销提升网络传输效率更适合高性能网络环境如数据中心或存储传输适用场景二层交换机小型网络中设备互联只需要在单一内通信时适用于预算有限的简单网络需求三层交换机需要跨子网通信或跨数据转发时中大型网络中减少路由器的使用优化性能需要隔离广播域以降低网络负载时所以家用万兆的话二层管理型交换机是最基本的硬件配置产品选择厂商型号网口管理类型全新价格二手价格个光口口个电口个光口云管理无兮克个电口个光口口兮克个光口口无兮克个光口口希力威视个光口无希力威视个电口个光口口希力威视个光口口海思视讯个电口个光口轻管理型无海思视讯个光口口轻管理型无上面这些是比较常见且符合需求的万兆交换机其他的品牌没有使用过不是很了解光电的方案应该是最合适的但是二手价格还是居高不下所以在对比后最终选择了的二手价格还能接受且是三层管理型交换机可玩性更高万兆最终方案首选方案前面万兆参考方案中一直存在些许顾虑一是芯片和系统跟我不一样二是我需要双光口万兆网卡上述方案没有给到我是否兼容如果无法驱动该网卡可能需要借助的驱动来解决然而这意味着我可能需要修改驱动的和才能正常工作这感觉有点复杂此外如果系统升级导致无法识别网卡我将不得不再次进行修改所以我更倾向于在系列的上能够免驱的网卡好在了解了大致的方案以及对原生网卡驱动的了解后结合他人成功的案例最终敲定了首选方案使用雷电扩展坞方案价格使用双光口万兆网卡芯片价格电源和雷雳线缆家里都用就不算到成本里面了不要去搜白苹果价格会高出很多看中的是具备下行雷雳接口可以组菊花链玩玩备选方案移动雷雳硬盘盒转转接板转供电线万兆网卡想对种方案做个对比即使备选方案失败或达不到要求也能将硬盘盒给使用网络拓扑现状我先梳理一下交换机和设备的总体情况和自带电口和组了万兆网络其他设备全部使用网口连接口不够的电口跑步满万兆因为万兆网口不够只能跑在带宽下的个光口通过分别连接到电信和联通网络但也只是目前的现状总结一下就是具备万兆带宽能力的设备因为交换机的问题最高只能使用带宽万兆网络仅限于和无法满足其他设备的万兆需求规划添加一台万兆交换机将书房所有支持万兆的设备互联万兆交换机已确认为的电信网络作为万兆主干网电信后面交换机的光口需要连接到万兆交换机因为距离较短直接使用上的线缆连接和通过原来的光模块连接到万兆交换机新增个光转电模块给连接到万兆交换机台设备其他网口连接到联通的网络和配置网卡分别连接到电信和联通万兆网络电信网络全设备万兆联通网络只有和能够万兆直连原来剩下的一根线缆连接连接万兆交换机与其他设备组成万兆局域网另一个万兆光口通过光纤光模块连接联通后面交换机上的光口以接入联通网络将电信作为万兆主干网并将各设备的电信网卡作为第一优先级平时在各设备共享文件时就能用上万兆网络联通作为备用网络全设备最低也是速度设备购买梳理之后所需要的设备清单为设备名称规格数量单价备注个光口具备三层网络管理功能需要修改用光转电模块万兆使用万兆网卡各一张光纤多模双芯型光纤接口米米米共计条光模块一条光纤个光模块雷电扩展坞主控万兆首选方案核心设备移动雷雳硬盘盒主控万兆备选方案核心设备转转接板万兆备选方案配件转供电线万兆备选方案配件这次升级的总成本为比直接买一个高端成品万兆网卡便宜而且还能将主要设备全部升级成万兆感觉还是挺划算的为什么不全部使用线缆我的万兆设备都在书房最优解还是线缆距离肯定没有问题最长支持米问题是的线缆相对于光纤太粗太硬对于我现在的布线环境不是特别好处理而线缆在连接万兆光口时已经尝试过一次还是存在兼容性问题所以放弃了最主要的原因是想尝试一下光纤光模块的方案顺带还可以学习了解下光纤相关的技术施工环节硬件加装散热给和使用的网卡还是有必要加上散热风扇的是开放型机箱没有可靠的风道可以散热就更不用说了只能外置还好有几个剩余的风扇怼上去就可以了直接用供电给用的网卡就麻烦点用的是原来给浪潮配置的风扇但是供电线太短了需要外接用玩树莓派时购买的杜邦线来延长一下供电线套上热缩管做绝缘给点电就转完美上机效果顺便给交换机加个的散热风扇反正空余的散热风扇还有很多网卡部署小巧的雷雳拓展坞自带一个散热片桌面下正好留有一个供电线省去了供电线组合后的样子加了根扎带固定一下省去了一个打印支架最后安装好的样子平时基本上不用动它用一根雷雳的线连接到剩下的下行雷雳接口还未使用反正不能用这个雷雳接口连接到上组菊花链会存在争抢网卡的情况下面是使用移动硬盘盒说实话铝质的移动硬盘盒加上网卡确实比第一种方案要好看那么一点部署交换机使用扎带安装到桌底的导线槽下面端口连接到拓展坞上面这是部署完成后的样子光转电模块加装了散热鳍片下面的风扇稍微有点风就能带走热量噪音完全可以忽略因为风扇支持可变电压现在给的电压保证能转就行夏天的话噪音应该会大一点光纤布线了解光纤和光模块的类型后直接买的多模双芯的光纤接口二手的多模光模块价格便宜光纤与光模块连接还闹了个笑话不知道接口还有一个保护壳一直纳闷为啥插不稳无意中掰了下接口的头子发现居然是个保护壳软件万兆交换机安装手册安装手册网口连接的业务端口默认为所以修改为同网段的即可访问管理端连接任意网口然后设置地址使用访问管理端端口连接还提供一个管理口默认地址当电脑连接交换机管理口时需设置电脑地址为为间任意值不能为子网掩码设置为端口连接端口用于和计算机或其他终端的串口相连以管理或配置交换机提供个端口和个端口两个端口不能同时使用同时连接时只有端口生效使用串口连接参数如下波特率波特率为波特率为数据位位奇偶校验无停止位位数据流控制无不知道是不是没有直接连接到中间通过拓展坞链接并没有交换机的设备文件后面再尝试直连连接结束远程会话退出在会话中按下键这将带您回到的命令提示符在命令提示符下输入命令然后按回车键即可退出会话或者远程管理也没有连接成功一直提示设备未在线后面再处理设置按理说这个是实时生效的结果却是需要重启一下交换机才能生效更新因为忘交电费导致家里停电来电之后发现于交换机只能协商到速度后来查阅资料后将光转电模块的网口全部强制设置为速度这样就可以了土味的家用万兆网络厂光口全万兆交换机开箱交换机的默认设置是全协商你可以改成和依次注意如果用光转电口模块接路由器的话吗一定要把端口协商速度设置成不能用第二个问题是交换机本身联网的问题我将的系统时间获取方式修改为从服务器获取但是却无法联网另外云管理功能也无法使用应该是设备本身没有连接到互联网我进行了如下配置修改管理口添加静态然后将管理口通过连接到路由器这样就可以通过登录交换机控制台了系统识别到设备的总线类型是协议的每一条支持的速率一共就是完全满足的带宽接口的带宽速率计算网卡的雷雳总线信息最高有的速度按理说最高应该有以太网设备信息是的网卡然后是个光口网卡第四个是转网卡最后一个是另一个扩展坞上面的网卡最后是网络设置中的硬件信息网卡速度支持和不支持而且最高只能设置到下面是使用的硬盘盒的硬件信息在识别出的速度是安装的万兆网卡而在上则是安装的固态网卡成功识别和的网口都是万兆电口能够顺利开启巨帧且支持速度万兆设备全部接入到电信网络首先需要调整一下网卡的优先级和是系统直接在命令行下调整网卡优先级首先查看一下路由表假设我需要调整网卡的优先级为个新增的网卡系统自带的个网卡重启设置为后测试一下在不分包的情况下整个链路是否能处理字节的数据包使用参数时会设置标志要求整个数据包不能被分段如果数据包大于网络路径中的任何设备的传输就会失败并返回错误比如上没有参数正确的方式应该是超过了直接报错还可以使用来获取整个链路的因为在使用安装了在端修改只是修改物理网卡对应的虚拟网卡还是所以需要在命令行下去修改显示的接口万兆网卡对应的虚拟网卡是物理网卡已经修改到只需要同步到虚拟网卡即可查看结果最后是测试全链路是否都是效果测试非设备除了其他设备不管是上传还是下载使用都能跑完带宽使用万兆首选方案因为的原因上传能跑到接近下载能跑到使用万兆备选方案上传能跑到下载能跑到所以还是选择了第一种方案这个硬盘盒就留给使用了简单的测试了一下读取速度比自带的要高出左右写入速度反而低了可能跟我的固态有关这个问题就不去深究了缺的是磁盘空间这次算是补足了文件拷贝测试使用协议挂载的机械硬盘到本地然后直接拷贝到本机使用测试结果在下测试速度稳定在在下测试稳定在遗留问题因为网卡驱动的问题无法修改到因为官方并没有为其万兆网卡提供官方的驱动支持好在这家公司为芯片的网卡编写了驱动该驱动同样可以适配到任何使用芯片的网卡上包括我手头这张但是根据提供的驱动它的文档明确说明了该驱动只会在为的网卡上运行因此如果使用不满足要求的话是无法驱动的所以需要通过一些办法强行修改为然后再安装的驱动即可还没有实际操作等有时间再尝试一下修改方式参考网卡的驱动方法给主机升级万兆网卡记录拓展坞带宽因为给万兆网卡使用的雷雳拓展坞有个雷雳接口原想让通过一根雷雳接口就可以把所有的设备全部带起来这些设备包括台显示器新增的万兆网卡若干设备但是因为雷雳带宽受限导致部分设备无法正常使用只能再使用一个雷雳接口单独连接网卡的雷雳拓展坞了所以这次升级略带遗憾的是没有考虑到带宽的问题年月日英特尔发布了雷雳规范兼容最新的规格在对称模式下它提供的上下行传输带宽是雷雳的两倍而在非对称模式下单向带宽最高可达是雷雳的三倍而提供个雷雳接口科技发展的真的太快了钱包已经跟不上了多台互联雷雳技术雷雳技术由英特尔开发是一种先进的连接标准它通过单一连接点提供电源数据和视频信号雷雳技术的认证确保了电缆电脑和配件满足强制性的最低要求以此保障不同设备和供应商之间的兼容性和互操作性对于终端用户来说基于雷雳技术的产品在连接各种配件时能够提供卓越的体验在系列产品中雷雳和雷雳端口实际上与的雷雳和雷雳技术是相同的常常为其软硬件产品赋予新的名称例如当从芯片转向芯片时雷雳的名称变更为雷雳尽管技术上仍然是雷雳而雷雳端口则是上真正的雷雳端口和雷雳的主要差异在于尽管它们的最高带宽标准相同但雷雳的最低性能标准要高于例如的带宽可以低至充电功率可以低于且连接显示器时不必满足雷雳的标准雷雳技术提供以下特性高带宽的带宽可用于数据和视频传输能够动态分配适合处理繁重的工作负载和快速文件传输快充支持高达的电源输出用于为笔记本电脑充电以及高达的电源输出用于为配件供电丰富的显示选项单个连接可以支持两台的显示器或一台的显示器是一种连接器类型它不同于之前广泛使用的连接器和的连接器雷雳雷雳等多种协议都可以使用连接器通常情况下雷雳和雷雳仅提供接口而和则可能同时提供和接口及线缆或者提供接口搭配转接头要区分的接口或线缆需要查看产品的印刷标志或详细参数说明以的接口为例最新的系列随机附送的接口线缆实际上遵循的是标准其传输速率仅为若要提升速度用户需额外购买线缆或雷雳雷雳线缆值得注意的是只有和支持第代能够实现最高的快速数据传输关于版本协议的命名确实有些复杂但只需记住的是系列的高标准速度而的由于兼容性问题通常不作为主流标准这一速度常用于市面上常见的固态移动硬盘传输有和两个版本而雷雳和雷雳均提供的带宽一根雷雳线缆通常能够满足大多数单一设备的连接需求雷雳和雷雳均标榜一个接口多种用途因此当一根线缆通过扩展坞连接多个设备时其带宽是动态分配的雷雳相较于雷雳在数据传输带宽上提供了更高的分配并且在连接显示器的标准上也更为严格因此如果你追求最高的数据传输速度或者需要连接多个高标准设备那么选择雷雳线缆将是更佳的选择当然除了线缆本身设备间的传输接口和设备本身的性能也会对整体传输效果产生影响如果你想尝试一下雷雳的极限速度最新的或许是最好的选择雷雳组网目前有台设备且都有空余的雷雳接口所以想着组个网络玩玩除了是雷雳接口外其他台全是雷雳接口雷雳理论也只有的带宽用于数据传输使用雷雳端口雷雳数据线可以到达的理论传输速度下面是连接拓扑图最开始是将作为和的中继节点来连接的这样至少能保证到能达到雷雳的速度但是实践后发现和的雷雳连接经常断开连接方式是通过雷雳连接后再连接到可能因为台显示器其他接口基本上插满了挂的设备太多不稳定导致的所有才使用了上述连接方案且正好有个空闲的雷雳接口还能空出一个雷雳接口以便后续连接存储设备这样连接后只有雷雳的理论速度了不过稳定最重要速度至少比网线快下面是具体的连接方式雷雳网桥需要了解的一个前提是雷雳宣称的带宽是基于比特这一单位的然而在软件和系统显示的速度单位通常是字节其中字节等于比特因此当移动硬盘标榜其传输速度为时这实际上相当于或者大约等同于台使用雷雳连接后会自动在网络中创建一个名为雷雳网桥的接口然后只需要设置和子网掩码即可组网测试使用进行内网测试等于那么大概只跑到了理论速度的对于这个结果还是比较满意的测试打开上的文件共享来传输文件连接使用上雷雳网桥分配的打开上的访达按健或点选菜单前往连接服务器输入以及对应的用户名密码就可以进行连接的居然还没有被限速的快我想可能的原因是的带宽被占用太多了有时间用雷雳接口直连再试试这就有点尴尬了的本地测试可以跑到拖动一个大于的文件顺序读取在菜单栏的网络监控中可以看到传输速度可以到达等于回传文件顺序写入则是到了左右直接连接协议的移动硬盘跟这个速度相差不大但是直接连接雷雳协议的移动硬盘是可以轻松超过的传输速度差一点突破未知状态如果使用自动添加的雷雳网桥的话虽然连接没有问题但是会出现未知状态的警告对于强迫症的人肯定不能忍所以翻看了一些教程来解决这个问题如果有多个雷雳接口连接其中一个雷雳接口的时候系统会自动创建一个雷雳网桥的接口这个接口里面包含了所有的雷雳接口如下图所示的个雷雳接口全部被自动添加到了这个雷雳网桥中但是只有雷雳接口在使用所以解决的办法就是删除这个雷雳网桥然后自己创建一个雷雳接口点击设置网络页面右下角的然后点击管理虚拟接口先删除这个接口然后新建一个雷雳接口这里需要确认是第几个雷雳接口可以查看系统信息所以上面就应该选择雷雳创建之后稍等一会就会出现一个已自动分配的雷雳接口设置后即可显示正常因为需要同时连接和所以需要使用到雷雳网桥只需要将这个自动创建雷雳网桥中不需要的雷雳接口删除即可首先确认接口修改雷雳网桥移出多余的接口即可总结这次将书房的主要设备全部升级到万兆从学习万兆方案到准备工作中对一些基础知识的了解最后的安装部署调试再到这篇博客耗时一周时间升级后的效果非常显著除了由于驱动问题无法修改到以外其他设备的上传和下载速度都接近或达到了理论值尽管在升级过程中也遇到了一些问题但这些问题的解决方法和未来的改进方向都已经明确等到换成雷雳的设备时又可以考虑甚至时的升级方案了相关文章先导篇我的概要硬件篇介绍我所拥有的硬件设备网络篇包括网络环境异地组网与网络安全服务篇使用搭建的各类服务数据篇包括数据存储方案备份方案和数据恢复方案数据同步构建高效的数据同步网络数据备份打造坚实的数据安全防线网络续集升级网络再战年内网穿透详解揭秘网络连接背后的奥秘",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-04-03 20:08:00",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{var o;0!==a&&(o=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:o+864e5*a})))},get:e=>{var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!(Date.now()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=(o,c={})=>new Promise((t,e)=>{let a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},Object.keys(c).forEach(e=>{a.setAttribute(e,c[e])}),document.head.appendChild(a)}),e.getCSS=(o,c=!1)=>new Promise((t,e)=>{let a=document.createElement("link");a.rel="stylesheet",a.href=o,c&&(a.id=c),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,c=!t&&!a&&!o,t=(void 0===e?(a?activateLightMode():t?activateDarkMode():(o||c)&&((a=(new Date).getHours())<=8||22<=a?activateDarkMode:activateLightMode)(),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})):("light"===e?activateLightMode:activateDarkMode)(),saveToLocal.get("aside-status"));void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/medium.css"><script src="https://cdn.dong4j.site/source/static/echarts.min.js"></script><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/core.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/footer.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/index-imgloaded.css"><script src="https://cdn.dong4j.site/source/static/index-imgloaded.js"></script><script src="https://cdn.dong4j.site/source/static/detect-devtools.js"></script><script defer="" src="https://cdn.dong4j.site/source/static/umami.self.js" data-host-url="https://umami.dong4j.ink:1024" data-website-id="bd4721b7-a43f-4161-83ed-51c148a7ca9d"></script><script defer="" src="https://cdn.dong4j.site/source/static/counter.js" async="" id="online-counter" interval="60000" api="https://umami.dong4j.ink:1024/counter" room="000000001"></script><script src="https://cdn.dong4j.site/source/static/confetti.browser.min.js"></script><script src="https://cdn.dong4j.site/source/static/confetti.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="司机带你开车" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="司机带你开车" type="application/rss+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box"><div class="carplay"></div></div><script>let preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout(function(){preloader.endLoading()},2e3),document.getElementById("loading-box").addEventListener("click",()=>{preloader.endLoading()}),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async="" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.dev/status/services" title="服务状态"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.dev" title="服务面板"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.dev" title="导航页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://chat.dong4j.site/" title="Mini-Chat"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">司机带你开车</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.dong4j.dev"><span>小黑屋</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://cdn.dong4j.site/source/image/wechat-pay.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://cdn.dong4j.site/source/image/alipay.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/checkedexception/" style="font-size:1.05rem;color:#148f76">CheckedException<sup>1</sup></a><a href="/tags/error/" style="font-size:1.05rem;color:#7caa4e">Error<sup>1</sup></a><a href="/tags/exception/" style="font-size:1.05rem;color:#6ca2ab">Exception<sup>1</sup></a><a href="/tags/java/" style="font-size:1.05rem;color:#72966d">Java<sup>48</sup></a><a href="/tags/javabean/" style="font-size:1.05rem;color:#860ac1">JavaBean<sup>1</sup></a><a href="/tags/math/" style="font-size:1.05rem;color:#a75222">Math<sup>1</sup></a><a href="/tags/random/" style="font-size:1.05rem;color:#967478">Random<sup>1</sup></a><a href="/tags/runtimeexception/" style="font-size:1.05rem;color:#94aec3">RuntimeException<sup>1</sup></a><a href="/tags/string/" style="font-size:1.05rem;color:#453533">String<sup>2</sup></a><a href="/tags/stringbuffer/" style="font-size:1.05rem;color:#3f431c">StringBuffer<sup>2</sup></a><a href="/tags/stringbuilder/" style="font-size:1.05rem;color:#a0673c">StringBuilder<sup>1</sup></a><a href="/tags/throwable/" style="font-size:1.05rem;color:#ad4b80">Throwable<sup>1</sup></a><a href="/tags/final/" style="font-size:1.05rem;color:#77b142">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:1.05rem;color:#9a5c58">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:1.05rem;color:#4fad4c">finally<sup>2</sup></a><a href="/tags/getter/" style="font-size:1.05rem;color:#a5c25f">getter<sup>1</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:1.05rem;color:#050f6f">new关键字<sup>1</sup></a><a href="/tags/setter/" style="font-size:1.05rem;color:#85a1b8">setter<sup>1</sup></a><a href="/tags/static/" style="font-size:1.05rem;color:#096286">static<sup>1</sup></a><a href="/tags/super/" style="font-size:1.05rem;color:#4f916e">super<sup>2</sup></a><a href="/tags/this/" style="font-size:1.05rem;color:#869dc2">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:1.05rem;color:#4d7499">二进制<sup>1</sup></a><a href="/tags/%E5%8C%85%E8%A3%85%E7%B1%BB/" style="font-size:1.05rem;color:#410937">包装类<sup>1</sup></a><a href="/tags/%E5%B0%81%E8%A3%85/" style="font-size:1.05rem;color:#768122">封装<sup>3</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#501f70">异常处理<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:1.05rem;color:#690252">数据类型<sup>4</sup></a><a href="/tags/%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD/" style="font-size:1.05rem;color:#a38b10">方法重载<sup>1</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:1.05rem;color:#95a701">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:1.05rem;color:#bf8181">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:1.05rem;color:#4ec37b">算法<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size:1.05rem;color:#34c54f">类型转换<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/" style="font-size:1.05rem;color:#74835a">线程安全<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:1.05rem;color:#702108">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:1.05rem;color:#3d022e">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:1.05rem;color:#4c85aa">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:1.05rem;color:#23b3be">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:1.05rem;color:#95198d">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#92b58f">错误处理<sup>2</sup></a><a href="/tags/%E9%9A%8F%E6%9C%BA%E6%95%B0/" style="font-size:1.05rem;color:#34929b">随机数<sup>1</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:1.05rem;color:#53ab26">面向对象<sup>6</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);" rel="external nofollow noreferrer"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/homelab-%E4%B8%AD%E5%B9%B4%E7%94%B7%E4%BA%BA%E7%9A%84%E5%BF%AB%E4%B9%90%E6%BA%90%E6%B3%89/" itemprop="url">HomeLab:中年男人的快乐源泉</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/homelab/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>HomeLab</span></a><a class="article-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%87%E7%BA%A7/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>网络升级</span></a><a class="article-meta__tags" href="/tags/%E4%B8%87%E5%85%86%E7%BD%91%E7%BB%9C/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>万兆网络</span></a><a class="article-meta__tags" href="/tags/%E9%9B%B7%E7%94%B5%E6%8E%A5%E5%8F%A3/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>雷电接口</span></a><a class="article-meta__tags" href="/tags/usb4-0/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>USB4.0</span></a><a class="article-meta__tags" href="/tags/jhl7440/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>JHL7440</span></a><a class="article-meta__tags" href="/tags/asm2464pd/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>ASM2464PD</span></a></span></div></div><h1 class="post-title" itemprop="name headline">HomeLab 网络续集：升级 10G 网络-再战 10 年</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-11-30T16:00:00.000Z" title="发表于 2024-12-01 00:00:00">2024-12-01</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-04-03T12:08:00.700Z" title="更新于 2025-04-03 20:08:00">2025-04-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">20.4k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>69分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="HomeLab 网络续集：升级 10G 网络-再战 10 年"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/7e09e56.html#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://cdn.dong4j.site/source/image/20241229154732_0ssj32bq.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="fa-regular fa-robot fa-fade"></i><div class="ai-title-text">摘要助手</div><div id="ai-Toggle">切换</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">SummaryGPT</div></div><div class="ai-explanation">AI 初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成摘要 👋</div><div class="ai-btn-item">推荐文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item">前往订阅 💥</div><div class="ai-btn-item" id="go-comment">前往评论 💬</div><div class="ai-btn-item" id="read-audio">Kokoro TTS 🎙️</div><div class="ai-btn-item" id="go-tianli-blog">👀 部署教程</div></div><script data-pjax="" src="https://cdn.dong4j.site/source/static/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope="" itemtype="https://blog.dong4j.site/posts/7e09e56.html"><header><a class="post-meta-categories" href="/categories/homelab-%E4%B8%AD%E5%B9%B4%E7%94%B7%E4%BA%BA%E7%9A%84%E5%BF%AB%E4%B9%90%E6%BA%90%E6%B3%89/" itemprop="url">HomeLab:中年男人的快乐源泉</a><a href="/tags/homelab/" tabindex="-1" itemprop="url">HomeLab</a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%87%E7%BA%A7/" tabindex="-1" itemprop="url">网络升级</a><a href="/tags/%E4%B8%87%E5%85%86%E7%BD%91%E7%BB%9C/" tabindex="-1" itemprop="url">万兆网络</a><a href="/tags/%E9%9B%B7%E7%94%B5%E6%8E%A5%E5%8F%A3/" tabindex="-1" itemprop="url">雷电接口</a><a href="/tags/usb4-0/" tabindex="-1" itemprop="url">USB4.0</a><a href="/tags/jhl7440/" tabindex="-1" itemprop="url">JHL7440</a><a href="/tags/asm2464pd/" tabindex="-1" itemprop="url">ASM2464PD</a><h1 id="CrawlerTitle" itemprop="name headline">HomeLab 网络续集：升级 10G 网络-再战 10 年</h1><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">dong4j</span><time itemprop="dateCreated datePublished" datetime="2024-11-30T16:00:00.000Z" title="发表于 2024-12-01 00:00:00">2024-12-01</time><time itemprop="dateCreated datePublished" datetime="2025-04-03T12:08:00.700Z" title="更新于 2025-04-03 20:08:00">2025-04-03</time></header><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_0ssj32bq.webp" alt="/images/cover/20241229154732_0ssj32bq.webp"></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote><p>步入中年的人生道路，10GB 以太网口不只是性能的简单提升，它更像是一扇通往新生活的大门。这扇门之后，是丰盈的路由器、交换机和 NAS 的世界，能够让你的中年时光更加充实、更加快乐！</p></blockquote><p>在我家 2.5G 网络的陪伴下, 已经度过了三个充满活力的年头. 这段时光里, 我的网络稳定可靠, 成为了家中信息高速公路的坚实基石. 然而, 随着科技的快速发展和生活需求的变化, 我发现原本强大的 2.5G 网络已经无法满足未来几年日益增长的需求.</p><p>期间一直在犹豫是否升级到万兆, 因为 MBP M1 作为我的主力机, 担心万兆网卡兼容性和稳定性问题, 当然也有成熟的雷雳网卡可供选择, 但是价格高的离谱.</p><p>最近, 各种升级方案陆续出现, 价格也逐渐符合我的预算. 同时, 家中使用的万兆设备也越来越多. 这一切让我意识到升级到万兆网络的时机已经到了.</p><p>在这篇博客中, 我将分享从犹豫不决到决定升级 10G 网络的决策过程. 详细介绍第一次接触的光纤和光模块的相关知识, 一步步地讲解设备购买、网络拓扑设计、网络环境配置和网络测试等方面的细节.</p><hr><p><strong>相关文章:</strong></p><ol><li><a href="/posts/15433dee.html">先导篇</a>：我的 HomeLab 概要;</li><li><a href="/posts/1c3b04a.html">硬件篇</a>：介绍我所拥有的硬件设备;</li><li><a href="/posts/e537d446.html">网络篇</a>：包括网络环境、异地组网与网络安全;</li><li><a href="/posts/b2341239.html">服务篇</a>：使用 Docker 搭建的各类服务;</li><li><a href="/posts/b808f350.html">数据篇</a>：包括数据存储方案、备份方案和数据恢复方案;</li><li><a href="/posts/273b6766.html">HomeLab数据同步：构建高效的数据同步网络</a></li><li><a href="/posts/6c25aa66.html">HomeLab数据备份：打造坚实的数据安全防线</a></li><li><a href="/posts/7e09e56.html">HomeLab 网络续集：升级 10G 网络-再战 10 年</a></li><li><a href="/posts/15433dee.html">NAT 内网穿透详解：揭秘网络连接背后的奥秘</a></li></ol><h2 id="MBP-万兆参考方案"><a href="#MBP-万兆参考方案" class="headerlink" title="MBP 万兆参考方案"></a>MBP 万兆参考方案</h2><p>目前市面上有许多成品雷雳转万兆网卡可供选择. 这些网卡通常支持 RJ45 或 SFP+ 接口, 可以直接插入 MBP 的雷雳 3 或雷雳 4 端口, 无需额外的硬件转换. 只需连接一根光缆即可实现高速网络传输.</p><p>另一种方式是 DIY, 可以更低成本实现万兆网络. DIY 方案主要分为两种：雷雳转 PCIE 和 USB4 硬盘盒的 M2 转 PCIE.</p><h3 id="成品网卡"><a href="#成品网卡" class="headerlink" title="成品网卡"></a>成品网卡</h3><p>我们先来看一下支持 MBP 的万兆成品网卡(反正不买, 看看总可以吧).</p><p>首先是威联通的 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cucW5hcC5jb20uY24vemgtY24vcHJvZHVjdC9xbmEtdDMxMGcxdA==">QNA-T310G1T</a> 与 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cucW5hcC5jb20uY24vemgtY24vcHJvZHVjdC9xbmEtdDMxMGcxcw==">QNA-T310G1S</a>, 现在二手成本 1000+.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_nw3jFcPi.webp" alt="20241229154732_nw3jFcPi.webp"></p><p><strong>QNAP T310G1T 和 T310G1S</strong> 是两款高性能的万兆网卡, 分别采用 NBASE-T 和 SFP+ 接口, 支持 10G 连网能力. 它们体积小巧, 易于携带, 能够显著提升数据传输速度.</p><p><strong>特点:</strong></p><ul><li><strong>高速传输</strong>：支持 10G 连网能力, 将数据传输速度提升至 10 倍以上.</li><li><strong>小巧轻便</strong>：体积小巧, 易于携带, 方便用户随时随地使用.</li><li><strong>多种接口</strong>：T310G1T 采用 NBASE-T 接口, 支持多种连接模式；T310G1S 采用 SFP+ 接口, 适用于多种场景.</li><li><strong>高效散热</strong>：铝合金外壳具有良好的散热性能, 确保长时间运行.</li><li><strong>易于安装</strong>：无需额外供电, 直接连接设备即可使用, Windows 系统需要安装驱动程序.</li></ul><hr><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYWtpdGlvLmNvbS50dy9hY2Nlc3Nvcmllcy90aHVuZGVyMy1kb2NrLXBybw==">AKiTiO Thunder3 Dock Pro</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_DWd9MJMt.webp" alt="20241229154732_DWd9MJMt.webp"></p><p>市面上为数不多的拓展坞和万兆口结合产品, 价格感人.</p><p><strong>特点:</strong></p><ul><li><strong>Thunderbolt 3 技术</strong>：提供高达 40Gbps 的传输速度, 支持 10GbE 网络、多种存储卡读取、多种接口连接等.</li><li><strong>多功能扩展</strong>：内置 DisplayPort、USB .1、eSATA 等接口, 可扩展电脑的多种功能.</li><li><strong>充电功能</strong>：支持 60W 充电, 可为笔记本等设备充电.</li><li><strong>兼容性</strong>：支持 Windows 和 macOS 操作系统</li></ul><p>另一款支持万兆的扩展坞 – <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cub3djYXNpYS5jb20udHcvZG9ja3Mvb3djLXRodW5kZXJib2x0LXByby1kb2Nr">OWC Thunderbolt Pro Dock</a> 具有高速 Thunderbolt 3 连接、10GbE 乙太网、多种读卡器接口和丰富的 USB 连接, 可满足各种连接需求, 提升工作效率.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_wskVm3ki.webp" alt="20241229154732_wskVm3ki.webp"></p><p><strong>特点</strong>:</p><ul><li><strong>高速连接</strong>：Thunderbolt 3 和 10GbE 乙太网, 实现高速数据传输和连接.</li><li><strong>多功能读卡器</strong>：CFexpress Type B 和 SD 4.0 读卡器, 方便快速读写卡.</li><li><strong>丰富接口</strong>：多个 USB-A、USB-C 和 DisplayPort 接口, 满足各种外设连接需求.</li><li><strong>小巧便携</strong>：紧凑设计, 便于携带和安装.</li></ul><hr><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuY2FsZGlnaXQuY29tL3poL2Nvbm5lY3QtMTAtZy16aC8=">CalDigit 的 Thunderbolt 3 10Gb 以太网转接器</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_yf5cSCWA.webp" alt="20241229154732_yf5cSCWA.webp"></p><p>该转接器可将 Thunderbolt 3 计算机连接到 10GbE 以太网络, 提供高达 10Gbps 的传输速度, 适用于企业、工作室、电竞和家庭网络等场景.</p><p><strong>特点:</strong></p><ul><li>10Gbps 以太网速度, 比传统 1Gbps 以太网快 10</li><li>支持最长 100 米的连接距离</li><li>支持音频视频桥接 (AVB) 功能</li><li>可替换式 Thunderbolt 3 传输线</li><li>总线供电, 无需外接电源</li><li>兼容多种网络线缆, 包括 Cat 5e、Cat 6 和 Cat 6a</li><li>支持网络唤醒功能</li><li>铝制外壳设计, 散热良好</li><li>支持 macOS 和 Windows 系统</li></ul><hr><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuc29ubmV0dGVjaC5jb20vcHJvZHVjdC9zb2xvMTBnLXNmcC10YjMvb3ZlcnZpZXcuaHRtbA==">Sonnet 的 Solo10G SFP+</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_cYfOal47.webp" alt="20241229154732_cYfOal47.webp"></p><p>这是一款将 10GbE 网络连接到 Mac、Windows 和 Linux 计算机的设备. 该适配器通过 Thunderbolt 连接, 提供高速的网络连接, 并支持多种操作系统.</p><p><strong>特点:</strong></p><ul><li>支持高达 10GbE 的网络速度</li><li>通过 Thunderbolt 连接, 提供高速数据传输</li><li>支持多种操作系统：Mac、Windows 和 Linux</li><li>包含 SFP+ 光纤模块, 可连接到 10GbE 基础设施</li><li>轻巧便携, 无需外部电源</li></ul><p><strong>其他品牌:</strong></p><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDEyMTE3NjMwNjMxNi5odG1s">兮克雷雳转万兆网卡万兆电口兼容雷雳 3 雷雳 4 转万兆网卡 SKN-T310GT</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDEwMjg4NzUxMTc0MC5odG1s">乐扩 USB4 万兆网卡兼容 雷雳 3/4 电口 RJ45 网络转换器 10G 网卡</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDEyNjM0ODg4ODE0OC5odG1s">奥睿科雷雳 3 转 10GbE 万兆网络转换器</a></li></ul><hr><p>王炸网卡–<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYXR0by5jb20vcHJvZHVjdHMvdGh1bmRlcmxpbmstYWRhcHRlcnMv">ATTO ThunderLink TLNS-3252</a></p><p>双端口 Thunderbolt™ 3/4 至双端口 25Gb 以太网适配器, 附带 SFP28 模块. 支持 macOS 和 Windows 操作系统. 非常适合带宽密集型应用, 例如数据备份和恢复、集群计算、IP 内容交付、医学成像和视频渲染.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_j10NgGDz.webp" alt="20241229154732_j10NgGDz.webp"></p><ul><li>双端口 25Gb/s Thunderbolt 3, 带 DisplayPort 和设备菊花链支持 (兼容 Thunderbolt 4)</li><li>每个端口吞吐量高达 25Gb/s</li><li>包含 SFP28 模块</li><li>支持 macOS® 和 Windows®</li><li>支持<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYXR0by5jb20vbGFuZGluZy9hdHRvMzYw">ATTO 360</a></li><li>TCP、UDP 和 IPv4 校验和卸载、IPsec 卸载以及 Tx/TCP 分段卸载</li><li>独家<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYXR0by5jb20vd3AtY29udGVudC91cGxvYWRzL1dlYkNvbGxhdGVyYWwvdGVjaC1icmllZi9UZWNoQnJpZWYtQVRUT0FkdmFuY2VkRGF0YVN0cmVhbWluZ1RlY2hub2xvZ3kucGRm">先进数据流 (ADS™) 技术</a></li><li>Kensington 安全插槽可通过<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYXR0by5jb20vcmVkaXIvd3d3LmtlbnNpbmd0b24uY29tL3VzL3VzL3YvNDQ4Mi8xODY2L21pY3Jvc2F2ZXItZHMtdWx0cmF0aGluLWtleWVkLWxhcHRvcC1sb2Nrcw==">Kensington 锁提供额外的安全保护</a></li></ul><hr><h3 id="DIY"><a href="#DIY" class="headerlink" title="DIY"></a>DIY</h3><p>相对于价格高昂但稳定的成品网卡来说, DIY 方式才应该是我的最终选择, 因为 MBP 升级到万兆并不是必须, 性价比显然比稳定性更重要.</p><p>现在主流的 2 种 DIY 万兆网卡方案为:</p><ul><li>Thunderbolt 转 PCIe, 主控芯片一般 Intel 的 <strong>JHL6X40</strong> 或<strong>JHL7X40</strong>;</li><li>USB4.0 转 PCIe, 主控芯片一般 ASMedia 的 <strong>ASM2464PD</strong>;</li></ul><p>为了搞清楚 Intel 和 ASMedia 主控芯片对速度的影响, 决定先学习一下 2 种主控芯片的差异, 传输速度的区别.</p><h3 id="雷雳-4-3-和-USB4-0"><a href="#雷雳-4-3-和-USB4-0" class="headerlink" title="雷雳 4/3 和 USB4.0"></a>雷雳 4/3 和 USB4.0</h3><p>首先简单介绍一下关于雷雳 4/3 和 USB4.0, 它们都是目前常见的、用于高速数据传输和视频输出的接口标准. 共享相同的 USB-C 接口, 但各自有不同的特点和优势.</p><h4 id="雷雳-4-3"><a href="#雷雳-4-3" class="headerlink" title="雷雳 4/3"></a>雷雳 4/3</h4><ul><li><strong>核心技术</strong>: 由 Intel 主导开发, 基于 PCIe 协议, 提供高速数据传输、视频输出和供电功能.</li><li>主要特点：<ul><li><strong>高速传输</strong>: 最高可达 40Gbps 的传输速度, 适用于大文件传输和高分辨率视频传输.</li><li><strong>视频输出</strong>: 支持多个 4K 显示器或 1 个 8K 显示器, 满足高品质视频需求.</li><li><strong>供电能力</strong>: 最高可提供 100W 的供电, 可为笔记本电脑等设备充电.</li></ul></li><li><strong>优势</strong>: 性能强劲, 功能丰富, 适用于对性能要求较高的用户, 如视频编辑、游戏玩家等.</li></ul><h4 id="USB4-0"><a href="#USB4-0" class="headerlink" title="USB4.0"></a>USB4.0</h4><ul><li><strong>核心技术</strong>: 由 USB-IF 组织制定, 整合了雷雳 3 的先进技术, 向下兼容 USB 3.2 等协议.</li><li>主要特点：<ul><li><strong>高速传输</strong>: 最高可达 40Gbps 的传输速度, 与雷雳 4 相同.</li><li><strong>视频输出</strong>: 支持和雷雳 3 同等的视频拓展能力.</li><li><strong>供电能力</strong>: 具备大功率 PD 电力传输功能.</li></ul></li><li><strong>优势</strong>: 兼容性强, 向下兼容 USB 3.2 等协议, 价格相对较便宜.</li></ul><p><strong>雷雳 4/3 和 USB4.0 的区别</strong>:</p><table><thead><tr><th>特点</th><th>雷雳 4/3</th><th>USB4.0</th></tr></thead><tbody><tr><td>开发者</td><td>Intel</td><td>USB-IF 组织</td></tr><tr><td>协议</td><td>PCIe</td><td><code>USB</code></td></tr><tr><td>兼容性</td><td>向下兼容 USB 3.2</td><td>向下兼容 USB 3.2 等协议</td></tr><tr><td>价格</td><td>较高</td><td>相对较低</td></tr><tr><td>功能</td><td>更丰富, 性能更强</td><td>兼容性更广</td></tr></tbody></table><p>总结来说雷雳 4/3 更适合对性能有较高要求的用户, 如专业创作者、游戏玩家等. <strong>USB4.0</strong> 具有更好的兼容性, 适用于普通用户, 性价比更高.</p><hr><h3 id="主控芯片"><a href="#主控芯片" class="headerlink" title="主控芯片"></a>主控芯片</h3><h4 id="JHL7440"><a href="#JHL7440" class="headerlink" title="JHL7440"></a>JHL7440</h4><p><strong>JHL7440</strong> 是来自英特尔生产的控制芯片, 得益于自家是雷雳接口的主要开发者, 在性能和传兼容性上有很好的表现.</p><p>其实你会发现大多数的硬盘盒品牌在介绍的时候宣称 <strong>JHL7440</strong> 与 Thunderbolt 3/4 兼容, 事实上这样说好像也没什么问题. 但其实该芯片只是兼容 Thunderbolt 4, 但实际上只是 Thunderbolt 3 时期的产物.</p><p><strong>JHL7440</strong> 芯片组, 该芯片组提供高达 <strong>24Gbps</strong> 的传输速度, 实际速度最高约为 <strong>2800 MB/s</strong>. 很多朋友可能好奇, 雷雳 4/3、USB4.0 接口不是最高支持 <strong>40Gbps</strong> 的传输速度吗, 怎么到这里最高仅提供 <strong>24Gbps (2800MB/s)</strong> 的速度.</p><p>确实, Thunderbolt 3/4 和 USB4.0 接口理论上支持高达 <strong>40Gbps</strong> 的传输速度. 然而, 在实际应用中, 由于硬件设计和技术限制, 某些控制芯片 (如 <strong>Intel JHL7440</strong>) 并不能完全达到这个速率. 下面是造成这种差异的几个原因：</p><p><strong>1. 带宽分配限制</strong></p><ul><li><strong>JHL7440</strong> 芯片设计之初, 定位主要是 <strong>Thunderbolt 3</strong> 规范, 并主要用于接口扩展. 虽然它兼容 Thunderbolt 3 的高达 40Gbps 的带宽, 但在具体设计上, 往往只能分配其中的 <strong>24Gbps</strong> 用于数据传输.</li><li>Thunderbolt 接口的 40Gbps 是总带宽, 实际应用中需要分配给 <strong>数据传输、显示输出</strong> 等用途. 而 <strong>JHL7440</strong> 主要为数据传输设计, 因此仅分配 <strong>24Gbps</strong>.</li></ul><p><strong>2. PCIe 通道限制</strong></p><ul><li><strong>JHL7440</strong> 连接到主板时, 通常仅通过 <strong>PCIe 3.0 x2 通道</strong>与系统通信, 而非全速的 PCIe x4. 因此, 这一设计在接口层面上就限制了最大数据传输速度, 约为 <strong>24Gbps</strong>, 也就是实际的 <strong>2800MB/s</strong> 左右.</li></ul><p><strong>3. 兼容性和成本考量</strong></p><ul><li><strong>JHL7440</strong> 的设计主要面向性价比市场, 意在降低设备成本并提供可靠的 Thunderbolt 3 性能, 因此对极限性能的支持相对较低.</li><li>对于日常数据传输需求, 2800MB/s 已经能满足大多数场景 (如高清视频剪辑、数据备份等) , 因此对于多数厂商而言, <strong>JHL7440</strong> 是一个性能和成本的平衡之选.</li></ul><p><strong>4. 实际应用中的速率损耗</strong></p><ul><li>实际中, 传输速率会受多种因素影响, 如 <strong>硬盘类型、散热情况、数据传输协议</strong> 等. 即便硬件接口支持更高速度, 但 SSD 本身的写入/读取速度也会成为瓶颈.</li></ul><hr><h5 id="各型号区别"><a href="#各型号区别" class="headerlink" title="各型号区别"></a>各型号区别</h5><p><code>JHL6340</code>、<code>JHL6540</code>、<code>JHL7440</code>和 <code>JHL7540</code>几个型号：</p><ol><li><strong>JHL6340 和 JHL6540</strong>：<ul><li>这两款芯片都是 Intel 推出的 Thunderbolt 3 (雷雳 3) 主控芯片. 根据官方参数, JHL6340 和 JHL6540 与旧款的 DSL6340 和 DSL6540 在单双口的功耗、封装面积、DP 输出标准等方面没有区别.</li><li>JHL6540 的功耗为 2.2w, 相比之下, JHL6340 的功耗为 1.7w.</li></ul></li><li><strong>JHL7440</strong>：<ul><li>JHL7440 也是一款雷雳 3 主控芯片, 但它被设计为同时支持 USB-C 的 Function, 提高了设备的运用弹性. 这使得新一代的 Dock/Hub/显示器可以“降级”到 USB-C 模式下使用.</li></ul></li><li><strong>JHL7540</strong>：<ul><li>与 JHL6540 相比, JHL7540 在显存读取带宽上提升了 10%, 其读取带宽可达到 3017MB/s, 而 6540 的读取带宽最多为 2750MB/s. 在性能测试中, 使用 JHL7540 的显卡坞在帧数上比使用 JHL6540 的显卡坞高出约 6.5%.</li></ul></li></ol><p>这些型号之间的主要区别在于性能和兼容性. JHL6340 和 JHL6540 是较早的型号, 而 JHL7440 和 JHL7540 提供了更高的性能和更好的兼容性.</p><hr><h4 id="ASM2464PD"><a href="#ASM2464PD" class="headerlink" title="ASM2464PD"></a>ASM2464PD</h4><p><strong>ASM2464PD</strong> 是 ASMedia 公司 (华硕子公司) 推出的一款 <strong>USB4 / Thunderbolt 控制芯片</strong>, 其实该芯片是 USB4.0 的产物, 不过也同样兼容雷雳 4/3 接口. 与英特尔的 JHL7440 相比, ASM2464PD 更具性价比.</p><p>从实体体验上来说, <strong>ASM2464PD</strong> 芯片的硬盘盒似乎能提供更高的传输速度. 因为与 Thunderbolt 3 设计不同, 没有为 DisplayPort 或传统 USB 3.x 规范保留带宽. 所以, 你可以从网络上看到采用 <strong>ASM2464PD</strong> 芯片的硬盘盒的传输速度能来到 3000MB/s 出头的成绩.</p><p>虽然速度上更胜 <strong>JHL7440</strong>, 且价格相对低廉, 但其实 <strong>ASM2464PD</strong> 也有缺点, 在兼容性与发热上, <strong>ASM2464PD</strong> 似乎比 <strong>JHL7440</strong> 更严重.</p><p><strong>不同主控芯片的硬盘盒速度对比:</strong></p><table><thead><tr><th>供应商</th><th>主控芯片</th><th>上游接口</th><th>下游接口</th><th>理论速度</th><th>真实速度</th></tr></thead><tbody><tr><td>ASMedia</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYXNtZWRpYS5jb20udHcvc2VhcmNoP2tleXdvcmQ9QVNNMjQ2NFBE">ASM2464PD</a></td><td><strong>USB4</strong> with PCIe Gen4x4</td><td>PCIe Gen<strong>4×4</strong></td><td>40Gb/s</td><td>3200-3800MB/s</td></tr><tr><td>Intel</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuaW50ZWwuY29tL2NvbnRlbnQvd3d3L3VzL2VuL3Byb2R1Y3RzL3NrdS85NzQwMS9pbnRlbC1qaGw3NDQwLXRodW5kZXJib2x0LTMtY29udHJvbGxlci9zcGVjaWZpY2F0aW9ucy5odG1s">JHL7440</a></td><td><strong>TB3</strong> with PCIe Gen3x4</td><td>PCIe Gen3x4</td><td>24Gb/s</td><td>2600-2800MB/s</td></tr><tr><td>Intel</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9hcmsuaW50ZWwuY29tL2NvbnRlbnQvd3d3L3VzL2VuL2Fyay9wcm9kdWN0cy9jb2RlbmFtZS81Njg5MC9wcm9kdWN0cy1mb3JtZXJseS1hbHBpbmUtcmlkZ2UuaHRtbA==">JHL6X40</a></td><td><strong>TB3</strong> with PCIe Gen3x4</td><td>PCIe Gen3x4</td><td>22Gb/s</td><td>2500-2600MB/s</td></tr></tbody></table><h3 id="参考方案"><a href="#参考方案" class="headerlink" title="参考方案"></a>参考方案</h3><h4 id="硬盘盒转-PCIe"><a href="#硬盘盒转-PCIe" class="headerlink" title="硬盘盒转 PCIe"></a>硬盘盒转 PCIe</h4><p>硬盘盒有 2 类能满足要求:</p><ul><li>基于 <strong>JHL6X40</strong> 或 <strong>JHL7X40</strong> 主控芯片的雷雳硬盘盒;</li><li>基于 <strong>ASM2464PD</strong> 主控芯片的 USB4.0 硬盘盒;</li></ul><h5 id="方案一-300"><a href="#方案一-300" class="headerlink" title="方案一(300+)"></a>方案一(300+)</h5><p>偶然刷到 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWE0NDIxWjdSei8=">300 块搞定苹果雷雳万兆网卡</a> 这个视频, Up 主使用 200+ 的 USB4.0 硬盘盒实现了 MBP 万兆:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_8HFJIg0I.webp" alt="20241229154732_8HFJIg0I.webp"></p><p>实现方式为:</p><ol><li>USB4.0 硬盘盒(关键词[USB4.0 硬盘盒 m2 雷雳 4 硬盘盒 40G-nvme USB2.0 扩展坞音频改装万网卡]-某多多): 主控芯片是 <strong>ASM2464PD</strong>, 现在涨价到 <strong>240+</strong> 了;</li><li>m.2 转 PCIe 小板: 10+</li><li>免驱万兆网卡: 曙光单口万兆网卡(Intel X520-DA1) ;</li></ol><blockquote><p>顾虑:</p><ul><li>不是 M 系列芯片且不是最新的系统;</li><li>不是双光口网卡</li></ul></blockquote><p>这种方案因为没有外接供电, 会出现掉卡的情况, 所以评论中就有外接供电的方案.</p><hr><h5 id="方案二-600"><a href="#方案二-600" class="headerlink" title="方案二(600+)"></a>方案二(600+)</h5><ul><li>ITGZ 双 M.2 硬盘盒, 主控：<strong>JHL7440</strong>;</li><li>m.2 转 PCIe 小板;</li><li>12V DC 转 SATA 供电;</li><li>网卡: Intel Intel X520-DA2;</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_KjNxXAf0.webp" alt="20241229154732_KjNxXAf0.webp"></p><p>使用的是: <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDEyMTY1NzA1NjQyNi5odG1s">ITGZ 雷雳 3 双盘 M.2 NVMe 硬盘盒扩展坞</a>, 价格 500+.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_ibKckMOB.webp" alt="20241229154732_ibKckMOB.webp"></p><blockquote><p>顾虑:</p><ul><li>不知道作者的 MBP 具体配置是什么, 且整套设备价格超预算.</li></ul></blockquote><hr><h5 id="方案三-300"><a href="#方案三-300" class="headerlink" title="方案三(300+)"></a>方案三(300+)</h5><p>另一个 UP 主方案: <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWtORGFZNEVpeA==">雷雳万兆网卡廉价方案</a>:</p><ul><li>ITGZ USB4.0 硬盘盒, 主控：<strong>ASM2464PD</strong>;</li><li>m.2 转 PCIe 小板;</li><li>12V DC 转 SATA 供电;</li><li>网卡: Intel X520-DA1;</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_KeqhmYPF.webp" alt="20241229154732_KeqhmYPF.webp"></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDExMzYxODEwODE5Ni5odG1s">ITGZ USB4.0 移动雷雳 4 硬盘盒</a>:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_3eAjrAuK.webp" alt="20241229154732_3eAjrAuK.webp"></p><p>另一款主控芯片为 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDExNTA5NzU3ODk0OC5odG1s">JHL7440</a> 的同类产品, 价格贵了 100+.</p><blockquote><p>顾虑:</p><ul><li>不是 M 系列芯片且不是最新的系统;</li><li>不是双光口网卡</li></ul></blockquote><hr><h4 id="雷雳扩展坞"><a href="#雷雳扩展坞" class="headerlink" title="雷雳扩展坞"></a>雷雳扩展坞</h4><p>这类方案就比较多了, 主要是通过一个雷雳 4/3 核心板外接其他元器件焊接成一个具备 PCIe 插槽的电路板, 方便的地方是不需要 m.2 转 PCIe 小板.</p><h5 id="雷雳核心板"><a href="#雷雳核心板" class="headerlink" title="雷雳核心板"></a>雷雳核心板</h5><p>动手能力强的还可直接购买雷雳核心板来组装, 价格 200+:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_4771BvgX.webp" alt="20241229154732_4771BvgX.webp"></p><p>一些雷雳拓展坞就是是用上面的核心板来提供雷雳功能, 比如 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuY2hvbmdkaWFudG91LmNvbS9hcmNoaXZlcy8xMDI3MzUuaHRtbA==">UGREEN 绿联雷电 3 多功能 10 接口扩展坞 CM355</a>.</p><h5 id="方案一-500"><a href="#方案一-500" class="headerlink" title="方案一(500+)"></a>方案一(500+)</h5><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXRBNDExWjdvcA==">雷雳 4 万兆 40G 网卡 DIY</a> :</p><ul><li>主控芯片: <strong>JHL7440</strong>;</li><li>网卡: Intel X520-DA1;</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Yk8s2vBw.webp" alt="20241229154732_Yk8s2vBw.webp"></p><p>这个方案也是使用了上述的雷雳核心板:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Navykfrx.webp" alt="20241229154732_Navykfrx.webp"></p><blockquote><p>顾虑:</p><ul><li>不是 M 系列芯片且不是最新的系统;</li><li>不是双光口网卡</li></ul></blockquote><h5 id="方案二-600-1"><a href="#方案二-600-1" class="headerlink" title="方案二(600+)"></a>方案二(600+)</h5><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVprNHkxRTdkUg==">最廉价的 Mac 电脑 M1 M2 芯片 雷雳转万兆网卡方案测试</a>:</p><ul><li>雷雳拓展坞(主控芯片: <strong>JHL7440</strong>);</li><li>网卡: Intel X520-DA1;</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_HG50zg8Q.webp" alt="20241229154732_HG50zg8Q.webp"></p><blockquote><p>顾虑:</p><ul><li>不是最新的系统;</li><li>不是双光口网卡;</li></ul></blockquote><hr><p>在了解了 MBP 万兆的可行方案后, 接下就是其他的准备工作.</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="电口-Or-光口"><a href="#电口-Or-光口" class="headerlink" title="电口 Or 光口"></a>电口 Or 光口</h3><p>万兆网络涉及到一个交换机网口选择问题–<strong>使用光口还是电口</strong>?</p><p>我目前的网络情况是 千兆和 2.5G 设备全部使用的电口, <strong>M920x</strong> 2 个万兆光口则使用 10G DAC 线连接交换机的 10G 光口.</p><p>我的需求是至少需要 7 个 10G 网口, 才能将主要设备通过交换机组成万兆局域网. 首先就排除了全电口方案, 一是 <strong>成本考虑</strong>, 二是 <strong>噪音</strong>.</p><p>8 口全电口交换机优点是可以兼容我现在所有的设备而不需要换线. 缺点就是比全光口的交换机贵上不少, 另外因为 <strong>发热量大</strong>, 必须得加散热风扇, 那么噪音又是一个需要考虑的问题.</p><p>选择全光口的话, 缺点就是需要重新布线, 以及为仅支持电口的设备添加 <strong>万兆光转电模块</strong>(100+).</p><h4 id="万兆光转电模块"><a href="#万兆光转电模块" class="headerlink" title="万兆光转电模块"></a>万兆光转电模块</h4><p>它的作用是可以将交换机上的光口转换为电口, 以满足交换机上 RJ45 端口不足的需求. 如图所示, 万兆电口模块一端是 SFP+端口, 另一端为 RJ45 接口</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_pkGrR7Y0.webp" alt="20241229154732_pkGrR7Y0.webp"></p><h5 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h5><ul><li>更灵活的连接方式：SFP+转 RJ45 端口提供了一种灵活的解决方案, 将 SFP+端口转换为 RJ45, 使其更适合数据中心和企业网络的需要.</li><li>成本效益：采用普通 RJ45 连接器, 支持向下兼容, 使网络升级成本更低. 相比额外购买 10GBASE-T 电口交换机, 更经济高效.</li><li>传输距离：SFP+转 RJ45 端口模块可以在 100 米的距离内提供 10Gb/s 的数据传输, 解决了 SFP+ DAC 高速线缆只能传输有限距离的问题.</li><li>节省能源：与嵌入式 10GBASE-T RJ45 端口相比, 使用 SFP+转 RJ45 端口模块每个端口至少节省 0.5W 的功耗, 降低了能源消耗.</li><li>多速率支持：支持多种传输速率 (10/100/1000Mbps 及 10Gbps) , 使其易于操作和管理.</li></ul><h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><ul><li>功耗和热量：连接多个端口时, 相比光纤布线, SFP+转 RJ45 端口解决方案的功耗和热量可能会较高.</li><li>网络延迟：在连接多个节点时, 可能会增加网络延迟.</li></ul><p><strong>万兆光转电模块关键数据</strong></p><table><thead><tr><th><strong>规格</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>传输速率</strong></td><td>10Gbps (向下兼容 1Gbps 和 100Mbps)</td></tr><tr><td><strong>光纤端口</strong></td><td>SFP+ 插槽, 支持多模和单模光模块 (如 850nm, 1310nm)</td></tr><tr><td><strong>电口</strong></td><td>RJ45 接口, 支持 Cat6a 或 Cat7 电缆</td></tr><tr><td><strong>光模块标准</strong></td><td>10GBASE-SR (最大 300 米) / 10GBASE-LR (最大 10 公里)</td></tr><tr><td><strong>供电方式</strong></td><td>5V 或 12V 外接电源, 部分支持 PoE</td></tr><tr><td><strong>协议支持</strong></td><td>IEEE 802.3 标准, 支持全双工和半双工模式</td></tr><tr><td><strong>工作温度</strong></td><td>-20℃ 到 70℃</td></tr><tr><td><strong>功耗</strong></td><td>2W 至 10W</td></tr><tr><td><strong>物理尺寸</strong></td><td>桌面型或插卡式 (机架安装)</td></tr></tbody></table><hr><p>而其他设备则全部使用光模块连接. 说到这里, 也会有 3 种选择–无缘铜缆(<strong>DAC</strong>), 有源光缆(<strong>AOC</strong>)和独立的光纤+光模块.</p><h4 id="DAC-线缆"><a href="#DAC-线缆" class="headerlink" title="DAC 线缆"></a>DAC 线缆</h4><p>Direct Attach Cable, 简称 DAC, 一般译为直接连接电缆或直连铜缆, 是指直接连接服务器和网络设备的高速铜缆, 它采用差分信号传输技术, 能够提供高速率、低损耗的数据传输.</p><p>DAC 高速线缆通常用于短距离的设备互联, 如服务器集群、存储区域网络 (SAN) 等.</p><p>Direct Attach Cable 分两种：</p><ol><li>10G SFP+DAC</li><li>40G QSFP+ 转 4 个 SFP+</li></ol><p>这种线缆都不可更换端口, 模块头和铜缆不能分离.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_MSl5eF3O.webp" alt="20241229154732_MSl5eF3O.webp"></p><h4 id="AOC-线缆"><a href="#AOC-线缆" class="headerlink" title="AOC 线缆"></a>AOC 线缆</h4><p>Active Optical Cable,简称 AOC, 译为有源光缆, 是由集成光电器件组成的, 用于数据中心、高性能计算机、大容量存储器等设备间进行高速率、高可靠性互连的传输设备, 它通常满足工业标准的点接口, 通过内部的电-光-电转换, 使用光缆的优越性进行数据的传输.</p><p>这种线缆同样不可更换端口.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_cW6WdzyU.webp" alt="20241229154732_cW6WdzyU.webp"></p><p><strong>DAC 与 AOC 的区别</strong>:</p><table><thead><tr><th><strong>属性</strong></th><th><strong>DAC (Direct Attach Copper)</strong></th><th><strong>AOC (Active Optical Cable)</strong></th></tr></thead><tbody><tr><td><strong>传输介质</strong></td><td>铜线</td><td>光纤</td></tr><tr><td><strong>类型</strong></td><td>被动 DAC (无信号放大器) 或主动 DAC (带信号放大器)</td><td>主动型, 内置光电转换模块</td></tr><tr><td><strong>传输距离</strong></td><td>通常支持 1-7 米, 最远约 15 米</td><td>通常支持 10 米到 100 米, 部分型号可达数百米</td></tr><tr><td><strong>功耗</strong></td><td>较低 (特别是被动 DAC, 几乎不耗电)</td><td>较高 (需要光电转换模块工作)</td></tr><tr><td><strong>价格</strong></td><td>相对便宜, 适合短距离连接</td><td>相对昂贵, 适合长距离连接</td></tr><tr><td><strong>柔韧性</strong></td><td>较差, 铜线较硬, 不适合狭小空间或需要多次弯折的环境</td><td>更灵活, 光纤材质可以弯曲, 适合复杂布线</td></tr><tr><td><strong>信号完整性</strong></td><td>短距离内信号完整性较好, 但距离增加会受限于铜线电磁干扰</td><td>优秀, 光纤抗电磁干扰能力强, 适合长距离传输</td></tr><tr><td><strong>接口兼容性</strong></td><td>支持 SFP/SFP+、QSFP/QSFP+ 等标准接口</td><td>同样支持 SFP/SFP+、QSFP/QSFP+ 等标准接口</td></tr><tr><td><strong>典型应用场景</strong></td><td>服务器机柜内短距离连接, 交换机到服务器</td><td>机柜间、楼层间、数据中心之间的长距离高速连接</td></tr></tbody></table><h4 id="光纤-光模块"><a href="#光纤-光模块" class="headerlink" title="光纤+光模块"></a>光纤+光模块</h4><table><thead><tr><th><strong>属性</strong></th><th><strong>光纤 + 光模块</strong></th><th><strong>成品线缆 (DAC/AOC)</strong></th></tr></thead><tbody><tr><td><strong>结构</strong></td><td>光纤线缆与可更换光模块的组合</td><td>一体化设计, 线缆与模块固定为一体</td></tr><tr><td><strong>传输距离</strong></td><td>支持较长距离传输 (几百米到数公里, 取决于光模块和光纤类型)</td><td>通常适用于短距离连接</td></tr><tr><td><strong>灵活性</strong></td><td>光模块和光纤可根据需求自由更换</td><td>受限于固定长度和规格</td></tr><tr><td><strong>价格</strong></td><td>光模块和光纤分开购买, 整体成本较高</td><td>相对便宜, 尤其是在短距离应用中</td></tr><tr><td><strong>功耗</strong></td><td>光模块需要供电, 功耗相对较高</td><td>DAC 无需供电, 功耗最低；AOC 有源设计, 功耗较光模块略低</td></tr><tr><td><strong>维护与扩展</strong></td><td>更换单个光模块或光纤即可灵活升级或维修</td><td>整根线缆损坏需整体更换</td></tr><tr><td><strong>接口类型支持</strong></td><td>支持多种接口标准, 如 SFP、QSFP 等</td><td>通常与网卡或设备固定接口匹配</td></tr><tr><td><strong>适用场景</strong></td><td>数据中心核心网络、长距离互联</td><td>数据中心机架内或机架间短距离连接</td></tr></tbody></table><p>二手的 DAC 和 AOC 线缆大概 10+ 一根, 不过上次给 M920x 选购 AOC 线缆时出现了不兼容的问题, 后来就换成了 DAC 线缆, 这次准备使用光纤+光模块的方案, 可以更换光模块的方式应该更灵活一些, 二手的价格也贵不了多少.</p><p>接下来就是介绍一下光纤和光模块了, 因为是第一次接触光纤, 所以需要先学习了解一下基础知识.</p><hr><h3 id="光纤技术"><a href="#光纤技术" class="headerlink" title="光纤技术"></a>光纤技术</h3><p>在现代网络通信中, 光纤传输技术是高速和远距离数据传输的关键. 它通过光信号在光纤中传输数据, 以实现更高的带宽、更低的延迟和更远的传输距离. 与传统的铜缆相比, 光纤在数据中心、企业网络和广域网中已成为主流选择.</p><p>因为目前搭建万兆光纤网络离不开对 <strong>光纤类型</strong>, <strong>光纤接口类型</strong> 和 <strong>光模块类型</strong> 的基本了解, 所以就从这三个方面介绍一下基础知识.</p><h4 id="光纤类型"><a href="#光纤类型" class="headerlink" title="光纤类型"></a>光纤类型</h4><p>光纤是由玻璃或塑料制成的一种传输介质, 能够通过光信号传递数据. 根据用途和传输距离, 光纤分为两种主要类型：</p><ul><li>单模光纤 (Single-mode Fiber) : 只允许单一模式的光通过, 适用于长距离通信 (可达几十公里甚至上百公里) , 适用于跨楼层或跨建筑物的通信.</li><li>多模光纤 (Multimode Fiber) : 允许多种模式的光通过, 适合短距离传输 (通常在 300 米以内) , 成本较低, 多用于机房或局域网内设备的连接.</li></ul><h5 id="颜色区分"><a href="#颜色区分" class="headerlink" title="颜色区分"></a>颜色区分</h5><p>通过光纤的外护套颜色可快速区分单模光纤和多模光纤. 根据 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVElBLTU5OC1D">TIA-598C 标准</a> 定义, <strong>OS1/OS2</strong> 单模光纤的外护套颜色为黄色, 而多模光纤的外护套颜色为橙色或水绿色, 其中 <strong>OM1/OM2</strong> 多模光纤采用橙色外护套, <strong>OM3/OM4</strong> 多模光纤采用水绿色外护套, <strong>OM5</strong> 多模光纤则采用绿色外护套.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_mHKYfwQe.webp" alt="20241229154732_mHKYfwQe.webp"></p><h5 id="传输距离"><a href="#传输距离" class="headerlink" title="传输距离"></a>传输距离</h5><p>单模光纤常用于长距离传输, 多模光纤一般用于短距离传输. 而不同类型的单模和多模光纤应用在不同速率以太网中传输距离各不相同, 如下表所示：</p><table><thead><tr><th>光纤类型</th><th>1000Base/1Gb (SX) 以太网</th><th>1000Base/1Gb (LX) 以太网</th><th>10Gb 以太网</th><th>40Gb 以太网</th><th>100Gb 以太网</th></tr></thead><tbody><tr><td>OS1/OS2 单模光纤 (1310nm)</td><td>5Km</td><td>20Km</td><td>40Km</td><td>40Km</td><td>80Km</td></tr><tr><td>OM1 多模光纤 (850nm)</td><td>275m</td><td>550m</td><td>33m</td><td>/</td><td>/</td></tr><tr><td>OM2 多模光纤 (850nm)</td><td>550m</td><td>550m</td><td>82m</td><td>/</td><td>/</td></tr><tr><td>OM3 多模光纤 (850nm)</td><td>550m</td><td>550m</td><td>300m</td><td>100m</td><td>100m</td></tr><tr><td>OM4 多模光纤 (850nm)</td><td>550m</td><td>550m</td><td>550m</td><td>150m</td><td>150m</td></tr><tr><td>OM5 多模光纤 (850nm)</td><td>/</td><td>/</td><td>550m</td><td>440m</td><td>150m</td></tr></tbody></table><hr><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuY2hpbmEtY2ljLmNuL0RldGFpbC8xNS8yMDgvNDUyNg==">通信用多模光纤主要有哪些类型？OM1 ～ OM5 有什么区别？</a></li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_3G5tddUR.webp" alt="20241229154732_3G5tddUR.webp"></p><p><strong>参考</strong>:</p><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS9wL2EwcXZ4NzV6Lw==">“单模光纤”与“多模光纤”有什么区别？哪个好？怎么用？</a></li></ul><hr><h5 id="纤芯的直径差异"><a href="#纤芯的直径差异" class="headerlink" title="纤芯的直径差异"></a>纤芯的直径差异</h5><p>单模光纤 (SMF) 的纤芯直径一般为 <strong>9μm</strong>, 由于纤芯窄, 它只能在 1310nm、1550nm 以及 WDM 波长上传输一种模式的光, 也正因如此, 单模光纤色散较小, 带宽高, 而多模光纤 (MMF) 的纤芯直径一般为 50/62.5μm, 纤芯宽, 它能在给定的工作波长 (850nm 或 1310nm 波长) 上传输多种模式的光, 但因为多模光纤中传输的模式多达数百个, 各个模式的传输常数和群速率不同, 导致多模光纤的带宽窄、色散大, 损耗也大.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_RaV3SBot.webp" alt="20241229154732_RaV3SBot.webp"></p><h5 id="光源差异"><a href="#光源差异" class="headerlink" title="光源差异"></a>光源差异</h5><p>单模光纤和多模光纤采用的光源不同, 单模光纤一般采用 <strong>激光光源</strong>, 而多模光纤一般采用 <strong>LED 光源</strong>.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_vMmVt1Mz.webp" alt="20241229154732_vMmVt1Mz.webp"></p><hr><h5 id="单模单芯-单模双芯-多模双芯"><a href="#单模单芯-单模双芯-多模双芯" class="headerlink" title="单模单芯/单模双芯/多模双芯"></a>单模单芯/单模双芯/多模双芯</h5><p>在光纤通信中, <strong>单模单芯</strong>、<strong>单模双芯</strong> 和 <strong>多模双芯</strong> 是常见的光纤类型. 它们的区别主要体现在光纤模式、芯数、传输性能以及适用场景上.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_N53zmwR4.webp" alt="20241229154732_N53zmwR4.webp"></p><p>以下是详细对比:</p><p><strong>1. 定义与特性</strong></p><table><thead><tr><th><strong>类型</strong></th><th><strong>定义</strong></th><th><strong>特点</strong></th></tr></thead><tbody><tr><td><strong>单模单芯</strong></td><td>单根单模光纤, 光以单一模式传播, 适用于长距离通信.</td><td>支持远距离和高带宽传输, 常与波分复用 (WDM) 技术结合使用.</td></tr><tr><td><strong>单模双芯</strong></td><td>两根单模光纤, 分别用于发送 (TX) 和接收 (RX) .</td><td>适合中短距离通信, 广泛用于数据中心和企业网络的设备互联.</td></tr><tr><td><strong>多模双芯</strong></td><td>两根多模光纤, 光以多种模式传播, 分别用于发送和接收.</td><td>适合短距离高带宽传输, 主要用于数据中心内部设备间的高速互联.</td></tr></tbody></table><p><strong>2. 光纤模式与传输性能</strong></p><table><thead><tr><th><strong>特性</strong></th><th><strong>单模单芯</strong></th><th><strong>单模双芯</strong></th><th><strong>多模双芯</strong></th></tr></thead><tbody><tr><td><strong>光纤模式</strong></td><td>单模</td><td>单模</td><td>多模</td></tr><tr><td><strong>传输距离</strong></td><td>最长 (几十公里到上百公里)</td><td>较长 (几公里到几十公里)</td><td>最短 (一般在 300 米以内)</td></tr><tr><td><strong>传输带宽</strong></td><td>高 (支持 10Gbps~400Gbps)</td><td>高</td><td>较低 (支持 10Gbps 或更高, 但距离受限)</td></tr><tr><td><strong>抗干扰能力</strong></td><td>极强</td><td>极强</td><td>较弱 (多模光纤模式干扰较多)</td></tr></tbody></table><p><strong>3. 使用场景</strong></p><table><thead><tr><th><strong>类型</strong></th><th><strong>典型应用场景</strong></th></tr></thead><tbody><tr><td><strong>单模单芯</strong></td><td>长距离通信, 如骨干网、跨机房连接、电信级应用.</td></tr><tr><td><strong>单模双芯</strong></td><td>数据中心、企业园区网络中短距离互联, 如交换机到服务器的连接.</td></tr><tr><td><strong>多模双芯</strong></td><td>数据中心内部短距离高速互联, 如 10Gbps 到 100Gbps 的设备互联, 通常为 300 米以内.</td></tr></tbody></table><p><strong>4. 连接方式与成本对比</strong></p><table><thead><tr><th><strong>属性</strong></th><th><strong>单模单芯</strong></th><th><strong>单模双芯</strong></th><th><strong>多模双芯</strong></th></tr></thead><tbody><tr><td><strong>光纤芯数</strong></td><td>单根光纤</td><td>双根光纤</td><td>双根光纤</td></tr><tr><td><strong>布线复杂度</strong></td><td>最低</td><td>较高 (需两根光纤)</td><td>较高</td></tr><tr><td><strong>设备成本</strong></td><td>较高 (需 WDM 技术支持)</td><td>较低</td><td>最低</td></tr><tr><td><strong>光纤成本</strong></td><td>最低 (只需一根光纤)</td><td>较高 (双根光纤)</td><td>较低 (多模光纤通常成本更低)</td></tr><tr><td><strong>常用接口类型</strong></td><td>LC、SC</td><td>LC、SC</td><td>LC、SC</td></tr></tbody></table><p><strong>5. 适配光模块</strong></p><table><thead><tr><th><strong>类型</strong></th><th><strong>推荐光模块类型</strong></th></tr></thead><tbody><tr><td><strong>单模单芯</strong></td><td>单纤双向光模块 (BiDi 模块) , 支持 WDM 技术.</td></tr><tr><td><strong>单模双芯</strong></td><td>双纤光模块 (如 SFP、SFP+ 模块) .</td></tr><tr><td><strong>多模双芯</strong></td><td>多模光模块 (如 OM3/OM4 支持的 SFP 模块) , 常用于短距离高速通信.</td></tr></tbody></table><p><strong>总结</strong></p><table><thead><tr><th><strong>特性</strong></th><th><strong>单模单芯</strong></th><th><strong>单模双芯</strong></th><th><strong>多模双芯</strong></th></tr></thead><tbody><tr><td><strong>传输距离</strong></td><td>长距离 (几十公里到上百公里)</td><td>中短距离 (几公里到几十公里)</td><td>短距离 (一般在 300 米以内)</td></tr><tr><td><strong>应用场景</strong></td><td>长距离骨干网、跨区域通信</td><td>数据中心、企业园区网络</td><td>数据中心内部设备互联</td></tr><tr><td><strong>成本</strong></td><td>光模块和设备成本高</td><td>成本适中</td><td>光纤和模块成本最低</td></tr></tbody></table><ul><li><strong>单模单芯</strong>: 适合长距离、高带宽传输, 设备成本高, 适合电信级应用.</li><li><strong>单模双芯</strong>: 中短距离的全双工通信优选方案, 兼顾性能和成本.</li><li><strong>多模双芯</strong>: 经济高效的短距离方案, 适合数据中心内设备间的高速连接.</li></ul><hr><h4 id="光纤接口类型"><a href="#光纤接口类型" class="headerlink" title="光纤接口类型"></a>光纤接口类型</h4><p><strong>1. FC 型光纤接口</strong></p><p>全名为 Ferrule Connector, 是一种常见的光纤接口类型. 它的外部加强方式是采用金属套, 紧固方式为螺丝扣. FC 接口在电信网络中被广泛采用, 具有牢靠、防灰尘的优点. 不过, 安装时间相对较长, 通常在 ODF (光纤配线架) 侧使用较多.</p><p><strong>2. SC 型光纤接口</strong></p><p>即 Square Connector, 是一种卡接式接口. 它的外壳呈矩形, 紧固方式是采用插拔销闩式, 不需要旋转. SC 接口的使用非常方便, 但容易掉出来, 因此在路由器和交换机上使用较多.</p><p><strong>3. ST 型光纤接口</strong></p><p>全称为 Straight Tip, 是一种圆形的接口. 它的紧固方式为螺丝扣, 插入后需要旋转半周以固定. ST 接口的缺点是容易折断, 但在光纤配线架中使用较多, 尤其是对于 10Base-F 连接来说.</p><p><strong>4. LC 型光纤接口</strong></p><p>即 Lucent Connector, 是一种小型化的光纤接口. 它的外壳呈矩形, 紧固方式为插拔销闩式. LC 接口适用于 SFP 模块, 采用模块化插孔 (RJ) 闩锁机理制成, 便于操作和维护.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_aHeUAwZY.webp" alt="20241229154732_aHeUAwZY.webp"></p><blockquote><p>运营商进户光纤都是单芯单模皮线光纤, 到光猫这里都必须是单模光纤才能正常使用, 没有其他选择, 单模光纤通常都是 SC 接口. 到光猫这段距离通常也是运营商负责维护. 属于接入网 PON (Passive Optical Network, 无源光网络) . 是目前有线接入网的主流技术, FTTH (Fiber to the Home, 光纤到户) 让大家享受到了超高网速带来的便利性.</p></blockquote><hr><h4 id="光模块类型"><a href="#光模块类型" class="headerlink" title="光模块类型"></a>光模块类型</h4><h5 id="封装类型分类"><a href="#封装类型分类" class="headerlink" title="封装类型分类"></a>封装类型分类</h5><p>光模块按照封装形式来分有以下几种常见类型:</p><ul><li><strong>SFP</strong>: GBIC 的升级版, 最高速率可达 4.25Gbps, 主要由激光器构成, 特点是小型、可热插拔.</li><li><strong>SFP+</strong>: SFP 的加强版, 传输速率为 10Gbps, 可以满足 8.5G 光纤通道和 10G 以太网的应用.</li><li><strong>SFP28</strong>: 传输速率为 25Gbps, 它的优点是功耗较低、端口密度较高, 且支持热插拔.</li><li><strong>QSFP+</strong>: 传输速率为 40Gbps, 支持 MPO 光纤连接器和 LC 光纤连接器, 特点是小型、可热插拔.</li><li><strong>QSFP28</strong>: 采用 4 个 25Gbit/s 通道并行传输, 传输速率为 100Gbps, 满足 100G 以太网的应用.</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_g7eB1kRM.webp" alt="20241229154732_g7eB1kRM.webp"></p><p>更高规格的模块有:</p><p><strong>QSFP-DD</strong>: 采用 8 通道电接口, 单通道速率 25Gbps/50Gbps/100Gbps, 提供高达 200Gb/s 到 800Gb/s 总最大数据速率.</p><p><strong>OSFP</strong>: 是一种新型光模块, 比 QSFP-DD 略大, 同样具有 8 个高速电通道, 支持高达 800G 的总吞吐量.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_doKCLVnA.webp" alt="20241229154732_doKCLVnA.webp"></p><h5 id="光纤类型分类"><a href="#光纤类型分类" class="headerlink" title="光纤类型分类"></a>光纤类型分类</h5><p>光模块根据适用的光纤类型的不同可被分为 <strong>单模光模块</strong> 和 <strong>多模光模块</strong>, 其中单模和多模指的是光纤在光模块中的传输方式. 单模光模块多用在远距离传输中, 而多模光模块多用在短距离传输中.</p><p>多模光模块的工作波长为 <strong>850nm</strong>；单模光模块的工作波长为 <strong>1310nm</strong>、<strong>1550nm</strong>；单模光模块中使用的器件是多模光模块的两倍, 所以单模光模块的总体成本要远远高于多模光模块；单模光模块的传输距离可达 150 至 200km；多模光模块的传输距离可达 5km.</p><h5 id="光模块的命名"><a href="#光模块的命名" class="headerlink" title="光模块的命名"></a>光模块的命名</h5><p>比如 <strong>SPF-10G-XX</strong>: SFP 是 <strong>Small Form Pluggable</strong> 的缩写, 意为可热插拔的小型模块, 可以简单理解为 GBIC(Gigabit Interface Converter 的缩写) 升级版本. 10G 代表其最大传输速率为 10.3 Gbps, 适用于 10G 以太网. XX 代表 SR, LR, LRM 等, 表示光模块的传输距离.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_SSBxbLhS.webp" alt="20241229154732_SSBxbLhS.webp"></p><blockquote><p>SR, LR, LRM, ER 和 ZR 是 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvMTAlRTUlOTAlODklRTYlQUYlOTQlRTclODklQjklRTQlQjklOTklRTUlQTQlQUElRTclQjYlQjIlRTglQjclQUY=">10GIEEE 标准</a> 中比较常见的模块类型,. 在光纤通信中, SR, LR, LRM, ER 和 ZR 是 10G 光模块传输中的一种距离术语. SR 表示短距离,LR 表示长距离, LRM 表示长度延伸多点模式, ER 表示超长距离, ZR 则表示最长距离.</p></blockquote><p>目前市面上万兆光模组型号繁多, 如用于多模传输的 <strong>SFP-10G-SR</strong> 万兆光模组、用于单模传输的 <strong>SFP-10G-LR</strong> 万兆光模组、以及既能用于单模传输又能用于多模传输的 <strong>SFP-10G-LRM</strong> 万兆光模组, 下面是部分万兆光模组的区别:</p><table><thead><tr><th>型号</th><th>波长</th><th>光纤类型</th><th>传输距离</th><th>接口</th><th>标准</th></tr></thead><tbody><tr><td>SFP-10G-SR</td><td>850 nm</td><td>多模</td><td>300 m</td><td>LC 双工</td><td>10GBASE-SR</td></tr><tr><td>SFP-10G-LR</td><td>1310 nm</td><td>单模</td><td>10 km</td><td>LC 双工</td><td>10GBASE-LR</td></tr><tr><td>SFP-10G-LRM</td><td>1310 nm</td><td>多模</td><td>220 m</td><td>LC 双工</td><td>10GBASE-LRM</td></tr><tr><td>SFP-10G-LRM</td><td>1310 nm</td><td>单模</td><td>300 m</td><td>LC 双工</td><td>10GBASE-LRM</td></tr><tr><td>SFP-10G-LRM2</td><td>1310 nm</td><td>单模</td><td>2 km</td><td>LC 双工</td><td>10GBASE-LRM</td></tr></tbody></table><ul><li>SFP-10G-SR (短距离) 是一种常见的 SFP 模块, 它可以在 <strong>多模光纤</strong> 中连接高达 300 米的光纤. 一般情况下 SR 模块多为多模, 工作波长为 850nm. 这些模块是可热插拔的, 相互之间可以轻松实现切换.</li><li>SFP-10G-LR(长距离) 用于远程数据传输, 如大型组合或地铁区域网络. 具有成本低、功耗低、体积小、密度高的优点.</li><li>SFP-10G-LRM(长度延伸多点模式) 符合 10GBASE-LRM 以太网的标准, 适用于传统光纤和新型多模光纤. 它在多模光纤上的最小支持距离为 220 米, 在单模光纤上的最小支持距离为 300 米.</li></ul><p>还有超远距离传输的模块:</p><ul><li>SFP-10G-ER(超长距离)在标准 <strong>单模光纤</strong> 上支持长达 <strong>40 公</strong>里 的传输距离. 广泛应用于数据中心和企业工业园区 .</li><li>SFP-10G-ZR (最长距离), 在标准 <strong>单模光纤</strong> 上支持高达 <strong>80 公里</strong> 的传输距离, 其波长为 1550nm. 符合 SF-8431、SF-8432 和 IEE802.11 ae 标准. 它可应用于数据网络/光网络.</li></ul><p>参考:</p><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRjb2RlLmNzZG4ubmV0LzY2YzU5MGIyMTNlNDA1NGU3ZTdjNWJkMy5odG1s">单模多模还傻傻分不清楚？关于光模块介绍, 看这一篇就够啦！</a></li></ul><hr><h4 id="光纤和光模块组合"><a href="#光纤和光模块组合" class="headerlink" title="光纤和光模块组合"></a>光纤和光模块组合</h4><table><thead><tr><th>光模块类型</th><th>光纤类型</th><th>是否能正常工作</th></tr></thead><tbody><tr><td>单模光模块</td><td>多模光纤</td><td>短距离可以工作, 但无法保障效果(需要使用 <strong>光纤收发器</strong> 转换光纤类型)</td></tr><tr><td>单模光模块</td><td>单模光纤</td><td>正常工作</td></tr><tr><td>多模光模块</td><td>单模光纤</td><td>无法工作</td></tr><tr><td>多模光模块</td><td>多模光纤</td><td>正常工作</td></tr></tbody></table><ul><li>单模光模块与单模光纤配套使用. 单模光纤传输频带宽, 传输容量大, 适用于长距传输.</li><li>多模光模块与多模光纤配套使用. 多模光纤有模式色散缺陷, 其传输性能比单模光纤差, 但成本低, 适用于较小容量、短距传输.</li></ul><blockquote><p>在了解相关基础知识后, 满足最低 10G 速度需求的前提下, 考虑性价比后, 目前多模光纤更合适, 因为搭配的多模光模块更便宜, 所以我我选择使用 <strong>多模双芯光纤(OM3)</strong> + <strong>LC-LC 接口</strong> + <strong>多模光模块(SFP-10G-SR)</strong> 来组建我的万兆光纤网络, 这应该是家庭万兆光纤网络比较常见的配置了.</p></blockquote><hr><h3 id="网卡"><a href="#网卡" class="headerlink" title="网卡"></a>网卡</h3><h4 id="MBP-网卡驱动"><a href="#MBP-网卡驱动" class="headerlink" title="MBP 网卡驱动"></a>MBP 网卡驱动</h4><p>首先需要确定 <strong>Macbook Pro M1 Max</strong> 系统为 <strong>macOS Sequoia</strong> (版本 <strong>15.1.1</strong>) 能够免驱哪些万兆网卡.</p><p>Apple 原生驱动有(<code>ls -d /System/Library/DriverExtensions/*AppleEthernet</code>):</p><ul><li>com.apple.DriverKit-AppleEthernetE1000.dext: <strong>Intel</strong> 驱动</li><li><strong>com.apple.DriverKit-AppleEthernetIXGBE.dext</strong>: <strong>Intel</strong> 驱动</li><li>com.apple.DriverKit-AppleEthernetIXL.dext: <strong>Intel</strong> 驱动</li><li>com.apple.DriverKit-AppleEthernetMLX5.dext: <strong>Mellanox</strong> 驱动</li></ul><p><strong>各驱动区别</strong>:</p><table><thead><tr><th><strong>驱动名称</strong></th><th><strong>支持的硬件/芯片组</strong></th><th><strong>用途描述</strong></th></tr></thead><tbody><tr><td><strong>AppleEthernetE1000</strong></td><td>Intel E1000 系列网卡 (千兆以太网)</td><td>支持 Intel 的千兆网卡</td></tr><tr><td><strong>AppleEthernetIXGBE</strong></td><td>Intel IXGBE 系列网卡 (万兆以太网)</td><td>支持 Intel 的万兆网卡</td></tr><tr><td><strong>AppleEthernetIXL</strong></td><td>Intel IXL 系列网卡 (25G/40G/100G Ethernet)</td><td>支持 Intel 的 25G/40G/100G 高速网卡</td></tr><tr><td><strong>AppleEthernetMLX5</strong></td><td>Mellanox ConnectX-5 系列网卡 (25G/50G/100G Ethernet)</td><td>支持 Mellanox 高性能网卡 (<em>Nvidia</em>)</td></tr></tbody></table><p>我们关注的是 10G 网卡驱动, 所以对应的是: <strong>com.apple.DriverKit-AppleEthernetIXGBE.dext</strong>.</p><p>下面是驱动信息:</p><p><code>cat /System/Library/DriverExtensions/com.apple.DriverKit-AppleEthernetIXGBE.dext/Info.plist</code></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">key</span>&gt;</span>DriverKit_AppleEthernetIXGBE<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">		  <span class="comment">&lt;!-- 驱动唯一标识 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>CFBundleIdentifier<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>com.apple.DriverKit-AppleEthernetIXGBE<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 驱动程序依赖的内核扩展为 Apple 的 Skywalk 网络栈框架系列 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>CFBundleIdentifierKernel<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>com.apple.iokit.IOSkywalkFamily<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 该驱动程序实现的类 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>IOClass<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>IOUserNetworkEthernet<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 通过 PCI 类代码进行设备匹配 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>IOPCIClassMatch<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 表示匹配所有网络控制器类设备 (PCI Class Code: 0x02) , 屏蔽了子类代码的影响 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>0x02000000<span class="symbol">&amp;amp;</span>0xffffff00<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 通过设备 ID 和供应商 ID 匹配 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>IOPCIMatch<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 表示匹配 Intel (供应商 ID: 0x8086) 生产的设备, 且忽略设备 ID 的具体细节 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>0x00008086<span class="symbol">&amp;amp;</span>0x0000ffff<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 表明此驱动支持 PCIe 隧道技术 (如 Thunderbolt 隧道)  &lt;true/&gt; 表示该驱动兼容此功能 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>IOPCITunnelCompatible<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 指定设备提供者的类名. 在这里是 IOPCIDevice, 表示该驱动的服务提供者是 PCI 设备 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>IOProviderClass<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>IOPCIDevice<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 指定驱动程序的实现类名 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>IOUserClass<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>DriverKit_AppleEthernetIXGBE<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 指定与此驱动程序关联的 DriverKit 用户空间服务名 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>IOUserServerName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>com.apple.DriverKit-AppleEthernetIXGBE<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>如上所示, 比较关键的是 <code>0x00008086&amp;amp;0x0000ffff</code>, 表示 PCI ID 为 8086 且忽略设备 ID.</p><blockquote><p>PCI 供应商 ID 8086 将英特尔标识为设备制造商.</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9kZXZpY2VodW50LmNvbS9hbGwtcGNpLXZlbmRvcnM=">PCI 供应商 ID 可以在这里查询</a>.</p></blockquote><h5 id="Intel-网卡"><a href="#Intel-网卡" class="headerlink" title="Intel 网卡"></a>Intel 网卡</h5><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vcHJvZHVjdC5odG1s">Intel 网卡</a> 与驱动信息:</p><table><thead><tr><th>型号</th><th>主芯片型号</th><th>协议标准</th><th>接口类型</th><th>驱动</th></tr></thead><tbody><tr><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vcHJvZHVjdC5odG1sP2tleXdvcmQ9eDUyMA==">X520</a></td><td><strong>Intel 82599</strong></td><td><strong>10GbE</strong></td><td><strong>SFP+</strong></td><td><strong>com.apple.DriverKit-AppleEthernetIXGBE</strong></td></tr><tr><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vaW5mbzg0Lmh0bWw=">X540</a></td><td>Intel X540</td><td>10GbE</td><td>BASE-T</td><td>com.apple.DriverKit-AppleEthernetIXGBE</td></tr><tr><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vaW5mbzEyNi5odG1s">X550</a></td><td>Intel X550</td><td>10GbE</td><td>BASE-T</td><td>com.apple.DriverKit-AppleEthernetIXGBE</td></tr><tr><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vcHJvZHVjdC5odG1sP2tleXdvcmQ9eDcxMA==">X710</a></td><td>Intel X710</td><td>10GbE</td><td>BASE-T/SFP+</td><td>com.apple.DriverKit-AppleEthernetIXL</td></tr><tr><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vaW5mbzEzNS5odG1s">XXV710</a></td><td>Intel XXV710</td><td>25GbE</td><td>SFP28</td><td>com.apple.DriverKit-AppleEthernetIXL</td></tr><tr><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vcHJvZHVjdC5odG1sP2tleXdvcmQ9eGw3MTA=">XL710</a></td><td>Intel XL710</td><td>40GbE</td><td>BASE-T/QSFP+</td><td>com.apple.DriverKit-AppleEthernetIXL</td></tr></tbody></table><p>网卡鉴赏环节:</p><p><strong>Intel XXV710-DA2 Network Card</strong> :</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_6FVVlYgt.webp" alt="20241229154732_6FVVlYgt.webp"></p><p><strong>Intel XL710-DA2 Network Card</strong>:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_QinMzQmp.webp" alt="20241229154732_QinMzQmp.webp"></p><h5 id="Mellanox"><a href="#Mellanox" class="headerlink" title="Mellanox"></a>Mellanox</h5><table><thead><tr><th>型号</th><th>协议标准</th><th>接口类型</th><th>驱动</th></tr></thead><tbody><tr><td>CX4121A-ACAT ConnectX-4</td><td>25GbE</td><td>SFP28</td><td>com.apple.DriverKit-AppleEthernetMLX5</td></tr></tbody></table><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_caeYgzvf.webp" alt="20241229154732_caeYgzvf.webp"></p><blockquote><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWZoNHkxQjdwbw==">最适合 MAC 的雷电 25G 网卡</a>, 这位 Up 主使用 <code>CX4121A-ACAT ConnectX-4</code> 网卡实现了在 Mac 下 25Gb 内网.</p><p>糟了, 心动的感觉…..</p><p>这不 25Gb 和 40Gb 的方案不就有了 🤣🤣🤣</p></blockquote><hr><h5 id="网卡选择"><a href="#网卡选择" class="headerlink" title="网卡选择"></a>网卡选择</h5><p>满足需求的似乎就只有 <strong>X520</strong> 和 <strong>X710</strong> 这 2 个产品类别, 但价格上 <strong>X520</strong> 肯定更便宜, 而且网上的成功案例绝大部分都是 <strong>X520</strong>, 因此决定购买 <strong>X520</strong> 的双网口版本.</p><p>确认了网卡类别后, 就需要选择网口数量了, 我的需求是双光口, 而 <strong>Intel X520</strong> 双光口版本有多个, 分别是 <strong>Intel X520-DA2</strong> &amp; <strong>Intel X520-SR2</strong> &amp; <strong>Intel X520-LR2</strong>:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_dka4ET6j.webp" alt="20241229154732_dka4ET6j.webp"></p><p>其中 SR 和 DA 的区别仅在于购买时 <strong>带不带光模块</strong>(<strong>SR 带, DA 不带</strong>). 而 <strong>Intel X520-LR2</strong> 则需要 <strong>单模</strong> 的光模块, 它的价格更贵.</p><p>X520 系列网卡的 Intel 82599 主芯片现在主要有 3 个型号： <strong>82599EN</strong> <strong>82599ES</strong> <strong>82599EB</strong> , 他们三者的区别:</p><table><thead><tr><th><strong>芯片型号</strong></th><th><strong>功耗 (典型)</strong></th><th><strong>特点</strong></th><th><strong>应用场景</strong></th></tr></thead><tbody><tr><td><strong>82599EB</strong></td><td>5.2W</td><td>支持 SR-IOV, 企业级功能, 虚拟化支持, 性能最强</td><td>高性能企业数据中心, 虚拟化环境</td></tr><tr><td><strong>82599ES</strong></td><td>4.8W</td><td>类似于 EB, 去除 SR-IOV, 较低功耗, 适合高吞吐量应用</td><td>数据中心, 高带宽需求的网络设备</td></tr><tr><td><strong>82599EN</strong></td><td>4.2W</td><td>低功耗和低成本, 去除高级功能, 适用于成本敏感应用</td><td>嵌入式系统, 低功耗和低成本应用</td></tr></tbody></table><blockquote><p><strong>SR-IOV</strong> 是一种 I/O 虚拟化技术, 允许单一的物理设备 (如网卡) 被虚拟化并分配给多个虚拟机, 使得多个虚拟机能够直接访问硬件资源, 而无需经过传统的虚拟化中间层 (如 hypervisor 或虚拟化驱动) . SR-IOV 的核心特点包括：</p><ul><li>**虚拟功能 (Virtual Functions, VFs)**：每个虚拟机被分配一个虚拟功能, 这些虚拟功能可以直接访问物理网卡的一部分资源.</li><li>**物理功能 (Physical Function, PF)**：物理设备的主要功能, 它负责管理和分配虚拟功能, 并与虚拟机进行通信.</li><li><strong>硬件直接访问</strong>：通过 SR-IOV, 虚拟机可以绕过操作系统和 hypervisor 的网络堆栈, 直接与物理硬件交互, 提高性能, 减少延迟和 CPU 使用率.</li></ul><p>总结起来就是如果需要玩 ESXi 和 PVE 的话, 最好还是上 <strong>82599EB</strong> 芯片的 X520.</p></blockquote><p>这三个型号中, <strong>82599EN</strong> 只能支持<strong>单口万兆</strong>, <strong>82599EB</strong> 和 <strong>82599ES</strong> 则都能支持<strong>双口万兆</strong>, 这是它们三者之间最显著的差异.<br><strong>82599ES</strong> 相比 <strong>82599EB</strong> 则多了对 SFI(接 SFP+光模块) 和 10GBASE-KR(设备内部背板内接) 类型的支持, 对 SFI 接口的支持则表示 <strong>82599ES</strong> 芯片可以配合 SFP+ 模块使用, 也就是说 <strong>82599ES 相比 82599EB 多了对光口的支持</strong>, 最常用的 X520 <strong>双口光纤万兆网卡就是采用的 82599ES 芯片</strong>.</p><hr><p>另外需要注意的是 <strong>X520</strong> 的总线类型是 <strong>PCIe 2.0 x8</strong>, 需要使用 <strong>PCIEx8</strong> 或 <strong>PCIEx16</strong> 的插槽, 如果使用 <strong>PCIEx4</strong>, 需要 3.0 版本, 否则无法达到线速, 下面贴一个 PCIe 各版本的的理论速度表:</p><table><thead><tr><th><strong>PCIe 版本</strong></th><th><strong>x1 理论带宽</strong></th><th><strong>x2 理论带宽</strong></th><th><strong>x4 理论带宽</strong></th><th><strong>x8 理论带宽</strong></th><th><strong>x16 理论带宽</strong></th><th>传输速率</th></tr></thead><tbody><tr><td>PCIe 2.0</td><td>0.5 GB/s</td><td>1.0 GB/s</td><td>2.0 GB/s</td><td>4.0 GB/s</td><td>8.0 GB/s</td><td>5.0 GT/s</td></tr><tr><td>PCIe 3.0</td><td>0.985 GB/s</td><td>1.969 GB/s</td><td><strong>3.938 GB/s</strong></td><td>7.877 GB/s</td><td>15.754 GB/s</td><td>8.0 GT/s</td></tr><tr><td>PCIe 4.0</td><td>1.969 GB/s</td><td>3.938 GB/s</td><td>7.877 GB/s</td><td>15.754 GB/s</td><td>31.508 GB/s</td><td>16.0 GT/s</td></tr><tr><td>PCIe 5.0</td><td>3.938 GB/s</td><td>7.877 GB/s</td><td>15.754 GB/s</td><td>31.508 GB/s</td><td>63.015 GB/s</td><td>32.0 GT/s</td></tr><tr><td>PCIe 6.0</td><td>7.563 GB/s</td><td>15.125 GB/s</td><td>30.25 GB/s</td><td>60.5 GB/s</td><td>121.0 GB/s</td><td>64.0 GT/s</td></tr></tbody></table><p>一路从 Apple 原生驱动到对网卡的关知识的基础了解, 最终确定选购的网卡为: <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vaW5mbzcyLmh0bWw=">E10G42BTDA/X520-DA2</a>, 目前二手价格也非常便宜, 应该算是最具性价比的万兆网卡.</p><p>参考:</p><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuc3lub3BzeXMuY29tL3poLWNuL2NoaW5hL3Jlc291cmNlcy9kd3RiL2R3dGItY24tZXRoZXJuZXQtMjAxN3EyLmh0bWw=">了解以太网术语 – 数据速率、互连介质和物理层</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuaXRob21lLmNvbS50dy90ZWNoLzkwNzg2">10Gb 乙太网路连接规格概览：形形色色的 10GbE 连接方式</a></li></ul><h4 id="Station-网卡"><a href="#Station-网卡" class="headerlink" title="Station 网卡"></a>Station 网卡</h4><p>Station 主机原来有一张浪潮的 X540 万兆双电口网卡:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_QcCVPt6A.webp" alt="20241229154732_QcCVPt6A.webp"></p><p>这张卡可以称得上是 <strong>年轻人的第一张万兆网卡</strong>, 价格低的离谱, 因为这个卡是非标准的 x8+x1, 买回来不能直接用, 需要魔改一下(小黄鱼有成品), 参考 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS9wL2FycXZsODJ4Lw==">双口万兆网卡低到 40 元, 这个万兆网卡性价比天花板</a> 就行.</p><p>现在的问题是大热量大, 所以索性就一次性全部换成 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vaW5mbzcyLmh0bWw=">E10G42BTDA/X520-DA2</a>, 还能少买 2 个光转电模块.</p><hr><h4 id="M920x-网卡"><a href="#M920x-网卡" class="headerlink" title="M920x 网卡"></a>M920x 网卡</h4><p>网卡也是 <strong>Intel X520-DA2</strong>, 但是上次拆机时发现 PCB 已经弯曲变形了(不过并不影响使用), 等彻底报废的时候再考虑更换(或者下次升级到 40Gb? 😎)</p><p><strong>网卡信息(82599ES 芯片):</strong></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ inxi -n</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">Device-2: Intel 82599ES 10-Gigabit SFI/SFP+ Network driver: ixgbe</span><br><span class="line">IF: enp1s0f0 state: up speed: 10000 Mbps duplex: full mac: xxx</span><br><span class="line">Device-3: Intel 82599ES 10-Gigabit SFI/SFP+ Network driver: ixgbe</span><br><span class="line">IF: enp1s0f1 state: up speed: 10000 Mbps duplex: full mac: yyy</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure><p>最大传输单元 MTU (Maximum Transmission Unit) , 是指网络能够传输的最大数据包大小, 以字节为单位. MTU 的大小决定了发送端一次能够发送报文的最大字节数. 如果 MTU 超过了接收端所能够承受的最大值, 或者是超过了发送路径上途经的某台设备所能够承受的最大值, 就会造成报文分片甚至丢弃, 加重网络传输的负担. 如果太小, 那实际传送的数据量就会过小, 影响传输效率.</p><p>假设待发送的数据总共 <em>4000</em> 字节, 假设以太网设备一帧最多只能承载 <em>1500</em> 字节. 很明显, 数据需要划分成 <em>3</em> 片, 再通过 <em>3</em> 个帧进行发送：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_pNd2my0R.webp" alt="20241229154732_pNd2my0R.webp"></p><p><strong>MTU 的特点</strong></p><table><thead><tr><th>特点</th><th>描述</th></tr></thead><tbody><tr><td>默认值</td><td>以太网设备的 MTU 默认为 <strong>1500 字节</strong>.</td></tr><tr><td>影响</td><td><strong>过小</strong>：更多数据包, 增加 CPU 和网络设备的开销. <strong>过大</strong>：可能导致设备间不兼容, 数据包丢弃或分片.</td></tr><tr><td>分片问题</td><td>当数据包大小超过 MTU 时, 网络需要对数据包进行 <strong>分片</strong>, 可能增加延迟并带来丢包风险.</td></tr><tr><td>适配场景</td><td>不同场景下应根据需要调整 MTU, 以平衡性能和兼容性.</td></tr></tbody></table><h4 id="巨型帧"><a href="#巨型帧" class="headerlink" title="巨型帧"></a>巨型帧</h4><table><thead><tr><th>特点</th><th>描述</th></tr></thead><tbody><tr><td>定义</td><td>将 MTU 设置为 <strong>9000 字节</strong> 或更大, 通常用于高性能传输场景.</td></tr><tr><td>优势</td><td>降低包头开销; 减少拆分与重组操作; 提高大文件传输效率 (约提升 10%-20%)</td></tr><tr><td>劣势</td><td>无 IEEE 标准, 可能存在兼容性问题; <strong>需要网卡和交换机都支持巨型帧模式</strong></td></tr><tr><td>适用场景</td><td>大型文件传输、NAS 数据同步等高带宽需求场景.</td></tr></tbody></table><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_sqsm5wVC.webp" alt="20241229154732_sqsm5wVC.webp"></p><p>当你在特定的网络任务下将 MTU 从 1500 设置为 9000, 会发现网络文件传输速度会有 10-20%的提升. 这是因为在巨型帧模式下, 网络传输设备相应地减少了拆开、组合数据包的次数, 一个巨型帧的数据包可以携带之前多个数据包所携带的数据量, 在大型文件传输的时候效率也就自然提高了.</p><h4 id="使用建议"><a href="#使用建议" class="headerlink" title="使用建议"></a>使用建议</h4><p><strong>双网卡双网络</strong>：</p><ul><li>一个网络使用默认的 MTU (1500), 用于日常上网.</li><li>另一个网络使用巨型帧 (9000), 用于高性能存储数据传输.</li></ul><p>这正好符合我现在的网络环境(一电信宽带, 一联通宽带).</p><p><strong>参考</strong>:</p><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pbmZvLnN1cHBvcnQuaHVhd2VpLmNvbS9pbmZvLWZpbmRlci9lbmN5Y2xvcGVkaWEvemgvTVRVLmh0bWw=">什么是 MTU</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUd6NDIxejdDSC8=">入坑万兆网卡, 必须知道巨型帧与 MTU 的坑</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS9wL2FsbG43b2xwLw==">家里网络复杂度提高, 如何最大限度发挥网络的效率</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL2xvbmd3aGl0ZWNsb3Vkcy5jb20vMjAxMi8wMi8yMC9qdW1iby1mcmFtZXMtb24tdnNwaGVyZS01Lw==">Jumbo Frames on vSphere 5</a></li></ul><hr><h3 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h3><p>我对交换机的要求为:</p><ul><li>能够设置 MTU;</li><li>至少 8 个网口, 可以是 4 电口+ 4 光口, 也可以是 8 光口;</li><li>体积不能过大, 最好没有内置散热, 需要时我可执行添加外置散热风扇随时启停;</li></ul><p>交换机大致分为 <strong>非管理型交换机(傻瓜交换机)</strong>, <strong>二层管理交换机</strong> 和 <strong>三层管理交换机</strong>.</p><p>傻瓜交换机的工作原理是通过学习每个设备的 MAC 地址, 将设备的 MAC 地址和连接的端口映射到一个内部表 (称为<strong>MAC 地址表</strong>) , 当数据包进入交换机时, 交换机会查看数据包的目标 MAC 地址, 并查找对应的端口:</p><ul><li>如果 MAC 地址在表中, 数据包直接转发到目标端口;</li><li>如果 MAC 地址不在表中, 交换机会将数据包广播到所有端口 (除源端口外) ;</li></ul><p>傻瓜交换机的优势是简单, 不需要任何配置即可工作、便宜、稳定, 非常适合没有网络管理需求的场景.</p><p>要满足 <strong>MTU 可设置的需求</strong>, 则必须上二层或三层交换机, 那下面对两类交换机做个简单的对比.</p><h4 id="二层-Or-三层"><a href="#二层-Or-三层" class="headerlink" title="二层 Or 三层"></a>二层 Or 三层</h4><hr><table><thead><tr><th>特性</th><th>二层交换机</th><th>三层交换机</th></tr></thead><tbody><tr><td><strong>工作层级</strong></td><td>数据链路层 (OSI 模型的第 2 层)</td><td>网络层 (OSI 模型的第 3 层)</td></tr><tr><td><strong>主要功能</strong></td><td>1. 根据 MAC 地址转发数据<br>2. 提供 VLAN 支持</td><td>1. 基于 IP 地址转发数据<br>2. 提供路由功能</td></tr><tr><td><strong>应用场景</strong></td><td>1. 局域网内部设备互联<br>2. 适用于小型网络</td><td>1. 跨子网通信<br>2. 适用于大型网络与多子网</td></tr><tr><td><strong>硬件性能</strong></td><td>1. 通常转发速度更快<br>2. 成本较低</td><td>包含路由功能, 成本较高</td></tr><tr><td><strong>VLAN 支持</strong></td><td>支持 VLAN 的划分, 但需通过三层设备进行跨 VLAN 通信</td><td>支持跨 VLAN 路由, 直接实现不同 VLAN 间通信</td></tr><tr><td><strong>路由功能</strong></td><td>不支持路由功能, 依赖外部路由器</td><td>内置路由功能, 可直接实现网络互联</td></tr><tr><td><strong>广播范围</strong></td><td>广播域受 VLAN 限制</td><td>可隔离广播域, 减少广播对网络的影响</td></tr><tr><td><strong>MTU 支持</strong></td><td>1. 仅负责在二层转发, 不解析 IP 报头<br>2. 不支持对 MTU 的动态调整</td><td>1. 可基于三层协议对 MTU 进行动态调整<br>2. 支持最大传输单元的优化配置</td></tr></tbody></table><p><strong>MTU 的对比</strong></p><ol><li><p><strong>二层交换机中的 MTU</strong></p><ul><li>仅在数据链路层转发帧, 对 IP 分片和 MTU 超过时的处理不敏感.</li><li>不支持动态调整, 默认 MTU 通常为 1500 字节, 适用于一般以太网传输.</li></ul></li><li><p><strong>三层交换机中的 MTU</strong></p><ul><li>在网络层处理 MTU 时, 支持动态调整或告警 (如 ICMP “Fragmentation Needed” 消息) .</li><li>支持更高 MTU (如 Jumbo Frame, 通常为 9000 字节) , 可减少分片开销, 提升网络传输效率.</li><li>更适合高性能网络环境, 如数据中心或存储传输.</li></ul></li></ol><p><strong>适用场景</strong></p><ol><li><p><strong>二层交换机</strong>:</p><ul><li>小型网络中设备互联.</li><li>只需要在单一 VLAN 内通信时.</li><li>适用于预算有限的简单网络需求.</li></ul></li><li><p><strong>三层交换机</strong>:</p><ul><li>需要跨子网通信或跨 VLAN 数据转发时.</li><li>中大型网络中, 减少路由器的使用, 优化性能.</li><li>需要隔离广播域以降低网络负载时.</li></ul></li></ol><p>所以家用万兆的话, 二层管理型交换机是最基本的硬件配置.</p><h4 id="产品选择"><a href="#产品选择" class="headerlink" title="产品选择"></a>产品选择</h4><table><thead><tr><th>厂商</th><th>型号</th><th>网口</th><th>管理类型</th><th>全新价格</th><th>二手价格</th></tr></thead><tbody><tr><td>TP-LINK</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDAyNDI1MTgzNDEwNi5odG1s"><strong>TL-ST5008F</strong></a></td><td>8 个 10G 光口 + Management + RJ45 Console 口</td><td>L3</td><td>1723</td><td>500+</td></tr><tr><td>TP-LINK</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDEyNjMxMTkyNjA3MC5odG1s"><strong>TL-ST2408PB</strong></a></td><td>4 个 10G 电口(PoE) + 4 个 10G 光口</td><td>云管理</td><td>1999</td><td>无</td></tr><tr><td>兮克</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDA5OTc0NzYyMDcyNS5odG1s"><strong>SKS7300-4X4T</strong></a></td><td>4 个 10G 电口 + 4 个 10G 光口 + RJ45 Console 口</td><td>L2</td><td>1379</td><td>1000+</td></tr><tr><td>兮克</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDA4Mzk5NDgxNDU4OC5odG1s"><strong>SKS8310-8X</strong></a></td><td>8 个 10G 光口 + RJ45 Console 口</td><td>L3</td><td>749</td><td>无</td></tr><tr><td>兮克</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDA4Mzk5NDgxNDU4OC5odG1s"><strong>SKS8300-8X</strong></a></td><td>8 个 10G 光口 + RJ45 Console 口</td><td>L3</td><td>899</td><td>600+</td></tr><tr><td>希力威视</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDEyNTA5NTY1OTc4OC5odG1sI2NydW1iLXdyYXA="><strong>SR-ST1808F</strong></a></td><td>8 个 10G 光口</td><td>L3</td><td>599</td><td>无</td></tr><tr><td>希力威视</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDEyODM3NTUyNTgzNS5odG1s"><strong>SR-ST3408F</strong></a></td><td>4 个 10G 电口 + 4 个 10G 光口 + RJ45 Console 口</td><td>L3</td><td>1139</td><td>800+</td></tr><tr><td>希力威视</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDA5MDA1OTcxMTEyMy5odG1sI3Byb2R1Y3QtZGV0YWls"><strong>SR-ST3808F</strong></a></td><td>8 个 10G 光口 + RJ45 Console 口</td><td>L3</td><td>699</td><td>400+</td></tr><tr><td>海思视讯</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDExMTg5MjUzMDcyNi5odG1s"><strong>F1100W-4SX-4XGT</strong></a></td><td>4 个 10G 电口 + 4 个 10G 光口</td><td>轻管理型</td><td>1159</td><td>无</td></tr><tr><td>海思视讯</td><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDA5NTc4ODA1ODQ3Mi5odG1s"><strong>F1100W-8SX-SE</strong></a></td><td>8 个 10G 光口 + RJ45 Console 口</td><td>轻管理型</td><td>499</td><td>无</td></tr></tbody></table><p>上面这些是比较常见且符合需求的万兆交换机, 其他的品牌没有使用过不是很了解.</p><p>4 光 + 4 电 的方案应该是最合适的, 但是二手价格还是居高不下, 所以在对比后最终选择了 TP-LINK 的 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cudHAtbGluay5jb20uY24vcHJvZHVjdF8xNjQ5Lmh0bWw="><strong>TL-ST5008F</strong></a>, 二手价格还能接受, 且是三层管理型交换机, 可玩性更高.</p><hr><h2 id="MBP-万兆最终方案"><a href="#MBP-万兆最终方案" class="headerlink" title="MBP 万兆最终方案"></a>MBP 万兆最终方案</h2><h3 id="首选方案"><a href="#首选方案" class="headerlink" title="首选方案"></a>首选方案</h3><p>前面 <a href="#MBP-%E4%B8%87%E5%85%86%E5%8F%82%E8%80%83%E6%96%B9%E6%A1%88">MBP 万兆参考方案</a> 中一直存在些许顾虑: 一是 MBP 芯片和系统跟我不一样, 二是我需要双光口万兆网卡, 上述方案没有给到我是否兼容.</p><p>如果无法驱动该网卡, 可能需要借助 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9zbWFsbC10cmVlLmNvbS8=">SmallTree</a> 的驱动来解决. 然而, 这意味着我可能需要修改驱动的 PID 和 VID 才能正常工作, 这感觉有点复杂. 此外, 如果系统升级导致无法识别网卡, 我将不得不再次进行修改.</p><p>所以我更倾向于在 M1 系列的 MBP 上能够免驱的网卡.</p><p>好在了解了大致的方案以及对 <a href="#MBP-%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8">MBP 原生网卡驱动的了解</a> 后结合他人成功的案例, 最终敲定了首选方案:</p><ul><li>使用雷电扩展坞 (<strong>JHL7540</strong>) 方案(价格 345);</li><li>使用 Intel X520-DA2 双光口万兆网卡(82599 芯片, 价格 80);</li></ul><p>12V DC 电源和雷雳 3 线缆家里都用, 就不算到成本里面了.</p><blockquote><p>不要去搜 白苹果+X520, 价格会高出很多.</p></blockquote><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_B04TcIao.webp" alt="20241229154732_B04TcIao.webp"></p><p>看中的是具备下行雷雳接口, 可以组菊花链玩玩.</p><h3 id="备选方案"><a href="#备选方案" class="headerlink" title="备选方案"></a>备选方案</h3><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDExMzYxODEwODE5Ni5odG1s">ITGZ USB4.0 移动雷雳 4 硬盘盒</a>(239);</li><li>M2 NVME 转 PCIe 转接板(15);</li><li>12V DC 转 SATA 供电线(16);</li><li>Intel X520-DA2 万兆网卡 (80);</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_dogEZEPL.webp" alt="20241229154732_dogEZEPL.webp"></p><p>想对 2 种方案做个对比, 即使备选方案失败或达不到要求, 也能将硬盘盒给 Mac mini M2 使用.</p><h2 id="网络拓扑"><a href="#网络拓扑" class="headerlink" title="网络拓扑"></a>网络拓扑</h2><h3 id="现状"><a href="#现状" class="headerlink" title="现状"></a>现状</h3><p>我先梳理一下交换机和设备的总体情况:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/network-status-info-now.drawio.svg" alt="network-status-info-now.drawio.svg"></p><ul><li>Mac mini 2018 和 Mac mini M2 自带 10G 电口;</li><li>DS923+ 和 Mac mini 2018 组了万兆网络, 其他设备全部使用 2.5G 网口连接(10G 口不够);</li><li>Station 的 10G 电口跑步满万兆, 因为万兆网口不够, 只能跑在 2.5G 带宽下;</li><li>M920x 的 2 个 10G 光口通过 DAC 分别连接到电信和联通网络, 但也只是 2.5G;</li></ul><p>目前的现状总结一下就是: 具备万兆带宽能力的设备因为交换机的问题, 最高只能使用 2.5G 带宽, 万兆网络仅限于 NAS 和 Mac mini 2018, 无法满足其他设备的万兆需求.</p><h3 id="规划"><a href="#规划" class="headerlink" title="规划"></a>规划</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/network-status-info.drawio.svg" alt="network-status-info.drawio.svg"></p><ul><li>添加一台万兆交换机, 将书房所有支持万兆的设备互联(万兆交换机已确认为 TP-LINK 的 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cudHAtbGluay5jb20uY24vcHJvZHVjdF8xNjQ5Lmh0bWw="><strong>TL-ST5008F</strong></a>);</li><li>电信网络作为 <strong>万兆主干网</strong>, 电信后面 2.5G 交换机的 10G 光口需要连接到万兆交换机, 因为距离较短, 直接使用 M920x 上的 DAC 线缆连接;</li><li>DS923+ 和 Mac mini 2018 通过原来的光模块连接到万兆交换机, 新增 1 个光转电模块给 Mac mini M2 连接到万兆交换机, 3 台设备其他网口连接到联通的 2.5G 网络;</li><li>MBP 和 Station 配置 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL3d3dy5pbnRlbC1jaGluYS5jb20vaW5mbzcyLmh0bWw=">Intel X520-DA2</a> 网卡 , 分别连接到电信和联通万兆网络, 电信网络全设备万兆, 联通网络只有 MBP 和 Station 能够万兆直连;</li><li>M920x 原来剩下的一根 DAC 线缆连接连接万兆交换机, 与其他设备组成万兆局域网, 另一个万兆光口通过光纤+光模块连接联通后面 2.5G 交换机上的 10G 光口以接入联通网络;</li></ul><p>将电信作为万兆主干网, <strong>并将各设备的电信网卡作为第一优先级</strong>, 平时在各设备共享文件时就能用上万兆网络. 联通作为备用网络, 全设备最低也是 2.5G 速度.</p><h3 id="设备购买"><a href="#设备购买" class="headerlink" title="设备购买"></a>设备购买</h3><p>梳理之后所需要的设备清单为:</p><table><thead><tr><th>设备名称</th><th>规格</th><th>数量</th><th>单价</th><th>备注</th></tr></thead><tbody><tr><td><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cudHAtbGluay5jb20uY24vcHJvZHVjdF8xNjQ5Lmh0bWw="><strong>TL-ST5008F V2.0</strong></a></td><td>8 个 10G 光口</td><td>1</td><td>580</td><td>具备三层网络管理功能(需要修改 MTU 用)</td></tr><tr><td>光转电模块</td><td>万兆</td><td>1</td><td>120</td><td>Mac mini M2 使用</td></tr><tr><td>万兆网卡</td><td>Intel X520-DA2</td><td>2</td><td>80</td><td>MBP, Station 各一张</td></tr><tr><td>光纤</td><td>多模双芯 OM3, LC 型光纤接口</td><td>5</td><td>5</td><td><code>2 * 1 米, 1 * 2 米, 2 * 5 米</code> 共计 5 条</td></tr><tr><td>光模块</td><td>SFP-10G-SR</td><td>10</td><td>9</td><td>一条光纤 2 个光模块</td></tr><tr><td>雷电扩展坞</td><td>JHL7540 主控</td><td>1</td><td>345</td><td><a href="#%E9%A6%96%E9%80%89%E6%96%B9%E6%A1%88">MBP 万兆首选方案</a> 核心设备</td></tr><tr><td>ITGZ USB4.0 移动雷雳 4 硬盘盒</td><td>ASM2464PD 主控</td><td>1</td><td>239</td><td><a href="#%E5%A4%87%E9%80%89%E6%96%B9%E6%A1%88">MBP 万兆备选方案</a> 核心设备</td></tr><tr><td>M2 NVME 转 PCIe 转接板</td><td>-</td><td>1</td><td>15</td><td><a href="#%E5%A4%87%E9%80%89%E6%96%B9%E6%A1%88">MBP 万兆备选方案</a> 配件</td></tr><tr><td>12V DC 转 SATA 供电线</td><td>-</td><td>1</td><td>16</td><td><a href="#%E5%A4%87%E9%80%89%E6%96%B9%E6%A1%88">MBP 万兆备选方案</a> 配件</td></tr></tbody></table><p>这次升级的总成本为 <strong>1590</strong>, 比直接买一个高端成品万兆网卡便宜, 而且还能将主要设备全部升级成万兆, 感觉还是挺划算的.</p><p><strong>为什么不全部使用 DAC/AOC 线缆</strong></p><p>我的万兆设备都在书房, 最优解还是 DAC 线缆, 距离肯定没有问题(最长支持 10 米), 问题是 DAC 的线缆相对于光纤太粗太硬, 对于我现在的布线环境不是特别好处理, 而 AOC 线缆在 M920x 连接万兆光口时已经尝试过一次, 还是存在兼容性问题, 所以放弃了.</p><p>最主要的原因是想尝试一下光纤+光模块的方案, 顺带还可以学习了解下光纤相关的技术.</p><h2 id="施工环节"><a href="#施工环节" class="headerlink" title="施工环节"></a>施工环节</h2><h3 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h3><h4 id="加装散热"><a href="#加装散热" class="headerlink" title="加装散热"></a>加装散热</h4><p>给 MBP 和 Station 使用的 Intel X520-DA2 网卡还是有必要加上散热风扇的, Station 是开放型机箱, 没有可靠的风道可以散热, MBP 就更不用说了, 只能外置.</p><p>还好有几个剩余的 4x4 CM 风扇, 怼上去就可以了, 直接用 USB 供电:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_5d1B0sxN.webp" alt="20241229154732_5d1B0sxN.webp"></p><p>给 Station 用的网卡就麻烦点, 用的是原来给浪潮 X540 配置的风扇, 但是供电线太短了, 需要外接.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_AbELRDHT.webp" alt="20241229154732_AbELRDHT.webp"></p><p>用玩树莓派时购买的 2PIN 2.54 杜邦线来延长一下供电线, 套上热缩管做绝缘:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_DBPlTyiV.webp" alt="20241229154732_DBPlTyiV.webp"></p><p>给点电就转, 完美:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_QDMi9akU.webp" alt="20241229154732_QDMi9akU.webp"></p><p>上机效果:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_ogS0vWp9.webp" alt="20241229154732_ogS0vWp9.webp"></p><p>顺便给交换机加个 <code>80x80cm</code> 的散热风扇, 反正空余的散热风扇还有很多:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_xH9BEfD5.webp" alt="20241229154732_xH9BEfD5.webp"></p><h4 id="MBP-网卡部署"><a href="#MBP-网卡部署" class="headerlink" title="MBP 网卡部署"></a>MBP 网卡部署</h4><p>小巧的<strong>雷雳拓展坞</strong>, 自带一个散热片, 桌面下正好留有一个 12V DC 供电线, 省去了供电线.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_tnUUaqSL.webp" alt="20241229154732_tnUUaqSL.webp"></p><p>组合后的样子, 加了 2 根扎带固定一下, 省去了一个 3D 打印支架:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_jxzfqHSe.webp" alt="20241229154732_jxzfqHSe.webp"></p><p>最后安装好的样子, 平时基本上不用动它. 用一根雷雳 3 的线连接到 MBP, 剩下的下行雷雳接口还未使用, 反正不能用这个雷雳接口连接到 Mac mini M2 上组菊花链, 会存在争抢网卡的情况:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_kz1hANjj.webp" alt="20241229154732_kz1hANjj.webp"></p><hr><p><strong>下面是使用 USB4.0 移动硬盘盒:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_C5gKdVBT.webp" alt="20241229154732_C5gKdVBT.webp"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_161F7l0y.webp" alt="20241229154732_161F7l0y.webp"></p><p>说实话, 铝质的移动硬盘盒加上网卡确实比第一种方案要好看那么一点.</p><h4 id="部署交换机"><a href="#部署交换机" class="headerlink" title="部署交换机"></a>部署交换机</h4><p>使用扎带安装到桌底的导线槽下面, Micro USB Console 端口连接到 MBP 拓展坞上面.</p><p>这是部署完成后的样子, 光转电模块加装了散热鳍片, 下面的风扇稍微有点风就能带走热量(噪音完全可以忽略, 因为风扇支持可变电压, 现在给的电压保证能转就行, 夏天的话噪音应该会大一点).</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_GBqY52mh.webp" alt="20241229154732_GBqY52mh.webp"></p><h4 id="光纤布线"><a href="#光纤布线" class="headerlink" title="光纤布线"></a>光纤布线</h4><p>了解光纤和光模块的类型后, 直接买的多模双芯的 OM3 光纤, LC-LC 接口:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_71Q9MNM4.webp" alt="20241229154732_71Q9MNM4.webp"></p><p>二手的 Intel 多模光模块, 价格便宜:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_JnVZWyq7.webp" alt="20241229154732_JnVZWyq7.webp"></p><p>光纤与光模块连接, 还闹了个笑话, 不知道 LC 接口还有一个保护壳, 一直纳闷为啥插不稳. 无意中掰了下 LC 接口的头子, 发现居然是个保护壳 🥲.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_ZNIlNeEH.webp" alt="20241229154732_ZNIlNeEH.webp"></p><h3 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h3><h4 id="万兆交换机"><a href="#万兆交换机" class="headerlink" title="万兆交换机"></a>万兆交换机</h4><p>[TL-ST5008F V2.0安装手册1.1.2](<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9zZXJ2aWNlLnRwLWxpbmsuY29tLmNuL2Rvd25sb2FkLzIwMjExMC9UTC1TVDUwMDhG">https://service.tp-link.com.cn/download/202110/TL-ST5008F</a> V2.0安装手册 1.1.2.pdf)</p><div class="row"><embed src="https://service.tp-link.com.cn/download/202110/TL-ST5008F%20V2.0%E5%AE%89%E8%A3%85%E6%89%8B%E5%86%8C%201.1.2.pdf" width="100%" height="550" type="application/pdf"></div><h5 id="网口连接"><a href="#网口连接" class="headerlink" title="网口连接"></a>网口连接</h5><p><strong>TL-ST5008F</strong> 的 业务端口默认 IP 为 <code>192.168.0.1</code>, 所以修改为同网段的 IP 即可访问 Web 管理端.</p><p>连接任意网口, 然后设置 IP 地址:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_S3nJ9Svk.webp" alt="20241229154732_S3nJ9Svk.webp"></p><p>使用 <code>http://192.168.0.1/</code> 访问 Web 管理端:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_7Aai7tAn.webp" alt="20241229154732_7Aai7tAn.webp"></p><h5 id="Management-端口连接"><a href="#Management-端口连接" class="headerlink" title="Management 端口连接"></a>Management 端口连接</h5><p><strong>TL-ST5008F</strong> 还提供一个 Management 管理口, 默认 IP 地址： <code>10.20.30.40</code>. 当电脑连接交换机管理口时, 需设置电脑 IP 地址为：<code>10.20.30.x</code>(<code>x</code> 为 1-254 间任意值, 不能为 40), 子网掩码设置为 255.255.255.0.</p><h5 id="Console-端口连接"><a href="#Console-端口连接" class="headerlink" title="Console 端口连接"></a>Console 端口连接</h5><p>Console 端口用于和计算机或其他终端的串口相连以管理或配置交换机. <strong>TL-ST5008F</strong> 提供 1 个 Micro USB Console 端口和 1 个 RJ45 Console 端口, 两个端口 不能同时使用, 同时连接时只有 Micro USB Console 端口生效.</p><p>使用串口连接, 参数如下:</p><ul><li>波特率： TL-ST5012/TL-ST5008 波特率为 38400bps；</li><li>TL-ST5016F 波特率为 115200bps 数据位：</li><li>8 位 奇偶校验：无</li><li>停止位：1 位</li><li>数据流控制：无</li></ul><p>不知道是不是没有直接连接到 MBP(中间通过拓展坞链接), <code>ls /dev/cu.*</code> 并没有交换机的设备文件, 后面再尝试直连.</p><h5 id="tenlet-连接"><a href="#tenlet-连接" class="headerlink" title="tenlet 连接"></a>tenlet 连接</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_EcylLGlc.webp" alt="20241229154732_EcylLGlc.webp"></p><p>结束远程会话:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TL-ST5008F&gt;<span class="built_in">exit</span></span><br></pre></td></tr></tbody></table></figure><p>退出 telnet:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 在 Telnet 会话中, 按下 Ctrl + ] 键, 这将带您回到 Telnet 的命令提示符.</span><br><span class="line"># 在 Telnet 命令提示符下, 输入 quit 命令, 然后按回车键, 即可退出 Telnet 会话.</span><br><span class="line">telnet&gt; quit</span><br><span class="line"># 或者</span><br><span class="line">telnet&gt; close</span><br></pre></td></tr></tbody></table></figure><h5 id="远程管理"><a href="#远程管理" class="headerlink" title="远程管理"></a>远程管理</h5><p>也没有连接成功, 一直提示 <strong>设备未在线</strong>, 后面再处理.</p><h5 id="MTU-设置"><a href="#MTU-设置" class="headerlink" title="MTU 设置"></a>MTU 设置</h5><p><strong>按理说这个是实时生效的, 结果却是需要重启一下交换机才能生效</strong>.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_gIa5QUb9.webp" alt="20241229154732_gIa5QUb9.webp"></p><p><strong>2025-02-16 更新</strong></p><p>因为忘交电费导致家里停电, 来电之后发现 DS923+ 于交换机只能协商到 5G 速度, 后来查阅资料后将光转电模块的网口全部强制设置为 10G 速度, 这样就可以了.</p><blockquote><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuY2hpcGhlbGwuY29tL2ZvcnVtLnBocD9tb2JpbGU9MCZtb2Q9dmlld3RocmVhZCZvcmRlcnR5cGU9MSZ0aWQ9MjI0NDkxNg==">土味的家用万兆网络TP-LINK厂TL-ST5008F光口全万兆交换机开箱</a></p><p>交换机的默认设置是全10G协商，你可以改成Auto和10G、1000M、100M、10M依次。注意如果用光转电口模块接路由器的话吗，一定要把端口协商速度设置成1000M，不能用Auto！！！</p></blockquote><p>第二个问题是交换机本身联网的问题, 我将 <strong>TL-ST5008F</strong> 的系统时间获取方式修改为 <strong>从NTP服务器获取</strong>, 但是却无法联网, 另外云管理功能也无法使用, 应该是设备本身没有连接到互联网.</p><p>我进行了如下配置:</p><p><strong>修改管理口 IP</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250216223021_OKPNk3PA.webp" alt="20250216223021_OKPNk3PA.webp"></p><p><strong>添加静态</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250216173610_Zy1N0rWT.webp" alt="20250216173610_Zy1N0rWT.webp"></p><p>然后将管理口通过 RJ45 连接到路由器, 这样就可以通过 <code>192.168.31.58</code> 登录交换机 Web 控制台了.</p><h4 id="MBP"><a href="#MBP" class="headerlink" title="MBP"></a>MBP</h4><p><strong>系统识别到 PCI 设备</strong>:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_G3LckVis.webp" alt="20241229154732_G3LckVis.webp"></p><p><strong>X520</strong> 的总线类型是 <strong>PCIe 2.0 X8</strong>, PCle 2.0 协议的每一条 Lane 支持 <code>5 * 8 / 10 = 4 Gbps = 500 MB/s</code> 的速率, x4 一共就是 16Gbps, 完全满足 10Gbps 的带宽.</p><blockquote><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9ibG9nLjUxY3RvLmNvbS91XzM2MTk0NzYvNTE0NTAzMw==">PCIE2.0/PCIE3.0/PCIE4.0/PCIE5.0 接口的带宽、速率计算</a></p></blockquote><hr><p>网卡的雷雳总线信息, 最高有 20Gb/s 的速度(按理说 <strong>JHL7540</strong> 最高应该有 24 Gb/s):</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_qqWePtcX.webp" alt="20241229154732_qqWePtcX.webp"></p><p>以太网设备信息:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_aSBYnbPI.webp" alt="20241229154732_aSBYnbPI.webp"></p><ul><li><code>I225 LMVP</code> 是 CalDigit T4 的 2.5G 网卡;</li><li>然后是 X520-DA2 2 个光口网卡;</li><li>第四个是 USB 转 2.5G 网卡;</li><li>最后一个是另一个扩展坞上面的 1G 网卡;</li></ul><hr><p>最后是网络设置中的硬件信息:</p><p>网卡速度支持 <strong>1000base-SX</strong>(1 Gbps) 和 <strong>10Gbase-SR</strong>(10 Gbps), 不支持 2.5G, 而且 MTU 最高只能设置到 <code>2034</code>:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_OjgPuJcA.webp" alt="20241229154732_OjgPuJcA.webp"></p><hr><p><strong>下面是使用 USB4.0 的硬盘盒的硬件信息:</strong></p><p>在 MBP 识别出的速度是 20 Gb/s(安装的万兆网卡), 而在 Mac mini M2 上则是 40Gb/s(安装的 m.2 固态):</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_4l82CmVy.webp" alt="20241229154732_4l82CmVy.webp"></p><p><code>Intel X520-DA2</code> 网卡成功识别:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_RN2xdpyR.webp" alt="20241229154732_RN2xdpyR.webp"></p><h4 id="Mac-mini"><a href="#Mac-mini" class="headerlink" title="Mac mini"></a>Mac mini</h4><p>Mac mini 2018 和 Mac mini M2 的网口都是万兆电口, 能够顺利开启 9000 巨帧, 且支持 <code>100M/1000M/2.5G/5G/10G</code> 速度:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_BbX76D1A.webp" alt="20241229154732_BbX76D1A.webp"></p><h4 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h4><p><strong>万兆设备全部接入到电信网络, 首先需要调整一下网卡的优先级.</strong></p><p>M920x(<code>192.168.31.77</code>) 和 Station(<code>192.168.31.66</code>) 是 Ubuntu 系统, 直接在命令行下调整网卡优先级:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先查看一下路由表</span></span><br><span class="line">ip route</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设我需要调整网卡的优先级为: 10G.T &gt; 1G.T &gt; 10G.U &gt; 1G.U (2 个新增的 10G 网卡, 系统自带的 2 个 1G 网卡)</span></span><br><span class="line">sudo nmcli connection modify 10G.T ipv4.route-metric 100</span><br><span class="line">sudo nmcli connection modify 1G.T ipv4.route-metric 200</span><br><span class="line">sudo nmcli connection modify 10G.U ipv4.route-metric 300</span><br><span class="line">sudo nmcli connection modify 1G.U ipv4.route-metric 400</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启 NetworkManager</span></span><br><span class="line">sudo systemctl restart NetworkManager</span><br></pre></td></tr></tbody></table></figure><p>设置 <strong>MTU 为 9000</strong> 后, 测试一下在不分包的情况下整个链路是否能处理 9000 字节的数据包:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ping -M <span class="keyword">do</span> -s 8972 -c 2 192.168.31.66</span><br><span class="line">PING 192.168.31.66 (192.168.31.66) 8972(9000) bytes of data.</span><br><span class="line">8980 bytes from 192.168.31.66: icmp_seq=1 ttl=64 time=0.069 ms</span><br><span class="line">8980 bytes from 192.168.31.66: icmp_seq=2 ttl=64 time=0.048 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.31.66 ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 3048ms</span><br><span class="line">rtt min/avg/max/mdev = 0.033/0.049/0.069/0.012 ms</span><br></pre></td></tr></tbody></table></figure><blockquote><p>使用 <code>-M do</code> 参数时, ping 会设置 <code>Don’t Fragment</code> (DF) 标志, 要求整个数据包不能被分段. 如果数据包大于网络路径中的任何设备的 MTU, 传输就会失败并返回错误.</p></blockquote><p>比如:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ping -M <span class="keyword">do</span> -s 8973 -c 2 192.168.31.77</span><br><span class="line">PING 192.168.31.77 (192.168.31.77) 8973(9001) bytes of data.</span><br><span class="line">ping: <span class="built_in">local</span> error: message too long, mtu=9000</span><br><span class="line">ping: <span class="built_in">local</span> error: message too long, mtu=9000</span><br><span class="line"></span><br><span class="line">--- 192.168.31.77 ping statistics ---</span><br><span class="line">2 packets transmitted, 0 received, +2 errors, 100% packet loss, time 3077ms</span><br></pre></td></tr></tbody></table></figure><blockquote><p>macOS 上 <code>ping</code> 没有 <code>-M do</code> 参数, 正确的方式应该是: <code>ping -D -s 8972 192.168.31.66</code></p></blockquote><p>超过了 9000 直接报错.</p><p>还可以使用 <code>tracepath</code> 来获取整个链路的 MTU:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tracepath 192.168.31.77</span><br><span class="line"> 1?: [LOCALHOST]                      pmtu 9000</span><br><span class="line"> 1:  eab2b0924b06                                          0.400ms reached</span><br><span class="line"> 1:  eab2b0924b06                                          0.363ms reached</span><br><span class="line">     Resume: pmtu 9000 hops 1 back 1</span><br></pre></td></tr></tbody></table></figure><h4 id="DS923"><a href="#DS923" class="headerlink" title="DS923+"></a>DS923+</h4><p>因为在使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuc3lub2xvZ3kuY24vemgtY24vZHNtL2ZlYXR1cmUvdmlydHVhbF9tYWNoaW5lX21hbmFnZXI=">Synology Virtual Machine Manager </a>, 安装了 <strong>Open vSwitch</strong>, 在 Web 端修改 MTU 9000 只是修改物理网卡, 对应的虚拟网卡还是 1500, 所以需要在命令行下去修改:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示 Open vSwitch 的接口:</span></span><br><span class="line">root@DS923:~<span class="comment"># ovs-vsctl show</span></span><br><span class="line">ac42c09b-b421-4802-9883-0b2b9bb93cc9</span><br><span class="line">    Bridge <span class="string">"ovs_bond0"</span></span><br><span class="line">        Port <span class="string">"ovs_bond0"</span></span><br><span class="line">            Interface <span class="string">"ovs_bond0"</span></span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port <span class="string">"bond0"</span></span><br><span class="line">            Interface <span class="string">"eth1"</span></span><br><span class="line">            Interface <span class="string">"eth0"</span></span><br><span class="line">    Bridge <span class="string">"ovs_eth2"</span></span><br><span class="line">        Port <span class="string">"ovs_eth2"</span></span><br><span class="line">            Interface <span class="string">"ovs_eth2"</span></span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port <span class="string">"eth2"</span></span><br><span class="line">            Interface <span class="string">"eth2"</span></span><br></pre></td></tr></tbody></table></figure><p>万兆网卡对应的虚拟网卡是 <code>ovs_eth2</code>, 物理网卡 <code>eth2</code> MTU 已经修改到 9000, 只需要同步到虚拟网卡即可:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> ovs_eth2 mtu 9000</span><br></pre></td></tr></tbody></table></figure><p>查看结果:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip addr show ovs_eth2</span><br><span class="line">8: ovs_eth2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9000 qdisc noqueue state UP group default qlen 1</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure><p>最后是测试全链路是否都是 9000:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tracepath 192.168.31.2</span><br><span class="line"> 1?: [LOCALHOST]                      pmtu 9000</span><br><span class="line"> 1:  192.168.31.2                                         0.690ms reached</span><br><span class="line"> 1:  192.168.31.2                                         0.320ms reached</span><br><span class="line">     Resume: pmtu 9000 hops 1 back 1</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="效果测试"><a href="#效果测试" class="headerlink" title="效果测试"></a>效果测试</h2><h3 id="iperf3"><a href="#iperf3" class="headerlink" title="iperf3"></a>iperf3</h3><h4 id="非-MBP-设备"><a href="#非-MBP-设备" class="headerlink" title="非 MBP 设备"></a>非 MBP 设备</h4><p>除了 MBP, 其他设备不管是上传还是下载, 使用 iperf3 都能跑完 10G 带宽:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_DPk3ENs3.webp" alt="20241229154732_DPk3ENs3.webp"></p><h4 id="MBP-1"><a href="#MBP-1" class="headerlink" title="MBP"></a>MBP</h4><p>MBP 使用<a href="#%E9%A6%96%E9%80%89%E6%96%B9%E6%A1%88">万兆首选方案</a>, 因为 MTU 的原因, 上传能跑到接近 7G:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_PbfBPmmd.webp" alt="20241229154732_PbfBPmmd.webp"></p><p>下载能跑到 8G+:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_LGqe9sab.webp" alt="20241229154732_LGqe9sab.webp"></p><p>使用<a href="#%E5%A4%87%E9%80%89%E6%96%B9%E6%A1%88">万兆备选方案</a>, 上传能跑到 5.5G, 下载能跑到 6G:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_9hK4Hp57.webp" alt="20241229154732_9hK4Hp57.webp"></p><p>所以还是选择了第一种方案, 这个硬盘盒就留给 Mac mini M2 使用了. 简单的测试了一下, 读取速度比 M2 自带的 256G 要高出 500MB/s 左右, 写入速度反而低了 500MB/s 😅, 可能跟我的固态有关, 这个问题就不去深究了, Mac mini M2 缺的是磁盘空间, 这次算是补足了.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_7vOQitgd.webp" alt="20241229154732_7vOQitgd.webp"></p><h3 id="文件拷贝"><a href="#文件拷贝" class="headerlink" title="文件拷贝"></a>文件拷贝</h3><p>测试使用 SMB 协议挂载 DS923+ 的机械硬盘到本地, 然后直接拷贝到本机.</p><h4 id="Mac-mini-2018"><a href="#Mac-mini-2018" class="headerlink" title="Mac mini 2018"></a>Mac mini 2018</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_YcHRYBAK.webp" alt="20241229154732_YcHRYBAK.webp"></p><h4 id="MBP-2"><a href="#MBP-2" class="headerlink" title="MBP"></a>MBP</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_dtrseCUV.webp" alt="20241229154732_dtrseCUV.webp"></p><p>使用 <code>Disk Speed Test</code> 测试结果:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Xc9tf9Vi.webp" alt="20241229154732_Xc9tf9Vi.webp"></p><h3 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h3><p>在 MBP 下测试, 速度稳定在 <code>150MB/s</code> +</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Ntmpoc0j.webp" alt="20241229154732_Ntmpoc0j.webp"></p><h3 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h3><p>在 MBP 下测试, 稳定在 <code>120MB/s</code> +</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_ZAUBh8ng.webp" alt="20241229154732_ZAUBh8ng.webp"></p><h2 id="遗留问题"><a href="#遗留问题" class="headerlink" title="遗留问题"></a>遗留问题</h2><h3 id="MBP-MTU"><a href="#MBP-MTU" class="headerlink" title="MBP MTU"></a>MBP MTU</h3><p>因为网卡驱动的问题, MTU 无法修改到 9000, 因为 Intel 官方并没有为其万兆网卡提供官方的驱动支持, 好在 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9zbWFsbC10cmVlLmNvbS8=">Small Tree</a> 这家公司为 8259x 芯片的网卡编写了 macOS 驱动, 该驱动同样可以适配到任何使用 8259x 芯片的网卡上, 包括我手头这张 X520.</p><p>但是根据 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9zbWFsbC10cmVlLmNvbS9zdXBwb3J0L2Rvd25sb2Fkcy8xMC1naWdhYml0LWV0aGVybmV0LWRyaXZlci1kb3dubG9hZC1wYWdlLw==">Small Tree 提供的驱动</a> , 它的文档明确说明了该驱动只会在 Subsystem ID 为 <code>000A</code> 的网卡上运行, 因此如果使用 Subsystem ID 不满足要求的话, 是无法驱动的.</p><p>所以需要通过一些办法强行修改为 <code>000A</code>, 然后再安装 Small Tree 的驱动即可.</p><blockquote><p>还没有实际操作, 等有时间再尝试一下.</p></blockquote><p>修改方式参考:</p><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9tYWxhc2gubWUvMjAyMjA3L2ludGVsLXg1MjAtZHJpdmVycy1vbi13aW5kb3dzLWFuZC1tYWNvcy8=">Intel X520 网卡的 Windows / macOS 驱动方法</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS9wL2FrbDV3ZTdyLw==">给 MacOS 主机升级万兆网卡记录</a></li></ul><h3 id="拓展坞带宽"><a href="#拓展坞带宽" class="headerlink" title="拓展坞带宽"></a>拓展坞带宽</h3><p>因为给万兆网卡使用的雷雳拓展坞有 2 个雷雳接口, 原想让 MBP 通过一根雷雳 4 接口就可以把所有的设备全部带起来, 这些设备包括:</p><ul><li>2 台 4K 显示器;</li><li>新增的万兆网卡;</li><li>若干 USB 设备;</li></ul><p>但是因为雷雳 4 带宽受限, 导致部分 USB 设备无法正常使用, 只能再使用一个雷雳接口单独连接网卡的雷雳拓展坞了, 所以这次升级略带遗憾的是没有考虑到带宽的问题.</p><p>2023 年 9 月 12 日, 英特尔发布了雷雳 5 (Thunderbolt 5) 规范, 兼容最新的 USB4 V2 规格. 在对称模式下, 它提供 80Gbps 的上下行传输带宽, 是雷雳 4 的两倍；而在非对称模式下单向带宽最高可达 120Gbps, 是雷雳 4 的三倍.</p><p>而 Mac mini M4 提供 3 个雷雳 5 接口, 科技发展的真的太快了, 钱包已经跟不上了 😂.</p><h2 id="多台-Mac-互联"><a href="#多台-Mac-互联" class="headerlink" title="多台 Mac 互联"></a>多台 Mac 互联</h2><h3 id="雷雳技术"><a href="#雷雳技术" class="headerlink" title="雷雳技术"></a>雷雳技术</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_rHxPCdFF.webp" alt="20241229154732_rHxPCdFF.webp"></p><p>雷雳技术, 由英特尔开发, 是一种先进的连接标准, 它通过单一连接点提供电源、数据和视频信号. 雷雳技术的认证确保了电缆、电脑和配件满足强制性的最低要求, 以此保障不同设备和供应商之间的兼容性和互操作性. 对于终端用户来说, 基于雷雳技术的产品在连接各种配件时, 能够提供卓越的体验.<br>在 Apple Mac 系列产品中, 雷雳 3 和雷雳 4 端口实际上与 Intel 的雷雳 3 和雷雳 4 技术是相同的. Apple 常常为其软硬件产品赋予新的名称, 例如当 Mac 从 Intel 芯片转向 Apple 芯片时, 雷雳 3 的名称变更为“雷雳/USB4”, 尽管技术上仍然是雷雳 3. 而雷雳 4 (USB-C) 端口则是 Mac 上真正的雷雳 4 端口.<br>USB4 和雷雳 4 的主要差异在于, 尽管它们的最高带宽标准相同, 但雷雳 4 的最低性能标准要高于 USB4. 例如, USB4 的带宽可以低至 20Gbps, 充电功率可以低于 100W, 且连接显示器时不必满足雷雳 4 的标准.<br>雷雳 4 技术提供以下特性：</p><ul><li><strong>高带宽</strong>：40 Gbps 的带宽可用于数据和视频传输, 能够动态分配, 适合处理繁重的工作负载和快速文件传输.</li><li><strong>快充</strong>：支持高达 100W 的电源输出, 用于为笔记本电脑充电, 以及高达 15W 的电源输出, 用于为配件供电.</li><li><strong>丰富的显示选项</strong>：单个连接可以支持两台 4K 60 Hz 的显示器或一台 8K 60 Hz 的显示器.</li></ul><p>USB-C 是一种连接器类型, 它不同于之前广泛使用的 USB-A 连接器和 Apple 的 Lightning 连接器. 雷雳 3、雷雳 4、USB4、USB3.2、USB2.0 等多种协议都可以使用 USB-C 连接器. 通常情况下, 雷雳 3 和雷雳 4 仅提供 USB-C 接口, 而 USB4 和 USB3.2 则可能同时提供 USB-C 和 USB-A 接口及线缆, 或者提供 USB-C 接口搭配 USB-A 转接头. 要区分 USB-C 的接口或线缆, 需要查看产品的印刷标志或详细参数说明.</p><p>以 Apple 的 Lightning 接口为例, 最新的 iPhone 15 系列随机附送的 USB-C 接口线缆实际上遵循的是 USB 2.0 标准, 其传输速率仅为 480Mbps. 若要提升速度, 用户需额外购买 USB 3.2 线缆或雷雳 3、雷雳 4 线缆. 值得注意的是, 只有 iPhone 15 Pro 和 iPhone 15 Pro Max 支持 USB 3.2 第 2 代, 能够实现最高 10Gbit/s 的快速数据传输.</p><p>关于 USB 版本协议的命名, 确实有些复杂. 但只需记住, USB3.2 的 10Gbit/s 是 USB3 系列的高标准速度 (而 USB3.2 Gen2x2 的 20Gbit/s 由于兼容性问题, 通常不作为主流标准) . 这一速度常用于市面上常见的 SSD 固态移动硬盘传输. USB4 有 20Gbit/s 和 40 Gbit/s 两个版本, 而雷雳 3 和雷雳 4 均提供 40Gbit/s 的带宽. 一根雷雳 3 线缆通常能够满足大多数单一设备的连接需求.</p><p>雷雳 3 和雷雳 4 均标榜一个接口多种用途, 因此, 当一根线缆通过扩展坞连接多个设备时, 其带宽是动态分配的. 雷雳 4 相较于雷雳 3, 在数据传输带宽上提供了更高的分配, 并且在连接显示器的标准上也更为严格. 因此, 如果你追求最高的数据传输速度或者需要连接多个高标准设备, 那么选择雷雳 4 线缆将是更佳的选择. 当然, 除了线缆本身, 设备间的传输接口和设备本身的性能也会对整体传输效果产生影响.</p><blockquote><p>如果你想尝试一下 <strong>雷雳 5 80Gbps</strong> 的极限速度, 最新的 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuYXBwbGUuY29tLmNuL3Nob3AvYnV5LW1hYy9tYWMtbWluaS9tNA==">Mac mini M4</a> 或许是最好的选择.</p></blockquote><hr><h3 id="雷雳组网"><a href="#雷雳组网" class="headerlink" title="雷雳组网"></a>雷雳组网</h3><p>目前有 3 台 macOS 设备, 且都有空余的雷雳接口, 所以想着组个 20G 网络玩玩.</p><p>除了 Mac mini 2018 是雷雳 3 接口外, 其他 2 台全是雷雳 4 接口. 雷雳 3 理论也只有 22Gb/s 的带宽用于数据传输, 使用雷雳 4 端口+雷雳 4 数据线可以到达 32Gb/s 的理论传输速度.</p><p>下面是连接拓扑图:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mac-thunderbolt.drawio.svg" alt="mac-thunderbolt.drawio.svg"></p><p>最开始是将 M2 作为 MBP 和 Mac mini 2018 的中继节点来连接的, 这样至少能保证 MBP 到 M2 能达到雷雳 4 的速度, 但是实践后发现 M2 和 MBP 的雷雳连接经常断开, 连接方式是 MBP 通过雷雳 4 连接 CalDigit TS4 后再连接到 M2, 可能因为 CalDigit TS4 (2 台 4K 显示器, 其他接口基本上插满了) 挂的设备太多不稳定导致的.</p><p>所有才使用了上述连接方案, 且 Mac mini 2018 正好有 2 个空闲的雷雳接口, M2 还能空出一个雷雳 4 接口以便后续连接存储设备.</p><p>这样连接后, 只有雷雳 3 的 22Gb/s 理论速度了, 不过稳定最重要, 速度至少比 10G 网线快.</p><p>下面是具体的连接方式.</p><h3 id="雷雳网桥"><a href="#雷雳网桥" class="headerlink" title="雷雳网桥"></a>雷雳网桥</h3><blockquote><p>需要了解的一个前提是, 雷雳 4 宣称的 40Gbit/s 带宽是基于比特 (bit) 这一单位的. 然而, 在软件和系统显示的速度单位通常是字节 (Byte) , 其中 1 字节等于 8 比特. 因此, 当移动硬盘标榜其传输速度为 1000MB/s 时, 这实际上相当于 8000Mbit/s, 或者大约等同于 7.8Gbit/s.</p></blockquote><p>3 台 Mac 使用雷雳 3 连接后, 会自动在 <strong>网络</strong> 中创建一个名为 <strong>雷雳网桥</strong> 的接口, 然后只需要设置 IP 和子网掩码即可组网:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_ByFZlxZp.webp" alt="20241229154732_ByFZlxZp.webp"></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><h4 id="iperf3-1"><a href="#iperf3-1" class="headerlink" title="iperf3"></a>iperf3</h4><p>使用 <code>iperf3</code> 进行内网测试:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -f MB --omit 5 --time 20 -с 1.0.0.4</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_o9BLJ9Cd.webp" alt="20241229154732_o9BLJ9Cd.webp"></p><p><strong>22 Gb/s 等于 2750 MBytes/s</strong>, 那么大概只跑到了理论速度的 <strong>90%</strong>, 对于这个结果还是比较满意的.</p><h4 id="SMB-测试"><a href="#SMB-测试" class="headerlink" title="SMB 测试"></a>SMB 测试</h4><p>打开 Mac mini 上的文件共享来传输文件, 连接使用 Mac mini 上雷雳网桥分配的 IP, 打开 MBP 上的访达, 按 ⌘ + K 健 (或点选菜单“前往 &gt; 连接服务器“) , 输入 smb://1.0.0.4 , 以及对应的用户名密码就可以进行连接.</p><p><strong>MBP ==&gt; Mac mini 2018</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_UFoXi4OP.webp" alt="20241229154732_UFoXi4OP.webp"></p><p><strong>Mac mini 2018 ==&gt; MBP</strong></p><p>MBP 的 SMB 居然还没有被限速的 256GB Mac mini 快, 我想可能的原因是 <code>CalDigit TS4</code> 的带宽被占用太多了, 有时间用雷雳接口直连再试试.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_TlkoYPuV.webp" alt="20241229154732_TlkoYPuV.webp"></p><p>这就有点尴尬了, 4T 的 MBP 本地测试可以跑到 6000MB/s +:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_eCAhuv1U.webp" alt="20241229154732_eCAhuv1U.webp"></p><p>拖动一个大于 5GB 的文件 (顺序读取) , 在菜单栏 iStat Menus 的网络监控中可以看到, 传输速度可以到达 800MB/s, 等于 6.4 Gb/s. 回传文件 (顺序写入) 则是到了 600MB/s 左右. 直接连接 USB3.2 协议的移动硬盘, 跟这个速度相差不大, 但是直接连接雷雳 4 协议的移动硬盘, 是可以轻松超过 2000MB/s 的传输速度.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_C9YLZacD.webp" alt="20241229154732_C9YLZacD.webp"></p><h3 id="scp-1"><a href="#scp-1" class="headerlink" title="scp"></a>scp</h3><p>差一点突破 <code>200MB/s</code>:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_j5uObYLq.webp" alt="20241229154732_j5uObYLq.webp"></p><h3 id="未知状态"><a href="#未知状态" class="headerlink" title="未知状态"></a>未知状态</h3><p>如果使用自动添加的雷雳网桥的话, 虽然连接没有问题, 但是会出现 <strong>未知状态</strong> 的警告, 对于强迫症的人肯定不能忍, 所以翻看了一些 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9mb3J1bXMubWFjcnVtb3JzLmNvbS90aHJlYWRzL3Byb2JsZW0tc29sdmVkLWhlbHAtY29uZmlndXJpbmctdGh1bmRlcmJvbHQtc2hhcmluZy1mb3ItaW50ZXJuZXQtYmV0d2Vlbi10d28tbTEtbWFjcy4yMzg4MjQ5Lw==">教程</a> 来解决这个问题.</p><p>如果有多个雷雳接口, 连接其中一个雷雳接口的时候, 系统会自动创建一个 <strong>雷雳网桥</strong> 的接口, 这个接口里面包含了所有的雷雳接口, 如下图所示, M2 的 2 个雷雳接口全部被自动添加到了这个 <strong>雷雳网桥</strong> 中, 但是只有 <strong>雷雳 2</strong> 接口在使用.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_JD1hRYBF.webp" alt="20241229154732_JD1hRYBF.webp"></p><p>所以解决的办法就是删除这个 <strong>雷雳网桥</strong>, 然后自己创建一个雷雳接口:</p><p>点击 <strong>设置-&gt;网络</strong> 页面右下角的 <strong>…</strong>, 然后点击 <strong>管理虚拟接口</strong>:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_5Tpmknjm.webp" alt="20241229154732_5Tpmknjm.webp"></p><p>先删除这个接口, 然后新建一个雷雳接口:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Zp9WYM2X.webp" alt="20241229154732_Zp9WYM2X.webp"></p><p>这里需要确认是第几个雷雳接口, 可以查看系统信息:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Ihsgz8mi.webp" alt="20241229154732_Ihsgz8mi.webp"></p><p>所以上面就应该选择 <strong>雷雳 2</strong>, 创建之后稍等一会, 就会出现一个已自动分配 IP 的雷雳接口, 设置 IP 后即可显示正常:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_pVR4FkMO.webp" alt="20241229154732_pVR4FkMO.webp"></p><p>因为 Mac mini 2018 需要同时连接 Mac mini M2 和 MBP, 所以需要使用到雷雳网桥, 只需要将这个自动创建雷雳网桥中不需要的雷雳接口删除即可.</p><p>首先确认接口:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_LeVg4NCM.webp" alt="20241229154732_LeVg4NCM.webp"></p><p>修改 <strong>雷雳网桥</strong>, 移出多余的接口即可:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_enZ0kMhQ.webp" alt="20241229154732_enZ0kMhQ.webp"></p><hr><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这次将书房的主要设备全部升级到万兆, 从学习 MBP 万兆方案, 到准备工作中对一些基础知识的了解, 最后的安装部署调试, 再到这篇博客, 耗时一周时间.</p><p>升级后的效果非常显著. 除了 MBP 由于驱动问题 MTU 无法修改到 9000 以外, 其他设备的上传和下载速度都接近或达到了理论值.</p><p>尽管在升级过程中也遇到了一些问题, 但这些问题的解决方法和未来的改进方向都已经明确. 等到换成雷雳 5 的设备时, 又可以考虑 25G 甚至时 40G 的升级方案了.</p><p><strong>相关文章:</strong></p><ol><li><a href="/posts/15433dee.html">先导篇</a>：我的 HomeLab 概要;</li><li><a href="/posts/1c3b04a.html">硬件篇</a>：介绍我所拥有的硬件设备;</li><li><a href="/posts/e537d446.html">网络篇</a>：包括网络环境、异地组网与网络安全;</li><li><a href="/posts/b2341239.html">服务篇</a>：使用 Docker 搭建的各类服务;</li><li><a href="/posts/b808f350.html">数据篇</a>：包括数据存储方案、备份方案和数据恢复方案;</li><li><a href="/posts/273b6766.html">HomeLab数据同步：构建高效的数据同步网络</a></li><li><a href="/posts/6c25aa66.html">HomeLab数据备份：打造坚实的数据安全防线</a></li><li><a href="/posts/7e09e56.html">HomeLab 网络续集：升级 10G 网络-再战 10 年</a></li><li><a href="/posts/15433dee.html">NAT 内网穿透详解：揭秘网络连接背后的奥秘</a></li></ol></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar1.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">dong4j</div><div class="post-copyright__author_desc">岁月静好，诗酒趁年华🍺</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.dong4j.site/posts/7e09e56.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl(&quot;https://blog.dong4j.site/posts/7e09e56.html&quot;)">HomeLab 网络续集：升级 10G 网络-再战 10 年</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/wechat-pay.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/alipay.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.dong4j.site/posts/7e09e56.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=HomeLab 网络续集：升级 10G 网络-再战 10 年&amp;url=https://blog.dong4j.site/posts/7e09e56.html&amp;pic=https://cdn.dong4j.site/source/image/20241229154732_0ssj32bq.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div><div class="share-link follow"><div class="share-button" id="post-share-url" title="订阅" onclick="icat.showFollowBox()"><i class="anzhiyufont anzhiyu-icon-rss"></i></div></div></div></div></div><div class="submit-box display"><form id="follow" action="https://api.follow.it/subscription-form/b29peEszNWYzK3FQbEw2dVlITEJMZ2pQRXh2dWRLVDE3SC96eFhRaGwwQWprcXpYYUp0NGFWemxVZllXRGU4Nm4yenNGSzNpV3l0Z1EwQzBXQU5xTG9pZWNzVCt5YWptWUt6TXppRXVXMXZxQTRZOGQ0NUVDRlRFOUYxSHMzMEJ8NmlodHY1VWhDQVZBaG8wM0pSV2pXSjdTNGRWS1o0RDVZbE11KzlEeWhuZz0=/8" method="post" target="_blank"><div class="follow-it-form-subscribe" style="position:relative"><div class="heading"><h5 style="font-weight:700;text-align:center">订阅本站文章：</h5></div><div class="input-field"><input type="email" id="email-input" name="email" placeholder="填入您的邮箱地址" spellcheck="false" oninput="validateEmail()"></div><div class="submit-button"><button type="submit" id="submit-button" onclick="ga(&quot;send&quot;,&quot;event&quot;,&quot;Form&quot;,&quot;Submit&quot;,&quot;Affiliate&quot;)" style="font-weight:700;font-size:14px;text-align:center" disabled="">确认订阅</button></div></div></form><style>#email-input{font-size:16px;font-weight:700;padding:10px;border:2px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}#email-input:focus{outline:0}#email-input.valid{border-color:green}#email-input.invalid{border-color:red}</style><script>function validateEmail(){var s=document.getElementById("email-input"),a=document.getElementById("submit-button"),e=s.value;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?(a.disabled=!1,s.classList.add("valid"),s.classList.remove("invalid")):(a.disabled=!0,s.classList.add("invalid"),s.classList.remove("valid"))}</script></div><script>var icat={showFollowBox:function(){var s=document.querySelector(".submit-box");s.classList.contains("display")?s.classList.remove("display"):s.classList.add("display")}}</script><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.dong4j.site" target="_blank">司机带你开车</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/homelab-%E4%B8%AD%E5%B9%B4%E7%94%B7%E4%BA%BA%E7%9A%84%E5%BF%AB%E4%B9%90%E6%BA%90%E6%B3%89/"><span class="categoryes-punctuation"><i class="anzhiyufont anzhiyu-icon-inbox"></i></span>HomeLab:中年男人的快乐源泉<span class="categoryesPageCount">15</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/homelab/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>HomeLab<span class="tagsPageCount">17</span></a><a class="post-meta__box__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%87%E7%BA%A7/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>网络升级<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E4%B8%87%E5%85%86%E7%BD%91%E7%BB%9C/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>万兆网络<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E9%9B%B7%E7%94%B5%E6%8E%A5%E5%8F%A3/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>雷电接口<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/usb4-0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>USB4.0<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/jhl7440/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JHL7440<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/asm2464pd/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>ASM2464PD<span class="tagsPageCount">1</span></a></div></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook a2a_counter"></a><a class="a2a_button_x"></a><a class="a2a_button_threads"></a><a class="a2a_button_pocket"></a><a class="a2a_button_email"></a><a class="a2a_button_sms"></a><a class="a2a_dd" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.addtoany.com/share"></a></div></div><script async="" src="https://static.addtoany.com/menu/page.js"></script><script>var a2a_config=a2a_config||{};a2a_config.templates=a2a_config.templates||{},a2a_config.templates.email={subject:"来自 dong4j 的分享: ${title}",body:"一篇有意思的博文:\n${link}"},a2a_config.templates.sms={body:"给你分享一篇有意思的博客:\n${title}\n${link}"}</script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/385a05d5.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?1acgn5um" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">为 Hexo 博客引入智能对话：集成 AI 聊天机器人全攻略</div></div></a></div><div class="next-post pull-right"><a href="/posts/5eb89a7b.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?sec4gjsj" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">ZSH 启动慢，原来是这个问题！</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/91f73d3b.html" title="Ubuntu 使用备忘录：好记性不如烂笔头"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?mg3iapx4" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-15</div><div class="title">Ubuntu 使用备忘录：好记性不如烂笔头</div></div></a></div><div><a href="/posts/5fa20a9e.html" title="使用 Cloudflare 增强公网服务安全性的实践"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?eb4q02fh" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-13</div><div class="title">使用 Cloudflare 增强公网服务安全性的实践</div></div></a></div><div><a href="/posts/b0f649a0.html" title="Ubuntu 系统下 LCD4Linux 的安装与配置指南"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?po6ikv1j" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-12</div><div class="title">Ubuntu 系统下 LCD4Linux 的安装与配置指南</div></div></a></div><div><a href="/posts/ded15d16.html" title="捡垃圾的快乐：因为一张显卡组装了一台服务器"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?esvhtge1" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-10</div><div class="title">捡垃圾的快乐：因为一张显卡组装了一台服务器</div></div></a></div><div><a href="/posts/adc3ac9e.html" title="哪吒面板配置指南：自托管与安全防控详解"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?minsr8vl" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-21</div><div class="title">哪吒面板配置指南：自托管与安全防控详解</div></div></a></div><div><a href="/posts/8dc39439.html" title="宝宝动一下就知道：如何用树莓派和小米大方摄像头构建智能监控"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?ksqmoij9" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-29</div><div class="title">宝宝动一下就知道：如何用树莓派和小米大方摄像头构建智能监控</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" rel="external nofollow noreferrer">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" onerror="this.onerror=null,this.src=&quot;/img/friend_404.gif&quot;" alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/coding.gif" alt="status"></div></div><div class="author-info__description"><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">dong4j</h1><div class="author-info__desc">岁月静好，诗酒趁年华 🍺</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/dong4j" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fa-brands fa-github faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fa-solid fa-at faa-tada"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><div style="display:flex;align-items:center"><span>👋🏻 Hi，欢迎来到我的博客~</span><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mario.gif" width="40"></div><span>❓ 如有问题欢迎评论区交流！🎉</span><br><span>😫 页面异常？试试<kbd>Ctrl</kbd>+<kbd>F5</kbd>🙉</span><br><span>📧 如需联系：<a href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer"><b>发邮件给我吧 🚀</b></a></span><div id="welcome-info"></div><a id="my-card-info-btn" href="/subscribe/" data-pjax-state=""><i class="anzhiyufont anzhiyu-icon-rss"></i><span>订阅本站</span></a></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background:url(https://cdn.dong4j.site/source/image/63c02edf44033.webp) center center/100% no-repeat"></div><div class="back face" style="background:url(https://cdn.dong4j.site/source/image/645fa415e8694.webp) center center/100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MBP-%E4%B8%87%E5%85%86%E5%8F%82%E8%80%83%E6%96%B9%E6%A1%88"><span class="toc-number">2.</span> <span class="toc-text">MBP 万兆参考方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%93%81%E7%BD%91%E5%8D%A1"><span class="toc-number">2.1.</span> <span class="toc-text">成品网卡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DIY"><span class="toc-number">2.2.</span> <span class="toc-text">DIY</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%B7%E9%9B%B3-4-3-%E5%92%8C-USB4-0"><span class="toc-number">2.3.</span> <span class="toc-text">雷雳 4/3 和 USB4.0</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%B7%E9%9B%B3-4-3"><span class="toc-number">2.3.1.</span> <span class="toc-text">雷雳 4/3</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#USB4-0"><span class="toc-number">2.3.2.</span> <span class="toc-text">USB4.0</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%8E%A7%E8%8A%AF%E7%89%87"><span class="toc-number">2.4.</span> <span class="toc-text">主控芯片</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JHL7440"><span class="toc-number">2.4.1.</span> <span class="toc-text">JHL7440</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%84%E5%9E%8B%E5%8F%B7%E5%8C%BA%E5%88%AB"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">各型号区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ASM2464PD"><span class="toc-number">2.4.2.</span> <span class="toc-text">ASM2464PD</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%B9%E6%A1%88"><span class="toc-number">2.5.</span> <span class="toc-text">参考方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E7%9B%92%E8%BD%AC-PCIe"><span class="toc-number">2.5.1.</span> <span class="toc-text">硬盘盒转 PCIe</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80-300"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">方案一(300+)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C-600"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">方案二(600+)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%89-300"><span class="toc-number">2.5.1.3.</span> <span class="toc-text">方案三(300+)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%B7%E9%9B%B3%E6%89%A9%E5%B1%95%E5%9D%9E"><span class="toc-number">2.5.2.</span> <span class="toc-text">雷雳扩展坞</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9B%B7%E9%9B%B3%E6%A0%B8%E5%BF%83%E6%9D%BF"><span class="toc-number">2.5.2.1.</span> <span class="toc-text">雷雳核心板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80-500"><span class="toc-number">2.5.2.2.</span> <span class="toc-text">方案一(500+)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C-600-1"><span class="toc-number">2.5.2.3.</span> <span class="toc-text">方案二(600+)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E5%8F%A3-Or-%E5%85%89%E5%8F%A3"><span class="toc-number">3.1.</span> <span class="toc-text">电口 Or 光口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%87%E5%85%86%E5%85%89%E8%BD%AC%E7%94%B5%E6%A8%A1%E5%9D%97"><span class="toc-number">3.1.1.</span> <span class="toc-text">万兆光转电模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">优势</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">3.1.1.2.</span> <span class="toc-text">缺点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DAC-%E7%BA%BF%E7%BC%86"><span class="toc-number">3.1.2.</span> <span class="toc-text">DAC 线缆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AOC-%E7%BA%BF%E7%BC%86"><span class="toc-number">3.1.3.</span> <span class="toc-text">AOC 线缆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BA%A4-%E5%85%89%E6%A8%A1%E5%9D%97"><span class="toc-number">3.1.4.</span> <span class="toc-text">光纤+光模块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E6%8A%80%E6%9C%AF"><span class="toc-number">3.2.</span> <span class="toc-text">光纤技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.1.</span> <span class="toc-text">光纤类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A2%9C%E8%89%B2%E5%8C%BA%E5%88%86"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">颜色区分</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E8%B7%9D%E7%A6%BB"><span class="toc-number">3.2.1.2.</span> <span class="toc-text">传输距离</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%A4%E8%8A%AF%E7%9A%84%E7%9B%B4%E5%BE%84%E5%B7%AE%E5%BC%82"><span class="toc-number">3.2.1.3.</span> <span class="toc-text">纤芯的直径差异</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%89%E6%BA%90%E5%B7%AE%E5%BC%82"><span class="toc-number">3.2.1.4.</span> <span class="toc-text">光源差异</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E6%A8%A1%E5%8D%95%E8%8A%AF-%E5%8D%95%E6%A8%A1%E5%8F%8C%E8%8A%AF-%E5%A4%9A%E6%A8%A1%E5%8F%8C%E8%8A%AF"><span class="toc-number">3.2.1.5.</span> <span class="toc-text">单模单芯/单模双芯/多模双芯</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.2.</span> <span class="toc-text">光纤接口类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E6%A8%A1%E5%9D%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.3.</span> <span class="toc-text">光模块类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E7%B1%BB%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">封装类型分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E7%B1%BB%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">光纤类型分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%89%E6%A8%A1%E5%9D%97%E7%9A%84%E5%91%BD%E5%90%8D"><span class="toc-number">3.2.3.3.</span> <span class="toc-text">光模块的命名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E5%92%8C%E5%85%89%E6%A8%A1%E5%9D%97%E7%BB%84%E5%90%88"><span class="toc-number">3.2.4.</span> <span class="toc-text">光纤和光模块组合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E5%8D%A1"><span class="toc-number">3.3.</span> <span class="toc-text">网卡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MBP-%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8"><span class="toc-number">3.3.1.</span> <span class="toc-text">MBP 网卡驱动</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Intel-%E7%BD%91%E5%8D%A1"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">Intel 网卡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Mellanox"><span class="toc-number">3.3.1.2.</span> <span class="toc-text">Mellanox</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E5%8D%A1%E9%80%89%E6%8B%A9"><span class="toc-number">3.3.1.3.</span> <span class="toc-text">网卡选择</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Station-%E7%BD%91%E5%8D%A1"><span class="toc-number">3.3.2.</span> <span class="toc-text">Station 网卡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#M920x-%E7%BD%91%E5%8D%A1"><span class="toc-number">3.3.3.</span> <span class="toc-text">M920x 网卡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A8%E5%9E%8B%E5%B8%A7"><span class="toc-number">3.3.4.</span> <span class="toc-text">巨型帧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.3.5.</span> <span class="toc-text">使用建议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">3.4.</span> <span class="toc-text">交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E5%B1%82-Or-%E4%B8%89%E5%B1%82"><span class="toc-number">3.4.1.</span> <span class="toc-text">二层 Or 三层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A7%E5%93%81%E9%80%89%E6%8B%A9"><span class="toc-number">3.4.2.</span> <span class="toc-text">产品选择</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MBP-%E4%B8%87%E5%85%86%E6%9C%80%E7%BB%88%E6%96%B9%E6%A1%88"><span class="toc-number">4.</span> <span class="toc-text">MBP 万兆最终方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E9%80%89%E6%96%B9%E6%A1%88"><span class="toc-number">4.1.</span> <span class="toc-text">首选方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E9%80%89%E6%96%B9%E6%A1%88"><span class="toc-number">4.2.</span> <span class="toc-text">备选方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91"><span class="toc-number">5.</span> <span class="toc-text">网络拓扑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%B0%E7%8A%B6"><span class="toc-number">5.1.</span> <span class="toc-text">现状</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%84%E5%88%92"><span class="toc-number">5.2.</span> <span class="toc-text">规划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E8%B4%AD%E4%B9%B0"><span class="toc-number">5.3.</span> <span class="toc-text">设备购买</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%BD%E5%B7%A5%E7%8E%AF%E8%8A%82"><span class="toc-number">6.</span> <span class="toc-text">施工环节</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6"><span class="toc-number">6.1.</span> <span class="toc-text">硬件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E8%A3%85%E6%95%A3%E7%83%AD"><span class="toc-number">6.1.1.</span> <span class="toc-text">加装散热</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MBP-%E7%BD%91%E5%8D%A1%E9%83%A8%E7%BD%B2"><span class="toc-number">6.1.2.</span> <span class="toc-text">MBP 网卡部署</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">6.1.3.</span> <span class="toc-text">部署交换机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E5%B8%83%E7%BA%BF"><span class="toc-number">6.1.4.</span> <span class="toc-text">光纤布线</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">软件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%87%E5%85%86%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">6.2.1.</span> <span class="toc-text">万兆交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E5%8F%A3%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.2.1.1.</span> <span class="toc-text">网口连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Management-%E7%AB%AF%E5%8F%A3%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.2.1.2.</span> <span class="toc-text">Management 端口连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Console-%E7%AB%AF%E5%8F%A3%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.2.1.3.</span> <span class="toc-text">Console 端口连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#tenlet-%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.2.1.4.</span> <span class="toc-text">tenlet 连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-number">6.2.1.5.</span> <span class="toc-text">远程管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MTU-%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.2.1.6.</span> <span class="toc-text">MTU 设置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MBP"><span class="toc-number">6.2.2.</span> <span class="toc-text">MBP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mac-mini"><span class="toc-number">6.2.3.</span> <span class="toc-text">Mac mini</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Ubuntu"><span class="toc-number">6.2.4.</span> <span class="toc-text">Ubuntu</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DS923"><span class="toc-number">6.2.5.</span> <span class="toc-text">DS923+</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E6%B5%8B%E8%AF%95"><span class="toc-number">7.</span> <span class="toc-text">效果测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#iperf3"><span class="toc-number">7.1.</span> <span class="toc-text">iperf3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E-MBP-%E8%AE%BE%E5%A4%87"><span class="toc-number">7.1.1.</span> <span class="toc-text">非 MBP 设备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MBP-1"><span class="toc-number">7.1.2.</span> <span class="toc-text">MBP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D"><span class="toc-number">7.2.</span> <span class="toc-text">文件拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Mac-mini-2018"><span class="toc-number">7.2.1.</span> <span class="toc-text">Mac mini 2018</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MBP-2"><span class="toc-number">7.2.2.</span> <span class="toc-text">MBP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scp"><span class="toc-number">7.3.</span> <span class="toc-text">scp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rsync"><span class="toc-number">7.4.</span> <span class="toc-text">rsync</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%97%E7%95%99%E9%97%AE%E9%A2%98"><span class="toc-number">8.</span> <span class="toc-text">遗留问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MBP-MTU"><span class="toc-number">8.1.</span> <span class="toc-text">MBP MTU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%E5%9D%9E%E5%B8%A6%E5%AE%BD"><span class="toc-number">8.2.</span> <span class="toc-text">拓展坞带宽</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%8F%B0-Mac-%E4%BA%92%E8%81%94"><span class="toc-number">9.</span> <span class="toc-text">多台 Mac 互联</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%B7%E9%9B%B3%E6%8A%80%E6%9C%AF"><span class="toc-number">9.1.</span> <span class="toc-text">雷雳技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%B7%E9%9B%B3%E7%BB%84%E7%BD%91"><span class="toc-number">9.2.</span> <span class="toc-text">雷雳组网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%B7%E9%9B%B3%E7%BD%91%E6%A1%A5"><span class="toc-number">9.3.</span> <span class="toc-text">雷雳网桥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">9.4.</span> <span class="toc-text">测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#iperf3-1"><span class="toc-number">9.4.1.</span> <span class="toc-text">iperf3</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SMB-%E6%B5%8B%E8%AF%95"><span class="toc-number">9.4.2.</span> <span class="toc-text">SMB 测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scp-1"><span class="toc-number">9.5.</span> <span class="toc-text">scp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AA%E7%9F%A5%E7%8A%B6%E6%80%81"><span class="toc-number">9.6.</span> <span class="toc-text">未知状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">10.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/13e613ba.html" title="Proxmox VE 8.3 安装与配置指南"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?34n7j520" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Proxmox VE 8.3 安装与配置指南"></a><div class="content"><a class="title" href="/posts/13e613ba.html" title="Proxmox VE 8.3 安装与配置指南">Proxmox VE 8.3 安装与配置指南</a><time datetime="2025-02-17T11:52:42.000Z" title="发表于 2025-02-17 19:52:42">2025-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/91f73d3b.html" title="Ubuntu 使用备忘录：好记性不如烂笔头"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?mg3iapx4" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Ubuntu 使用备忘录：好记性不如烂笔头"></a><div class="content"><a class="title" href="/posts/91f73d3b.html" title="Ubuntu 使用备忘录：好记性不如烂笔头">Ubuntu 使用备忘录：好记性不如烂笔头</a><time datetime="2025-02-15T06:37:31.000Z" title="发表于 2025-02-15 14:37:31">2025-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5fa20a9e.html" title="使用 Cloudflare 增强公网服务安全性的实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?eb4q02fh" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="使用 Cloudflare 增强公网服务安全性的实践"></a><div class="content"><a class="title" href="/posts/5fa20a9e.html" title="使用 Cloudflare 增强公网服务安全性的实践">使用 Cloudflare 增强公网服务安全性的实践</a><time datetime="2025-02-12T16:17:11.000Z" title="发表于 2025-02-13 00:17:11">2025-02-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b0f649a0.html" title="Ubuntu 系统下 LCD4Linux 的安装与配置指南"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?po6ikv1j" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Ubuntu 系统下 LCD4Linux 的安装与配置指南"></a><div class="content"><a class="title" href="/posts/b0f649a0.html" title="Ubuntu 系统下 LCD4Linux 的安装与配置指南">Ubuntu 系统下 LCD4Linux 的安装与配置指南</a><time datetime="2025-02-12T11:35:45.000Z" title="发表于 2025-02-12 19:35:45">2025-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c78c58c7.html" title="树莓派与移远EC20 4G网卡集成及自动拨号方案解析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?56t44pn3" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="树莓派与移远EC20 4G网卡集成及自动拨号方案解析"></a><div class="content"><a class="title" href="/posts/c78c58c7.html" title="树莓派与移远EC20 4G网卡集成及自动拨号方案解析">树莓派与移远EC20 4G网卡集成及自动拨号方案解析</a><time datetime="2025-02-12T06:55:16.000Z" title="发表于 2025-02-12 14:55:16">2025-02-12</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://weibo.com/u/1884084142" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.facebook.com/dsj.array" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" size="50px"><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://space.bilibili.com/1835978167" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://v.douyin.com/iUqoRYwb/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener external nofollow noreferrer" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html">开往</a><a class="footer-item" title="服务状态" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.dev/status/services">服务状态</a></div></div><div class="footer-group"><div class="footer-title">项目</div><div class="footer-links"><a class="footer-item" title="Watt.Stack" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack">Watt.Stack</a><a class="footer-item" title="MIK" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit">MIK</a><a class="footer-item" title="macOS.dev" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev">macOS.dev</a><a class="footer-item" title="更多" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.ink:1024/">更多</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="我的装备" href="/equipment/">我的装备</a><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" rel="external nofollow noreferrer" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://nonbot.org/pledged/view/9e6e360a-4834-4dd0-b672-845baa0eb4de" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="Made By Humans" title="Made By Humans"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nonbot_pledged_logo.svg" alt="Made By Humans"></a><a class="github-badge" target="_blank" href="https://notbyai.fyi/cn/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="Not By AI" title="Not By AI"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/written-by-human-not-by-ai-white.svg" alt="Not By AI"></a><a class="github-badge" target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"></a><a class="github-badge" target="_blank" href="https://github.com/dong4j" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><footer-bar-left><div id="footer-bar-tips"><div class="copyright" style="display:flex;align-items:center;gap:10px">©2013 - 2025 By <a class="footer-bar-link" href="/" title="dong4j" target="_blank">dong4j</a><span class="indicator" id="indicator" style="display:inline-block;width:8px;height:8px;border-radius:50%;background-color:green;margin-left:0;animation:subtle-breathing 1.2s infinite;box-shadow:0 0 5px rgba(255,0,0,.8)"></span><span>在线人数:</span><span id="online_user" style="font-size:1em;font-weight:700">1</span></div></div><div id="footer-type-tips"></div></footer-bar-left><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/" title="蜀ICP备2025119258号">蜀ICP备2025119258号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">258</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">1094</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">18</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" rel="external nofollow noreferrer" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.dev/status/services" title="服务状态"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.dev" title="服务面板"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.dev" title="导航页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://chat.dong4j.site/" title="Mini-Chat"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.dong4j.dev"><span>小黑屋</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size:.88rem;color:#556363;font-weight:500;color:var(--anzhiyu-lighttext)">Java<sup>48</sup></a><a href="/tags/final/" style="font-size:.88rem;color:#678a45">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:.88rem;color:#c069bc">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:.88rem;color:#714840">finally<sup>2</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:.88rem;color:#197f3d">new关键字<sup>1</sup></a><a href="/tags/static/" style="font-size:.88rem;color:#704a0d">static<sup>1</sup></a><a href="/tags/super/" style="font-size:.88rem;color:#338051">super<sup>2</sup></a><a href="/tags/this/" style="font-size:.88rem;color:#a224a6">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:.88rem;color:#334e6b">二进制<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:.88rem;color:#2dbd22">数据类型<sup>4</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:.88rem;color:#b7640c">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:.88rem;color:#0b6ab5">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:.88rem;color:#0e1424">算法<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:.88rem;color:#000592">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:.88rem;color:#56b352">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:.88rem;color:#8a3737">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:.88rem;color:#a03027">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:.88rem;color:#0d6442">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:.88rem;color:#c753c8">错误处理<sup>2</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:.88rem;color:#c14483">面向对象<sup>6</sup></a></div></div><hr></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" rel="external nofollow noreferrer" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{function o(){HoldLog.apply(console,arguments)}var c=new Date("6/28/2018 00:00:00"),c=(now1.setTime(now1.getTime()+250),(now1-c)/1e3/60/60/24),c=["Hi there 👋，I'm dong4j, Welcome to my blog","岁月静好，诗酒趁年华🍺",`
        
      +========================================================+
      |  ██████╗  ██████╗ ███╗   ██╗ ██████╗ ██╗  ██╗     ██╗  |
      |  ██╔══██╗██╔═══██╗████╗  ██║██╔════╝ ██║  ██║     ██║  |
      |  ██║  ██║██║   ██║██╔██╗ ██║██║  ███╗███████║     ██║  |
      |  ██║  ██║██║   ██║██║╚██╗██║██║   ██║╚════██║██   ██║  |
      |  ██████╔╝╚██████╔╝██║ ╚████║╚██████╔╝     ██║╚█████╔╝  |
      |  ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝ ╚═════╝      ╚═╝ ╚════╝   |
      +========================================================+
        
        `,"已上线",Math.floor(c),"天","Use 「npx dong4j」 and find me."],e=["NCC2-036","调用前置摄像头拍照成功，识别为【绝顶大佬】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`
%c${c[0]} %c ${c[1]} %c ${c[2]} %c${c[3]}%c ${c[4]}%c ${c[5]}

%c ${c[6]}
`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${e[0]} %c ${e[1]} %c 
${e[2]} %c
${e[3]}
`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，绝顶大佬.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 dong4j 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async="" src="/anzhiyu/random.js"></script><script async="">(()=>{var n,o,r,a,i,e=new Date("6/28/2018 00:00:00"),l=new Date;setInterval(()=>{var t;if(l=new Date,i=l.getHours(),t=(l-e)/1e3/60/60/24,n=Math.floor(t),t=(l-e)/1e3/60/60-24*n,o=Math.floor(t),1==String(o).length&&(o="0"+o),t=(l-e)/1e3/60-1440*n-60*o,r=Math.floor(t),1==String(r).length&&(r="0"+r),t=(l-e)/1e3-86400*n-3600*o-60*r,a=Math.round(t),1==String(a).length&&(a="0"+a),document.getElementById("footer")){let e="";e=(i<18&&9<=i||null!=(t=document.querySelector("#workboard .workSituationImg"))&&(t.src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg",t.title="下班了就该开开心心的玩耍，嘿嘿~",t.alt="下班了就该开开心心的玩耍，嘿嘿~"),`本站居然运行了 ${n} 天<span id='runtime'> ${o} 小时 ${r} 分 ${a} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`),document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=e)}},1e3)})()</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(()=>{let t=document.querySelectorAll("#article-container .mermaid-wrap");if(0!==t.length){let e=()=>{window.loadMermaid=!0;let a="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(t).forEach((e,t)=>{let d=e.firstElementChild;e="%%{init:{ 'theme':'"+a+"'}}%%\n"+d.textContent;let n=mermaid.render("mermaid-"+t,e);"string"==typeof n?(t=n,d.insertAdjacentHTML("afterend",t)):n.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})};var d=()=>{window.loadMermaid?e():getScript("https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js").then(e)};anzhiyu.addGlobalFn("themeChange",e,"mermaid"),window.pjax?d():document.addEventListener("DOMContentLoaded",d)}})()</script><script>(()=>{let t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.dong4j.ink:1024",region:"",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};var o=()=>{"object"==typeof twikoo?setTimeout(n,0):getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(n)};let e=()=>{let o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo.dong4j.ink:1024",region:"",urls:[window.location.pathname],includeReply:!1}).then(t=>{o.textContent=t[0].count}).catch(t=>{console.error(t)})},n=()=>{t(),GLOBAL_CONFIG_SITE.isPost&&e()};o()})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async="" src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{let t=e=>e=""!==e&&150<(e=(e=(e=(e=e.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length?e.substring(0,150)+"...":e,n=t=>{let n="";if(t.length)for(let e=0;e<t.length;e++)n=(n=(n+="<div class='aside-list-item'>")+`<a href='${t[e].url}' class='thumbnail'><img data-lazy-src='${t[e].avatar}' alt='${t[e].nick}'><div class='name'><span>${t[e].nick} </span></div></a>`)+`<div class='content'>
        <a class='comment' href='${t[e].url}' title='${t[e].content}'>${t[e].content}</a>
        <time datetime="${t[e].date}">${anzhiyu.diffDate(t[e].date,!0)}</time></div>
        </div>`;else n+="没有评论";var e=document.querySelector("#card-newest-comments .aside-list");e&&(e.innerHTML=n),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(e)};var e=()=>{var e;document.querySelector("#card-newest-comments .aside-list")&&((e=saveToLocal.get("twikoo-newest-comments"))?n(JSON.parse(e)):(e=()=>{twikoo.getRecentComments({envId:"https://twikoo.dong4j.ink:1024",region:"",pageSize:6,includeReply:!0}).then(function(e){e=e.map(e=>({content:t(e.comment),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(e),10/1440),n(e)}).catch(function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"})},"object"==typeof twikoo?e():getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(e)))};e(),document.addEventListener("pjax:complete",e)})</script><script>var visitorMail="996@icu.com"</script><script async="" data-pjax="" src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/subscribe.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-today.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-calendar.css" media="print" onload="this.media=&quot;all&quot;"><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/automatic-redirection.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-welcome.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-comments.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-today.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-countdown.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-calendar.js"></script><script async="" data-pjax="" src="https://open.lightxi.com/unpkg/chinese-lunar@0.1.4/lib/chinese-lunar.js"></script><script async="" data-pjax="" src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script src="https://cdn.dong4j.site/source/static/custom.js"></script><script src="https://cdn.dong4j.site/source/static/geoip2-check.js"></script><script defer="" id="fluttering_ribbon" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="永不言败,勇往直前,砥砺前行,自强不息,笃行致远,厚德载物,持之以恒,奋发有为,志在四方,拼搏进取,实事求是，为人民服务,勤劳致富，共奔小康,爱国、创新、包容、厚德,敬业乐群，诚信友善,自强不息，厚德载物,以人为本，全面协调可持续发展,建设生态文明，构建和谐社会,坚持改革开放，推动科学发展,立党为公，执政为民,实现中华民族伟大复兴的中国梦" data-fontsize="15px" data-random="true" async=""></script><script src="//code.tidio.co/14aqpkwnauu3r5ngcmspfxwelvattym5.js" async=""></script><script>(()=>{{let i=!1,o=()=>{window.tidioChatApi.hide(),i=!1,document.body.style.position="relative",document.documentElement.style.overflow="auto"};var t=()=>{window.tidioChatApi.hide(),window.tidioChatApi.on("close",o)};window.tidioChatApi?window.tidioChatApi.on("ready",t):document.addEventListener("tidioChat-ready",t),window.chatBtnFn=()=>{window.tidioChatApi&&(i?o():(window.tidioChatApi.open(),window.tidioChatApi.show(),i=!0))}}})()</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media=&quot;all&quot;"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();var e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{let t=document.createElement("script");var a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async="" data-pjax="" data-prefix="busuanzi_value" src="https://cdn.dong4j.site/source/static/busuanzi.self.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><script data-pjax="" src="https://cdn.dong4j.site/source/static/github-calendar.js"></script><script data-pjax="">function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://github-calendar.dong4j.ink:1024/api?user=dong4j",["#ebedf0","#a2f7af","#6ce480","#54ad63","#469252","#31753c","#1f5f2a","#13531f","#084111","#032b09","#000000"],"dong4j")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style></body></html>