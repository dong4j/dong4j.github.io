<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>业务场景全解：如何应对视频集成挑战 | 司机带你开车</title><meta name="keywords" content="视频集成,监控数据流转,音视频传输协议,流媒体协议,播放协议,封装格式,视频编码,设备与连接方案,业务场景,视频接入平台,流媒体服务选型"><meta name="author" content="dong4j"><meta name="copyright" content="dong4j"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="业务场景全解：如何应对视频集成挑战"><meta name="application-name" content="业务场景全解：如何应对视频集成挑战"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="业务场景全解：如何应对视频集成挑战"><meta property="og:url" content="https://blog.dong4j.site/posts/a31e50a5.html"><meta property="og:site_name" content="司机带你开车"><meta property="og:description" content="本文全面介绍了视频集成解决方案，涉及监控数据流转、音视频传输协议对比、主流流媒体和播放协议、封装格式、主要视频编码、设备与连接方案、业务场景、视频接入平台选型以及流媒体服务选型等方面。文章通过多种业务场景的案例分析，展示了如何从现有方案中学习总结，以应对日益复杂的视频集成需求。此外，文章还对比了多个"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://api.dong4j.ink:1024/cover?gbk87fdq"><meta property="article:author" content="dong4j"><meta property="article:tag" content="dong4j, Java, Python, Golang, HomeLab, SpringBoot, 架构"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://api.dong4j.ink:1024/cover?gbk87fdq"><meta name="description" content="本文全面介绍了视频集成解决方案，涉及监控数据流转、音视频传输协议对比、主流流媒体和播放协议、封装格式、主要视频编码、设备与连接方案、业务场景、视频接入平台选型以及流媒体服务选型等方面。文章通过多种业务场景的案例分析，展示了如何从现有方案中学习总结，以应对日益复杂的视频集成需求。此外，文章还对比了多个"><link rel="shortcut icon" href="https://cdn.dong4j.site/source/image/favicon.ico"><link rel="canonical" href="https://blog.dong4j.site/posts/a31e50a5.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//hm.baidu.com"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="codeva-D4HsBP841S"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media=&quot;all&quot;"><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?61a751ac36d18d3ba293fe8ef3ec53eb",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script><script>let GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"与数百名博主无限进步",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"Local",mode:"online",switchBtn:!0,btnLink:"https://github.com/dong4j/blog-summary-assistant-server",randomNum:3,basicWordCount:1999,key:"84yT3Gkl6fp",Referer:"https://blog.dong4j.site:1024",apiUrl:"https://oneapi.dong4j.ink:1024/api/summary",audioUrl:"https://api.dong4j.ink:1024/audio"},diytitle:{enable:!0,leaveTitle:"兄台留步 🙏",backTitle:"兄台,别来无恙 👋"},LA51:{enable:!0,ck:"3Ki5mmyy6E5xtXuf",LingQueMonitorID:"3Ki5mmyy6E5xtXuf"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.dong4j.ink:1024",commentBarrageConfig:{enable:!0,maxBarrage:1,barrageTime:4e3,accessToken:"3a358103e6024cfb97546ec8f8408f5a",mailMd5:"3435c7a74ba1cad3f5d57b0b61b9b25cee221b97599c47b32edbdb36038c5411"},music_page_default:"nav_music",root:"/",preloader:{source:"car"},friends_vue_info:{apiurl:"https://friends.dong4j.ink:1024/"},navMusic:!0,mainTone:{mode:"both",api:"https://img2color.dong4j.ink:1024/api?img=",cover_change:!0},authorStatus:{skills:["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","😎 HomeLab 折腾专家","🏃 脚踏实地行动派","🧱 团队小组发动机","👶 尿不湿更换专家"]},algolia:{appId:"JFMEP32WXP",apiKey:"8e3acd038435dda872706ba6777a54b3",indexName:"blog-index",hits:{per_page:10},languages:{input_placeholder:"输入关键词后按下回车查找",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"该内容距离上次更新已经过了",messageNext:"天，文章内容可能已经过时。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!0},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: dong4j",link:"链接: ",source:"来源: 司机带你开车",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"mediumZoom",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!0,shortcutKey:{enable:!0,delay:100,shiftDelay:200},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"司机带你开车",title:"业务场景全解：如何应对视频集成挑战",postAI:"本文全面介绍了视频集成解决方案，涉及监控数据流转、音视频传输协议对比、主流流媒体和播放协议、封装格式、主要视频编码、设备与连接方案、业务场景、视频接入平台选型以及流媒体服务选型等方面。文章通过多种业务场景的案例分析，展示了如何从现有方案中学习总结，以应对日益复杂的视频集成需求。此外，文章还对比了多个主流的视频接入平台和流媒体服务器，如ZLMediaKit、Monibuca、SRS、EasyDarwin等，并详细介绍了WVP平台的架构、功能以及部署方法。",pageFillDescription:"1. 目的, 2. 领域知识, 2.1 监控数据流, 2.2 音视频传输协议对比, 2.3 协议接入, 2.3.1 GBx2FT28181, 2.3.2 ONVIF, 2.4 主流的流媒体协议, 2.5 播放协议对比, 2.6 主流的封装格式, 2.7 主要视频编码, 8. 常见的设备与连接方案, 2.8.1 监控系统中常见设备及作用, 2.8.2 监控系统中常见的连接方案, 2.8.3 视频分配器, 9. 术语解释, GBx2FT28181, RTMP, ONVIF, RTSP, GAx2FT 1400, FLV, HLS, WebRTC, IPC, NVR, ICC, IVSS, IVS, 视频流, 推流, 拉流, 3. 业务场景, 3.1 固定地点, 3.1.1 有线接入, 3.1.2 无线接入, 场景三 昆仑先锋变电站, 3.2 非固定地点, 3.2.1 类似解决方案, 3.2.1.1 Ehome 协议, 3.2.1.2 萤石协议, 3.2.1.3 DAHUA 协议, 3.2.1.5 JTT1078, 3.2.1.4 SDK, 4. 视频接入平台, 4.1 为什么需要一个视频接入平台, 4.2 什么是 GBx2FT28181 平台, 4.3 整体流程, 5. 流媒体服务选型, 5.1 ZLMediaKit, 5.2 Monibuca, 5.3 SRS, 5.5 EasyDarwin, 5.6 MediaMTX, 5.7 Nginx-rtmp-module, 6. 平台选型, 6.1 WVP, 6.2 LiveGBS, 6.3 AeroGBD, 6.4 EasyGBS, 6.5 NTV GBS, 6.6 AKStream, 6.7 LiteCVR, 7. WVP, 7.1 应用场景, 7.2 主要特性, 7.3 基础功能, 7.4 部署, 7.5 使用, 7.5.1 控制台, 7.5.2 视频墙, 7.5.3 设备管理, 7.5.4 拉流代理, 7.6 设备对接, 7.6.1 服务端, 7.6.2 客户端, 7.7 业务系统对接, 7.7.1 配电监测对接, 7.7.2 作业管控平台对接, 7.7.3 大屏对接, 7.7.4 小程序对接, 7.8 大屏展示, 8. 规划, 8.1 资源规划, 8.1.2 硬件资源, 8.1.2.1 磁盘, 1. 存储方式, 2. 容量评估, 3. 扩容方式, 8.1.2.2 服务器, 8.1.3 网络资源, 8.1.4 网络拓扑图, 方案二, 方案三, 脑图主要介绍了视频集成解决方案包括视频监控数据流转音视频传输协议对比协议接入主流的流媒体协议播放协议对比主流的封装格式主要视频编码常见的设备与连接方案术语解释业务场景视频接入平台流媒体服务选型以及平台选型等方面的内容通过这篇文章读者可以了解到视频集成常见的解决方案并从现有方案中学习总结以应对日益复杂的业务场景目的随着承接的项目逐渐增多且大多数项目都会涉及到视频监管需求为了避免重复调研开发加快项目上线速度这里汇总总结了多种业务场景并提出对应的解决方案一方面是作为技术知识积累让团队人员了解视频集成常见的解决方案二是可以从现有方案中学习总结以应对日益复杂的业务场景领域知识监控数据流视频监控数据流转主要经过下面个过程采集通过硬件设备采集音视频数据如果硬件设备支持还可以对数据进行粗加工比如添加水印推流设备端将音视频数据进行编码压缩后发送给流媒体服务器一般使用延迟最低流媒体处理负责转码传输数据分发拉流客户端请求流媒体服务器音视频资源流媒体服务器通过等流媒体传输协议传输数据解码设备端在拿到音视频数据后需要通过硬解码或软解码的方式播放音视频流音视频传输协议对比协议接入是摄像头主动向上级平台连接注册摄像头不需要有固定的外网只要求流媒体服务器有固定的地址即可协议是流媒体服务器主动去连接摄像头然后进行控制或视频调取因此在组网时需要流媒体服务器能够访问到摄像头的地址主流的流媒体协议名称推出机构传输层协议客户端使用领域互联网直播互联网直播互联网直播点播互联网点播播放协议对比协议比较全能既可以用来推送又可以用来直播其核心理念是将大块的视频帧和音频帧拆分然后以小数据包的形式在互联网上进行传输而且支持加密因此隐私性相对比较理想但拆包组包的过程比较复杂所以在海量并发时也容易出现一些不可预期的稳定性问题协议由公司主推格式极其简单只是在大块的视频帧和音视频头部加入一些标记头信息由于这种简洁在延迟表现和大规模并发方面都很成熟唯一的不足就是在手机浏览器上的支持非常有限但是用作手机端直播协议却异常合适苹果推出的解决方案将视频分秒秒的视频小分片然后用索引表进行管理由于客户端下载到的视频都是秒秒的完整数据故视频的流畅性很好但也同样引入了很大的延迟的一般延迟在秒秒左右相比于在和大部分手机浏览器上的支持都非常好播放协议优点缺点播放延迟成熟度高高并发无压力需集成才能播放优质线路下理论延迟最低高并发情况下表现不佳需集成才能播放手机浏览器支持度高延迟非常高主流的封装格式名称推出机构视频编码音频编码使用领域不支持几乎所有格式几乎所有格式下载影视支持等等互联网视频网站支持数字电视支持等互联网视频网站支持几乎所有格式几乎所有格式互联网视频网站支持下载影视主要视频编码名称推出机构推出时间目前使用领域研发中各个领域不温不火数字电视研发中不普及微软平台中国中国常见的设备与连接方案监控系统中常见设备及作用在监控系统中我们要使用很多的设备在此我们只讲述一些通用的设备摄像机这个是信号源是视频图像的来源摄像机也分很多种比如高速球红外枪机等一般来说摄像机后面接视频分配器网络高清摄像机需要接解码器后才能接视频分配器视频分配器是将摄像机出来的视频信号进行分配的一般是每路摄像机分配为路相同的视频信号将视频信号进行分配的目的是路信号给监控矩阵另一路给硬盘录像机视频分配器的输入端接摄像机输出端接硬盘录像机和监控矩阵硬盘录像机将视频信息进行录制的以备随时的调取视频资料硬盘录像机的输入端接分配器的输出端硬盘录像机的输出端一般接显示器监控矩阵这个设备是监控系统中核心设备是将摄像机过来经过分配器后的视频信号传输至终端显示设备上的监控矩阵的输入端接分配器的输出端监控矩阵的输出端接终端显示设备此外监控矩阵的附带品是控制键盘是用来控制视频切换的设备与监控矩阵直接相连即可终端显示是将视频信息展示的设备终端显示设备一般有显示器电视墙显示屏拼接屏监视器等终端显示设备的输入端接监控矩阵的输出端终端显示设备没有输出端的监控系统中常见的连接方案摄像机的输出端接视频分配器的输入端视频分配器的输出端分成个部分第一部分接硬盘录像机第二部分视频信号与第一部分完全相同接监控矩阵的输入端监控矩阵的输出端接终端显示设备此外监控矩阵和控制键盘用网线连接视频分配器术语解释安全防范视频监控联网系统信息传输交换控制技术要求是由公安部科技信息化局提出由全国安全防范报警系统标准化技术委员会公安部一所等多家单位共同起草的一部国家标准标准规定了城市监控报警联网系统中信息传输交换控制的互联结构通信协议结构传输交换控制的基本要求和安全性要求以及控制传输流程和协议接口等技术要求该标准适用于安全防范监控报警联网系统的方案设计系统检测验收以及与之相关的设备研发生产其他信息系统可参考采用联网系统应对前端设备监控中心设备用户终端进行统一编码该编码具有全局唯一性是实时消息传输协议的首字母缩写该协议基于是一个协议族包括基本协议及等多种变种是一种设计用来进行实时数据通信的网络协议主要用来在平台和支持协议的流媒体交互服务器之间进行音视频和数据通信开放式网络视频接口论坛是一个全球性的开放式行业论坛其目标是促进开发和使用基于物理的安全产品接口的全球开放标准创建了一个视频监控和其他物理安全领域的产品如何进行相互通信的标准是由博世安防系统和索尼于年创立的实时流传输协议是协议体系中的一个应用层协议由哥伦比亚大学网景和公司提交的标准该协议定义了一对多应用程序如何有效地通过网络传送多媒体数据与有共性的地方比如设备编码规范信令交互规范等定义的是视频联网定义的是图片传输应用最多的是传输图片及相关信息到后端设备平台以及视图库平台与平台对接等比如人脸抓拍机传输人脸图片人脸特征等到人脸应用平台车辆抓拍机传输车辆图片车牌信息到车辆卡口平台是的简称流媒体格式是随着的推出发展而来的视频格式由于它形成的文件极小加载速度极快使得网络观看视频文件成为可能它的出现有效地解决了视频文件导入后使导出的文件体积庞大不能在网络上很好的使用等问题是的动态码率自适应技术主要用于和终端的音视频服务包括一个的索引文件媒体分片文件和加密串文件名称源自网页即时通信英语的缩写是一个支持网页浏览器进行实时语音对话或视频对话的是网络摄像机的缩写是网络硬盘录像机的缩写是大华推出的一款智能物联综合管理平台设备对接人员布控停车管理消费管理动环管理动众多功能是大华的一款硬件设备将人脸人体车辆周界等众多边界智能融合一体的一体机系列具备球机等设备管理能够进行人脸识别车辆识别人脸比对实时布控等计算智能监控系统可以根据用户的需求在指定时间段内对目标进行实时监控您还可以使用仪表盘和手动新建自定义告警模板您可以根据实际情况自定义监控指标系统会按照设定的指标收集业务数据系统还可以根据业务需要对异常事件告警和事件进行分类统计和告警上报视频流在网络上视频数据按时间先后次序传输和播放的连续视频数据流推流推流是指利用推流客户端或者推流工具通过推流地址将协议的视频流推送到客户端拉流拉流是指通过互联网环境将视频流从指定平台或地址获取到视频观看客户端或设备业务场景固定地点有线接入和在同一个局域网有独立的端用于管理视频和录像提供视频流供内部系统和外部系统集成外网可通过公网或组网访问内部企业自建网络本地环境有较多的本地配置设备提供本地的视频监测第三方一般不允许从远端访问当地的视频针对于工作现场固定且能够方便布线的环境推荐使用传统方式由网络摄像机电源网络电缆的方案这种方式是最简单的一种方案且能够保证流媒体传输的稳定性解决方案因为和在一个局域网内因此只要支持的协议的都可以对接登录管理端进行摄像头设置登录添加协议接入可根据型号选择还可以替换成具有识别的具有视频存储功能的硬件设备比如针对于有线接入最重要的一点就是通过交换机将和划分到同一个局域网内这样才能识别内部系统直接从上拉取视频流外部系统需要通过访问拉取视频流关键点在内网业务系统在外网且业务系统能够通过访问或无线接入场景三昆仑先锋变电站针对于工作现场固定但无法通过有线宽带接入的环境推荐使用路由器接入方案解决方案一针对于摄像头数量较少的工作地点可以不部署直接将通过交换机和路由器一起组建一个局域网并通过上传视频流因为物联网卡的不固定因此需要与远端的通过的方式组建局域网才能接入关键地在内网在外网需要组建专网解决方案二针对摄像头数量较多的工作地点建议直接在项目部部署至少一台用于本地存储视频避免因为网络的不稳定性和数量较多的原因造成视频延迟的问题网络拓扑图与方案一一致因为路由器没有固定为了能够识别只能使用专网关键点在内网上级在外网需要组建专网解决方案三我们可以使用代替传统的路由器其他与方案二一致非固定地点针对于工作现场不固定的移动作业的业务场景一般使用摄像头采集视频因为卡一般没有固定公网故无法直接访问不同的厂商可能会有不同的平台用于对接比如海康威视的海康互联解决方案通过平台直接管理在上设置接入平台相关信息主动向平台注册设备信息平台管理接入的等支持协议的设备关键点待接入设备需要支持协议待接入设备能访问平台类似解决方案移动作业的业务场景一般选用带有网卡的设备接入公网不过带来的问题就是不固定这样就不能直接通过远端连接到为了解决这类问题需要一种主动注册的方案即设备主动向平台注册设备信息其中协议就是典型代表其底层基于和协议实现一些第三方厂商也会开发符合自身业务需求的其他协议下面介绍种比较常用的类似协议协议协议是海康威视基于移动监控场景下开发的设备主动注册私有协议支持实时预览录像回放对讲报警定位等功能协议不仅实现了里所有的功能并且在海康的不同类型设备上支持了其自定义的场合下的功能特性包括智能报警在低功耗场景下的设备控制及公网环境下的语音对讲指挥等场景都比协议更完善海康协议架构包括三个主要部分编码器传输网络和监控中心编码器负责将音视频信号进行压缩编码通过网络发送至监控中心编码器支持多种分辨率和码率调整满足不同场景需求传输网络基于网络支持等协议实现音视频数据的传输与通信监控中心接收来自编码器的音视频数据进行解码显示及存储等操作监控中心支持多级架构方便集中管理和调度特点高清画质采用先进的音视频压缩编码技术提供高清画质还原现场真实场景低延迟音视频传输延迟低满足实时监控需求双向通信支持监控中心与编码器之间的双向通信实现远程控制及报警通知等功能稳定性具备较高的稳定性和抗干扰能力保证长时间稳定运行安全性采用加密传输和认证授权机制确保数据安全和隐私保护萤石协议萤石协议是萤石云开发的一种设备主动注册的私有协议类似于国标协议和协议如果设备同时支持萤石协议和协议只能二选一协议大华主动注册协议是类似海康协议也是前端设备向中心平台和服务注册的一种主动注册协议对于前端网络无固定情况下对视频的联网视频上云等场景应用尤为适用即道路运输车辆卫星定位系统视频通信协议于年发布经过几年的沉淀逐渐应用于道路两客一危中高端定制化货运出租车运输等行业海康大华宇视乐橙等厂商的都可以完成在互动注册逻辑需要进行二次开发以上协议都能够解决设备无固定带来的问题但是除了协议外其他都是厂商的私有协议虽然在性能上优于协议但是需要特定的设备支持而协议广泛被各大厂商设备支持因此选择使用协议接入监控设备视频接入平台为什么需要一个视频接入平台在没有视屏接入平台之前每个项目都会根据业务场景选购不同厂商的流媒体服务器识别服务器等每个项目都需要经历一次视频对接的流程如果有了视频接入平台根据业务需求选购支持协议的在局域网内可以使用双方支持的任意协议完成配网与对接比如通过局域网接入到将等支持协议且能管理多台的设备或将直接接入视频接入平台统一在视频接入平台管理各种等设备为上层业务系统提供点播录像查看视频分屏展示等常规功能这里的视频接入平台相当与一个中介业务系统不再需要与各个设备厂商对接私有的视频接入协议而实施团队只需要将等设备进行正确的组网即可这样能够大大缩短项目上线时间简而言之视频接入平台对下能有效屏蔽不同厂商不同协议接入带来的复杂性对上能够兼容各种视频查看需求减少重复开发成本便于在一处统一管理视频设备从而加快项目进度什么是平台协议指的是国家标准公共安全视频监控联网系统信息传输交换控制技术要求该标准规定了公共安全视频监控联网系统的互联结构传输交换控制的基本要求和安全性要求以及控制传输流程和协议接口等技术要求是视频监控领域的国家标准协议信令层面使用的是协议流媒体传输层面使用的是实时传输协议协议因此可以理解为是在国际通用标准的基础之上进行了私有化定制以满足视频监控联网系统互联传输的标准化需求本文旨在说明在中增加对协议的支持使其可以与支持协议的设备进行通信与控制实现设备的注册保活以及流媒体的传输因为是国家标准协议目前市面上大多数视频设备都已支持协议比如大华海康等主流的监控厂商一个完整的平台通常由管理平台信令服务器流媒体服务器监控设备管理终端等几部分组成信令服务器是与网络中监控设备与管理终端之间进行通信的代理也是各级系统之间的代理信令服务器要有固定的地址或域名如果要面向公网服务还需要有公网由于是监控设备主动向信令服务器注册所以监控设备不需要有固定的监控设备注册到信令服务器上之后管理者通过向信令服务器发送指令来管理监控设备流媒体服务器是视频传输的代理该系统接受监控设备发送的视频流向视频调取方转发视频视频调取方可以是监控监控视频的用户第三方业务系统或者是上下级平台协议规定监控设备通过协议向流媒体服务器发送视频流但是没有约定流媒体服务器向其他方转发视频的协议因此在视频转发时具有更大的灵活性可以根据需要采用合适的协议转发视频国标接入服务包含设备管理视频流协议转换直播监控录像回放等功能名称功能描述设备管理支持常见设备品牌接入到萤石开放平台进行设备的统一管理远程控制视频流协议转换支持将视频协议转换为协议并进行分发直播监控支持主流直播标准协议以及协议轻松覆盖各种应用端小程序等录像回放支持多路视频同时回放倍速回访进度条控制云端录制等功能客户可按需实现回放控制对讲与设备控制可以通过调用语音对讲功能的实现语音对讲功能同时支持云台控制相关设备控制功能满足多项设备交互需求适用更多场景需求消息推送支持获取包括设备报警视频报警设备故障报警等类型的设备端事件上报存储与媒体处理在国标协议基础上支持设备抽帧获取重点图片数据进行存储并支持云端视频画面录制与存储保存业务场景中的重点音视频数据整体流程本地配置相关信息然后定时向信息服务器注册当前的设备信息比如设备设备类型等信令服务器会通过管理平台设置的相关信息进行设备验证比如编号密码是否正确等设备注册成功后将会展示在管理平台中可通过此平台维护设备的通道地理位置录像文件设备分组视频墙和流媒体服务器节点等信息终端设备需要查看实时视频时管理平台会通过流媒体服务器下发拉流动作流媒体服务器向设备发送拉流请求后设备使用协议向流媒体服务器推流流媒体服务器在接收到视频流后根据管理终端的需要可以转换成不同的视频流输出比如等因此可以满足绝大多数的业务场景规定应该包含控制信号和视频信号控制信号用于控制球机的移动因此只要是支持的设备不再需要单独对接厂商的去控制设备信令服务器还能够将设备的消息推送到管理平台比如离线设备监测到动作设备上线等而管理平台可以根据这些消息进行自定义业务处理流媒体服务选型是一套高性能的流媒体服务框架目前支持等流媒体协议支持三大平台和两大移动端平台主要功能基于开发避免使用裸指针代码稳定可靠性能优越支持多种协议支持协议互转使用多路复用多线程异步网络模式开发并发性能优越支持海量客户端连接代码经过长期大量的稳定性性能测试已经在线上商用验证已久支持全平台支持画面秒开极低延时毫秒内最低可达毫秒提供完善的标准可以作用或供其他语言调用提供完整的服务器可以免开发直接部署为商用服务器提供完善的以及支持丰富的业务逻辑打通了视频监控协议栈与直播协议栈对支持都很完善全面支持总结同时支持推拉流而且支持的推拉流推流端要支持的拉流播放端也要支持的播放器支持各种格式拉流使用者众多是一个开源的流媒体服务器开发框架适用于快速定制化开发流媒体服务器可以对接厂商作为回源服务器也可以自己搭建集群部署环境丰富的内置插件提供了流媒体服务器的常见功能例如视频录制等除此以外还内置了后台界面方便观察服务器运行的状态也可以自己开发后台管理界面通过方式获取服务器的运行信息提供了可供定制化开发的插件机制可以任意扩展其功能主要功能针对流媒体服务器独特的性质进行的优化充分利用的的性质对大量的连接的读写进行合理的分配计算资源以及尽可能的减少内存操作使用对象池减少的时间专为二次开发而设计基于语言开发效率更高独创的插件机制可以方便用户定制个性化的功能组合更高效率的利用服务器资源功能强大的仪表盘可以直观的看到服务器运行的状态消耗的资源以及其他统计信息用户可以利用控制台对服务器进行配置和控制点击右上角菜单栏里面的演示可以看到演示控制台界面纯编写不依赖不依赖或者其他运行时部署极其方便对服务器的要求极为宽松总结支持自定义插件扩展新功能非常方便缺点就是部分插件收费是一个简单高效的实时视频服务器支持等多种实时流媒体协议作为当前非常普遍的运营级解决方案具备非常全面的功能包括集群协议网关功能等主要功能如下定位是运营级的互联网直播服务器集群追求更好的概念完整性和最简单实现的代码提供了丰富的接入方案将流接入包括推送到推送到拉取流到还支持将接入的流进行各种变换譬如将流转码流截图转发给其他服务器转封装成流转封装成转封装成转封装成录制成包含支大规模集群如业务的关键特性譬如多级集群源站集群虚拟服务器无中断服务集群还提供丰富的应用接口包括回调安全策略接口测速在源站和集群中都得到了广泛的应用总结支持推流早期版本支持推流不知道为何移除了支持部分格式拉流不支持拉流使用者众多是由国内开源流媒体团队维护和迭代的一整套开源流媒体视频平台框架开发从年月创建并发展至今包含有单点服务的开源流媒体服务器和扩展后的流媒体云平台架构的开源框架开辟了诸多的优质开源项目能更好地帮助广大流媒体开发者和创业型企业快速构建流媒体服务平台更快更简单地实现最新的移动互联网安卓微信流媒体直播与点播的需求尤其是安防行业与互联网行业的衔接主要功能基于语言开发维护支持三大系统平台部署支持推流分发推模式转发支持拉流分发拉模式转发服务端录像检索回放支持关键帧缓存秒开画面后台管理分布式负载均衡总结只支持推拉流默认端口不支持其他格式拉流如果仅仅是监控摄像头使用非常方便有个网页管理后台不会过期可以一直用缺点是功能单一只能在他的后台查看视频流或者用播放器播放上述种流媒体服务对比以前称为是一个即用型零依赖的实时媒体服务器和媒体代理允许发布读取代理和记录视频和音频流它被设想为一种媒体路由器将媒体流从一端路由到另一端主要功能将直播流发布到服务器从服务器读取直播流流自动从一种协议转换为另一种协议在不同的路径中同时提供多个流将流记录到磁盘验证用户身份使用内部或外部身份验证将读取器重定向到其他服务器负载平衡通过查询和控制服务器在不断开现有客户端连接的情况下重新加载配置热重载读取兼容的指标当客户端连接断开连接读取或发布流时运行挂钩外部命令与和兼容不需要任何依赖项或解释器它是单个可执行文件总结同时支持推拉流拉流还支持两种方式最新版本还支持了方式推出来的可以直接嵌入个网页播放没有任何依赖如果希望直接在网页中播放无依赖强烈推荐用本身是一个非常出色的服务器是非常好的音视频解决方案这两个东西通过一个的模块组合在一起即可以搭建一个功能相对比较完善的流媒体服务器这个流媒体服务器可以支持和主要特性支持支持点播可将直播视频分段存储支持视频编解码音频编解码支持命令内嵌支持回调可使用对直播进行删除录播等控制具有强大的缓冲功能可确保在效率与码率间达到平衡支持多种操作系统总结只支持推拉流默认端口不支持其他格式拉流功能极其单一不推荐平台选型是一个开源的基于标准实现的开箱即用的网络视频平台负责实现核心信令与设备管理后台部分支持穿透支持海康大华宇视等品牌的接入支持国标级联支持将不带国标功能的摄像机直播流直播推流转发到其他国标平台流媒体服务基于夏楚播放器使用前端页面基于进行修改官网地址主要特性实现标准的信令兼容常见的品牌设备比如海康大华宇视等品牌的以及平台支持将国标设备级联到其他国标平台也支持将不支持国标的设备的图像或者直播推送到其他国标平台前端完善自带完整前端页面无需二次开发可直接部署使用完全开源且使用许可协议保留版权的情况下可以用于商业项目支持多流媒体节点负载均衡国标流媒体服务器软件支持设备平台注册接入向上级联第三方国标平台可视化的页面管理页面源码开源支持云台控制设备录像检索回放支持语音对讲用户管理多种协议流输出实现浏览器无插件直播官网地址主要特性国标流媒体服务软件支持各个版本的协议提供用户管理及可视化页面管理提供设备状态管理可实时查看设备是否掉线等信息实时流媒体处理转设备状态监测云台控制录像检索回放提供等多种协议流输出对外提供服务器获取状态信息控制等接口企业私有云部署支持基于协议标准提供标准接入标准媒体标准应用标准共享的国标服务能力能够接入符合的视频监控平台硬盘录像机摄像机无人机机器人等市面各类厂家设备能够实现按照方式进行国标共享输出提供实时视频下级前端录像系统管理等应用功能具有联网能力强开放兼容易用便捷等的特点适用于智慧城市雪亮工程行业视频联网等各行业视频标准联网接入场景主要特性接入性能强单套支持接入个下级平台万路设备可集群扩容共享性能强单套支持个上级共享推送可集群扩容视频并发高单套支持路视频并发可集群扩容解码性能客户端最大支持路视频同屏播放视频不低于路视频开流实时视频开流速度小于秒前端下级录像调阅开流小于秒录像开流下级平台录像开流小于秒用户并发单套不低于个用户并发使用部署安装一台起步一键安装部署单次标准服务器部署时间小于分钟国标视频云服务提供流转发服务负责将设备平台推送的流转成流然后提供多种格式进行分发实现浏览器手机浏览器微信客户端等各种终端无插件播放主要特性可视化页面提供用户管理及可视化页面管理及录像检索回放设备状态管理提供设备状态管理可实时查看设备是否掉线等信息实时流处理实时流媒体处理转提供音视频转码能力云台控制基于动态组网服务创建智能网络按需选择需要组网的网络成员实现点点互联多种流输出提供等多种协议流输出接口对外提供服务器获取状态信息控制接口是一款成熟功能完善产品化程度很高的服务平台从年推出以来迅速获得各技术平台报道转发因其界面简洁舒畅操作简单获得众多大小用户青睐提供云服务和独立部署两种使用模式云服务方式注册账号就可以使用而且提供免费流量供使用独立部署方式需要自己购买设备安装该软件官网地址视频监控国标平台主要功能视频监控设备远程接入远程管理云台控制和视频调阅云端录像和回看支持各型号国标摄像头和硬盘录像机支持各类支持直播推流摄像机兼容协议视频接入分析服务用于各种智慧应用场景重新定义监控视频价值在网页小程序业务平台中无插件播放提供播出地址支持视频编码更省流量更流畅多级平台级联对接实现上下级平台监控视频融合汇聚是一套全功能的软接口平台软指的是软件定义的经过长达一年半的开发测试与调优已经具备了一定的使用价值在可靠性实用性方面都有着较为不错的表现同时因为是一套完全开源的软件产品在众多网友的一起加持下的安全性也得到了验证集成了作为其流媒体服务器支持对的集群管理通过流媒体治理组件可以将分布在不同服务器的多个集群起来统一管理统一调度官网地址主要特性控制台流媒体服务性能监控视频广场多视频设备管理录像计划本地录制录像回放和本地录制视频推流视频拉流视频本地录制云台功能平台支持国标协议等以及海康大华海康等厂家私有协议也支持标准的开发接口可集成至移动端小程序其他业务平台播放并提供分享链接和地址可直接在浏览器播放综合对比下来最终选择平台作为视频接入平台主要原因如下平台全部开源且开源协议友好平台的功能较为完善且有整套平台包括管理端服务和流媒体服务流媒体服务使用业内较为流行且社区活跃的管理端使用开发可以快速的进行二次开发是一个基于标准实现的开箱即用的网络视频平台负责实现核心信令与设备管理后台部分支持穿透支持海康大华宇视等品牌的接入支持国标级联支持将不带国标功能的摄像机直播流直播推流转发到其他国标平台项目地址文档地址应用场景支持浏览器无插件播放摄像头视频支持摄像机平台等设备接入支持国标级联支持等视频流转发到国标平台支持等推流转发到国标平台主要特性实现标准的信令兼容常见的品牌设备比如海康大华宇视等品牌的以及平台支持将国标设备级联到其他国标平台也支持将不支持国标的设备的图像或者直播推送到其他国标平台前端完善自带完整前端页面无需二次开发可直接部署使用完全开源且使用许可协议保留版权的情况下可以用于商业项目支持多流媒体节点负载均衡基础功能视频预览云台控制方向缩放控制视频设备信息同步离在线监控录像查询与回放基于暂不支持快进操作无人观看自动断流支持和两种国标信令传输模式集成界面不需要单独部署前端服务直接利用内置文件服务部署随一起部署支持平台接入针对大平台大量设备的情况进行优化支持检索通道筛选支持自动配置媒体服务减少因配置问题所出现的问题支持启用多端口模式提高模式下媒体传输性能支持通道是否含有音频的设置支持通道子目录查询支持国标流传输模式支持直接输出多种协议流地址支持国标网络校时支持公网部署支持与分开部署支持播放格式的流需要将设为报警信息处理支持向前端推送报警信息部署平台由管理平台服务和流媒体服务组成关系图如下使用实现了协议便于二次开发使用存储结构化数据使用存储注册信息流媒体服务器使用开源的高性能实现使用服务用于存储视频并提供历史视频查看平台部署可是使用种方式一是使用源码自行编译部署二是使用已有镜像一键部署但是官方镜像最后更新与年前因此最好的方式是使用源码编译部署不过为了可移植性和方便快捷的安装部署这里考虑使用源码打包为镜像安装部署具体过程后续再完善补充数据流向实时视频流业务系统向管理平台发起观看实时视频的请求接收到请求后根据设备编码和通道号查询设备是否存在然后将编码成视频流协议并调用流媒体服务器进行视频流转码流媒体服务器接收到请求后转换成能够直接播放的视频流地址比如等格式历史视频流媒体服务器会将实时视频全部存储到服务器供业务端查询历史视频流媒体服务器会将历史视频存储到执法记录仪等支持的设备可以将本地的历史视频传输到的服务器使用目前已在公司内部服务器使用最新的源码安装部署了一套平台访问地址为登录账号与密码控制台能够展示服务器主要资源的使用情况以及设备接入数量视频墙自带个视频窗口如果需要更多窗口需要二开设备管理目前已接入智慧工地的公司内部的和一个实时视频在点播视频后会将视频存储到服务器也可以查看和下载或存储卡中的历史视频云台控制另一个有用的功能是电子地图不过目前没有页面可以直接设置如果后期需要可以进行二开拉流代理可以将不具备协议但是又固定的视频设备接入到此平台设备对接服务端设备接入主要是需要在设备上配置上级也就是的信息只有信息一致的情况才可以注册成功设备注册成功后打开国标设备可以看到新增加的设备主要有以下字段需要配置本机不要使用除非你对项目及其熟悉服务监听的端口宜采用统一编码的前十位编码服务服务密码配置信息在如下位置客户端客户端设置基本一致这里以大华为例因为与平台部署在同一个局域网内因此配置的服务器为局域网如果通过公网访问服务器则配置为公网固定业务系统对接前面已经讲过可以作为视频接入层负责支持协议的视频设备的接入管理且能够为上层业务提供多种格式的视屏流比如业务系统只需要调用获取视频流地址即可接入视频避免了对接多家厂商设备的烦恼且如果后期更换了不同厂商的视频设备业务系统不需要任何修改只需要在平台中接入即可在原有视频设备组网方式不变的情况下下面个系统可以根据自身业务情况选择是否将现有视频接口使用替换配电监测对接配电监测目前已使用代替原来的作为流媒体服务器并将中的录像使用推送到流媒体服务器并转换成格式然后由前端的播放器播放目前支持实时预览和历史回看因为现在已经将接入到平台因此只需简单的修改即可接入视频在配电监测平台将摄像头的设备号与通道号与摄像头绑定通道编号设备编号唯一确认可使用的通道在平台中根据摄像头的设备号与通道号获取实时视频流地址一次返回所有能使用的方便前端各种播放器对接在平台中根据摄像头的设备号与通道号获取录像列表此接口用于返回或本地存储卡上的录像列表使用录像播放接口播放最近的录像根据录像开始时间和结束时间点播录像作业管控平台对接作业管控平台对接同样使用配电监测对接的逻辑主要使用以下个接口根据设备号和通道号获取实时播放根据设备号和通道号获取录像列表根据设备号通道号录像开始时间和录像结束时间点播录像如果需要对球机进行控制还需要额外接入球机控制接口大屏对接大屏对接分为两种情况大屏使用业务系统的接口获取实时视频或历史回看大屏直接使用的接口上面种方式可以根据业务需求自行选择不过如果需要使用第二种方式前端需要确定设备号和通道号是否正确小程序对接小程序对接和大屏对接一样种方式都支持不过推荐使用第一种方式因为业务系统会维护设备号和通道号小程序只需要使用自身的业务即可获取视频播放器推荐使用协议支持和总的来说业务系统接入视频接口工作量较小且对现有业务系统影响较小新的业务可以直接对接大屏展示平台自带分屏展示功能但是最多只支持分屏如果需要增加分屏显示目前有种方式对进行二次开发增加分屏数量在业务大屏是直接开发分屏页面因为分屏逻辑相对简单无非就是在一个页面上多放几个播放器而已因此上述种方式都能够快速实现所以可以根据自身业务需求自行选择比较推荐的做法在调度中心使用平台进行分屏展示业务大屏使用自己的分屏功能展示多个视频规划接管所有视频监控设备在一个平台即可查看所有视频与录像各部门领导可通过视频墙实时查看各项目作业情况满足安全审计要求通过简化业务系统对视频监控需求的集成缩短开发时间为满足以上个目标需要以下前提设备需要支持协议设备能够访问到平台通过公网或均可业务系统能够访问视频流服务器通过公网或均可平台架构图资源规划硬件资源目前使用服务器在接入个设备共计视频通道的情况下内存占用因为未进行任何点播视频占用较低主要用于视频编解码且因为每次点播后会存储视频因此随着时间的推移磁盘占用会越来越大因此考虑到后期接入的设备数量以及视频保存时间在年内的至少满足路视频的接入需求下对硬件资源进行如下评估磁盘存储方式云厂商提供的服务能够解决诸如视频图像等文件的存储和调取服务收费以便按照空间大小收费因此这里不考虑云存储方案一是因为视频文件较大存储费用会较高二是视频这类文件较为敏感使用云存储无法保证数据安全容量评估目前业务上已使用到的监控设备如下重庆地铁号线项目数量个历史录像直接存储到项目部上的中智慧工地项目数量个历史录像直接存储到项目部上的中雷波矿山项目数量在一年后计划安装历史录像直接存储到项目部上的中变电站场站上的目前在用的只有昆仑先锋变电站和铁山坡一共台历史录像存储到调度中心的中集团安全监控项目数量为台历史录像存储在设备的卡中执法记录仪数量台历史录像存储在设备的卡中无人机数量个历史录像存在设备的卡中接入平台的设备录像分为两种模式云端录像只有主动查看设备实时视频时才会录制视频文件存储在服务器中设备录像支持本地录制的设备所存储的录像如果是则保存在服务器中如果是则保存在卡中设备录像因为设备录像都是滚动录制所以需要评估一个作业周期内的录像大小这里说明一下所需要的卡存储大小评估方式作业持续时间比如一天只录制个小时视频视频流码率码率越大所需要的存储空间越大比如码率为录像存储时间比如执法记录仪需要保存至少天的数据按照上述要求估算本地存储空间秒分小时天通道再加上一些元数据的存储空间所以建议至少配置的卡自带磁盘阵列且有一套完善的录像存储和扩容机制因为不同的项目对视频储存的要求不一样所以的存储空间最好根据自身业务需求让厂家推荐并配置合理的磁盘阵列因为对应的都是云端录像所以这里不对的本地存储做讨论云端录像只有在主动点播视频的情况下才会触发云端录像功能且录制的文件保存在的服务器中为了在满足业务需求的前提下减少硬件投入这里对所需的磁盘阵列进行大小评估点播录像按照总共个视频通道每天查看次每次查看存储分钟的录像每个视频流码率统一为录像至少保存天计算公式如下秒分钟次天通道录像备份像执法记录仪这类具备录像文件上报的设备会通过将录像文件上传到服务器这类设备的所需的磁盘大小评估方式为从作业管控作业计划管控记录仪录像可以看出分钟的视屏占用按照一天工作小时计算录像至少保存天计算公式如下小时天个设备结合点播录像和录像备份的场景至少应该准备的磁盘且为了保证数据安全最少需要块组成至少保证在一块磁盘损坏的情况下数据不会丢失扩容方式磁盘阵列首先使用块磁盘组成块硬盘或以上利用镜像技术在损失不超过一个成员磁盘时提供容错功能优势数据安全性最高一块坏了其它硬盘有完整数据保障运行缺点容量低硬盘使用率为可用空间为但是能够在一块磁盘损坏的情况下保证数据不丢失在后期如果磁盘空间不足需要进行无损扩容来保证业务的连续性这里给出几种扩容方案方案一增加一块磁盘使用总共块磁盘从迁移到磁盘阵列可用容量从增加到块硬盘或以上同时使用条带和奇偶校验技术提供与相似的读取速度在损失不超过一个成员磁盘时仍能正常运行优势兼顾与的优势最少需要三块硬盘通用是用块硬盘其中有一块硬盘用来做数据冗余的换新硬盘系统会自动进行数据同步缺点只允许单盘故障一盘出现故障尽快处理有盘坏情况下性能狂跌方案二增加块磁盘从迁移到块硬盘或以上类似对数据安全性要求高性能要求不高的可选择优势是在基础上为加强数据保护而设计的可允许损坏块硬盘缺点性能提升不明显服务器服务部署架构需要部署的服务列表服务名所需资源备注反向代理服务器管理系统视频管理流媒体服务视频流转换拉流推流等录像服务与流媒体部署在一起的用于点播录像缓存服务和流媒体服务器使用的缓存数据库服务管理端使用的结构化数据存储以上服务可以按照功能和所需资源大小部署到台服务器中硬件名称配置备注数据库与缓存服务器管理平台服务器结构化数据与缓存服务管理平台服务流媒体服务器流媒体服务器网络资源假设同时查看路摄像头分比率统一为帧率为视频编码类型为需要的带宽为位色压缩率带宽系数为保证更多数量的通道同时查看的需求最好使用的带宽硬件清单品类型号配置数量单价服务器共计核线程内存固态硬盘企业级固态至强银牌核线程群晖主机颗内存磁盘阵列电源一个今日最新价格服务器固态硬盘单台元因此总价格变更为元后期优化方案企业交换机华为交换机万兆三层核心口千兆电口万兆光汇聚全网管企业防火墙华为企业级防火墙带机吞吐支持条服务器万兆网卡英特尔双端口电口万兆网卡专用万兆单电口网卡网络拓扑图方案一方案二使用万兆交换机组万兆局域网因为视频存储文件较大为加快文件访问速度以提升服务体验内网使用万兆通讯需要分别为服务器和添加万兆网卡市面上万兆电口的交换器较少且电口发热量大目前选用万兆光口交换机只支持万兆电口网卡因此需要增加一个万兆光转电口台服务器使用万兆光口接入交换机其他千兆口用于接入其他客户端流媒体服务器通过万兆交换机将视频文件存储到方案三使用千兆交换机小范围组万兆内网使用自带千兆网口和台服务器通过千兆交换机组成局域网其他客户端通过交换机与服务器和连接内部使用万兆网卡直连让服务器和之间组成内部网络加快文件传输速度方案二比方案三组网方式简单但是价格且多出一个光转电接口整体价格较方案二贵视频备份群晖自带个千兆网口可再扩展一个万兆网卡服务器脑图",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-02-07 21:48:04",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{var o;0!==a&&(o=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:o+864e5*a})))},get:e=>{var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!(Date.now()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=(o,c={})=>new Promise((t,e)=>{let a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},Object.keys(c).forEach(e=>{a.setAttribute(e,c[e])}),document.head.appendChild(a)}),e.getCSS=(o,c=!1)=>new Promise((t,e)=>{let a=document.createElement("link");a.rel="stylesheet",a.href=o,c&&(a.id=c),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,c=!t&&!a&&!o,t=(void 0===e?(a?activateLightMode():t?activateDarkMode():(o||c)&&((a=(new Date).getHours())<=8||22<=a?activateDarkMode:activateLightMode)(),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})):("light"===e?activateLightMode:activateDarkMode)(),saveToLocal.get("aside-status"));void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/medium.css"><script src="https://cdn.dong4j.site/source/static/echarts.min.js"></script><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/core.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/footer.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/index-imgloaded.css"><script src="https://cdn.dong4j.site/source/static/index-imgloaded.js"></script><script src="https://cdn.dong4j.site/source/static/detect-devtools.js"></script><script defer="" src="https://cdn.dong4j.site/source/static/umami.self.js" data-host-url="https://umami.dong4j.ink:1024" data-website-id="bd4721b7-a43f-4161-83ed-51c148a7ca9d"></script><script defer="" src="https://cdn.dong4j.site/source/static/counter.js" async="" id="online-counter" interval="60000" api="https://umami.dong4j.ink:1024/counter" room="000000001"></script><script src="https://cdn.dong4j.site/source/static/confetti.browser.min.js"></script><script src="https://cdn.dong4j.site/source/static/confetti.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="司机带你开车" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="司机带你开车" type="application/rss+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box"><div class="carplay"></div></div><script>let preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout(function(){preloader.endLoading()},2e3),document.getElementById("loading-box").addEventListener("click",()=>{preloader.endLoading()}),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async="" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.ink:1024/status/services" title="服务状态"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.ink:1024?f=blog" title="服务面板"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.ink:1024/" title="导航页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="http://chat.dong4j.ink:1024/chat" title="Mini-Chat"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">司机带你开车</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://cdn.dong4j.site/source/image/wechat-pay.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://cdn.dong4j.site/source/image/alipay.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E8%BF%90%E7%AE%97%E7%AC%A6/" style="font-size:1.05rem;color:#0b673b">+运算符<sup>1</sup></a><a href="/tags/checkedexception/" style="font-size:1.05rem;color:#3e9b0a">CheckedException<sup>1</sup></a><a href="/tags/error/" style="font-size:1.05rem;color:#33b1bf">Error<sup>1</sup></a><a href="/tags/exception/" style="font-size:1.05rem;color:#b83165">Exception<sup>1</sup></a><a href="/tags/java/" style="font-size:1.05rem;color:#336726">Java<sup>48</sup></a><a href="/tags/javabean/" style="font-size:1.05rem;color:#081d9f">JavaBean<sup>1</sup></a><a href="/tags/oop/" style="font-size:1.05rem;color:#aca690">OOP<sup>1</sup></a><a href="/tags/runtimeexception/" style="font-size:1.05rem;color:#b44b76">RuntimeException<sup>1</sup></a><a href="/tags/throwable/" style="font-size:1.05rem;color:#0821a4">Throwable<sup>1</sup></a><a href="/tags/final/" style="font-size:1.05rem;color:#2fc1b6">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:1.05rem;color:#28b07b">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:1.05rem;color:#ae771e">finally<sup>2</sup></a><a href="/tags/getter/" style="font-size:1.05rem;color:#3d7b5d">getter<sup>1</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:1.05rem;color:#535353">new关键字<sup>1</sup></a><a href="/tags/setter/" style="font-size:1.05rem;color:#746b4e">setter<sup>1</sup></a><a href="/tags/static/" style="font-size:1.05rem;color:#541232">static<sup>1</sup></a><a href="/tags/super/" style="font-size:1.05rem;color:#88861e">super<sup>2</sup></a><a href="/tags/this/" style="font-size:1.05rem;color:#9339c2">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:1.05rem;color:#9483b3">二进制<sup>1</sup></a><a href="/tags/%E5%B0%81%E8%A3%85/" style="font-size:1.05rem;color:#1b420f">封装<sup>3</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#45c53b">异常处理<sup>3</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" style="font-size:1.05rem;color:#1d04c3">抽象类<sup>1</sup></a><a href="/tags/%E6%8E%A5%E5%8F%A3/" style="font-size:1.05rem;color:#041328">接口<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:1.05rem;color:#4096a9">数据类型<sup>4</sup></a><a href="/tags/%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD/" style="font-size:1.05rem;color:#45905a">方法重载<sup>1</sup></a><a href="/tags/%E6%9D%A1%E4%BB%B6%E8%BF%90%E7%AE%97%E7%AC%A6/" style="font-size:1.05rem;color:#15bea8">条件运算符<sup>1</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:1.05rem;color:#459d99">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:1.05rem;color:#410bba">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:1.05rem;color:#9c121a">算法<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size:1.05rem;color:#777091">类型转换<sup>3</sup></a><a href="/tags/%E7%BB%A7%E6%89%BF/" style="font-size:1.05rem;color:#6a5bba">继承<sup>2</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:1.05rem;color:#116aa7">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:1.05rem;color:#ba377b">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:1.05rem;color:#8821c4">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:1.05rem;color:#b90a07">设计模式<sup>3</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:1.05rem;color:#380340">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:1.05rem;color:#39ab64">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#62a971">错误处理<sup>2</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:1.05rem;color:#9945bc">面向对象<sup>6</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/" style="font-size:1.05rem;color:#3051ad">面向对象编程<sup>4</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);" rel="external nofollow noreferrer"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/" itemprop="url">软件推荐</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E8%A7%86%E9%A2%91%E9%9B%86%E6%88%90/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>视频集成</span></a><a class="article-meta__tags" href="/tags/%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E6%B5%81%E8%BD%AC/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>监控数据流转</span></a><a class="article-meta__tags" href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>音视频传输协议</span></a><a class="article-meta__tags" href="/tags/%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>流媒体协议</span></a><a class="article-meta__tags" href="/tags/%E6%92%AD%E6%94%BE%E5%8D%8F%E8%AE%AE/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>播放协议</span></a><a class="article-meta__tags" href="/tags/%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>封装格式</span></a><a class="article-meta__tags" href="/tags/%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>视频编码</span></a><a class="article-meta__tags" href="/tags/%E8%AE%BE%E5%A4%87%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%96%B9%E6%A1%88/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>设备与连接方案</span></a><a class="article-meta__tags" href="/tags/%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>业务场景</span></a><a class="article-meta__tags" href="/tags/%E8%A7%86%E9%A2%91%E6%8E%A5%E5%85%A5%E5%B9%B3%E5%8F%B0/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>视频接入平台</span></a><a class="article-meta__tags" href="/tags/%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E9%80%89%E5%9E%8B/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>流媒体服务选型</span></a></span></div></div><h1 class="post-title" itemprop="name headline">业务场景全解：如何应对视频集成挑战</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-11-19T16:00:00.000Z" title="发表于 2023-11-20 00:00:00">2023-11-20</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-02-07T13:48:04.529Z" title="更新于 2025-02-07 21:48:04">2025-02-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">16.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>52分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="业务场景全解：如何应对视频集成挑战"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/a31e50a5.html#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://api.dong4j.ink:1024/cover?gbk87fdq"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="fa-regular fa-robot fa-fade"></i><div class="ai-title-text">摘要助手</div><div id="ai-Toggle">切换</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">SummaryGPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item">前往订阅 💥</div><div class="ai-btn-item" id="go-comment">前往评论 💬</div><div class="ai-btn-item" id="go-tianli-blog">👀 部署教程</div></div><script data-pjax="" src="https://cdn.dong4j.site/source/static/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope="" itemtype="https://blog.dong4j.site/posts/a31e50a5.html"><header><a class="post-meta-categories" href="/categories/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/" itemprop="url">软件推荐</a><a href="/tags/%E8%A7%86%E9%A2%91%E9%9B%86%E6%88%90/" tabindex="-1" itemprop="url">视频集成</a><a href="/tags/%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E6%B5%81%E8%BD%AC/" tabindex="-1" itemprop="url">监控数据流转</a><a href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/" tabindex="-1" itemprop="url">音视频传输协议</a><a href="/tags/%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE/" tabindex="-1" itemprop="url">流媒体协议</a><a href="/tags/%E6%92%AD%E6%94%BE%E5%8D%8F%E8%AE%AE/" tabindex="-1" itemprop="url">播放协议</a><a href="/tags/%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F/" tabindex="-1" itemprop="url">封装格式</a><a href="/tags/%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81/" tabindex="-1" itemprop="url">视频编码</a><a href="/tags/%E8%AE%BE%E5%A4%87%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%96%B9%E6%A1%88/" tabindex="-1" itemprop="url">设备与连接方案</a><a href="/tags/%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF/" tabindex="-1" itemprop="url">业务场景</a><a href="/tags/%E8%A7%86%E9%A2%91%E6%8E%A5%E5%85%A5%E5%B9%B3%E5%8F%B0/" tabindex="-1" itemprop="url">视频接入平台</a><a href="/tags/%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E9%80%89%E5%9E%8B/" tabindex="-1" itemprop="url">流媒体服务选型</a><h1 id="CrawlerTitle" itemprop="name headline">业务场景全解：如何应对视频集成挑战</h1><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">dong4j</span><time itemprop="dateCreated datePublished" datetime="2023-11-19T16:00:00.000Z" title="发表于 2023-11-20 00:00:00">2023-11-20</time><time itemprop="dateCreated datePublished" datetime="2025-02-07T13:48:04.529Z" title="更新于 2025-02-07 21:48:04">2025-02-07</time></header><meta name="referrer" content="no-referrer"><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?spm=638h23e3" alt="random-pic-api"></p><p>主要介绍了视频集成解决方案，包括视频监控数据流转、音视频传输协议对比、协议接入、主流的流媒体协议、播放协议对比、主流的封装格式、主要视频编码、常见的设备与连接方案、术语解释、业务场景、视频接入平台、流媒体服务选型以及平台选型等方面的内容。通过这篇文章，读者可以了解到视频集成常见的解决方案，并从现有方案中学习总结，以应对日益复杂的业务场景。</p><h2 id="1-目的"><a href="#1-目的" class="headerlink" title="1. 目的"></a>1. 目的</h2><p>随着承接的项目逐渐增多, 且大多数项目都会涉及到视频监管需求, 为了避免重复调研开发, 加快项目上线速度, 这里汇总总结了多种业务场景并提出对应的解决方案, 一方面是作为技术知识积累, 让团队人员了解视频集成常见的解决方案, 二是可以从现有方案中学习总结, 以应对日益复杂的业务场景.</p><h2 id="2-领域知识"><a href="#2-领域知识" class="headerlink" title="2. 领域知识"></a>2. 领域知识</h2><h3 id="2-1-监控数据流"><a href="#2-1-监控数据流" class="headerlink" title="2.1 监控数据流"></a>2.1 监控数据流</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/1.drawio.svg" alt="1.drawio.svg"></p><p>视频监控数据流转主要经过下面 5 个过程:</p><ol><li>采集: 通过硬件设备采集音视频数据, 如果硬件设备支持, 还可以对数据进行粗加工, 比如添加水印;</li><li>推流: 设备端将音视频数据进`行编码压缩(H.264/H.265)后发送给流媒体服务器, 一般使用 RTSP (延迟最低);</li><li>流媒体处理: 负责转码, 传输, 数据分发;</li><li>拉流: 客户端请求流媒体服务器音视频资源, 流媒体服务器通过 RTSP, HLS 等流媒体传输协议传输数据;</li><li>解码: 设备端在拿到音视频数据后需要通过硬解码或软解码的方式播放音视频流;</li></ol><h3 id="2-2-音视频传输协议对比"><a href="#2-2-音视频传输协议对比" class="headerlink" title="2.2 音视频传输协议对比"></a>2.2 音视频传输协议对比</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_JlUVbWmH.webp" alt="20241229154732_JlUVbWmH.webp"></p><h3 id="2-3-协议接入"><a href="#2-3-协议接入" class="headerlink" title="2.3 协议接入"></a>2.3 协议接入</h3><h4 id="2-3-1-GB-T28181"><a href="#2-3-1-GB-T28181" class="headerlink" title="2.3.1 GB/T28181"></a>2.3.1 GB/T28181</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_OfCzxzaf.webp" alt="20241229154732_OfCzxzaf.webp"></p><p><strong>GB/T28181 是摄像头主动向上级平台连接注册，摄像头不需要有固定的外网 IP，只要求流媒体服务器有固定的 IP 地址即可</strong></p><h4 id="2-3-2-ONVIF"><a href="#2-3-2-ONVIF" class="headerlink" title="2.3.2 ONVIF"></a>2.3.2 ONVIF</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_2e3a6yQY.webp" alt="20241229154732_2e3a6yQY.webp"></p><p><strong>ONVIF 协议是流媒体服务器主动去连接摄像头，然后进行控制或视频调取，因此在组网时需要流媒体服务器能够访问到摄像头的 IP 地址</strong></p><h3 id="2-4-主流的流媒体协议"><a href="#2-4-主流的流媒体协议" class="headerlink" title="2.4 主流的流媒体协议"></a>2.4 主流的流媒体协议</h3><table><thead><tr><th>名称</th><th>推出机构</th><th>传输层协议</th><th>客户端</th><th>使用领域</th></tr></thead><tbody><tr><td>RTSP+RTP</td><td>IETF</td><td>TCP+UDP</td><td>VLC WMP</td><td>IPTV</td></tr><tr><td>RTMP</td><td>Adobe Inc.</td><td>TCP</td><td>Flash</td><td>互联网直播</td></tr><tr><td>RTMFP</td><td>Adobe Inc.</td><td>UDP</td><td>Flash</td><td>互联网直播</td></tr><tr><td>MMS</td><td>Microsoft Inc.</td><td>TCP/UDP</td><td>WMP</td><td>互联网直播 + 点播</td></tr><tr><td>HTTP</td><td>WWW IETF</td><td>TCP</td><td>Flash</td><td>互联网点播</td></tr></tbody></table><h3 id="2-5-播放协议对比"><a href="#2-5-播放协议对比" class="headerlink" title="2.5 播放协议对比"></a>2.5 播放协议对比</h3><p>RTMP：RTMP 协议比较全能。既可以用来推送又可以用来直播。其核心理念是将大块的视频帧和音频帧拆分，然后以小数据包的形式在互联网上进行传输，而且支持加密，因此隐私性相对比较理想，但拆包组包的过程比较复杂，所以在海量并发时也容易出现一些不可预期的稳定性问题。</p><p>FLV：FLV 协议由 Adobe 公司主推，格式极其简单，只是在大块的视频帧和音视频头部加入一些标记头信息，由于这种简洁，在延迟表现和大规模并发方面都很成熟，唯一的不足就是在手机浏览器上的支持非常有限，但是用作手机端<br>App 直播协议却异常合适。</p><p>HLS：苹果推出的解决方案，将视频分 5 秒 - 10 秒的视频小分片，然后用 m3u8 索引表进行管理，由于客户端下载到的视频都是 5 秒 - 10<br>秒的完整数据，故视频的流畅性很好，但也同样引入了很大的延迟（HLS 的一般延迟在 10 秒 - 30 秒左右）。相比于 FLV，HLS 在 iPhone 和大部分 Android<br>手机浏览器上的支持都非常好。</p><table><thead><tr><th>播放协议</th><th>优点</th><th>缺点</th><th>播放延迟</th></tr></thead><tbody><tr><td>FLV</td><td>成熟度高、高并发无压力</td><td>需集成 SDK 才能播放</td><td>2s-3s</td></tr><tr><td>RTMP</td><td>优质线路下理论延迟最低</td><td>高并发情况下表现不佳；需集成 SDK 才能播放</td><td>1s-3s</td></tr><tr><td>HLS(m3u8)</td><td>手机浏览器支持度高</td><td>延迟非常高</td><td>10s-30s</td></tr></tbody></table><h3 id="2-6-主流的封装格式"><a href="#2-6-主流的封装格式" class="headerlink" title="2.6 主流的封装格式"></a>2.6 主流的封装格式</h3><table><thead><tr><th>名称</th><th>推出机构</th><th>视频编码</th><th>音频编码</th><th>使用领域</th></tr></thead><tbody><tr><td>AVI</td><td>Microsoft Inc.</td><td>不支持几乎所有格式</td><td>几乎所有格式</td><td>BT 下载影视</td></tr><tr><td>MP4</td><td>MPEG</td><td>支持 MPEG-2, MPEG-4, H.264, H.263 等</td><td>AAC, MPEG-1,Layers I, II, III, AC-3 等</td><td>互联网视频网站</td></tr><tr><td>TS</td><td>MPEG</td><td>支持 MPEG-1, MPEG-2, MPEG-4, H.264MPEG-1</td><td>Layers I, II, III, AAC</td><td>IPTV，数字电视</td></tr><tr><td>FLV</td><td>Adobe Inc.</td><td>支持 Sorenson, VP6, H.264</td><td>MP3, ADPCM, Linear PCM, AAC 等</td><td>互联网视频网站</td></tr><tr><td>MKV</td><td>CoreCodec Inc.</td><td>支持几乎所有格式</td><td>几乎所有格式</td><td>互联网视频网站</td></tr><tr><td>RMVB</td><td>Real Networks Inc.</td><td>支持 RealVideo 8, 9, 10</td><td>AAC, Cook Codec, RealAudio,Lossless</td><td>BT 下载影视</td></tr></tbody></table><h3 id="2-7-主要视频编码"><a href="#2-7-主要视频编码" class="headerlink" title="2.7 主要视频编码"></a>2.7 主要视频编码</h3><table><thead><tr><th>名称</th><th>推出机构</th><th>推出时间</th><th>目前使用领域</th></tr></thead><tbody><tr><td>HEVC (H.265)</td><td>MPEG/ITU-T</td><td>2013</td><td>研发中</td></tr><tr><td>H.264</td><td>MPEG/ITU-T</td><td>2003</td><td>各个领域</td></tr><tr><td>MPEG4</td><td>MPEG</td><td>2001</td><td>不温不火</td></tr><tr><td>MPEG2</td><td>MPEG</td><td>1994</td><td>数字电视</td></tr><tr><td>VP9</td><td>Google</td><td>2013</td><td>研发中</td></tr><tr><td>VP8</td><td>Google</td><td>2008</td><td>不普及</td></tr><tr><td>VC-1</td><td>Microsoft Inc.</td><td>2006</td><td>微软平台</td></tr><tr><td>AVS</td><td>中国</td><td></td><td></td></tr><tr><td>AVS+</td><td>中国</td><td></td><td></td></tr></tbody></table><h3 id="8-常见的设备与连接方案"><a href="#8-常见的设备与连接方案" class="headerlink" title="8. 常见的设备与连接方案"></a>8. 常见的设备与连接方案</h3><h4 id="2-8-1-监控系统中常见设备及作用"><a href="#2-8-1-监控系统中常见设备及作用" class="headerlink" title="2.8.1 监控系统中常见设备及作用"></a>2.8.1 监控系统中常见设备及作用</h4><p>在监控系统中，我们要使用很多的设备，在此，我们只讲述一些通用的设备。</p><ol><li><strong>摄像机</strong>：这个是信号源，是视频图像的来源，摄像机也分很多种，比如：高速球、红外枪机等；一般来说摄像机后面接视频分配器（网络高清摄像机需要接解码器后才能接视频分配器）。</li><li><strong>视频分配器</strong>：是将摄像机出来的视频信号进行分配的，一般是每路摄像机分配为 2 路相同的视频信号，将视频信号进行分配的目的是 1<br>路信号给监控矩阵，另一路给硬盘录像机，视频分配器的输入端接摄像机，输出端接硬盘录像机和监控矩阵。</li><li><strong>硬盘录像机</strong>：将视频信息进行录制的，以备随时的调取视频资料，硬盘录像机的输入端接分配器的输出端，硬盘录像机的输出端一般接显示器。</li><li><strong>监控矩阵</strong>：这个设备是监控系统中核心设备，是将摄像机过来经过分配器后的视频信号传输至终端显示设备上的，监控矩阵的输入端接分配器的输出端，监控矩阵的输出端接终端显示设备，此外监控矩阵的附带品是控制键盘，是用来控制视频切换的设备，与监控矩阵直接相连即可。</li><li><strong>终端显示</strong>：是将视频信息展示的设备，终端显示设备一般有显示器、电视墙、LED 显示屏、拼接屏、监视器等，终端显示设备的输入端接监控矩阵的输出端，终端显示设备没有输出端的。</li></ol><h4 id="2-8-2-监控系统中常见的连接方案"><a href="#2-8-2-监控系统中常见的连接方案" class="headerlink" title="2.8.2 监控系统中常见的连接方案"></a>2.8.2 监控系统中常见的连接方案</h4><p>摄像机的输出端接视频分配器的输入端，视频分配器的输出端分成 2 个部分，第一部分接硬盘录像机，第二部分（视频信号与第一部分完全相同）接监控矩阵的输入端，监控矩阵的输出端接终端显示设备，此外监控矩阵和控制键盘用网线连接。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/2.svg" alt="2.svg"></p><h4 id="2-8-3-视频分配器"><a href="#2-8-3-视频分配器" class="headerlink" title="2.8.3 视频分配器"></a>2.8.3 视频分配器</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_fxJlVXLo.webp" alt="20241229154732_fxJlVXLo.webp"></p><h3 id="9-术语解释"><a href="#9-术语解释" class="headerlink" title="9. 术语解释"></a>9. 术语解释</h3><h4 id="GB-T28181"><a href="#GB-T28181" class="headerlink" title="GB/T28181"></a><strong>GB/T28181</strong></h4><p>GB/T28181《安全防范视频监控联网系统信息传输、交换、控制技术要求》是由公安部科技信息化局提出，由全国安全防范报警系统标准化技术委员会、公安部一所等多家单位共同起草的一部国家标准。标准规定了城市监控报警联网系统中信息传输、交换、控制的互联结构、通信协议结构，传输、交换、控制的基本要求和安全性要求，以及控制、传输流程和协议接口等技术要求。该标准适用于安全防范监控报警联网系统的方案设计、系统检测、验收以及与之相关的设备研发、生产，其他信息系统可参考采用。联网系统应对前端设备、监控中心设备、用户终端<br>ID 进行统一编码，该编码具有全局唯一性。</p><h4 id="RTMP"><a href="#RTMP" class="headerlink" title="RTMP"></a><strong>RTMP</strong></h4><p>RTMP 是 Real Time Messaging Protocol（实时消息传输协议）的首字母缩写。该协议基于 TCP，是一个协议族，包括 RTMP 基本协议及 RTMPT/RTMPS/RTMPE<br>等多种变种。RTMP 是一种设计用来进行实时数据通信的网络协议，主要用来在 Flash/AIR 平台和支持 RTMP 协议的流媒体 / 交互服务器之间进行音视频和数据通信。</p><h4 id="ONVIF"><a href="#ONVIF" class="headerlink" title="ONVIF"></a><strong>ONVIF</strong></h4><p>ONVIF（开放式网络视频接口论坛）是一个全球性的开放式行业论坛，其目标是促进开发和使用基于物理 IP 的安全产品接口的全球开放标准。ONVIF<br>创建了一个视频监控和其他物理安全领域的 IP 产品如何进行相互通信的标准。ONVIF 是由 Axis Communications，博世安防系统和索尼于 2008 年创立的。</p><h4 id="RTSP"><a href="#RTSP" class="headerlink" title="RTSP"></a><strong>RTSP</strong></h4><p>RTSP（Real Time Streaming Protocol），RFC2326，实时流传输协议，是 TCP/IP 协议体系中的一个应用层协议，由哥伦比亚大学、网景和 RealNetworks 公司提交的<br>IETF RFC 标准。该协议定义了一对多应用程序如何有效地通过 IP 网络传送多媒体数据。</p><h4 id="GA-T-1400"><a href="#GA-T-1400" class="headerlink" title="GA/T 1400"></a><strong>GA/T 1400</strong></h4><p>GA/T 1400 与 GB/T 28181 有共性的地方，比如设备编码规范、信令交互规范等， GB/T28181 定义的是视频联网，GA/TGA/T 1400 定义的是图片传输，应用最多的是<br>IPC 传输图片及相关信息到后端设备 / 平台，以及视图库平台与平台对接等，比如人脸抓拍机传输人脸图片、人脸特征等到人脸应用平台，车辆抓拍机传输车辆图片、车牌信息到车辆卡口平台。</p><h4 id="FLV"><a href="#FLV" class="headerlink" title="FLV"></a><strong>FLV</strong></h4><p>FLV 是 FLASH VIDEO 的简称，FLV 流媒体格式是随着 Flash MX 的推出发展而来的视频格式。由于它形成的文件极小、加载速度极快，使得网络观看视频文件成为可能，它的出现有效地解决了视频文件导入<br>Flash 后，使导出的 SWF 文件体积庞大，不能在网络上很好的使用等问题。</p><h4 id="HLS"><a href="#HLS" class="headerlink" title="HLS"></a><strong>HLS</strong></h4><p>HLS (HTTP Live Streaming) 是 Apple 的动态码率自适应技术。主要用于 PC 和 Apple 终端的音视频服务。包括一个 m3u (8) 的索引文件，TS 媒体分片文件和<br>key 加密串文件。</p><h4 id="WebRTC"><a href="#WebRTC" class="headerlink" title="WebRTC"></a><strong>WebRTC</strong></h4><p>WebRTC，名称源自网页即时通信（英语：Web Real-Time Communication）的缩写，是一个支持网页浏览器进行实时语音对话或视频对话的 API。</p><h4 id="IPC"><a href="#IPC" class="headerlink" title="IPC"></a><strong>IPC</strong></h4><p>IPC 是网络摄像机（Internet Protocol Camera）的缩写。</p><h4 id="NVR"><a href="#NVR" class="headerlink" title="NVR"></a><strong>NVR</strong></h4><p>NVR 是网络硬盘录像机（Network Video Recorder）的缩写。</p><h4 id="ICC"><a href="#ICC" class="headerlink" title="ICC"></a>ICC</h4><p>ICC 是大华推出的一款智能物联综合管理平台, tigong 设备对接, 人员布控, 停车管理, 消费管理, 动环管理动众多功能.</p><h4 id="IVSS"><a href="#IVSS" class="headerlink" title="IVSS"></a>IVSS</h4><p>IVSS 是大华的一款硬件设备, 将人脸、人体、车辆、周界等众多“边界智能”融合一体的一体机系列, 具备 IPC、球机、DVR、NVR 等 IP 设备管理, 能够进行人脸识别、车辆识别、人脸比对、实时布控等 AI 计算.</p><h4 id="IVS"><a href="#IVS" class="headerlink" title="IVS"></a>IVS</h4><p>IVS 智能监控系统可以根据用户的需求，在指定时间段内对目标进行实时监控。您还可以使用仪表盘和手动新建自定义告警模板。您可以根据实际情况自定义监控指标，系统会按照设定的指标收集业务数据。系统还可以根据业务需要，对异常事件、告警和事件进行分类统计和告警上报。</p><h4 id="视频流"><a href="#视频流" class="headerlink" title="视频流"></a><strong>视频流</strong></h4><p>在网络上，视频数据按时间先后次序传输和播放的连续视频数据流。</p><h4 id="推流"><a href="#推流" class="headerlink" title="推流"></a><strong>推流</strong></h4><p>推流是指利用推流客户端或者推流工具，通过推流地址将 RTMP 协议的视频流推送到客户端。</p><h4 id="拉流"><a href="#拉流" class="headerlink" title="拉流"></a><strong>拉流</strong></h4><p>拉流是指通过互联网环境，将视频流从指定平台或 IP 地址获取到视频观看客户端或设备。</p><h2 id="3-业务场景"><a href="#3-业务场景" class="headerlink" title="3. 业务场景"></a>3. 业务场景</h2><h3 id="3-1-固定地点"><a href="#3-1-固定地点" class="headerlink" title="3.1 固定地点"></a>3.1 固定地点</h3><h4 id="3-1-1-有线接入"><a href="#3-1-1-有线接入" class="headerlink" title="3.1.1 有线接入"></a>3.1.1 有线接入</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E5%9B%BA%E5%AE%9A%2B%E6%9C%89%E7%BA%BF%E6%8E%A5%E5%85%A5.drawio.svg" alt="固定+有线接入.drawio.svg"></p><p>​ 1. IPC 和 NVR 在同一个局域网, NVR 有独立的 Web 端用于管理视频和录像;</p><p>​ 2. NVR 提供 RTSP 视频流, 供内部系统和外部系统集成;</p><p>​ 3. 外网可通过公网 IP 或 VPN 组网访问内部 NVR;</p><p>企业自建网络，本地环境有较多的 IPC，本地配置 NVR 设备，提供本地的视频监测。第三方一般不允许从远端访问当地的视频。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E5%9B%BA%E5%AE%9A%2B%E6%9C%89%E7%BA%BF%E6%8E%A5%E5%85%A52.drawio.svg" alt="固定+有线接入2.drawio.svg"></p><p>针对于 <strong>工作现场固定且能够方便布线</strong> 的环境, 推荐使用传统方式：由网络摄像机+电源+网络电缆 的方案.</p><p>这种方式是最简单的一种方案, 且能够保证流媒体传输的稳定性.</p><p><strong>解决方案</strong></p><p>因为 IPC 和 NVR 在一个局域网内, 因此只要 NVR 支持的协议的 IPC 都可以对接:</p><ol><li>登录 IPC 管理端进行摄像头设置;</li><li>登录 NVR 添加 IPC (协议接入可根据 IPC 型号选择);</li></ol><p>NVR 还可以替换成具有 AI 识别的具有视频存储功能的硬件设备, 比如 IVSS.</p><p><strong>针对于有线接入, 最重要的一点就是通过交换机将 IPC 和 NVR 划分到同一个局域网内, 这样 NVR 才能识别 IPC.</strong></p><ol><li>内部系统直接从 NVR 上拉取视频流;</li><li>外部系统需要通过 NAT 访问 NVR 拉取视频流;</li></ol><p><strong>关键点:</strong></p><blockquote><p>IPC/NVR 在内网, 业务系统在外网, 且业务系统能够通过 NAT 访问 IPC 或 NVR.</p></blockquote><h4 id="3-1-2-无线接入"><a href="#3-1-2-无线接入" class="headerlink" title="3.1.2 无线接入"></a>3.1.2 无线接入</h4><h5 id="场景三-昆仑先锋变电站"><a href="#场景三-昆仑先锋变电站" class="headerlink" title="场景三: 昆仑先锋变电站"></a><strong>场景三: 昆仑先锋变电站</strong></h5><p>针对于 <strong>工作现场固定但无法通过有线宽带接入</strong> 的环境, 推荐使用 4G 路由器接入方案.</p><p><strong>解决方案一:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E5%9B%BA%E5%AE%9A%2B%E6%97%A0%E7%BA%BF%E6%8E%A5%E5%85%A51.drawio.svg" alt="固定+无线接入1.drawio.svg"></p><ol><li><p>针对于摄像头数量较少的工作地点可以不部署 NVR, 直接将 IPC 通过交换机和 4G 路由器一起组建一个局域网, 并通过 4G 上传视频流.</p></li><li><p>因为 4G 物联网卡的 IP 不固定, 因此需要与远端的 NVR 通过 VPN 的方式组建局域网, NVR 才能接入 IPC.</p></li></ol><p><strong>关键地:</strong></p><blockquote><p>IPC 在内网, NVR 在外网, 需要组建 VPN 专网;</p></blockquote><p><strong>解决方案二:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E5%9B%BA%E5%AE%9A%2B%E6%97%A0%E7%BA%BF%E6%8E%A5%E5%85%A52.drawio.svg" alt="固定+无线接入2.drawio.svg"></p><ol><li>针对摄像头数量较多的工作地点, 建议直接在项目部部署至少一台 NVR, 用于本地存储视频, 避免因为 4G 网络的不稳定性和 IPC 数量较多的原因造成视频延迟的问题;</li><li>网络拓扑图与方案一一致, 因为 <strong>4G 路由器</strong> 没有固定 IP, 为了 NVR 能够识别 IPC, 只能使用 VPN 专网;</li></ol><p><strong>关键点:</strong></p><blockquote><p>IPC 在内网, 上级 NVR 在外网, 需要组建 VPN 专网;</p></blockquote><p><strong>解决方案三:</strong></p><p>我们可以使用 4G NVR 代替传统的 NVR + 4G 路由器, 其他与方案二一致.</p><h3 id="3-2-非固定地点"><a href="#3-2-非固定地点" class="headerlink" title="3.2 非固定地点"></a>3.2 非固定地点</h3><p>针对于 <strong>工作现场不固定</strong> 的移动作业的业务场景, 一般使用 4G 摄像头采集视频, 因为 4G SIM 卡一般没有固定公网 IP, 故无法直接访问 IPC.</p><p>不同的厂商可能会有不同的平台用于对接 IPC, 比如海康威视的 <strong>海康互联 APP</strong>.</p><p><strong>解决方案:</strong></p><p>通过 GB/T28181 平台直接管理 IPC/NVR</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E7%A7%BB%E5%8A%A8%E4%BD%9C%E4%B8%9A.drawio.svg" alt="移动作业.drawio.svg"></p><ol><li>在 4G IPC 上设置 GB/T28181 接入平台相关信息, 主动向平台注册设备信息;</li><li>平台管理接入的 IPC/NVR 等支持 GB/T28181 协议的设备;</li></ol><p><strong>关键点:</strong></p><blockquote><ol><li>待接入设备需要支持 GB/T28181 协议;</li><li>待接入设备能访问平台;</li></ol></blockquote><h4 id="3-2-1-类似解决方案"><a href="#3-2-1-类似解决方案" class="headerlink" title="3.2.1 类似解决方案"></a>3.2.1 类似解决方案</h4><p>移动作业的业务场景一般选用带有 4G 网卡的设备接入公网, 不过带来的问题就是 IP 不固定, 这样就不能直接通过远端连接到 IPC. 为了解决这类问题, 需要一种主动注册的方案, 即 4G IPC 设备主动向平台注册设备信息, 其中 GB/T28181 协议就是典型代表, 其底层基于 SIP 和 SUP 协议实现.</p><p>一些第三方厂商也会开发符合自身业务需求的其他协议, 下面介绍 2 种比较常用的类似协议.</p><h5 id="3-2-1-1-Ehome-协议"><a href="#3-2-1-1-Ehome-协议" class="headerlink" title="3.2.1.1 Ehome 协议"></a>3.2.1.1 Ehome 协议</h5><p>EHome 协议是海康威视基于移动监控场景下开发的设备主动注册私有协议，支持实时预览、录像回放、对讲、报警、定位等功能。</p><p>EHome 协议不仅实现了 GB/T28181 里所有的功能，并且在海康的不同类型设备上支持了其自定义的场合下的功能特性。包括智能报警、在低功耗场景下的设备控制及公网环境下的语音对讲指挥等场景都比 GB/T28181 协议更完善。</p><p>海康 EHome 协议架构包括三个主要部分：编码器、传输网络和监控中心。</p><ol><li>编码器：负责将音视频信号进行压缩编码，通过 IP 网络发送至监控中心。编码器支持多种分辨率和码率调整，满足不同场景需求。</li><li>传输网络：基于 IP 网络，支持 TCP/IP、UDP 等协议，实现音视频数据的传输与通信。</li><li>监控中心：接收来自编码器的音视频数据，进行解码、显示及存储等操作。监控中心支持多级架构，方便集中管理和调度。</li></ol><p><strong>特点:</strong></p><ol><li>高清画质：采用先进的音视频压缩编码技术，提供高清画质，还原现场真实场景。</li><li>低延迟：音视频传输延迟低，满足实时监控需求。</li><li>双向通信：支持监控中心与编码器之间的双向通信，实现远程控制及报警通知等功能。</li><li>稳定性：具备较高的稳定性和抗干扰能力，保证长时间稳定运行。</li><li>安全性：采用加密传输和认证授权机制，确保数据安全和隐私保护。</li></ol><h5 id="3-2-1-2-萤石协议"><a href="#3-2-1-2-萤石协议" class="headerlink" title="3.2.1.2 萤石协议"></a>3.2.1.2 萤石协议</h5><p>萤石协议是萤石云开发的一种设备主动注册的私有协议, 类似于国标协议和 Ehome 协议, 如果设备同时支持萤石协议和 Ehome 协议, 只能二选一.</p><h5 id="3-2-1-3-DAHUA-协议"><a href="#3-2-1-3-DAHUA-协议" class="headerlink" title="3.2.1.3 DAHUA 协议"></a>3.2.1.3 DAHUA 协议</h5><p>大华主动注册协议是类似海康 E-home、ISUP 协议，也是前端设备向中心平台和服务注册的一种主动注册协议，对于前端网络无固定 IP 情况下对视频的联网、视频上云等场景应用尤为适用。</p><h5 id="3-2-1-5-JTT1078"><a href="#3-2-1-5-JTT1078" class="headerlink" title="3.2.1.5 JTT1078"></a>3.2.1.5 JTT1078</h5><p>JT/1078 即&lt;**道路运输车辆卫星定位系统-视频通信协议**&gt;，于 2016 年发布，经过几年的沉淀，逐渐应用于道路两客一危、中高端定制化货运、出租车运输等行业。</p><h5 id="3-2-1-4-SDK"><a href="#3-2-1-4-SDK" class="headerlink" title="3.2.1.4 SDK"></a>3.2.1.4 SDK</h5><p>海康, 大华, 宇视, 乐橙等厂商的 SDK 都可以完成 shebeui 在互动注册逻辑, 需要进行二次开发.</p><blockquote><p>以上协议都能够解决设备无固定 IP 带来的问题, 但是除了 GB/T28181 协议外, 其他都是厂商的私有协议, 虽然在性能上优于 GB/T28181 协议, 但是需要特定的设备支持, 而 GB/T28181 协议 广泛被各大厂商设备支持, 因此选择使用 <strong>GB/T28181 协议</strong> 接入监控设备.</p></blockquote><h2 id="4-视频接入平台"><a href="#4-视频接入平台" class="headerlink" title="4. 视频接入平台"></a>4. 视频接入平台</h2><h3 id="4-1-为什么需要一个视频接入平台"><a href="#4-1-为什么需要一个视频接入平台" class="headerlink" title="4.1 为什么需要一个视频接入平台"></a>4.1 为什么需要一个视频接入平台</h3><p>在没有视屏接入平台之前, 每个项目都会根据业务场景选购不同厂商的 IPC/NVR, 流媒体服务器, AI 识别服务器等, 每个项目都需要经历一次视频对接的流程, 如果有了视频接入平台:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/xxx.drawio.svg" alt="xxx.drawio.svg"></p><ol><li>根据业务需求选购支持 GB/T28181 协议的 IPC/ NVR, 在局域网内可以使用双方支持的任意协议完成配网与对接, 比如 IPC 通过局域网接入到 NVR/ICC/IVSS;</li><li>将 NVR/IVSS 等支持 GB/T28181 协议且能管理多台 IPC 的设备或将 IPC 直接接入 <strong>GB/T28181 视频接入平台</strong>;</li><li>统一在 <strong>GB/T28181 视频接入平台</strong> 管理各种 IPC/NVR 等设备, 为上层业务系统提供点播, 录像查看, 视频分屏展示等常规功能;</li></ol><p>这里的 <strong>GB/T28181 视频接入平台</strong> 相当与一个中介, 业务系统不再需要与各个设备厂商对接私有的视频接入协议, 而实施团队只需要将 IPC/NVR 等设备进行正确的组网即可, 这样能够大大缩短项目上线时间.</p><blockquote><p>简而言之, 视频接入平台对下能有效屏蔽不同厂商不同协议接入带来的复杂性, 对上能够兼容各种视频查看需求, 减少重复开发成本, 便于在一处统一管理视频设备, 从而加快项目进度.</p></blockquote><h3 id="4-2-什么是-GB-T28181-平台"><a href="#4-2-什么是-GB-T28181-平台" class="headerlink" title="4.2 什么是 GB/T28181 平台"></a>4.2 什么是 GB/T28181 平台</h3><blockquote><p>GB/T28181 协议指的是国家标准 GB/T 28181—2016《公共安全视频监控联网系统信息传输、交换、控制技术要求》1，该标准规定了公共安全视频监控联网系统的互联结构， 传输、交换、控制的基本要求和安全性要求， 以及控制、传输流程和协议接口等技术要求，是视频监控领域的国家标准。GB/T28181 协议信令层面使用的是 SIP（Session Initiation Protocol）协议 2，流媒体传输层面使用的是实时传输协议（Real-time Transport Protocol，RTP）协议 3，因此可以理解为 GB/T28181 是在国际通用标准的基础之上进行了私有化定制以满足视频监控联网系统互联传输的标准化需求。本文旨在说明在 FFmpeg 中增加对 GB/T28181 协议的支持，使其可以与支持 GB/T28181 协议的设备进行通信与控制，实现设备的注册、保活以及流媒体的传输。</p></blockquote><p>因为是国家标准协议, 目前市面上大多数视频设备都已支持 GB/T28181 协议, 比如大华, 海康等主流的监控厂商.</p><p>一个完整的 GB/T28181 平台，通常由<strong>管理平台、信令服务器、流媒体服务器、监控设备（IPC、NVR）、管理终端</strong>等几部分组成:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/yyy.drawio.svg" alt="yyy.drawio.svg"></p><ol><li><strong>信令服务器</strong> 是与网络中 <strong>监控设备</strong> 与 <strong>管理终端</strong> 之间进行通信的代理，也是各级系统之间的代理，<strong>信令服务器</strong> 要有固定的 IP 地址或域名，如果要面向公网服务，还需要有公网 IP。由于是 <strong>监控设备</strong> 主动向信令服务器注册，所以 <strong>监控设备</strong> 不需要有固定的 IP。<strong>监控设备</strong> 注册到信令服务器上之后，管理者通过向信令服务器发送指令来管理 <strong>监控设备</strong>。</li><li><strong>流媒体服务器</strong> 是视频传输的代理，该系统接受监控设备发送的视频流，向视频调取方转发视频。视频调取方可以是监控监控视频的用户、第三方业务系统或者是上下级平台。协议规定监控设备通过 rtp 协议向流媒体服务器发送视频流，但是没有约定流媒体服务器向其他方转发视频的协议，因此在视频转发时具有更大的灵活性，可以根据需要采用合适的协议转发视频。</li></ol><p>国标 GB/T28181 接入服务包含设备管理，视频流协议转换，直播监控，录像回放等。</p><table><thead><tr><th align="center">功能名称</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center">设备管理</td><td align="center">支持常见设备品牌接入到萤石开放平台进行设备的统一管理，远程控制。</td></tr><tr><td align="center">视频流协议转换</td><td align="center">支持将 GB/T28181 视频协议转换为 RTMP、FLV、HLS、EZopen 协议，并进行分发。</td></tr><tr><td align="center">直播监控</td><td align="center">支持主流直播标准协议 HLS、RTMP、 FLV 以及 EZopen 协议，轻松覆盖各种应用端：Android、iOS、小程序、PC、Web 等。</td></tr><tr><td align="center">录像回放</td><td align="center">支持多路视频同时回放、倍速回访、进度条控制、云端录制等功能，客户可按需实现回放控制。</td></tr><tr><td align="center">对讲与设备控制</td><td align="center">可以通过调用语音对讲功能的 API 实现语音对讲功能；同时支持云台控制相关设备控制功能。满足多项设备交互需求，适用更多场景需求。</td></tr><tr><td align="center">消息推送</td><td align="center">支持获取包括设备报警、视频报警、设备故障报警等类型的设备端事件上报。</td></tr><tr><td align="center">存储与媒体处理</td><td align="center">在国标协议基础上，支持设备抽帧，获取重点图片数据进行存储。并支持云端视频画面录制与存储，保存业务场景中的重点音视频数据。</td></tr></tbody></table><h3 id="4-3-整体流程"><a href="#4-3-整体流程" class="headerlink" title="4.3 整体流程"></a>4.3 整体流程</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/zzz.drawio.svg" alt="zzz.drawio.svg"></p><ol><li>IPC/NVR 本地配置 SIP 相关信息, 然后定时向 SIP 信息服务器注册当前的设备信息, 比如 IP, 设备 ID, 设备类型等;</li><li>SIP 信令服务器会通过管理平台设置的相关信息进行设备验证, 比如 SIP 编号, 密码是否正确等;</li><li>设备注册成功后将会展示在管理平台中, 可通过此平台维护设备的通道, 地理位置, 录像文件, 设备分组, 视频墙和流媒体服务器节点等信息;</li><li>终端设备需要查看实时视频时, 管理平台会通过流媒体服务器下发拉流动作, 流媒体服务器向设备发送拉流请求后, 设备使用 RTP 协议向流媒体服务器推流;</li><li>流媒体服务器在接收到 RTP 视频流后, 根据管理终端的需要可以转换成不同的视频流输出, 比如 FLV, MP4, HLS, TS, RTC ,RTMP, RTSP 等, 因此可以满足绝大多数的业务场景;</li><li>GB/T28181 规定 SIP 应该包含控制信号和视频信号, 控制信号用于控制球机的移动, 因此只要是支持 GB/T28181 的设备, 不再需要单独对接厂商的 SDK 去控制设备;</li><li>SIP 信令服务器还能够将设备的消息推送到管理平台, 比如离线, 设备监测到动作, 设备上线等, 而管理平台可以根据这些消息进行自定义业务处理;</li></ol><h2 id="5-流媒体服务选型"><a href="#5-流媒体服务选型" class="headerlink" title="5. 流媒体服务选型"></a>5. 流媒体服务选型</h2><h3 id="5-1-ZLMediaKit"><a href="#5-1-ZLMediaKit" class="headerlink" title="5.1 ZLMediaKit"></a>5.1 ZLMediaKit</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9kb2NzLnpsbWVkaWFraXQuY29tL3poLw==">https://docs.zlmediakit.com/zh/</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Eg8Am302.webp" alt="20241229154732_Eg8Am302.webp"></p><p><strong>ZLMediaKit</strong> 是一套高性能的流媒体服务框架，目前支持 rtmp、rtsp、hls、http-flv 等流媒体协议，支持 linux、macos、windows 三大 PC 平台和 ios、android 两大移动端平台。</p><p><strong>主要功能:</strong></p><ol><li>基于 C++11 开发，避免使用裸指针，代码稳定可靠，性能优越。</li><li>支持多种协议(RTSP/RTMP/HLS/HTTP-FLV/WebSocket-FLV/GB28181/HTTP-TS/WebSocket-TS/HTTP-fMP4/WebSocket-fMP4/MP4),支持协议互转。</li><li>使用多路复用/多线程/异步网络 IO 模式开发，并发性能优越，支持海量客户端连接。</li><li>代码经过长期大量的稳定性、性能测试，已经在线上商用验证已久。</li><li>支持 linux、macos、ios、android、windows 全平台。</li><li>支持画面秒开、极低延时(500 毫秒内，最低可达 100 毫秒)。</li><li>提供完善的标准 C API,可以作 SDK 用，或供其他语言调用。</li><li>提供完整的 MediaServer 服务器，可以免开发直接部署为商用服务器。</li><li>提供完善的 restful api 以及 web hook，支持丰富的业务逻辑。</li><li>打通了视频监控协议栈与直播协议栈，对 RTSP/RTMP 支持都很完善。</li><li>全面支持 H265/H264/AAC/G711/OPUS。</li></ol><blockquote><p>总结: 同时支持 rtsp/rtmp 推拉流，而且支持 h265 的推拉流（推流端要支持 265 的 ffmpeg/拉流播放端也要支持 265 的播放器），支持各种格式拉流，使用者众多</p></blockquote><h3 id="5-2-Monibuca"><a href="#5-2-Monibuca" class="headerlink" title="5.2 Monibuca"></a>5.2 Monibuca</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9tN3MubGl2ZS8jdWk=">https://m7s.live/#ui</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_HaiZHt44.webp" alt="20241229154732_HaiZHt44.webp"></p><p>Monibuca 是一个开源的流媒体服务器开发框架，适用于快速定制化开发流媒体服务器，可以对接 CDN 厂商，作为回源服务器，也可以自己搭建集群部署环境。 丰富的内置插件提供了流媒体服务器的常见功能，例如 rtmp server、http-flv、视频录制、QoS 等。除此以外还内置了后台 web 界面，方便观察服务器运行的状态。 也可以自己开发后台管理界面，通过 api 方式获取服务器的运行信息。 Monibuca 提供了可供定制化开发的插件机制，可以任意扩展其功能。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_1Z6xq7im.webp" alt="20241229154732_1Z6xq7im.webp"></p><p><strong>主要功能:</strong></p><ol><li>针对流媒体服务器独特的性质进行的优化，充分利用 Golang 的 goroutine 的性质对大量的连接的读写进行合理的分配计算资源，以及尽可能的减少内存 Copy 操作。使用对象池减少 Golang 的 GC 时间。</li><li>专为二次开发而设计，基于 Golang 语言，开发效率更高；独创的插件机制，可以方便用户定制个性化的功能组合，更高效率的利用服务器资源。</li><li>功能强大的仪表盘可以直观的看到服务器运行的状态、消耗的资源、以及其他统计信息。用户可以利用控制台对服务器进行配置和控制。点击右上角菜单栏里面的演示，可以看到演示控制台界面。</li><li>纯 Go 编写，不依赖 cgo，不依赖 FFMpeg 或者其他运行时，部署极其方便，对服务器的要求极为宽松。</li></ol><blockquote><p>总结: 支持自定义插件, 扩展新功能非常方便, 缺点就是部分插件收费.</p></blockquote><h3 id="5-3-SRS"><a href="#5-3-SRS" class="headerlink" title="5.3 SRS"></a>5.3 SRS</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9vc3Nycy5uZXQvbHRzL3poLWNuLw==">https://ossrs.net/lts/zh-cn/</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Ne0IQhYm.webp" alt="20241229154732_Ne0IQhYm.webp"></p><p>SRS(Simple Realtime Server)是一个简单高效的实时视频服务器，支持 RTMP、WebRTC、HLS、HTTP-FLV、SRT 等多种实时流媒体协议。</p><p>SRS 作为当前非常普遍的运营级解决方案，具备非常全面的功能，包括集群、协议网关、CDN 功能等，主要功能如下：</p><ol><li>SRS 定位是运营级的互联网直播服务器集群，追求更好的概念完整性和最简单实现的代码。</li><li>SRS 提供了丰富的接入方案将 RTMP 流接入 SRS， 包括推送 RTMP 到 SRS、推送 RTSP/UDP/FLV 到 SRS、拉取流到 SRS。 SRS 还支持将接入的 RTMP 流进行各种变换，譬如将 RTMP 流转码、流截图、 转发给其他服务器、转封装成 HTTP-FLV 流、转封装成 HLS、 转封装成 HDS、转封装成 DASH、录制成 FLV/MP4。</li><li>SRS 包含支大规模集群如 CDN 业务的关键特性， 譬如 RTMP 多级集群、源站集群、VHOST 虚拟服务器 、 无中断服务 Reload、HTTP-FLV 集群。</li><li>SRS 还提供丰富的应用接口， 包括 HTTP 回调、安全策略 Security、HTTP API 接口、 RTMP 测速。</li><li>SRS 在源站和 CDN 集群中都得到了广泛的应用 Applications。</li></ol><blockquote><p>总结: 支持 rtmp 推流，早期版本支持 rtsp 推流，不知道为何移除了。支持部分格式拉流，不支持 ws-flv 拉流，使用者众多</p></blockquote><h3 id="5-5-EasyDarwin"><a href="#5-5-EasyDarwin" class="headerlink" title="5.5 EasyDarwin"></a>5.5 EasyDarwin</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly93d3cuZWFzeWRhcndpbi5vcmcv">https://www.easydarwin.org/</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_jMsecsHY.webp" alt="20241229154732_jMsecsHY.webp"></p><p><strong>EasyDarwin</strong> 是由国内开源流媒体团队维护和迭代的一整套开源流媒体视频平台框架，Golang 开发，从 2012 年 12 月创建并发展至今，包含有单点服务的开源流媒体服务器，和扩展后的流媒体云平台架构的开源框架，开辟了诸多的优质开源项目，能更好地帮助广大流媒体开发者和创业型企业快速构建流媒体服务平台，更快、更简单地实现最新的移动互联网(安卓、iOS、H5、微信)流媒体直播与点播的需求，尤其是安防行业与互联网行业的衔接。</p><p><strong>主要功能:</strong></p><ol><li>基于 Golang 语言开发维护。</li><li>支持 Windows、Linux、macOS 三大系统平台部署。</li><li>支持 RTSP 推流分发（推模式转发）。</li><li>支持 RTSP 拉流分发（拉模式转发）。</li><li>服务端录像、检索、回放。</li><li>支持关键帧缓存、秒开画面。</li><li>Web 后台管理。</li><li>分布式负载均衡。</li></ol><blockquote><p>总结: 只支持 rtsp 推拉流，默认端口 5541，不支持其他格式拉流，如果仅仅是监控摄像头使用，非常方便，有个网页管理后台，不会过期可以一直用，缺点是功能单一，只能在他的后台查看视频流，或者用播放器播放.</p></blockquote><p><strong>上述 4 种流媒体服务对比:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_ZYApFZks.webp" alt="20241229154732_ZYApFZks.webp"></p><h3 id="5-6-MediaMTX"><a href="#5-6-MediaMTX" class="headerlink" title="5.6 MediaMTX"></a>5.6 MediaMTX</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRodWIuY29tL2JsdWVudmlyb24vbWVkaWFtdHg=">https://github.com/bluenviron/mediamtx</a></p><p>_MediaMTX_（以前称为<em>rtsp-simple-server</em>）是一个即用型、零依赖的实时媒体服务器和媒体代理，允许发布、读取、代理和记录视频和音频流。它被设想为一种“媒体路由器”，将媒体流从一端路由到另一端。</p><p><strong>主要功能:</strong></p><ul><li>将直播流发布到服务器</li><li>从服务器读取直播流</li><li>流自动从一种协议转换为另一种协议</li><li>在不同的路径中同时提供多个流</li><li>将流记录到磁盘</li><li>验证用户身份；使用内部或外部身份验证</li><li>将读取器重定向到其他 RTSP 服务器（负载平衡）</li><li>通过 API 查询和控制服务器</li><li>在不断开现有客户端连接的情况下重新加载配置（热重载）</li><li>读取 Prometheus 兼容的指标</li><li>当客户端连接、断开连接、读取或发布流时运行挂钩（外部命令）</li><li>与 Linux、Windows 和 macOS 兼容，不需要任何依赖项或解释器，它是单个可执行文件</li></ul><blockquote><p>总结: 同时支持 rtsp/rtmp 推拉流，拉流还支持 hls/webrtc 两种方式，最新版本还支持了 srt 方式。推出来的 hls/webrtc 可以直接嵌入个 iframe 网页播放，没有任何依赖，如果希望直接在网页中播放无依赖，强烈推荐用 mediamtx</p></blockquote><h3 id="5-7-Nginx-rtmp-module"><a href="#5-7-Nginx-rtmp-module" class="headerlink" title="5.7 Nginx-rtmp-module"></a>5.7 Nginx-rtmp-module</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRodWIuY29tL2FydXQvbmdpbngtcnRtcC1tb2R1bGU=">https://github.com/arut/nginx-rtmp-module</a></p><p>Nginx 本身是一个非常出色的 HTTP 服务器,FFMPEG 是非常好的音视频解决方案.这两个东西通过一个 nginx 的模块 nginx-rtmp-module,组合在一起即可以搭建一个功能相对比较完善的流媒体服务器. 这个流媒体服务器可以支持 RTMP 和 HLS(Live Http Stream)。</p><p><strong>主要特性:</strong></p><ol><li>支持 RTMP、HLS、MPEG-DASH</li><li>支持 RTMP、HLS 点播</li><li>可将直播视频分段存储</li><li>支持 H.264 视频编解码、AAC 音频编解码</li><li>支持 FFmpeg 命令内嵌</li><li>支持回调 HTTP</li><li>可使用 HTTP 对直播进行删除、录播等控制</li><li>具有强大的缓冲功能，可确保在效率与码率间达到平衡</li><li>支持多种操作系统（Linux、MacOS、Windows）</li></ol><blockquote><p>总结: 只支持 rtmp 推拉流，默认端口 1935，不支持其他格式拉流，功能极其单一，不推荐。</p></blockquote><h2 id="6-平台选型"><a href="#6-平台选型" class="headerlink" title="6. 平台选型"></a>6. 平台选型</h2><h3 id="6-1-WVP"><a href="#6-1-WVP" class="headerlink" title="6.1 WVP"></a>6.1 WVP</h3><p>WEB VIDEO PLATFORM 是一个开源的基于 GB28181-2016 标准实现的开箱即用的网络视频平台，负责实现核心信令与设备管理后台部分，支持 NAT 穿透，支持海康、大华、宇视等品牌的 IPC、NVR 接入。支持国标级联，支持将不带国标功能的摄像机/直播流/直播推流转发到其他国标平台。</p><p>流媒体服务基于@夏楚 ZLMediaKit <a href="/goto.html?u=aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9aTE1lZGlhS2l0L1pMTWVkaWFLaXQ=" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/ZLMediaKit/ZLMediaKit</a><br>播放器使用@dexter jessibuca <a href="/goto.html?u=aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9sYW5naHVpaHVpL2plc3NpYnVjYS90cmVlL3Yz" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/langhuihui/jessibuca/tree/v3</a><br>前端页面基于@Kyle MediaServerUI <a href="/goto.html?u=aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzOi8vZ2l0ZWUuY29tL2tra2trNUcvTWVkaWFTZXJ2ZXJVSQ==" rel="external nofollow noopener noreferrer" target="_blank">https://gitee.com/kkkkk5G/MediaServerUI</a> 进行修改.</p><p>官网地址： <a href="/goto.html?u=aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS82NDg1NDA4NTgvd3ZwLUdCMjgxODEtcHJv" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/648540858/wv</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_CtvQE7i1.webp" alt="20241229154732_CtvQE7i1.webp"></p><p><strong>主要特性:</strong></p><ul><li>实现标准的 28181 信令，兼容常见的品牌设备，比如海康、大华、宇视等品牌的 IPC、NVR 以及平台。</li><li>支持将国标设备级联到其他国标平台，也支持将不支持国标的设备的图像或者直播推送到其他国标平台</li><li>前端完善，自带完整前端页面，无需二次开发可直接部署使用。</li><li>完全开源，且使用 MIT 许可协议。保留版权的情况下可以用于商业项目。</li><li>支持多流媒体节点负载均衡。</li></ul><h3 id="6-2-LiveGBS"><a href="#6-2-LiveGBS" class="headerlink" title="6.2 LiveGBS"></a>6.2 LiveGBS</h3><p>LiveGBS 国标 GB/T28181 流媒体服务器软件，支持设备|平台 GB28181 注册接入、向上级联第三方国标平台， 可视化的 WEB 页面管理(页面源码开源)；支持云台控制、设备录像检索、回放，支持语音对讲，用户管理， 多种协议流输出，实现浏览器无插件直播。</p><p>官网地址: <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9nYnMubGl2ZXFpbmcuY29tL2RvY3MvcHJvZHVjdHMvTGl2ZUdCUy5odG1s">https://gbs.liveqing.com/docs/products/LiveGBS.html</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_RPzdHD7W.webp" alt="20241229154732_RPzdHD7W.webp"></p><p><strong>主要特性:</strong></p><ol><li>LiveGBS 国标 (GB28181) 流媒体服务软件</li><li>支持各个版本的 GB28181 协议；</li><li>提供用户管理及 Web 可视化页面管理；</li><li>提供设备状态管理，可实时查看设备是否掉线等信息；</li><li>实时流媒体处理，PS（TS）转 ES；</li><li>设备状态监测、云台控制、录像检索、回放；</li><li>提供 RTSP、RTMP、HTTP-FLV、HLS 等多种协议流输出；</li><li>对外提供服务器获取状态、信息，控制等 HTTP API 接口；</li><li>企业私有云部署，支持 Linux &amp; Windows;</li></ol><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_IywNDkIH.webp" alt="20241229154732_IywNDkIH.webp"></p><h3 id="6-3-AeroGBD"><a href="#6-3-AeroGBD" class="headerlink" title="6.3 AeroGBD"></a>6.3 AeroGBD</h3><p>基于 GB/T 28181-2016 协议标准，提供标准接入、标准媒体、标准应用、标准共享的国标服务能力。能够接入符合 GB/T 28181-2016 的视频监控平台、硬盘录像机、摄像机、无人机、机器人等市面各类厂家设备；能够实现按照 GB/T 28181-2016 方式进行国标共享输出，提供实时视频、下级/前端录像、系统管理等应用功能，具有联网能力强、开放兼容、易用便捷等的特点。适用于智慧城市、雪亮工程、行业视频联网等各行业视频标准联网接入场景。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Yl2AZeCG.webp" alt="20241229154732_Yl2AZeCG.webp"></p><p><strong>主要特性:</strong></p><ol><li><strong>接入性能强：</strong>单套支持接入&gt;10 个下级平台，&gt;2 万路设备，可集群扩容；</li><li><strong>共享性能强：</strong>单套支持&gt;10 个上级共享推送，可集群扩容；</li><li><strong>视频并发高：</strong>单套支持 500 路视频并发，可集群扩容；</li><li><strong>解码性能：</strong>客户端最大支持 9 路视频同屏播放，2K 视频不低于 2 路；</li><li><strong>视频开流：</strong>实时视频开流速度小于 3 秒；前端/下级录像调阅开流小于 3 秒。</li><li><strong>录像开流：</strong> 下级平台录像开流小于 3 秒；</li><li><strong>用户并发：</strong> 单套不低于 100 个用户并发使用；</li><li><strong>部署安装：</strong> 一台起步，一键安装部署，单次标准服务器部署时间小于 10 分钟。</li></ol><h3 id="6-4-EasyGBS"><a href="#6-4-EasyGBS" class="headerlink" title="6.4 EasyGBS"></a>6.4 EasyGBS</h3><p>EasyGBS 国标视频云服务提供流转发服务，负责将 GB28181 设备/平台推送的 PS 流转成 ES 流，然后提供 RTSP、RTMP、FLV、HLS 多种格式进行分发，实现 web 浏览器、手机浏览器、微信、PC 客户端等各种终端无插件播放。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_oWxv8mHR.webp" alt="20241229154732_oWxv8mHR.webp"></p><p><strong>主要特性:</strong></p><ol><li><strong>可视化页面</strong>: 提供用户管理及 web 可视化页面管理，及录像检索、回放</li><li><strong>设备状态管理</strong>: 提供设备状态管理，可实时查看设备是否掉线等信息</li><li><strong>实时流处理</strong>: 实时流媒体处理，PS（TS）转 ES，提供音视频转码能力</li><li><strong>云台控制</strong>: 基于动态组网服务创建智能网络，按需选择需要组网的网络成员实现点点互联</li><li><strong>多种流输出</strong>: 提供 RTSP、RTMP、HTTP-FLV、HLS 等多种协议流输出</li><li><strong>API 接口</strong>: 对外提供服务器获取状态、信息，控制 HTTP API 接口</li></ol><h3 id="6-5-NTV-GBS"><a href="#6-5-NTV-GBS" class="headerlink" title="6.5 NTV GBS"></a>6.5 NTV GBS</h3><p>NTV GBS 是一款成熟、功能完善、产品化程度很高的 GB28181 服务平台，从 2022 年推出以来迅速获得各技术平台报道转发，因其界面简洁舒畅、操作简单获得众多大小用户青睐。</p><p>NTV GBS 提供云服务和独立部署两种使用模式，云服务方式注册账号就可以使用，而且提供免费流量供使用；独立部署方式需要自己购买设备安装该软件。</p><p>官网地址： <a href="/goto.html?u=aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHA6Ly93d3cubnR2Z2JzLmNvbS8/Zj16aA==" rel="external nofollow noopener noreferrer" target="_blank">GB28181 视频监控国标平台 - NTV GBS</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_PbEm8IGB.webp" alt="20241229154732_PbEm8IGB.webp"></p><p><strong>主要功能:</strong></p><ol><li>视频监控设备远程接入、远程管理、云台控制和视频调阅，云端录像和回看</li><li>支持各型号 GB28181 国标摄像头 IPC 和硬盘录像机 NVR/HVR/DVR</li><li>支持各类 rtmp/rtsp 支持直播推流摄像机，兼容 ONVIF 协议</li><li>视频接入分析服务，用于各种智慧应用场景，重新定义监控视频价值</li><li>在网页、小程序、业务平台中无插件播放，提供 rtmp/rtsp/hls/http/websocket 播出地址</li><li>支持<strong>H265</strong>视频编码，更省流量更流畅</li><li>多级平台级联对接，实现上下级平台监控视频融合汇聚</li></ol><h3 id="6-6-AKStream"><a href="#6-6-AKStream" class="headerlink" title="6.6 AKStream"></a>6.6 AKStream</h3><p>AKStream 是一套全功能的软 NVR 接口平台，软 NVR 指的是软件定义的 NVR（Network Video Recoder），AKStream 经过长达一年半的开发，测试与调优，已经具备了一定的使用价值，在可靠性，实用性方面都有着较为不错的表现，同时因为 AKStream 是一套完全开源的软件产品，在众多网友的一起加持下，AKStream 的安全性也得到了验证。</p><p>AKStream 集成了 ZLMediaKit 作为其流媒体服务器，AKStream 支持对 ZLMediaKit 的集群管理（通过 AKStreamKeeper-流媒体治理组件），可以将分布在不同服务器的多个 ZLMediaKit 集群起来，统一管理，统一调度。</p><p>官网地址：<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRodWIuY29tL2NoYXRvcDIwMjAvQUtTdHJlYW0=">https://github.com/chatop2020/AKStream</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_dRpr9eti.webp" alt="20241229154732_dRpr9eti.webp"></p><p><strong>主要特性:</strong></p><ol><li>控制台（流媒体服务性能监控）</li><li>视频广场（多视频）</li><li>设备管理</li><li>录像计划（本地录制）</li><li>录像回放（GB28181 和本地录制）</li><li>视频推流</li><li>视频拉流</li><li>视频本地录制</li><li>云台功能</li></ol><h3 id="6-7-LiteCVR"><a href="#6-7-LiteCVR" class="headerlink" title="6.7 LiteCVR"></a>6.7 LiteCVR</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_CeJAULOF.webp" alt="20241229154732_CeJAULOF.webp"></p><p>LiteCVR 平台支持国标 GB/T28181、RTMP、RTSP/Onvif 协议等，以及海康 SDK、大华 SDK、海康 Ehome 等厂家私有协议，也支持标准的 API 开发接口，可集成至移动端 APP、小程序、其他业务平台播放，并提供分享链接和 iframe 地址，可直接在浏览器播放。</p><blockquote><p>综合对比下来, 最终选择 WVP 平台作为视频接入平台, 主要原因如下:</p><ol><li>WVP 平台全部开源且开源协议友好;</li><li>WVP 平台的功能较为完善, 且有整套平台, 包括管理端, SIP 服务和流媒体服务;</li><li>WVP 流媒体服务使用业内较为流行且社区活跃的 ZLMediaKit;</li><li>WVP 管理端使用 Spring Boot 开发, 可以快速的进行二次开发;</li></ol></blockquote><h2 id="7-WVP"><a href="#7-WVP" class="headerlink" title="7. WVP"></a>7. WVP</h2><p>WEB VIDEO PLATFORM 是一个基于 GB28181-2016 标准实现的开箱即用的网络视频平台，负责实现核心信令与设备管理后台部分，支持 NAT 穿透，支持海康、大华、宇视等品牌的 IPC、NVR 接入。支持国标级联，支持将不带国标功能的摄像机/直播流/直播推流转发到其他国标平台。</p><p><strong>项目地址</strong>：<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRlZS5jb20vcGFuNjQ4NTQwODU4L3d2cC1HQjI4MTgxLXBybw==">wvp-GB28181-pro</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9kb2Mud3ZwLXByby5jbi8jLw==">文档地址</a></p><h3 id="7-1-应用场景"><a href="#7-1-应用场景" class="headerlink" title="7.1 应用场景"></a>7.1 应用场景</h3><ul><li>支持浏览器无插件播放摄像头视频。</li><li>支持摄像机、平台、NVR 等设备接入。 支持国标级联。</li><li>支持 rtsp/rtmp 等视频流转发到国标平台。</li><li>支持 rtsp/rtmp 等推流转发到国标平台。</li></ul><h3 id="7-2-主要特性"><a href="#7-2-主要特性" class="headerlink" title="7.2 主要特性"></a>7.2 主要特性</h3><ul><li>实现标准的 28181 信令，兼容常见的品牌设备，比如海康、大华、宇视等品牌的 IPC、NVR 以及平台。</li><li>支持将国标设备级联到其他国标平台，也支持将不支持国标的设备的图像或者直播推送到其他国标平台</li><li>前端完善，自带完整前端页面，无需二次开发可直接部署使用。</li><li>完全开源，且使用 MIT 许可协议。保留版权的情况下可以用于商业项目。</li><li>支持多流媒体节点负载均衡。</li></ul><h3 id="7-3-基础功能"><a href="#7-3-基础功能" class="headerlink" title="7.3 基础功能"></a>7.3 基础功能</h3><ol><li>视频预览;</li><li>云台控制（方向、缩放控制）;</li><li>视频设备信息同步;</li><li>离在线监控;</li><li>录像查询与回放（基于 NVR/DVR，暂不支持快进、seek 操作）;</li><li>无人观看自动断流;</li><li>支持 UDP 和 TCP 两种国标信令传输模式;</li><li>集成 web 界面, 不需要单独部署前端服务, 直接利用 wvp 内置文件服务部署, 随 wvp 一起部署;</li><li>支持平台接入, 针对大平台大量设备的情况进行优化;</li><li>支持检索,通道筛选;</li><li>支持自动配置 ZLM 媒体服务, 减少因配置问题所出现的问题;</li><li>支持启用 udp 多端口模式, 提高 udp 模式下媒体传输性能;</li><li>支持通道是否含有音频的设置;</li><li>支持通道子目录查询;</li><li>支持 udp/tcp 国标流传输模式;</li><li>支持直接输出 RTSP、RTMP、HTTP-FLV、Websocket-FLV、HLS 多种协议流地址</li><li>支持国标网络校时</li><li>支持公网部署, 支持 wvp 与 zlm 分开部署</li><li>支持播放 h265, g.711 格式的流(需要将 closeWaitRTPInfo 设为 false)</li><li>报警信息处理，支持向前端推送报警信息</li></ol><h3 id="7-4-部署"><a href="#7-4-部署" class="headerlink" title="7.4 部署"></a>7.4 部署</h3><p>WVP 平台由 管理平台, SIP 服务和流媒体服务组成, 关系图如下:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/wvp.drawio.svg" alt="wvp.drawio.svg"></p><ol><li>使用 Spring 实现了 SIP 协议, 便于二次开发;</li><li>使用 MySQL 存储结构化数据;</li><li>使用 Redis 存储注册信息;</li><li>流媒体服务器使用开源的高性能 ZLMediaKit 实现;</li><li>使用 assist 服务用于存储视频并提供历史视频查看;</li></ol><p>WVP 平台部署可是使用 2 种方式, 一是使用源码自行编译部署, 二是使用已有 docker 镜像一键部署, 但是官方 docker 镜像最后更新与 2 年前, 因此最好的方式是使用源码编译部署, 不过为了可移植性和方便快捷的安装部署, 这里考虑使用源码打包为 docker 镜像安装部署, 具体过程后续再完善补充.</p><p><strong>数据流向</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E6%95%B0%E6%8D%AE%E6%B5%81.drawio.svg" alt="数据流.drawio.svg"></p><p><strong>实时视频流:</strong></p><ol><li>业务系统向 WVP 管理平台发起观看实时视频的请求;</li><li>WVP 接收到请求后, 根据设备编码和通道号查询设备是否存在, 然后将编码成 RTSP 视频流协议并调用流媒体服务器进行视频流转码;</li><li>流媒体服务器接收到请求后转换成 H5 能够直接播放的视频流地址, 比如 mp4/FLV 等格式;</li></ol><p><strong>历史视频</strong></p><ol><li>流媒体服务器会将实时视频全部存储到服务器, 供业务端查询历史视频;</li><li>流媒体服务器会将历史视频存储到 NAS;</li><li>IPC/执法记录仪等支持 FTP 的设备, 可以将本地的历史视频传输到 NAS 的 FTP 服务器;</li></ol><h3 id="7-5-使用"><a href="#7-5-使用" class="headerlink" title="7.5 使用"></a>7.5 使用</h3><p>目前已在公司内部服务器使用最新的源码安装部署了一套 WVP 平台, 访问地址为: <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovLzEwLjEwMC4xMC4xMzU6MTgwODAvIy9sb2dpbg==">http://10.100.10.135:18080/#/login</a>, 登录账号与密码: admin/admin.</p><h4 id="7-5-1-控制台"><a href="#7-5-1-控制台" class="headerlink" title="7.5.1 控制台"></a>7.5.1 控制台</h4><p>能够展示服务器主要资源的使用情况以及设备接入数量:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_uk6e6kTz.webp" alt="20241229154732_uk6e6kTz.webp"></p><h4 id="7-5-2-视频墙"><a href="#7-5-2-视频墙" class="headerlink" title="7.5.2 视频墙"></a>7.5.2 视频墙</h4><p>自带 1/4/9 个视频窗口, 如果需要更多窗口需要二开</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_1bYIRYDQ.webp" alt="20241229154732_1bYIRYDQ.webp"></p><h4 id="7-5-3-设备管理"><a href="#7-5-3-设备管理" class="headerlink" title="7.5.3 设备管理"></a>7.5.3 设备管理</h4><p>目前已接入智慧工地的 IVSS, 公司内部的 NVR 和一个 4G IPC:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_05vro0nZ.webp" alt="20241229154732_05vro0nZ.webp"></p><p>实时视频:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_PoX5ufi9.webp" alt="20241229154732_PoX5ufi9.webp"></p><p>在点播视频后, 会将视频存储到服务器:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_Wzk1RDR2.webp" alt="20241229154732_Wzk1RDR2.webp"></p><p>也可以查看和下载 NVR 或 IPC 存储卡中的历史视频:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_fdR6jGCP.webp" alt="20241229154732_fdR6jGCP.webp"></p><p>云台控制:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_OFughEBk.webp" alt="20241229154732_OFughEBk.webp"></p><p>另一个有用的功能是电子地图, 不过目前没有页面可以直接设置, 如果后期需要可以进行二开:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_pWdpx07u.webp" alt="20241229154732_pWdpx07u.webp"></p><h4 id="7-5-4-拉流代理"><a href="#7-5-4-拉流代理" class="headerlink" title="7.5.4 拉流代理"></a>7.5.4 拉流代理</h4><p>可以将不具备 GB/T28181 协议但是又固定 IP 的视频设备接入到此平台:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_0BLonsNd.webp" alt="20241229154732_0BLonsNd.webp"></p><h3 id="7-6-设备对接"><a href="#7-6-设备对接" class="headerlink" title="7.6 设备对接"></a>7.6 设备对接</h3><h4 id="7-6-1-服务端"><a href="#7-6-1-服务端" class="headerlink" title="7.6.1 服务端"></a>7.6.1 服务端</h4><p>设备接入主要是需要在设备上配置 28181 上级也就是 WVP 的信息，只有信息一致的情况才可以注册成功。设备注册成功后打开 WVP-&gt;国标设备,可以看到新增加的设备；<br>主要有以下字段需要配置：</p><ul><li>sip-&gt;ip<br>本机 IP，不要使用 127.0.0.1/0.0.0.0, 除非你对项目及其熟悉</li><li>sip-&gt;port<br>28181 服务监听的端口</li><li>sip-&gt;domain<br>domain 宜采用 ID 统一编码的前十位编码。</li><li>sip-&gt;id<br>28181 服务 ID</li><li>sip-&gt;password<br>28181 服务密码</li><li>配置信息在如下位置</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_qgjUmtFS.webp" alt="20241229154732_qgjUmtFS.webp"></p><h4 id="7-6-2-客户端"><a href="#7-6-2-客户端" class="headerlink" title="7.6.2 客户端"></a>7.6.2 客户端</h4><p>SIP 客户端设置基本一致, 这里以大华 NVR 为例:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_AV3XWako.webp" alt="20241229154732_AV3XWako.webp"></p><p>因为 NVR 与 WVP 平台部署在同一个局域网内, 因此 NVR 配置的 SIP 服务器 IP 为局域网 IP, 如果通过公网访问, SIP 服务器 IP 则配置为公网固定 IP.</p><h3 id="7-7-业务系统对接"><a href="#7-7-业务系统对接" class="headerlink" title="7.7 业务系统对接"></a>7.7 业务系统对接</h3><p>前面已经讲过, WVP 可以作为视频接入层, 负责支持 GB/T28181 协议的视频设备的接入管理, 且能够为上层业务提供多种格式的视屏流, 比如:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_oVR2eFvq.webp" alt="20241229154732_oVR2eFvq.webp"></p><p>业务系统只需要调用 API 获取视频流地址即可接入视频, 避免了对接多家厂商设备的烦恼, 且如果后期更换了不同厂商的视频设备, 业务系统不需要任何修改, 只需要在 WVP 平台中接入即可.</p><p>在原有视频设备组网方式不变的情况下, 下面 3 个系统可以根据自身业务情况选择是否将现有视频接口使用 WVP API 替换.</p><h4 id="7-7-1-配电监测对接"><a href="#7-7-1-配电监测对接" class="headerlink" title="7.7.1 配电监测对接"></a>7.7.1 配电监测对接</h4><p>配电监测目前已使用 ZLMediaKit 代替原来的 ICC 作为流媒体服务器,并将 NVR 中的录像使用 RTSP 推送到流媒体服务器并转换成 mp4 格式, 然后由前端的 EasyPlayer 播放器播放, 目前支持实时预览和历史回看.</p><p>因为现在已经将 NVR 接入到 WVP 平台, 因此只需简单的修改即可接入视频:</p><ol><li><p>在配电监测平台将摄像头的设备号与通道号与摄像头绑定 (通道编号 + 设备编号唯一确认可使用的通道);</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_5icH1XyW.webp" alt="20241229154732_5icH1XyW.webp"></p></li><li><p>在 WVP 平台中根据摄像头的设备号与通道号获取实时视频流地址;</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_M2mSNZkd.webp" alt="20241229154732_M2mSNZkd.webp"></p><p>一次返回所有能使用的 url, 方便前端各种播放器对接</p></li><li><p>在 WVP 平台中根据摄像头的设备号与通道号获取录像列表;</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_39EelAbb.webp" alt="20241229154732_39EelAbb.webp"></p><p>此接口用于返回 NVR 或 IPC 本地存储卡上的录像列表</p></li><li><p>使用录像播放接口播放最近的录像:</p><p>根据录像开始时间和结束时间点播录像.</p></li></ol><h4 id="7-7-2-作业管控平台对接"><a href="#7-7-2-作业管控平台对接" class="headerlink" title="7.7.2 作业管控平台对接"></a>7.7.2 作业管控平台对接</h4><p>作业管控平台对接同样使用配电监测对接的逻辑, 主要使用以下 3 个接口:</p><ol><li>根据设备号和通道号获取实时播放 url;</li><li>根据设备号和通道号获取录像列表;</li><li>根据设备号, 通道号, 录像开始时间和录像结束时间点播录像;</li></ol><p>如果需要对球机进行控制, 还需要额外接入球机控制接口.</p><h4 id="7-7-3-大屏对接"><a href="#7-7-3-大屏对接" class="headerlink" title="7.7.3 大屏对接"></a>7.7.3 大屏对接</h4><p>大屏对接分为两种情况:</p><ol><li>大屏使用业务系统的接口获取实时视频或历史回看;</li><li>大屏直接使用 WVP 的接口;</li></ol><p>上面 2 种方式可以根据业务需求自行选择, 不过如果需要使用第二种方式, 前端需要确定设备号和通道号是否正确;</p><h4 id="7-7-4-小程序对接"><a href="#7-7-4-小程序对接" class="headerlink" title="7.7.4 小程序对接"></a>7.7.4 小程序对接</h4><p>小程序对接和大屏对接一样, 2 种方式都支持, 不过推荐使用第一种方式, 因为业务系统会维护设备号和通道号, 小程序只需要使用自身的业务 id 即可获取视频 url, 播放器推荐使用 HLS 协议, 支持 Android 和 iOS.</p><blockquote><p>总的来说, 业务系统接入 WVP 视频接口工作量较小, 且 对现有业务系统影响较小, 新的业务可以直接对接 WVP.</p></blockquote><h3 id="7-8-大屏展示"><a href="#7-8-大屏展示" class="headerlink" title="7.8 大屏展示"></a>7.8 大屏展示</h3><p>WVP 平台自带分屏展示功能, 但是最多只支持 9 分屏, 如果需要增加分屏显示, 目前有 2 种方式:</p><ol><li>对 WVP 进行二次开发, 增加分屏数量;</li><li>在业务大屏是直接开发分屏页面;</li></ol><p>因为分屏逻辑相对简单, 无非就是在一个页面上多放几个播放器而已, 因此上述 2 种方式都能够快速实现, 所以可以根据自身业务需求自行选择, 比较推荐的做法:</p><ol><li>在调度中心使用 WVP 平台进行分屏展示;</li><li>业务大屏使用自己的分屏功能展示多个视频;</li></ol><h2 id="8-规划"><a href="#8-规划" class="headerlink" title="8. 规划"></a>8. 规划</h2><ol><li>接管所有视频监控设备, 在一个平台即可查看所有视频与录像, 各部门领导可通过视频墙实时查看各项目作业情况, 满足安全审计要求;</li><li>通过 API 简化业务系统对视频监控需求的集成, 缩短开发时间;</li></ol><p>为满足以上 2 个目标, 需要以下前提:</p><ol><li>设备需要支持 GB/T28181 协议;</li><li>设备能够访问到平台 (通过公网或 VPN 均可);</li><li>业务系统能够访问视频流服务器(通过公网或 VPN 均可);</li></ol><p><strong>平台架构图:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E8%A7%84%E5%88%92.drawio.svg" alt="规划.drawio.svg"></p><h3 id="8-1-资源规划"><a href="#8-1-资源规划" class="headerlink" title="8.1 资源规划"></a>8.1 资源规划</h3><h4 id="8-1-2-硬件资源"><a href="#8-1-2-硬件资源" class="headerlink" title="8.1.2 硬件资源"></a>8.1.2 硬件资源</h4><p>目前使用 8C 16G 服务器, 在接入 3 个设备, 共计 95 视频通道的情况下, 内存占用 40%, 因为未进行任何点播视频, CPU 占用较低(CPU 主要用于视频编解码), 且因为每次点播后会存储视频, 因此随着时间的推移, 磁盘占用会越来越大, 因此考虑到后期接入的设备数量以及视频保存时间, 在 3 年内的至少满足 100 路视频的接入需求下, 对硬件资源进行如下评估:</p><h5 id="8-1-2-1-磁盘"><a href="#8-1-2-1-磁盘" class="headerlink" title="8.1.2.1 磁盘"></a>8.1.2.1 磁盘</h5><h6 id="1-存储方式"><a href="#1-存储方式" class="headerlink" title="1. 存储方式"></a>1. 存储方式</h6><p>云厂商提供的 OSS 服务能够解决诸如视频, 图像等文件的存储和调取服务, 收费以便按照空间大小收费, 因此这里不考虑云存储方案, 一是因为视频文件较大, 存储费用会较高; 二是视频这类文件较为敏感, 使用云存储无法保证数据安全.</p><h6 id="2-容量评估"><a href="#2-容量评估" class="headerlink" title="2. 容量评估"></a>2. 容量评估</h6><p>目前业务上已使用到的监控设备如下:</p><ol><li>重庆地铁 15 号线项目, IPC 数量 7 个, 历史录像直接存储到项目部上的 NVR 中;</li><li>智慧工地项目, IPC 数量 280 个, 历史录像直接存储到项目部上的 IVSS 中;</li><li>雷波矿山项目, IPC 数量在一年后计划安装 100 +, 历史录像直接存储到项目部上的 NVR 中;</li><li>变电站, 场站上的 IPC 目前在用的只有昆仑先锋变电站和铁山坡一共 10 台, 历史录像存储到调度中心的 NVR 中;</li><li>集团安全监控项目, IPC 数量为 30 台, 历史录像存储在设备的 TF 卡中;</li><li>执法记录仪数量 30 台, 历史录像存储在设备的 TF 卡中;</li><li>无人机数量 8 个, 历史录像存在设备的 TF 卡中;</li></ol><p>接入 WVP 平台的设备录像分为两种模式:</p><ol><li>云端录像: 只有主动查看设备实时视频时才会录制, 视频文件存储在 WVP 服务器中;</li><li>设备录像: 支持本地录制的设备所存储的录像, 如果是 NVR 则保存在 NVR 服务器中, 如果是 IPC 则保存在 TF 卡中;</li></ol><p><strong>设备录像:</strong></p><p>因为设备录像都是滚动录制, 所以需要评估一个作业周期内的录像大小, 这里说明一下 IPC 所需要的 TF 卡存储大小评估方式:</p><ol><li>作业持续时间, 比如一天只录制 8 个小时视频;</li><li>视频流码率: 码率越大所需要的存储空间越大, 比如码率为 1Mbps;</li><li>录像存储时间, 比如执法记录仪需要保存至少 7 天的数据;</li></ol><p>按照上述要求估算本地存储空间:</p><p><code>1Mbps * 1024Kbps/8 * 60 秒 * 60 分 * 8 小时 * 7 天 * 1 通道/1024/1024≈ 25G</code>, 再加上一些元数据的存储空间, 所以建议至少配置 32G 的 TF 卡.</p><p>NVR 自带磁盘阵列且有一套完善的录像存储和扩容机制, 因为不同的项目对视频储存的要求不一样, 所以 NVR 的存储空间最好根据自身业务需求让厂家推荐并配置合理的磁盘阵列, 因为 WVP 对应的都是 <strong>云端录像</strong>, 所以这里不对 NVR 的本地存储做讨论.</p><p><strong>云端录像:</strong></p><p>只有在主动点播视频的情况下才会触发云端录像功能, 且录制的文件保存在 WVP 的服务器中, 为了在满足业务需求的前提下减少硬件投入, 这里对 WVP 所需的磁盘阵列进行大小评估:</p><p><strong>1. 点播录像:</strong></p><ol><li>按照总共 100 个视频通道, 每天查看 10 次, 每次查看存储 10 分钟的录像;</li><li>每个视频流码率统一为 1Mbps;</li><li>录像至少保存 7 天;</li></ol><p>计算公式如下:</p><p><code>1Mbps * 1024Kbps/8 * 60 秒 * 10 分钟 * 10 次 * 7 天 * 100 通道/1024/1024 ≈ 512G</code></p><p><strong>2. 录像备份</strong></p><p>像执法记录仪这类具备录像文件上报的设备, 会通过 FTP 将录像文件上传到 WVP 服务器, 这类设备的所需的磁盘大小评估方式为:</p><ol><li>从作业管控-作业计划管控-记录仪录像可以看出, 10 分钟的视屏占用 300M;</li><li>按照一天工作 8 小时计算;</li><li>录像至少保存 7 天;</li></ol><p>计算公式如下:</p><p><code>300M * 6 * 8 小时 * 7 天 * 30 个设备/1024/1024 ≈ 3T</code></p><p>结合点播录像和录像备份的场景, 至少应该准备 4T 的磁盘, 且为了保证数据安全, 最少需要 2 块 4T 组成 RAID1, 至少保证在一块磁盘损坏的情况下数据不会丢失.</p><h6 id="3-扩容方式"><a href="#3-扩容方式" class="headerlink" title="3. 扩容方式"></a>3. 扩容方式</h6><p>磁盘阵列首先使用 2 块 4T 磁盘组成 RAID1:</p><blockquote><p><strong>RAID 1</strong>: 2 块硬盘或以上，利用镜像技术，在损失不超过一个成员磁盘时提供容错功能。<br>优势：数据安全性最高，一块坏了，其它硬盘有完整数据，保障运行。<br>缺点：容量低，硬盘使用率为 50%</p></blockquote><p>可用空间为 4T, 但是能够在一块磁盘损坏的情况下保证数据不丢失, 在后期如果磁盘空间不足, 需要进行无损扩容来保证业务的连续性, 这里给出几种扩容方案:</p><p><strong>方案一:</strong></p><p>增加一块 4T 磁盘, 使用总共 3 块 4T 磁盘从 RAID1 迁移到 RAID5, 磁盘阵列可用容量从 4T 增加到 8T;</p><blockquote><p><strong>RAID 5</strong>: 3 块硬盘或以上，同时使用条带和奇偶校验技术。提供与 RAID0 相似的读取速度，在损失不超过一个成员磁盘时仍能正常运行。<br>优势：RAID5 兼顾 RAID0 与 RAID1 的优势。RAID5 最少需要三块硬盘，通用是用 4 块硬盘，其中有一块硬盘用来做数据冗余的，换新硬盘，系统会自动进行数据同步。<br>缺点：只允许单盘故障，一盘出现故障尽快处理。有盘坏情况下，IO/CPU 性能狂跌。</p></blockquote><p><strong>方案二:</strong></p><p>增加 2 块 4T 磁盘, 从 RAID1 迁移到 RAID6;</p><blockquote><p><strong>RAID 6</strong>：4 块硬盘或以上，类似 RAID5，对数据安全性要求高，性能要求不高的可选择<br>优势：RAID6 是在 RAID5 基础上为加强数据保护而设计的。可允许损坏 2 块硬盘<br>缺点：性能提升不明显</p></blockquote><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_WJZluMXm.webp" alt="20241229154732_WJZluMXm.webp"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_LSPTz6Jv.webp" alt="20241229154732_LSPTz6Jv.webp"></p><h5 id="8-1-2-2-服务器"><a href="#8-1-2-2-服务器" class="headerlink" title="8.1.2.2 服务器"></a>8.1.2.2 服务器</h5><p><strong>服务部署架构:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.drawio.svg" alt="部署方案.drawio.svg"></p><p>需要部署的服务列表:</p><table><thead><tr><th>服务名</th><th>所需资源</th><th>备注</th></tr></thead><tbody><tr><td>Nginx</td><td>4C/1G/10G</td><td>反向代理服务器</td></tr><tr><td>WVP 管理系统</td><td>4C/2G/100G</td><td>视频管理</td></tr><tr><td>流媒体服务</td><td>8C/8G/200G</td><td>视频流转换, 拉流, 推流等</td></tr><tr><td>录像服务</td><td>4C/2G/100G</td><td>与流媒体部署在一起的用于点播录像</td></tr><tr><td>缓存服务</td><td>2C/1G/10G</td><td>WVP 和 流媒体服务器使用的缓存</td></tr><tr><td>数据库服务</td><td>8C/8G/200G</td><td>WVP 管理端使用的结构化数据存储</td></tr></tbody></table><p>以上服务可以按照功能和所需资源大小部署到 2 台服务器中:</p><table><thead><tr><th>硬件名称</th><th>配置</th><th>备注</th></tr></thead><tbody><tr><td>数据库与缓存服务器 + 管理平台服务器</td><td>32C65G 1T</td><td>WVP 结构化数据与缓存服务 + WVP 管理平台服务</td></tr><tr><td>流媒体服务器</td><td><code>32C64G *2 500G</code></td><td>流媒体服务器</td></tr></tbody></table><h4 id="8-1-3-网络资源"><a href="#8-1-3-网络资源" class="headerlink" title="8.1.3 网络资源"></a>8.1.3 网络资源</h4><p>假设同时查看 32 路摄像头, 分比率统一为 1080P, 帧率为 25 fps, 视频编码类型为 H.265, 需要的带宽为:</p><p><code>(1920 * 1080 * 24 位色 * 25 * 32)/300压缩率/1024/1024 * 1.3带宽系数 ≈ 127M</code></p><p>为保证更多数量的通道同时查看的需求, 最好使用 <code>200M</code> 的带宽.</p><p><strong>硬件清单:</strong></p><table><thead><tr><th>品类</th><th>型号</th><th>配置</th><th>数量</th><th>单价</th></tr></thead><tbody><tr><td>服务器</td><td>DELL R750XS</td><td>1U 共计 16 核 32 线程 64G 内存</td><td>2</td><td>26499</td></tr><tr><td>固态硬盘</td><td>企业级固态</td><td>1.92T</td><td>6</td><td>1500</td></tr><tr><td>CPU</td><td>至强 Xeon-银牌</td><td>16 核 32 线程</td><td>2</td><td>4500</td></tr><tr><td>NAS</td><td>群晖 DS923+</td><td><code>4*8T</code></td><td>1</td><td>11146</td></tr></tbody></table><p>主机: DELL R750XS</p><p>CPU: 4310 2 颗<br>内存: 16G<br>磁盘: <code>1.92T * 4</code><br>阵列: H755<br>电源: 800W 一个</p><p><code>26499 * 2 + 1500 * 6 + 4500 * 2 + 11146 = 82144</code></p><p><strong>2023-12-18 今日最新价格, 服务器 2U + 固态硬盘, 单台 37000 元</strong>, 因此总价格变更为: <code>37000 * 2 + 11146 = 85146 元</code></p><p>后期优化方案:</p><table><thead><tr><th>企业交换机</th><th>华为交换机万兆三层核心 S5731S-S24T4X-A</th><th>24 口千兆电 4 口万兆光汇聚全网管</th><th>1</th><th>8640</th></tr></thead><tbody><tr><td>企业防火墙</td><td>华为企业级防火墙 USG6315E-AC</td><td>带机 600</td><td>吞吐 1G</td><td>支持 500 条 VPN</td></tr><tr><td>服务器万兆网卡</td><td>X710</td><td>英特尔 X710 双端口 10GB (电口)</td><td>2</td><td>1599</td></tr><tr><td>NAS-万兆网卡</td><td>NAS 专用 RJ45 万兆单电口网卡</td><td>10GB</td><td>1</td><td>1160</td></tr></tbody></table><h4 id="8-1-4-网络拓扑图"><a href="#8-1-4-网络拓扑图" class="headerlink" title="8.1.4 网络拓扑图"></a>8.1.4 网络拓扑图</h4><p>方案一:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_luDJhvo9.webp" alt="20241229154732_luDJhvo9.webp"></p><h5 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h5><p>使用万兆交换机组万兆局域网</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_R2loOIvu.webp" alt="20241229154732_R2loOIvu.webp"></p><ol><li>因为视频存储文件较大, 为加快文件访问速度以提升服务体验, 内网使用万兆通讯, 需要分别为服务器和 NAS 添加万兆网卡. 市面上万兆电口的交换器较少, 且电口发热量大, 目前选用万兆光口交换机; NAS 只支持万兆电口网卡, 因此需要增加一个万兆光转电口; 2 台服务器使用万兆光口接入交换机.</li><li>其他千兆口用于接入其他客户端;</li><li>流媒体服务器通过万兆交换机将视频文件存储到 NAS;</li></ol><h5 id="方案三"><a href="#方案三" class="headerlink" title="方案三"></a>方案三</h5><p>使用千兆交换机, 小范围组万兆内网</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_BcMLwJMa.webp" alt="20241229154732_BcMLwJMa.webp"></p><ol><li>使用 NAS 自带千兆网口和 2 台服务器通过千兆交换机组成局域网, 其他客户端通过交换机与服务器和 NAS 连接;</li><li>内部使用万兆网卡直连, 让服务器和 NAS 之间组成内部网络, 加快文件传输速度;</li></ol><p><strong>方案二</strong> 比 <strong>方案三</strong> 组网方式简单, 但是价格且多出一个光转电接口, 整体价格较方案二贵.</p><p>NAS 视频备份:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_H6Nvn6Vz.webp" alt="20241229154732_H6Nvn6Vz.webp"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_HZQ9jRyE.webp" alt="20241229154732_HZQ9jRyE.webp"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_nAOChXlw.webp" alt="20241229154732_nAOChXlw.webp"></p><p>群晖 DS923+ 自带 2 个千兆网口, 可再扩展一个万兆网卡.</p><p>服务器:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_b9ikqzmd.webp" alt="20241229154732_b9ikqzmd.webp"></p><h2 id="脑图"><a href="#脑图" class="headerlink" title="脑图"></a>脑图</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_kego3KSs.webp" alt="20241229154732_kego3KSs.webp"></p></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar1.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">dong4j</div><div class="post-copyright__author_desc">岁月静好，诗酒趁年华🍺</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.dong4j.site/posts/a31e50a5.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl(&quot;https://blog.dong4j.site/posts/a31e50a5.html&quot;)">业务场景全解：如何应对视频集成挑战</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/wechat-pay.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/alipay.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.dong4j.site/posts/a31e50a5.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=业务场景全解：如何应对视频集成挑战&amp;url=https://blog.dong4j.site/posts/a31e50a5.html&amp;pic=https://api.dong4j.ink:1024/cover?gbk87fdq" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div><div class="share-link follow"><div class="share-button" id="post-share-url" title="订阅" onclick="icat.showFollowBox()"><i class="anzhiyufont anzhiyu-icon-rss"></i></div></div></div></div></div><div class="submit-box hidden"><form id="follow" action="https://api.follow.it/subscription-form/b29peEszNWYzK3FQbEw2dVlITEJMZ2pQRXh2dWRLVDE3SC96eFhRaGwwQWprcXpYYUp0NGFWemxVZllXRGU4Nm4yenNGSzNpV3l0Z1EwQzBXQU5xTG9pZWNzVCt5YWptWUt6TXppRXVXMXZxQTRZOGQ0NUVDRlRFOUYxSHMzMEJ8NmlodHY1VWhDQVZBaG8wM0pSV2pXSjdTNGRWS1o0RDVZbE11KzlEeWhuZz0=/8" method="post" target="_blank"><div class="follow-it-form-subscribe" style="position:relative"><div class="heading"><h5 style="font-weight:700;text-align:center">订阅本站文章：</h5></div><div class="input-field"><input type="email" id="email-input" name="email" placeholder="填入您的邮箱地址" spellcheck="false" oninput="validateEmail()"></div><div class="submit-button"><button type="submit" id="submit-button" onclick="ga(&quot;send&quot;,&quot;event&quot;,&quot;Form&quot;,&quot;Submit&quot;,&quot;Affiliate&quot;)" style="font-weight:700;font-size:14px;text-align:center" disabled="">确认订阅</button></div></div></form><style>#email-input{font-size:16px;font-weight:700;padding:10px;border:2px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}#email-input:focus{outline:0}#email-input.valid{border-color:green}#email-input.invalid{border-color:red}</style><script>function validateEmail(){var s=document.getElementById("email-input"),a=document.getElementById("submit-button"),e=s.value;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?(a.disabled=!1,s.classList.add("valid"),s.classList.remove("invalid")):(a.disabled=!0,s.classList.add("invalid"),s.classList.remove("valid"))}</script></div><script>var icat={showFollowBox:function(){var s=document.querySelector(".submit-box");s.classList.contains("display")?s.classList.remove("display"):s.classList.add("display")}}</script><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.dong4j.site" target="_blank">司机带你开车</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/"><span class="categoryes-punctuation"><i class="anzhiyufont anzhiyu-icon-inbox"></i></span>软件推荐<span class="categoryesPageCount">5</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E8%A7%86%E9%A2%91%E9%9B%86%E6%88%90/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>视频集成<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E6%B5%81%E8%BD%AC/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>监控数据流转<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>音视频传输协议<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>流媒体协议<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E6%92%AD%E6%94%BE%E5%8D%8F%E8%AE%AE/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>播放协议<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>封装格式<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>视频编码<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E8%AE%BE%E5%A4%87%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%96%B9%E6%A1%88/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>设备与连接方案<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>业务场景<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E8%A7%86%E9%A2%91%E6%8E%A5%E5%85%A5%E5%B9%B3%E5%8F%B0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>视频接入平台<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E9%80%89%E5%9E%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>流媒体服务选型<span class="tagsPageCount">1</span></a></div></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_x"></a><a class="a2a_button_twitter"></a><a class="a2a_button_threads"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_pocket"></a><a class="a2a_button_instapaper"></a><a class="a2a_button_email"></a><a class="a2a_button_sms"></a><a class="a2a_dd" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.addtoany.com/share"></a></div></div><script async="" src="https://static.addtoany.com/menu/page.js"></script><script>var a2a_config=a2a_config||{};a2a_config.templates=a2a_config.templates||{},a2a_config.templates.email={subject:"来自 dong4j 的分享: ${title}",body:"一篇有意思的博文:\n${link}"},a2a_config.templates.sms={body:"给你分享一篇有意思的博客:\n${title}\n${link}"}</script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/c1e0543.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?b2uh80p2" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">IDEA插件开发中的国际化配置实践：轻量级ResourceBundle应用</div></div></a></div><div class="next-post pull-right"><a href="/posts/1fd7702b.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?x9xajt7j" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">构建自己的公网IP服务：Nginx Proxy Manager实战</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" rel="external nofollow noreferrer">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" onerror="this.onerror=null,this.src=&quot;/img/friend_404.gif&quot;" alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/coding.gif" alt="status"></div></div><div class="author-info__description"><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">dong4j</h1><div class="author-info__desc">岁月静好，诗酒趁年华 🍺</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/dong4j" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fa-brands fa-github faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fa-solid fa-at faa-tada"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><div style="display:flex;align-items:center"><span>👋🏻 Hi，欢迎来到我的博客~</span><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mario.gif" width="40"></div><span>❓ 如有问题欢迎评论区交流！🎉</span><br><span>😫 页面异常？试试<kbd>Ctrl</kbd>+<kbd>F5</kbd>🙉</span><br><span>📧 如需联系：<a href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer"><b>发邮件给我吧 🚀</b></a></span><div id="welcome-info"></div><a id="my-card-info-btn" href="/subscribe/" data-pjax-state=""><i class="anzhiyufont anzhiyu-icon-rss"></i><span>订阅本站</span></a></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background:url(https://cdn.dong4j.site/source/image/63c02edf44033.webp) center center/100% no-repeat"></div><div class="back face" style="background:url(https://cdn.dong4j.site/source/image/645fa415e8694.webp) center center/100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%9B%AE%E7%9A%84"><span class="toc-number">1.</span> <span class="toc-text">1. 目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%A2%86%E5%9F%9F%E7%9F%A5%E8%AF%86"><span class="toc-number">2.</span> <span class="toc-text">2. 领域知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 监控数据流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E5%AF%B9%E6%AF%94"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 音视频传输协议对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%8D%8F%E8%AE%AE%E6%8E%A5%E5%85%A5"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 协议接入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-GB-T28181"><span class="toc-number">2.3.1.</span> <span class="toc-text">2.3.1 GB/T28181</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-ONVIF"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.3.2 ONVIF</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E4%B8%BB%E6%B5%81%E7%9A%84%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 主流的流媒体协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E6%92%AD%E6%94%BE%E5%8D%8F%E8%AE%AE%E5%AF%B9%E6%AF%94"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 播放协议对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E4%B8%BB%E6%B5%81%E7%9A%84%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 主流的封装格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E4%B8%BB%E8%A6%81%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81"><span class="toc-number">2.7.</span> <span class="toc-text">2.7 主要视频编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AE%BE%E5%A4%87%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%96%B9%E6%A1%88"><span class="toc-number">2.8.</span> <span class="toc-text">8. 常见的设备与连接方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-1-%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%B8%B8%E8%A7%81%E8%AE%BE%E5%A4%87%E5%8F%8A%E4%BD%9C%E7%94%A8"><span class="toc-number">2.8.1.</span> <span class="toc-text">2.8.1 监控系统中常见设备及作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-2-%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%96%B9%E6%A1%88"><span class="toc-number">2.8.2.</span> <span class="toc-text">2.8.2 监控系统中常见的连接方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-3-%E8%A7%86%E9%A2%91%E5%88%86%E9%85%8D%E5%99%A8"><span class="toc-number">2.8.3.</span> <span class="toc-text">2.8.3 视频分配器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E6%9C%AF%E8%AF%AD%E8%A7%A3%E9%87%8A"><span class="toc-number">2.9.</span> <span class="toc-text">9. 术语解释</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GB-T28181"><span class="toc-number">2.9.1.</span> <span class="toc-text">GB/T28181</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RTMP"><span class="toc-number">2.9.2.</span> <span class="toc-text">RTMP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ONVIF"><span class="toc-number">2.9.3.</span> <span class="toc-text">ONVIF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RTSP"><span class="toc-number">2.9.4.</span> <span class="toc-text">RTSP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GA-T-1400"><span class="toc-number">2.9.5.</span> <span class="toc-text">GA/T 1400</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FLV"><span class="toc-number">2.9.6.</span> <span class="toc-text">FLV</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HLS"><span class="toc-number">2.9.7.</span> <span class="toc-text">HLS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WebRTC"><span class="toc-number">2.9.8.</span> <span class="toc-text">WebRTC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IPC"><span class="toc-number">2.9.9.</span> <span class="toc-text">IPC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NVR"><span class="toc-number">2.9.10.</span> <span class="toc-text">NVR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ICC"><span class="toc-number">2.9.11.</span> <span class="toc-text">ICC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IVSS"><span class="toc-number">2.9.12.</span> <span class="toc-text">IVSS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IVS"><span class="toc-number">2.9.13.</span> <span class="toc-text">IVS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E6%B5%81"><span class="toc-number">2.9.14.</span> <span class="toc-text">视频流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A8%E6%B5%81"><span class="toc-number">2.9.15.</span> <span class="toc-text">推流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%89%E6%B5%81"><span class="toc-number">2.9.16.</span> <span class="toc-text">拉流</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF"><span class="toc-number">3.</span> <span class="toc-text">3. 业务场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%9B%BA%E5%AE%9A%E5%9C%B0%E7%82%B9"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 固定地点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-%E6%9C%89%E7%BA%BF%E6%8E%A5%E5%85%A5"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 有线接入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-%E6%97%A0%E7%BA%BF%E6%8E%A5%E5%85%A5"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2 无线接入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E4%B8%89-%E6%98%86%E4%BB%91%E5%85%88%E9%94%8B%E5%8F%98%E7%94%B5%E7%AB%99"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">场景三: 昆仑先锋变电站</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E9%9D%9E%E5%9B%BA%E5%AE%9A%E5%9C%B0%E7%82%B9"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 非固定地点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E7%B1%BB%E4%BC%BC%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 类似解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-1-Ehome-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">3.2.1.1 Ehome 协议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-2-%E8%90%A4%E7%9F%B3%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.1.2.</span> <span class="toc-text">3.2.1.2 萤石协议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-3-DAHUA-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.1.3.</span> <span class="toc-text">3.2.1.3 DAHUA 协议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-5-JTT1078"><span class="toc-number">3.2.1.4.</span> <span class="toc-text">3.2.1.5 JTT1078</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-4-SDK"><span class="toc-number">3.2.1.5.</span> <span class="toc-text">3.2.1.4 SDK</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%A7%86%E9%A2%91%E6%8E%A5%E5%85%A5%E5%B9%B3%E5%8F%B0"><span class="toc-number">4.</span> <span class="toc-text">4. 视频接入平台</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%E8%A7%86%E9%A2%91%E6%8E%A5%E5%85%A5%E5%B9%B3%E5%8F%B0"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 为什么需要一个视频接入平台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E4%BB%80%E4%B9%88%E6%98%AF-GB-T28181-%E5%B9%B3%E5%8F%B0"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 什么是 GB/T28181 平台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 整体流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E9%80%89%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">5. 流媒体服务选型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-ZLMediaKit"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 ZLMediaKit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Monibuca"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 Monibuca</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-SRS"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 SRS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-EasyDarwin"><span class="toc-number">5.4.</span> <span class="toc-text">5.5 EasyDarwin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-MediaMTX"><span class="toc-number">5.5.</span> <span class="toc-text">5.6 MediaMTX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-Nginx-rtmp-module"><span class="toc-number">5.6.</span> <span class="toc-text">5.7 Nginx-rtmp-module</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%B9%B3%E5%8F%B0%E9%80%89%E5%9E%8B"><span class="toc-number">6.</span> <span class="toc-text">6. 平台选型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-WVP"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 WVP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-LiveGBS"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 LiveGBS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-AeroGBD"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 AeroGBD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-EasyGBS"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 EasyGBS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-NTV-GBS"><span class="toc-number">6.5.</span> <span class="toc-text">6.5 NTV GBS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-AKStream"><span class="toc-number">6.6.</span> <span class="toc-text">6.6 AKStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-LiteCVR"><span class="toc-number">6.7.</span> <span class="toc-text">6.7 LiteCVR</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-WVP"><span class="toc-number">7.</span> <span class="toc-text">7. WVP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 主要特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 基础功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E9%83%A8%E7%BD%B2"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-%E4%BD%BF%E7%94%A8"><span class="toc-number">7.5.</span> <span class="toc-text">7.5 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-1-%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="toc-number">7.5.1.</span> <span class="toc-text">7.5.1 控制台</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-2-%E8%A7%86%E9%A2%91%E5%A2%99"><span class="toc-number">7.5.2.</span> <span class="toc-text">7.5.2 视频墙</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-3-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86"><span class="toc-number">7.5.3.</span> <span class="toc-text">7.5.3 设备管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-4-%E6%8B%89%E6%B5%81%E4%BB%A3%E7%90%86"><span class="toc-number">7.5.4.</span> <span class="toc-text">7.5.4 拉流代理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-%E8%AE%BE%E5%A4%87%E5%AF%B9%E6%8E%A5"><span class="toc-number">7.6.</span> <span class="toc-text">7.6 设备对接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-1-%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-number">7.6.1.</span> <span class="toc-text">7.6.1 服务端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-2-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">7.6.2.</span> <span class="toc-text">7.6.2 客户端</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-%E4%B8%9A%E5%8A%A1%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%8E%A5"><span class="toc-number">7.7.</span> <span class="toc-text">7.7 业务系统对接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-1-%E9%85%8D%E7%94%B5%E7%9B%91%E6%B5%8B%E5%AF%B9%E6%8E%A5"><span class="toc-number">7.7.1.</span> <span class="toc-text">7.7.1 配电监测对接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-2-%E4%BD%9C%E4%B8%9A%E7%AE%A1%E6%8E%A7%E5%B9%B3%E5%8F%B0%E5%AF%B9%E6%8E%A5"><span class="toc-number">7.7.2.</span> <span class="toc-text">7.7.2 作业管控平台对接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-3-%E5%A4%A7%E5%B1%8F%E5%AF%B9%E6%8E%A5"><span class="toc-number">7.7.3.</span> <span class="toc-text">7.7.3 大屏对接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-4-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AF%B9%E6%8E%A5"><span class="toc-number">7.7.4.</span> <span class="toc-text">7.7.4 小程序对接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-%E5%A4%A7%E5%B1%8F%E5%B1%95%E7%A4%BA"><span class="toc-number">7.8.</span> <span class="toc-text">7.8 大屏展示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%A7%84%E5%88%92"><span class="toc-number">8.</span> <span class="toc-text">8. 规划</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E8%B5%84%E6%BA%90%E8%A7%84%E5%88%92"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 资源规划</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-%E7%A1%AC%E4%BB%B6%E8%B5%84%E6%BA%90"><span class="toc-number">8.1.1.</span> <span class="toc-text">8.1.2 硬件资源</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-2-1-%E7%A3%81%E7%9B%98"><span class="toc-number">8.1.1.1.</span> <span class="toc-text">8.1.2.1 磁盘</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">8.1.1.1.1.</span> <span class="toc-text">1. 存储方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E5%AE%B9%E9%87%8F%E8%AF%84%E4%BC%B0"><span class="toc-number">8.1.1.1.2.</span> <span class="toc-text">2. 容量评估</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%89%A9%E5%AE%B9%E6%96%B9%E5%BC%8F"><span class="toc-number">8.1.1.1.3.</span> <span class="toc-text">3. 扩容方式</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-2-2-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.1.1.2.</span> <span class="toc-text">8.1.2.2 服务器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-3-%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90"><span class="toc-number">8.1.2.</span> <span class="toc-text">8.1.3 网络资源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-4-%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E5%9B%BE"><span class="toc-number">8.1.3.</span> <span class="toc-text">8.1.4 网络拓扑图</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C"><span class="toc-number">8.1.3.1.</span> <span class="toc-text">方案二</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%89"><span class="toc-number">8.1.3.2.</span> <span class="toc-text">方案三</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%84%91%E5%9B%BE"><span class="toc-number">9.</span> <span class="toc-text">脑图</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/b902d8fd.html" title="从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?lbi2q79v" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例"></a><div class="content"><a class="title" href="/posts/b902d8fd.html" title="从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例">从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例</a><time datetime="2025-01-30T03:34:10.000Z" title="发表于 2025-01-30 11:34:10">2025-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bb4018e9.html" title="使用 Node.js 开发数字名片并集成 Chat 服务"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250115192416_nhXEcB8o.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="使用 Node.js 开发数字名片并集成 Chat 服务"></a><div class="content"><a class="title" href="/posts/bb4018e9.html" title="使用 Node.js 开发数字名片并集成 Chat 服务">使用 Node.js 开发数字名片并集成 Chat 服务</a><time datetime="2025-01-15T02:47:34.000Z" title="发表于 2025-01-15 10:47:34">2025-01-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/621bb677.html" title="从零开始开发 VSCode 插件：从 Hello World 到图片处理工具"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250114004440_j6VHuwA4.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="从零开始开发 VSCode 插件：从 Hello World 到图片处理工具"></a><div class="content"><a class="title" href="/posts/621bb677.html" title="从零开始开发 VSCode 插件：从 Hello World 到图片处理工具">从零开始开发 VSCode 插件：从 Hello World 到图片处理工具</a><time datetime="2025-01-13T15:54:10.000Z" title="发表于 2025-01-13 23:54:10">2025-01-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/af11d9f5.html" title="Chrome 插件开发实战：从零开始开发一个图片上传工具"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250113235017_acCTt6s4.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Chrome 插件开发实战：从零开始开发一个图片上传工具"></a><div class="content"><a class="title" href="/posts/af11d9f5.html" title="Chrome 插件开发实战：从零开始开发一个图片上传工具">Chrome 插件开发实战：从零开始开发一个图片上传工具</a><time datetime="2025-01-10T16:48:57.000Z" title="发表于 2025-01-11 00:48:57">2025-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f5478013.html" title="利用 AI 对博客文章进行智能分类"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250103004028_E1ep6rty.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="利用 AI 对博客文章进行智能分类"></a><div class="content"><a class="title" href="/posts/f5478013.html" title="利用 AI 对博客文章进行智能分类">利用 AI 对博客文章进行智能分类</a><time datetime="2024-12-31T16:00:00.000Z" title="发表于 2025-01-01 00:00:00">2025-01-01</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://weibo.com/u/1884084142" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.facebook.com/dsj.array" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" size="50px"><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://space.bilibili.com/1835978167" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://v.douyin.com/iUqoRYwb/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener external nofollow noreferrer" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html">开往</a><a class="footer-item" title="服务状态" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.ink:1024/status/services">服务状态</a></div></div><div class="footer-group"><div class="footer-title">项目</div><div class="footer-links"><a class="footer-item" title="Watt.Stack" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack">Watt.Stack</a><a class="footer-item" title="MIK" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit">MIK</a><a class="footer-item" title="macOS.dev" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev">macOS.dev</a><a class="footer-item" title="更多" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.ink:1024/">更多</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="我的装备" href="/equipment/">我的装备</a><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" rel="external nofollow noreferrer" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"></a><a class="github-badge" target="_blank" href="https://github.com/dong4j" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><footer-bar-left><div id="footer-bar-tips"><div class="copyright" style="display:flex;align-items:center;gap:10px">©2013 - 2025 By <a class="footer-bar-link" href="/" title="dong4j" target="_blank">dong4j</a><span class="indicator" id="indicator" style="display:inline-block;width:8px;height:8px;border-radius:50%;background-color:green;margin-left:0;animation:subtle-breathing 1.2s infinite;box-shadow:0 0 5px rgba(255,0,0,.8)"></span><span>在线人数:</span><span id="online_user" style="font-size:1em;font-weight:700">1</span></div></div><div id="footer-type-tips"></div></footer-bar-left><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/" title="蜀ICP备2025119258号">蜀ICP备2025119258号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">240</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">1088</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" rel="external nofollow noreferrer" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.ink:1024/status/services" title="服务状态"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.ink:1024?f=blog" title="服务面板"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.ink:1024/" title="导航页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="http://chat.dong4j.ink:1024/chat" title="Mini-Chat"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size:.88rem;color:#9b7e27;font-weight:500;color:var(--anzhiyu-lighttext)">Java<sup>48</sup></a><a href="/tags/final/" style="font-size:.88rem;color:#4e5ca8">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:.88rem;color:#63728c">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:.88rem;color:#0b49c5">finally<sup>2</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:.88rem;color:#384b4d">new关键字<sup>1</sup></a><a href="/tags/static/" style="font-size:.88rem;color:#74528f">static<sup>1</sup></a><a href="/tags/super/" style="font-size:.88rem;color:#05322e">super<sup>2</sup></a><a href="/tags/this/" style="font-size:.88rem;color:#2f931c">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:.88rem;color:#1c4e9b">二进制<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:.88rem;color:#c0aba8">数据类型<sup>4</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:.88rem;color:#b55038">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:.88rem;color:#4bb108">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:.88rem;color:#7c8f52">算法<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:.88rem;color:#b24ec1">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:.88rem;color:#c11f0b">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:.88rem;color:#bc5f25">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:.88rem;color:#879abe">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:.88rem;color:#153344">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:.88rem;color:#9ab688">错误处理<sup>2</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:.88rem;color:#4d09a0">面向对象<sup>6</sup></a></div></div><hr></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" rel="external nofollow noreferrer" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{function o(){HoldLog.apply(console,arguments)}var c=new Date("6/28/2018 00:00:00"),c=(now1.setTime(now1.getTime()+250),(now1-c)/1e3/60/60/24),c=["Hi there 👋，I'm dong4j, Welcome to my blog","岁月静好，诗酒趁年华🍺",`
        
      +========================================================+
      |  ██████╗  ██████╗ ███╗   ██╗ ██████╗ ██╗  ██╗     ██╗  |
      |  ██╔══██╗██╔═══██╗████╗  ██║██╔════╝ ██║  ██║     ██║  |
      |  ██║  ██║██║   ██║██╔██╗ ██║██║  ███╗███████║     ██║  |
      |  ██║  ██║██║   ██║██║╚██╗██║██║   ██║╚════██║██   ██║  |
      |  ██████╔╝╚██████╔╝██║ ╚████║╚██████╔╝     ██║╚█████╔╝  |
      |  ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝ ╚═════╝      ╚═╝ ╚════╝   |
      +========================================================+
        
        `,"已上线",Math.floor(c),"天","Use 「npx dong4j」 and find me."],e=["NCC2-036","调用前置摄像头拍照成功，识别为【绝顶大佬】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`
%c${c[0]} %c ${c[1]} %c ${c[2]} %c${c[3]}%c ${c[4]}%c ${c[5]}

%c ${c[6]}
`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${e[0]} %c ${e[1]} %c 
${e[2]} %c
${e[3]}
`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，绝顶大佬.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 dong4j 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async="" src="/anzhiyu/random.js"></script><script async="">(()=>{var n,o,r,a,i,e=new Date("6/28/2018 00:00:00"),l=new Date;setInterval(()=>{var t;if(l=new Date,i=l.getHours(),t=(l-e)/1e3/60/60/24,n=Math.floor(t),t=(l-e)/1e3/60/60-24*n,o=Math.floor(t),1==String(o).length&&(o="0"+o),t=(l-e)/1e3/60-1440*n-60*o,r=Math.floor(t),1==String(r).length&&(r="0"+r),t=(l-e)/1e3-86400*n-3600*o-60*r,a=Math.round(t),1==String(a).length&&(a="0"+a),document.getElementById("footer")){let e="";e=(i<18&&9<=i||null!=(t=document.querySelector("#workboard .workSituationImg"))&&(t.src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg",t.title="下班了就该开开心心的玩耍，嘿嘿~",t.alt="下班了就该开开心心的玩耍，嘿嘿~"),`本站居然运行了 ${n} 天<span id='runtime'> ${o} 小时 ${r} 分 ${a} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`),document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=e)}},1e3)})()</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(()=>{let t=document.querySelectorAll("#article-container .mermaid-wrap");if(0!==t.length){let e=()=>{window.loadMermaid=!0;let a="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(t).forEach((e,t)=>{let d=e.firstElementChild;e="%%{init:{ 'theme':'"+a+"'}}%%\n"+d.textContent;let n=mermaid.render("mermaid-"+t,e);"string"==typeof n?(t=n,d.insertAdjacentHTML("afterend",t)):n.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})};var d=()=>{window.loadMermaid?e():getScript("https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js").then(e)};anzhiyu.addGlobalFn("themeChange",e,"mermaid"),window.pjax?d():document.addEventListener("DOMContentLoaded",d)}})()</script><script>(()=>{let t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.dong4j.ink:1024",region:"",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};var o=()=>{"object"==typeof twikoo?setTimeout(n,0):getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(n)};let e=()=>{let o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo.dong4j.ink:1024",region:"",urls:[window.location.pathname],includeReply:!1}).then(t=>{o.textContent=t[0].count}).catch(t=>{console.error(t)})},n=()=>{t(),GLOBAL_CONFIG_SITE.isPost&&e()};o()})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async="" src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{let t=e=>e=""!==e&&150<(e=(e=(e=(e=e.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length?e.substring(0,150)+"...":e,n=t=>{let n="";if(t.length)for(let e=0;e<t.length;e++)n=(n=(n+="<div class='aside-list-item'>")+`<a href='${t[e].url}' class='thumbnail'><img data-lazy-src='${t[e].avatar}' alt='${t[e].nick}'><div class='name'><span>${t[e].nick} </span></div></a>`)+`<div class='content'>
        <a class='comment' href='${t[e].url}' title='${t[e].content}'>${t[e].content}</a>
        <time datetime="${t[e].date}">${anzhiyu.diffDate(t[e].date,!0)}</time></div>
        </div>`;else n+="没有评论";var e=document.querySelector("#card-newest-comments .aside-list");e&&(e.innerHTML=n),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(e)};var e=()=>{var e;document.querySelector("#card-newest-comments .aside-list")&&((e=saveToLocal.get("twikoo-newest-comments"))?n(JSON.parse(e)):(e=()=>{twikoo.getRecentComments({envId:"https://twikoo.dong4j.ink:1024",region:"",pageSize:6,includeReply:!0}).then(function(e){e=e.map(e=>({content:t(e.comment),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(e),10/1440),n(e)}).catch(function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"})},"object"==typeof twikoo?e():getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(e)))};e(),document.addEventListener("pjax:complete",e)})</script><script>var visitorMail="996@icu.com"</script><script async="" data-pjax="" src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/subscribe.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-today.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-calendar.css" media="print" onload="this.media=&quot;all&quot;"><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/automatic-redirection.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-welcome.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-comments.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-today.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-countdown.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-calendar.js"></script><script async="" data-pjax="" src="https://open.lightxi.com/unpkg/chinese-lunar@0.1.4/lib/chinese-lunar.js"></script><script async="" data-pjax="" src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script src="https://cdn.dong4j.site/source/static/custom.js"></script><script src="https://cdn.dong4j.site/source/static/geoip2-check.js"></script><script defer="" id="fluttering_ribbon" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="永不言败,勇往直前,砥砺前行,自强不息,笃行致远,厚德载物,持之以恒,奋发有为,志在四方,拼搏进取,实事求是，为人民服务,勤劳致富，共奔小康,爱国、创新、包容、厚德,敬业乐群，诚信友善,自强不息，厚德载物,以人为本，全面协调可持续发展,建设生态文明，构建和谐社会,坚持改革开放，推动科学发展,立党为公，执政为民,实现中华民族伟大复兴的中国梦" data-fontsize="15px" data-random="true" async=""></script><script src="//code.tidio.co/14aqpkwnauu3r5ngcmspfxwelvattym5.js" async=""></script><script>(()=>{{let i=!1,o=()=>{window.tidioChatApi.hide(),i=!1,document.body.style.position="relative",document.documentElement.style.overflow="auto"};var t=()=>{window.tidioChatApi.hide(),window.tidioChatApi.on("close",o)};window.tidioChatApi?window.tidioChatApi.on("ready",t):document.addEventListener("tidioChat-ready",t),window.chatBtnFn=()=>{window.tidioChatApi&&(i?o():(window.tidioChatApi.open(),window.tidioChatApi.show(),i=!0))}}})()</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media=&quot;all&quot;"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();var e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{let t=document.createElement("script");var a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async="" data-pjax="" data-prefix="busuanzi_value" src="https://cdn.dong4j.site/source/static/busuanzi.self.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><script data-pjax="" src="https://cdn.jsdelivr.net/gh/barry-flynn/hexo-github-calendar/hexo_githubcalendar.js"></script><script data-pjax="">function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://github-calendar.dong4j.ink:1024/api?user=dong4j",["#ebedf0","#a2f7af","#6ce480","#54ad63","#469252","#31753c","#1f5f2a","#13531f","#084111","#032b09","#000000"],"dong4j")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style></body></html>