<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>打造高效团队：统一编码风格的重要性 | 司机带你开车</title><meta name="keywords" content="重构,项目规范化,阿里巴巴开发手册,音乐搜索项目,编码规范"><meta name="author" content="dong4j"><meta name="copyright" content="dong4j"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="打造高效团队：统一编码风格的重要性"><meta name="application-name" content="打造高效团队：统一编码风格的重要性"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="打造高效团队：统一编码风格的重要性"><meta property="og:url" content="https://blog.dong4j.site/posts/a29c1a98.html"><meta property="og:site_name" content="司机带你开车"><meta property="og:description" content="本文介绍了以阿里巴巴开发手册为基础，结合作者工作经验，对musicsearch-project项目进行重构和规范化的方案。主要内容涉及命名规范、代码风格、IntelliJ IDEA插件配置、版本控制设置以及Maven使用等各个方面，旨在构建一个稳定、易于维护、可扩展的项目结构。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://api.dong4j.ink:1024/cover?cgzh5kkt"><meta property="article:author" content="dong4j"><meta property="article:tag" content="dong4j, Java, Python, Golang, HomeLab, SpringBoot, 架构"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://api.dong4j.ink:1024/cover?cgzh5kkt"><meta name="description" content="本文介绍了以阿里巴巴开发手册为基础，结合作者工作经验，对musicsearch-project项目进行重构和规范化的方案。主要内容涉及命名规范、代码风格、IntelliJ IDEA插件配置、版本控制设置以及Maven使用等各个方面，旨在构建一个稳定、易于维护、可扩展的项目结构。"><link rel="shortcut icon" href="https://cdn.dong4j.site/source/image/favicon.ico"><link rel="canonical" href="https://blog.dong4j.site/posts/a29c1a98.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//hm.baidu.com"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="codeva-D4HsBP841S"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media=&quot;all&quot;"><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?61a751ac36d18d3ba293fe8ef3ec53eb",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script><script>let GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"与数百名博主无限进步",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"Local",mode:"online",switchBtn:!0,btnLink:"https://github.com/dong4j/blog-summary-assistant-server",randomNum:3,basicWordCount:1999,key:"84yT3Gkl6fp",Referer:"https://blog.dong4j.site:1024",apiUrl:"https://oneapi.dong4j.ink:1024/api/summary",audioUrl:"https://api.dong4j.ink:1024/audio"},diytitle:{enable:!0,leaveTitle:"兄台留步 🙏",backTitle:"兄台,别来无恙 👋"},LA51:{enable:!0,ck:"3Ki5mmyy6E5xtXuf",LingQueMonitorID:"3Ki5mmyy6E5xtXuf"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.dong4j.ink:1024",commentBarrageConfig:{enable:!0,maxBarrage:1,barrageTime:4e3,accessToken:"3a358103e6024cfb97546ec8f8408f5a",mailMd5:"3435c7a74ba1cad3f5d57b0b61b9b25cee221b97599c47b32edbdb36038c5411"},music_page_default:"nav_music",root:"/",preloader:{source:"car"},friends_vue_info:{apiurl:"https://friends.dong4j.ink:1024/"},navMusic:!0,mainTone:{mode:"both",api:"https://img2color.dong4j.ink:1024/api?img=",cover_change:!0},authorStatus:{skills:["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","😎 HomeLab 折腾专家","🏃 脚踏实地行动派","🧱 团队小组发动机","👶 尿不湿更换专家"]},algolia:{appId:"JFMEP32WXP",apiKey:"8e3acd038435dda872706ba6777a54b3",indexName:"blog-index",hits:{per_page:10},languages:{input_placeholder:"输入关键词后按下回车查找",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"该内容距离上次更新已经过了",messageNext:"天，文章内容可能已经过时。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!0},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: dong4j",link:"链接: ",source:"来源: 司机带你开车",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"mediumZoom",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!0,shortcutKey:{enable:!0,delay:100,shiftDelay:200},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"司机带你开车",title:"打造高效团队：统一编码风格的重要性",postAI:"本文介绍了以阿里巴巴开发手册为基础，结合作者工作经验，对musicsearch-project项目进行重构和规范化的方案。主要内容涉及命名规范、代码风格、IntelliJ IDEA插件配置、版本控制设置以及Maven使用等各个方面，旨在构建一个稳定、易于维护、可扩展的项目结构。",pageFillDescription:"废话, Let’s go, 开篇, 这个才是开篇, 约定, 准备工作, Intellij IDEA 插件, Alibaba Java Coding Guidelines, lombok, Maven Helper, JavaDoc, JRebel, Mybatis Plugin, GenerateSerialVersionUID, GenerateAllSetter, Translation, Grep Console, RestfulToolkit, Restore Sql for iBatisx2FMybatis, Intellij IDEA 设置, 编码设置, html 设置编码为 UTF-8, Tomcat 设置编码为 UTF-8, todo 标识, fixme 标识, 类注释, 方法注释, 代码注释, Version Control 设置, 代码样式, musicsearch-project 规范, 项目结构规范, musicsearch-parent, musicsearch-dependencies, musicsearch-common, musicsearch-business, business-common, 模块名, 包名, 类名, 方法名, 属性名, 数据库规范, 配置规范, 配置分类, local 环境, dev 环境, test 环境, prod 环境, Dubbo 配置文件, Spring 配置文件, Maven, pom 规范, 日志规范, 日志配置名, 输出样式, 日志保存路径, 日志归档, 单元测试规范项目重构整理废话此篇是架构重构第二篇以阿里巴巴开发手册为基础结合自己工作经验作为重构方案的基础部分以此为约束希望构建一个稳定易于维护可扩展的重构方案一个项目最怕多种编码风格实体名一会一会让维护的人身心疲惫因此在一个项目中保持唯一一种编码习惯有利于代码维护比如通过命名就知道作用以及所在的包名见名知意此乃命名的最高境界体会一下取名分钟编码分钟的境界代码规范看起来比较枯燥看完一遍可能只有一点点印象因此我采用比较逗比的方式尽量让大家一遍就记住代码规范比较偏向个人主义每个人的编码习惯都不一样所以希望多提出自己的建议一起改进没有最好的规范只有最合适的开篇话说盘古开天辟地之时亚当和夏娃诞生混沌之间他们从小青梅竹马一个会唱首歌一个会跳支舞后人称他们一个为二百歌一个为二百舞用心去体会这个才是开篇江湖四分五裂一人一江湖但我们是一个团队为了便于管理和维护急需一份代码规范来约束我们的编码规则和习惯就像修炼一门武林绝学需要秘籍的指引葵花宝典请各位英雄好汉仔细阅读严格遵守如有不足之处希望提出意见共商武林统一霸业从个哈姆雷特转变为同一个林志玲代码风格保持统一有利于提高工作效率便于管理比如一看到以结尾的类就应该知道这个是接口用于参数验证调用业务类进行处理业务逻辑组装结果返回数据或者跳转页面一看到以结尾的类就知道这个是业务接口类用于定义业务接口一看到以结尾的类就应该知道这个是业务实现类组合不同的实现业务逻辑一看到以结尾的类就应该知道这个是操作类对数据进行操作一看到以结尾的类就应该知道这个是数据传输对象用于展示层和服务层之间的数据传输约定为了避免歧义文档大量使用以下词汇解释如下必须绝对严格遵循请照做无条件遵守一定不可禁令严令禁止应该强烈建议这样做但是不强求不该强烈不建议这样做但是不强求可以和可选选择性高一点在这个文档内此词语使用较少推荐个人推荐的做法不强求准备工作行走江湖没有一件趁手的兵器怎么能在江湖中立足还在用的少侠们希望弃暗投明拥抱你会发现编码效率提升不是点巴点儿而是蹭蹭蹭的往上涨我不是富二代我没有赢在人生的起跑线上但是我用我赢在了工作的起跑线上推荐一个比较全面的教程工欲善其事必先利其器一件趁手的兵器带你迎娶白富美走上人生巅峰统一江湖指日可待为了简化手动操作和提高编码效率要求安装几个必要的插件以及对进行必要的优化配置插件必须安装代码规范检查的基础作用代码规则检查此插件是阿里巴巴根据阿里巴巴开发手册开发的一个静态代码规范检查插件每个警告都提供了一个此篇以阿里巴巴开发手册为基础但是并不会一一罗列每条规范因为此插件已经能很好的检查了此篇重点在于这个插件不能检查的规范必须安装不然代码跑不起来就尴尬了作用化繁为简官网使用代替烦人的方法使用代替获取实例的代码使用方式在文件中添加在中添加插件设置必须安装不然依赖冲突了就不好了作用检查依赖冲突新加入一个包谁添加谁负责使用此插件检查是否有依赖冲突依赖冲突可能会导致开发环境正常测试或者生产环境不正常必须安装作用快速生成标准的推荐安装提高工作效率的插件作用代码热部署插件改了代码后重新编译不用重启应用就可查看效果热部署插件谁用谁知道科学使用方法低调点推荐安装提高工作效率的插件作用和快速跳转快速生成检查推荐安装提高工作效率的插件作用为实现了接口的实体快速添加提高效率因为要求实体必须实现接口而且必须添加字段推荐安装提高工作效率的插件作用快速生成方法推荐安装提高工作效率的插件作用翻译插件提供百度有道翻译一款为像我这种英语渣的码农量身定做的插件推荐安装作用高亮显示不同级别日志看日志的时候一目了然具有级别声音提醒功能可设置效果插件设置此插件通过输出中的来匹配对应的颜色因此输出中必须包含日志级别这个日志规范中再说推荐安装作用快速定位接口请求模拟推荐安装作用查看请求可直接运行效果调用接口后需要执行的设置编码设置编码必须使用且必须设置为踩坑下请不要用记事本打开编码的文本文件更不要保存坑的很编码的文本文件最前面会给你加上一个其他系统打开是正常显示但是不会显示这个造成文件解析出错设置编码为或者模板应该使用升级为非常简单修改为简单的升级就能享受多个新标签带来的便捷何乐而不为呢就跟超市打折一样还倒送你块跳广场舞的大妈排着队去你还不去设置编码为改为默认编码为到了后默认编码改为因此以上修改只针对于标识必须作用方便搜索明确负责人说明原因这里扩展了自带的标识使用负责人时间原因来规范用法负责人设置见类注释一节效果标识必须负责人设置和效果同上类注释必须为每个类添加必要的注释这里有中方式新建类时添加注释设置方式公司你的昵称用户名为已存在的类添加注释设置方式公司你的昵称用户名方法注释推荐使用插件自动生成只能自动生成非方法和属性的注释如果需要生成级的注释可以通过修改生成完成后再修改回来代码注释不该使用行尾注释推荐使用代替多行注释推荐使用对字段进行注释单行所有字段名方法名类名都应该使用简单业界常用的单词命名不要为了注释而注释讲究个代码之美在查看大段代码时推荐使用段注释此注释能增加代码折叠功能便于快速梳理代码设置必须忽略目录必须忽略必须忽略必须添加文件如果使用所有忽略文件都可以添加到即可提交代码时的设置必须勾选提交代码时自动删除不被使用的推荐取消掉默认勾选的和会增加提交代码的时间不该勾选会格式化所有提交的代码格式化代码应该自己手动格式化这样能减少代码冲突的可能代码样式以为基础做了一部分修改必须的必须使用此代码样式为了减少代码冲突同一代码样式同一门派你去修炼其他门派武功会被逐出师门的比如一行的代码长度不能超过宽等号对齐语句只有一行也必须加大括号所有操作符两边必须有空格类名方法名必须加空格后才跟一个使用个空格代替制表符我们这里不讨论空格好还是制表符好统一使用一种是最最好的以上列举的部分规范都可以使用格式化解决本人对代码有着严变格态的要求严变格态到使用后面必须跟一个空格然后才是注释内容英文和中文之间必须增加一个空格所有标点全部使用英文标点没有被使用的类变量都必须删除遇到的警告必须尽最大努力改正左边为重构之前的警告数量黄色右边为重构之后的英文和中文之间增加空格是为了便于阅读方便拷贝双击英文即可全选如果不增加空格中文英文则会全被选中我变态到都要安装一个叫空格之神的插件用于在中英文之间追加空格全部使用英文标点的好处不言而喻乃至所有的编程语言都不支持中文标点打个分号还得切换输入法想想都忧伤有时候就是因为中文标点的问题一直报错输入法可以设置中文时使用英文标点推荐这种设置符号后面喜欢追加一个空格是受语法的影响以前用过很多编辑工具由于解析语法不一样迁移时渲染不生效加个空格或者换行就了及时删除不需要的代码时刻保持代码干净会帮我们检查未使用的代码警告是的温床修复警告就是修复潜在的修复警告也能学到很多东西的规范以下作为规范制定了大部分要求具体设计将在第三篇介绍项目结构规范业务主模块业务公共类库业务服务模块项目公共模块组件主模块模块封装相关实体和接口直接注入即可模块提供代码生成和相关功能模块注入即可提供多种模式模块封装主模块管理第三方版本和依赖关系监控主模块工程主模块管理整个功能的版本及依赖放工程相关文档放工程支撑模块主模块目前重构后的模块可能还会有修改但是几个主要模块不会再修改了整个项目结构采用多模块的方式开发目的是为了解决依赖混乱问题结构规范所有主模块必须以开始不为别的纯属统一前缀好看而已模块名必须全部使用小写单词之间作用分隔作为整个项目的灵魂模块管理所有自有模块的版本和依赖关系以及整个项目都会使用到的依赖比如等标签只是用于声明可能会被使用到的依赖就像定义变量不会真正添加依赖才会真正真正引入依赖这里全部为自有模块以后新增的模块也必须将声明添加到此标签下自有模块之间依赖就可直接使用使用时一定不可添加标签不然就会使用修改后的版本可能会造成依赖冲突模块下有一个目录用于保存文本文档个人认为项目的技术文档跟着代码走才是最正确的做法随时修改随时查看代码和文档一起更新提交才是最佳实践技术文档推荐使用语法编写最好是语法这里给出模块说明模板每个模块都必须有此文档模块名简介打包方式部署方式使用说明注意事项更新历史更新时间更新人用于保存需求需要更新的文件必须以为后缀必须是编码此模块是为了方便管理第三方依赖而特意添加的如果没有此模块第三方依赖也可以添加到中但是会造成过度臃肿因此将第三方依赖拆分到此模块中进行统一管理第三方依赖必须添加到此模块且必须将版本号设置到标签下第三方依赖较大可能存在版本冲突因此此模块的版本从开始不和相同如果此模块存在依赖问题修复后需要提升版本号并且必须写更新记录此模块比较特殊修改会比较频繁依赖出错大部分出现在此模块因此单独写一个用于记录更新日志引入新依赖步骤在添加新依赖将版本信息写入到的标签内进行统一管理在需要的模块中引入依赖最后使用排查是否存在依赖冲突如果存在冲突需要使用排除相应的依赖项目的子模块作为最底层的依赖提供了公共包包包等基础代码如果被整个项目使用到的代码都必须放入此模块比如工具类一些加密类整个项目都能使用到的常量类枚举类等必须要提出的是不要多个模块多个工具类最佳实践应该是中编写一个通用的类继承自类业务模块继承模块中的类实现业务相关的字符串处理工具类这种方式同样适用于其他类业务模块的父模块模块的子模块用于管理业务模块共用的依赖所有业务模块必须是的子模块将业务代码全部整合在一个模块中使用业务名进行再分子模块的方式管理整个业务代码其他共用模块作为框架基础模块以后新项目还可以复用不提供的模块必须以开始提供的模块必须以开始的意思是这样便于区分不同的服务类型也方便分组我们现在使用服务治理框架如果以后有可能话可以很方便的迁移到或者我就说说应该是不可能的事了业务子模块除了模块其他子模块都以应用或者进程直接提供服务模块的子模块依赖于业务模块共用的代码必须放入模块比如所有业务都会用到的常量类则必须放在模块中而这个模块的业务用到的常量则必须放到模块中讲究职责分离层级分明互不干涉你走你的阳关道我看我的西虹市首富模块名必须全部为小写单词之间必须使用分隔不要随心所欲的命名要讲究的规则不然会走火入魔的模块名必须以开头模块也有可能是服务消费者这类的模块还是应该使用开头对于模块至少应该分为层服务名提供给的依赖模块服务名业务处理模块服务名模块必须包含用到的实体类接口定义服务名共用的类枚举类等必须要提出的是服务名配置文件应该由来维护而只需要此配置文件即可而不是在自己的配置文件或者自定义一个配置文件再来写引入的接口这就是为什么服务名应该在模块的原因这里看看重构之前的结构有一些小改动配置关系这里的即配置前面也说了这样的命名方式不够直观因此应该采用服务名的方式命名是主配置导入了其他个配置和这个配置原来是放在中的这里迁入到中因为只需要负责加载即可写好之后基本不需要修改所有配置关系全部在中管理那么问题来了的配置在哪里呢找了半天原来在模块的配置中那么问题又来了如果由合肥的同事开发需要增加几个接口使用服务的是成都的小明同学正在开发这个时候请问小明中午吃了啥如果配置由维护那么就要修改模块的配置如果配置由维护合肥的同事只需要提供只需引入服务名还应该依赖相关依赖这样就不需要自己引入相关依赖了服务行业嘛要做就做全套最佳实践个人认为一个最好分为层层层层已经说过了层作为业务层依赖于层和层各层的中只依赖每层需要的依赖比如的依赖应该写在层和数据库驱动依赖应该写在层而层依赖业务相关的这样将所有依赖下放到不同层中以一种插件化的方式提供服务导入某层依赖连带引入了这层需要的依赖这样依赖关系明确也很好管理的思想就是这样以分而治之的方式管理代码和依赖关系也就是个解耦的思想而不是将所有依赖全部扔到或者中方便是方便维护起来想死的心都有了模块就是一个提供给的说明告诉我这个提供了哪些功能没有具体实现而全称即应用程序接口是一组定义程序及协议的集合因此我将服务名用于向外提供的模块相关的包名也是如此包名所有包名必须以开始其他规则组件模块组件名公共类库服务模块服务名推荐几个常用的包名用来放配置类工具类包枚举类包常量类包推荐将常量按类别定义在不同的常量类中接口包接口实现类包接口包特指提供的接口类特指类名类名必须使用风格首字母都大写必须遵从驼峰形式例如抽象类命名必须使用或开头异常类命名必须使用结尾测试类命名必须以它要测试的类的名称开始以结尾接口实现类必须以结尾接口类必须以结尾接口必须以结尾方法名接口名推荐使用以下命名方式新增查询更新删除属性名这个没什么好说的按照推荐命名方式即可常量命名必须全部大写单词间用下划线分隔数据库规范推荐篇文章虽然是的但是都是数据库啊赶集军规到家数据库条军规解读再议数据库军规配置规范为了解决开发测试现网部署时手动对比配置手动切换配置减少人工介入出错的几率节约时间等问题采用多环境配置一次打包可部署到多个环境意思就是一次打包到处运行配置分类从数据来源可分为数据库文件网络从加载顺序上课分为启动时加载的配置连接配置连接配置连接配置日志配置运行期间动态获取字典数据其实最容易出错的且影响最大的就是运行期间动态获取的配置字典数据改错了就会影响现网业务而且不好排查连接配置启动时就需要如果错误可能会导致启动失败这类问题比较容易排查环境以前在开发时使用的环境可能会将某几个配置修改成本地环境或者环境进行开发开发完成后又需要逐个改回来改动的配置太多部分配置忘记改回来还提交了悲剧了环境专门解决以上问题最初是一个空配置我们拉取代码后根据自己的环境修改配置然后使用忽略提交功能忽略此文件每个开发者互不影响开发时只需要修改环境即可不该直接修改其他环境配置避免环境问题造成线上问题环境现在的服务太多我们开发时不可能每个都启动起来这时我们可以将一些公共的服务部署到服务器这个配置就是环境的配置了一旦配置好不该轻易修改环境和环境差不多只是一些连接配置不一样不该轻易修改环境生产环境经常改动的就是字典数据现在的字段数据太复杂了最好的方式是通过键值对只是简单的字符串而已不要是一个复杂的这样能非常友好的管理所有配置修改配置也不容易出错构建工具我了解当的一个作用是为了防止修改出错做了一个保护措施先保存到数据库中检查一下确保没出错后使用构建工具同步到如果是这个原因的话我想能不能使用一个弹出框显示修改前与修改后的值然后二次确认确认后修改数据库同时更新获取动态数据的方式首先从中获取如果没有则从数据库中获取然后更新到如果有则直接返回后台系统修改字典数据且二次确认后更新数据库和这里有一个事务问题比如后台系统修改完字段数据后更新数据库成功但是更新失败这个时候中就是旧数据解决方案后台系统二次确认修改更新数据库将相应的设置为失效分析第步失败直接返回修改失败不会发生事务问题数据也不会被修改第步成功第步失败此时应用查询字典数据时为旧数据可以使用重试来解决第步成功第步成功此时应用查询字典数据时没有则去数据库中查询最新然后再更新到中配置文件消费者配置文件名必须以服务名命名服务提供者配置文件名必须以服务名命名配置名区分消费者和生产者这样职责明确方便搜索查看最操蛋的是搜索出几十个配置还得一个个点进入看是消费者还是生产者配置消费者配置必须单独写在服务名中不要写在配置中配置尽量分开到不同到配置文件中最后使用聚合起来需要修改配置时能明确知道去哪个配置文件中修改你见葵花宝典里面写了怎么自宫的详细教程吗最多也就引用一下欲练此功必先自宫引入配置不要写在必须使用在主配置文件中引入不需要担心这个问题因为已经被干掉了配置文件配置文件统一命名应用的配置文件统一命名其他组件的配置文件统一命名模块名应用的配置文件统一使用使用为基础框架因此和已经使用的方式代替自动配置类必须以服务名方式命名启动类必须以服务名方式命名单元测试主类必须以服务名方式命名原来的项目是由多个模块由不同的管理造成编译打包麻烦依赖关系复杂版本随意同一个模块多个不同版本维护困难为了解决以上问题现在将所有模块通过一个主进行管理所有模块全部在目录下优点如下时方便想在哪儿打断点就在哪儿打断点随处能借助进行全局重构版本统一管理绝对不会出现相同多个相同版本的问题规范必须为必须与模块名相同必须与父相同必须显式指定如果没有设置标签默认打包为格式这里必须设置此标签明确指定打包格式必须写标签为此添加必要的描述信息第三方依赖必须添加到中如果中央仓库没有的包从网上下载后必须上传到公司的不能直接使用包搜索中央仓库关键字搜索不到则找到上传到公司仓库安装到私服和构成了该包在的坐标项目就是依靠这两个属性定位自己起名字也行表示需要上传的包的绝对路径私服上仓库的位置打开菜单可以看到该路径服务器的表示在的可以看到要与中的权限一致表示版本信息上传地址第三方依赖必须将版本迁入到标签下必须以的方式命名由于使用开发版本为每个版本都有一个项目用来维护所有第三方版本和插件版本我们直接使用中相关依赖的版本能有效减少版本冲突如果我们新增的第三方包已经在声明则必须使用规定的版本即删除标签怎么查看新引入的依赖是否在被声明了呢很简单比如我需要添加如下依赖到模块中整个操作如下图所示我们新增的版本为但是当加入之后左边出现了一个向上的箭头点过去之后发现此依赖已经在被声明了并且版本为因此删除就可以了添加新依赖的步骤选择合适的模块直接粘贴依赖配置到中如果左边出现了向上的箭头则删除标签搞定如果没有则将此依赖配置粘贴到中将添加到标签中最后删除最开始那个配置的不可能定义到所有的依赖因此这里就有了这个模块用来管理项目需要但是没有在中定义的依赖日志规范推荐使用获取实例使用插件直接使用代替获取实例的冗余代码必须使用日志框架统一使用效率更高的日志框架日志输出到文件的编码必须为日志配置名应用或者通过进程提供服务的应用必须使用命名官方推荐优先使用带有的文件名作为日志配置如使用而不是原理可以查看输出样式输出内容元素具体如下环境名时间日期精确到毫秒日志级别进程分隔符标识实际日志的开始线程名方括号括起来可能会截断控制台输出名通常使用源代码的类名日志内容效果日志保存路径日志路径统一管理确保每台服务器上的日志都在同一目录下再议只要是一个有读写权限的目录且好记就可以了关键是保持统一最后必须通过参数区分应用日志归档日志文件必须天归档一次压缩文件上限建议为每天归档日志方便按日志查询日志单元测试规范所有模块都必须有单元测试而不是使用来进行测试添加单元测试类非常简单直接通过快捷键自动生成单元测试类集成测试时必须继承主测试类在每个模块中都会有一个测试父类用于整合配置类测试端口随机等功能其他集成测试类只需要继承此父类即可不需要写重复的注解默认是单元测试必须全部通过才能打包当往往由于单元测试编写不规范造成打包失败编写好的单元测试难度也非常大因此这里不强制要求使用种方式忽略单元测试方式推荐这种使用变量或者方式使用命令方式使用插件方式与方式的区别在于不执行测试用例但编译测试用例类生成相应的文件至下不但跳过单元测试的运行也跳过测试代码的编译",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-04-03 20:08:00",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{var o;0!==a&&(o=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:o+864e5*a})))},get:e=>{var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!(Date.now()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=(o,c={})=>new Promise((t,e)=>{let a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},Object.keys(c).forEach(e=>{a.setAttribute(e,c[e])}),document.head.appendChild(a)}),e.getCSS=(o,c=!1)=>new Promise((t,e)=>{let a=document.createElement("link");a.rel="stylesheet",a.href=o,c&&(a.id=c),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,c=!t&&!a&&!o,t=(void 0===e?(a?activateLightMode():t?activateDarkMode():(o||c)&&((a=(new Date).getHours())<=8||22<=a?activateDarkMode:activateLightMode)(),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})):("light"===e?activateLightMode:activateDarkMode)(),saveToLocal.get("aside-status"));void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/medium.css"><script src="https://cdn.dong4j.site/source/static/echarts.min.js"></script><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/core.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/footer.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/index-imgloaded.css"><script src="https://cdn.dong4j.site/source/static/index-imgloaded.js"></script><script src="https://cdn.dong4j.site/source/static/detect-devtools.js"></script><script defer="" src="https://cdn.dong4j.site/source/static/umami.self.js" data-host-url="https://umami.dong4j.ink:1024" data-website-id="bd4721b7-a43f-4161-83ed-51c148a7ca9d"></script><script defer="" src="https://cdn.dong4j.site/source/static/counter.js" async="" id="online-counter" interval="60000" api="https://umami.dong4j.ink:1024/counter" room="000000001"></script><script src="https://cdn.dong4j.site/source/static/confetti.browser.min.js"></script><script src="https://cdn.dong4j.site/source/static/confetti.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="司机带你开车" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="司机带你开车" type="application/rss+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box"><div class="carplay"></div></div><script>let preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout(function(){preloader.endLoading()},2e3),document.getElementById("loading-box").addEventListener("click",()=>{preloader.endLoading()}),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async="" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.dev/status/services" title="服务状态"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.dev" title="服务面板"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.dev" title="导航页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://chat.dong4j.site/" title="Mini-Chat"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">司机带你开车</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.dong4j.dev"><span>小黑屋</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://cdn.dong4j.site/source/image/wechat-pay.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://cdn.dong4j.site/source/image/alipay.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/checkedexception/" style="font-size:1.05rem;color:#148f76">CheckedException<sup>1</sup></a><a href="/tags/error/" style="font-size:1.05rem;color:#7caa4e">Error<sup>1</sup></a><a href="/tags/exception/" style="font-size:1.05rem;color:#6ca2ab">Exception<sup>1</sup></a><a href="/tags/java/" style="font-size:1.05rem;color:#72966d">Java<sup>48</sup></a><a href="/tags/javabean/" style="font-size:1.05rem;color:#860ac1">JavaBean<sup>1</sup></a><a href="/tags/math/" style="font-size:1.05rem;color:#a75222">Math<sup>1</sup></a><a href="/tags/random/" style="font-size:1.05rem;color:#967478">Random<sup>1</sup></a><a href="/tags/runtimeexception/" style="font-size:1.05rem;color:#94aec3">RuntimeException<sup>1</sup></a><a href="/tags/string/" style="font-size:1.05rem;color:#453533">String<sup>2</sup></a><a href="/tags/stringbuffer/" style="font-size:1.05rem;color:#3f431c">StringBuffer<sup>2</sup></a><a href="/tags/stringbuilder/" style="font-size:1.05rem;color:#a0673c">StringBuilder<sup>1</sup></a><a href="/tags/throwable/" style="font-size:1.05rem;color:#ad4b80">Throwable<sup>1</sup></a><a href="/tags/final/" style="font-size:1.05rem;color:#77b142">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:1.05rem;color:#9a5c58">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:1.05rem;color:#4fad4c">finally<sup>2</sup></a><a href="/tags/getter/" style="font-size:1.05rem;color:#a5c25f">getter<sup>1</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:1.05rem;color:#050f6f">new关键字<sup>1</sup></a><a href="/tags/setter/" style="font-size:1.05rem;color:#85a1b8">setter<sup>1</sup></a><a href="/tags/static/" style="font-size:1.05rem;color:#096286">static<sup>1</sup></a><a href="/tags/super/" style="font-size:1.05rem;color:#4f916e">super<sup>2</sup></a><a href="/tags/this/" style="font-size:1.05rem;color:#869dc2">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:1.05rem;color:#4d7499">二进制<sup>1</sup></a><a href="/tags/%E5%8C%85%E8%A3%85%E7%B1%BB/" style="font-size:1.05rem;color:#410937">包装类<sup>1</sup></a><a href="/tags/%E5%B0%81%E8%A3%85/" style="font-size:1.05rem;color:#768122">封装<sup>3</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#501f70">异常处理<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:1.05rem;color:#690252">数据类型<sup>4</sup></a><a href="/tags/%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD/" style="font-size:1.05rem;color:#a38b10">方法重载<sup>1</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:1.05rem;color:#95a701">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:1.05rem;color:#bf8181">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:1.05rem;color:#4ec37b">算法<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size:1.05rem;color:#34c54f">类型转换<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/" style="font-size:1.05rem;color:#74835a">线程安全<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:1.05rem;color:#702108">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:1.05rem;color:#3d022e">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:1.05rem;color:#4c85aa">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:1.05rem;color:#23b3be">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:1.05rem;color:#95198d">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#92b58f">错误处理<sup>2</sup></a><a href="/tags/%E9%9A%8F%E6%9C%BA%E6%95%B0/" style="font-size:1.05rem;color:#34929b">随机数<sup>1</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:1.05rem;color:#53ab26">面向对象<sup>6</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);" rel="external nofollow noreferrer"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%96%B0%E6%97%B6%E4%BB%A3%E7%A0%81%E5%86%9C/" itemprop="url">新时代码农</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E9%87%8D%E6%9E%84/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>重构</span></a><a class="article-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83%E5%8C%96/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>项目规范化</span></a><a class="article-meta__tags" href="/tags/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>阿里巴巴开发手册</span></a><a class="article-meta__tags" href="/tags/%E9%9F%B3%E4%B9%90%E6%90%9C%E7%B4%A2%E9%A1%B9%E7%9B%AE/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>音乐搜索项目</span></a><a class="article-meta__tags" href="/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>编码规范</span></a></span></div></div><h1 class="post-title" itemprop="name headline">打造高效团队：统一编码风格的重要性</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2018-07-08T16:00:00.000Z" title="发表于 2018-07-09 00:00:00">2018-07-09</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-04-03T12:08:00.721Z" title="更新于 2025-04-03 20:08:00">2025-04-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">9.4k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="打造高效团队：统一编码风格的重要性"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/a29c1a98.html#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://api.dong4j.ink:1024/cover?cgzh5kkt"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="fa-regular fa-robot fa-fade"></i><div class="ai-title-text">摘要助手</div><div id="ai-Toggle">切换</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">SummaryGPT</div></div><div class="ai-explanation">AI 初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成摘要 👋</div><div class="ai-btn-item">推荐文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item">前往订阅 💥</div><div class="ai-btn-item" id="go-comment">前往评论 💬</div><div class="ai-btn-item" id="read-audio">Kokoro TTS 🎙️</div><div class="ai-btn-item" id="go-tianli-blog">👀 部署教程</div></div><script data-pjax="" src="https://cdn.dong4j.site/source/static/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope="" itemtype="https://blog.dong4j.site/posts/a29c1a98.html"><header><a class="post-meta-categories" href="/categories/%E6%96%B0%E6%97%B6%E4%BB%A3%E7%A0%81%E5%86%9C/" itemprop="url">新时代码农</a><a href="/tags/%E9%87%8D%E6%9E%84/" tabindex="-1" itemprop="url">重构</a><a href="/tags/%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83%E5%8C%96/" tabindex="-1" itemprop="url">项目规范化</a><a href="/tags/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C/" tabindex="-1" itemprop="url">阿里巴巴开发手册</a><a href="/tags/%E9%9F%B3%E4%B9%90%E6%90%9C%E7%B4%A2%E9%A1%B9%E7%9B%AE/" tabindex="-1" itemprop="url">音乐搜索项目</a><a href="/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" tabindex="-1" itemprop="url">编码规范</a><h1 id="CrawlerTitle" itemprop="name headline">打造高效团队：统一编码风格的重要性</h1><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">dong4j</span><time itemprop="dateCreated datePublished" datetime="2018-07-08T16:00:00.000Z" title="发表于 2018-07-09 00:00:00">2018-07-09</time><time itemprop="dateCreated datePublished" datetime="2025-04-03T12:08:00.721Z" title="更新于 2025-04-03 20:08:00">2025-04-03</time></header><meta name="referrer" content="no-referrer"><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?spm=yvxgvhf9" alt="random-pic-api"></p><p>项目重构整理</p><span id="more"></span><h2 id="废话"><a href="#废话" class="headerlink" title="废话"></a>废话</h2><p>此篇是 12530 架构重构第二篇, 以 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvcDNjLw==">阿里巴巴开发手册</a> 为基础, 结合自己工作经验, 作为 <code>musicsearch-project</code><br>重构方案的基础部分.<br>以此为约束, 希望构建一个 <code>稳定</code>, <code>易于维护</code>, <code>可扩展</code> 的重构方案.</p><p>一个项目最怕多种编码风格, 实体名一会 entity, 一会 model, 让维护的人身心疲惫, 因此在一个项目中保持唯一一种编码习惯, 有利于代码维护 (比如通过命名,<br>就知道作用以及所在的包名).</p><p><strong>见名知意, 此乃命名的最高境界 (体会一下 <code>取名 10 分钟, 编码 1 分钟</code> 的境界 😂).</strong></p><blockquote><p>代码规范看起来比较枯燥, 看完一遍可能只有一点点印象, 因此我采用比较逗比的方式, 尽量让大家一遍就记住.<br>代码规范比较偏向个人主义, 每个人的编码习惯都不一样, 所以希望多提出自己的建议, 一起改进 (没有最好的规范, 只有最合适的. 🙃)</p></blockquote><h2 id="Let’s-go"><a href="#Let’s-go" class="headerlink" title="Let’s go"></a>Let’s go</h2><h3 id="开篇"><a href="#开篇" class="headerlink" title="开篇"></a>开篇</h3><p>话说盘古开天辟地之时… 亚当和夏娃诞生混沌之间, 他们从小青梅竹马, 一个会唱 200 首歌, 一个会跳 200 支舞, 后人称他们一个为 二百歌, 一个为<br>二百舞 ….. (用心去体会 😂)</p><h3 id="这个才是开篇"><a href="#这个才是开篇" class="headerlink" title="这个才是开篇"></a>这个才是开篇</h3><p>江湖四分五裂, 一人一江湖…</p><p>但我们是一个团队，为了便于管理和维护，急需一份代码规范, 来约束我们的编码规则和习惯, 就像修炼一门武林绝学, 需要秘籍的指引 (葵花宝典?)。</p><p>请各位英雄好汉仔细阅读 严格遵守<br>如有不足之处 希望提出意见 共商武林统一霸业</p><p>从 1000 个哈姆雷特转变为同一个 <strong>林志玲</strong>, 代码风格保持统一有利于提高工作效率, 便于管理.</p><p>比如:</p><ol><li>一看到以 Controller 结尾的类, 就应该知道这个是接口, 用于参数验证, 调用业务类进行处理业务逻辑, 组装结果, 返回数据或者跳转页面;</li><li>一看到以 Service 结尾的类, 就知道这个是业务接口类, 用于定义业务接口;</li><li>一看到以 Impl 结尾的类, 就应该知道这个是业务实现类, 组合不同的 Dao, 实现业务逻辑;</li><li>一看到以 Dao 结尾的类, 就应该知道这个是 DB 操作类, 对数据进行 CRUD 操作;</li><li>一看到以 Dto 结尾的类, 就应该知道这个是数据传输对象, 用于展示层和服务层之间的数据传输;</li><li>….</li></ol><h2 id="约定"><a href="#约定" class="headerlink" title="约定"></a>约定</h2><p>为了避免歧义, 文档大量使用以下词汇, 解释如下:</p><ol><li><code>必须</code> (must): 绝对，严格遵循，请照做，无条件遵守；</li><li><code>一定不可</code> (must not): 禁令，严令禁止；</li><li><code>应该</code> (should): 强烈建议这样做，但是不强求；</li><li><code>不该</code> (should not): 强烈不建议这样做，但是不强求；</li><li><code>可以</code> (may) 和 可选 (optional): 选择性高一点，在这个文档内，此词语使用较少；</li><li><code>推荐</code> (recommend): 个人推荐的做法, 不强求;</li></ol><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><blockquote><p>行走江湖, 没有一件趁手的兵器怎么能在江湖中立足, 还在用 <code>eclipse</code> 的少侠们, 希望弃暗投明, 拥抱 Intellij IDEA, 你会发现编码效率提升不是<br><strong>点巴点儿</strong>, 而是 <strong>蹭蹭蹭</strong> 的往上涨 😁.</p></blockquote><p><strong>我不是富二代, 我没有赢在人生的起跑线上, 但是我用 Intellij IDEA, 我赢在了工作的起跑线上!</strong></p><p>推荐一个比较全面的 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRodWIuY29tL2p1ZGFzbi9JbnRlbGxpSi1JREVBLVR1dG9yaWFs">Intellij IDEA 教程</a></p><p><strong>工欲善其事, 必先利其器. 一件趁手的兵器带你迎娶白富美, 走上人生巅峰, 统一江湖, 指日可待</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_uhjneu7y.webp/" alt="20241229154732_uHJneu7y.webp"></p><p>为了简化手动操作和提高编码效率, 要求安装几个必要的插件, 以及对 IDEA 进行必要的优化配置</p><h3 id="Intellij-IDEA-插件"><a href="#Intellij-IDEA-插件" class="headerlink" title="Intellij IDEA 插件"></a>Intellij IDEA 插件</h3><h4 id="Alibaba-Java-Coding-Guidelines"><a href="#Alibaba-Java-Coding-Guidelines" class="headerlink" title="Alibaba Java Coding Guidelines"></a>Alibaba Java Coding Guidelines</h4><blockquote><p><code>必须</code> 安装, 代码规范检查的基础</p></blockquote><p><strong>作用: 代码规则检查</strong></p><p>此插件是 阿里巴巴根据 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvcDNjLw==">阿里巴巴开发手册</a> 开发的一个静态代码规范检查插件, 每个警告都提供了一个 demo,</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_hs7lxram.webp/" alt="20241229154732_Hs7lxRAM.webp"><br>此篇以 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvcDNjLw==">阿里巴巴开发手册</a> 为基础, 但是并不会一一罗列每条规范, 因为此插件已经能很好的检查了.</p><p><strong>此篇重点在于这个插件不能检查的规范.</strong></p><h4 id="lombok"><a href="#lombok" class="headerlink" title="lombok"></a>lombok</h4><blockquote><p><code>必须</code> 安装, 不然代码跑不起来就尴尬了</p></blockquote><p><strong>作用: 化繁为简. <a href="%5Bhttp://projectlombok.org/%5D(http://projectlombok.org/)">官网</a></strong></p><p>使用 <code>@Data</code> 代替烦人的 get/set 方法</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_0rvnjooe.webp/" alt="20241229154732_0RVNjOoe.webp"></p><p>使用 <code>@Slf4j</code> 代替获取 log 实例的代码</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(ApplicationTest.class);</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_feospgd7.webp/" alt="20241229154732_FeOsPGD7.webp"></p><p><strong>使用方式</strong>：</p><ol><li><p>在 pom 文件中添加：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- lombok--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>${lombok.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>在 IDEA 中添加插件 <code>lombok</code> （file-&gt;setting-&gt;plugins）</p></li><li><p>IDEA 设置</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_izw0kans.webp/" alt="20241229154732_izw0KAnS.webp"></p></li></ol><h4 id="Maven-Helper"><a href="#Maven-Helper" class="headerlink" title="Maven Helper"></a>Maven Helper</h4><blockquote><p><code>必须</code> 安装, 不然依赖冲突了就不好了</p></blockquote><p><strong>作用: 检查依赖冲突</strong></p><p>新加入一个 jar 包, 谁添加谁负责, 使用此插件检查是否有依赖冲突.</p><p>依赖冲突可能会导致:</p><ol><li>java.lang.ClassNotFoundException</li><li>java.lang.NoSuchMethodError</li><li>java.lang.NoClassDefFoundError</li><li>开发环境正常, 测试或者生产环境不正常….</li></ol><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_txmwyfwd.webp/" alt="20241229154732_TxMWYfwd.webp"></p><h4 id="JavaDoc"><a href="#JavaDoc" class="headerlink" title="JavaDoc"></a>JavaDoc</h4><blockquote><p><code>必须</code> 安装</p></blockquote><p><strong>作用: 快速生成标准的 javadoc</strong></p><p>![1111.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h4 id="JRebel"><a href="#JRebel" class="headerlink" title="JRebel"></a>JRebel</h4><blockquote><p><code>推荐</code> 安装, 提高工作效率的插件.</p></blockquote><p><strong>作用: 代码热部署插件, 改了代码后, 重新编译, 不用重启应用就可查看效果.</strong></p><p>热部署插件, 谁用谁知道;</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cDovL2Jsb2cubGFueXVzLmNvbS9zZWFyY2gvSlJlYmVsLw==">科学使用方法</a> (低调点)</p><h4 id="Mybatis-Plugin"><a href="#Mybatis-Plugin" class="headerlink" title="Mybatis Plugin"></a>Mybatis Plugin</h4><blockquote><p><code>推荐</code> 安装, 提高工作效率的插件.</p></blockquote><p><strong>作用: xml 和 dao 快速跳转; 快速生成 xml; xml 检查</strong></p><p>![222.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h4 id="GenerateSerialVersionUID"><a href="#GenerateSerialVersionUID" class="headerlink" title="GenerateSerialVersionUID"></a>GenerateSerialVersionUID</h4><blockquote><p><code>推荐</code> 安装, 提高工作效率的插件</p></blockquote><p><strong>作用: 为实现了 Serializable 接口的实体快速添加 serialVersionUID, 提高效率</strong></p><p>因为要求实体 <code>必须</code> 实现 <code>Serializable</code> 接口, 而且 <code>必须</code> 添加 <code>serialVersionUID</code> 字段.</p><p>![333.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h4 id="GenerateAllSetter"><a href="#GenerateAllSetter" class="headerlink" title="GenerateAllSetter"></a>GenerateAllSetter</h4><blockquote><p><code>推荐</code> 安装, 提高工作效率的插件</p></blockquote><p><strong>作用: 快速生成 set 方法</strong></p><p>![444.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h4 id="Translation"><a href="#Translation" class="headerlink" title="Translation"></a>Translation</h4><blockquote><p><code>推荐</code> 安装, 提高工作效率的插件</p></blockquote><p><strong>作用: 翻译插件, 提供 百度, 有道, Google 翻译</strong></p><p>一款为像我这种英语渣的码农量身定做的插件 😂</p><p>![555.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h4 id="Grep-Console"><a href="#Grep-Console" class="headerlink" title="Grep Console"></a>Grep Console</h4><blockquote><p><code>推荐</code> 安装</p></blockquote><p><strong>作用: 高亮显示 log 不同级别日志，看日志的时候一目了然; 具有 error 级别声音提醒功能 (可设置)</strong></p><p>效果:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_nw1z8dtj.webp/" alt="20241229154732_NW1Z8dTj.webp"></p><p>插件设置:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_cexdszg1.webp/" alt="20241229154732_CExDSzg1.webp"><br>此插件通过 log 输出中的 info/debug/warn/error 来匹配对应的颜色. 因此 log 输出中必须包含 <strong>日志级别</strong>, 这个 <strong>日志规范</strong> 中再说.</p><h4 id="RestfulToolkit"><a href="#RestfulToolkit" class="headerlink" title="RestfulToolkit"></a>RestfulToolkit</h4><blockquote><p><code>推荐</code> 安装</p></blockquote><p>**作用: 快速定位接口, Rest 请求模拟 **</p><p>![666.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h4 id="Restore-Sql-for-iBatis-Mybatis"><a href="#Restore-Sql-for-iBatis-Mybatis" class="headerlink" title="Restore Sql for iBatis/Mybatis"></a>Restore Sql for iBatis/Mybatis</h4><blockquote><p><code>推荐</code> 安装</p></blockquote><p>**作用: 查看请求 sql, 可直接运行 **</p><p>效果:</p><p><code>meeting-service</code> 调用 <code>/login</code> 接口后需要执行的 sql</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_dukaad0g.webp/" alt="20241229154732_dUkaaD0g.webp"></p><h3 id="Intellij-IDEA-设置"><a href="#Intellij-IDEA-设置" class="headerlink" title="Intellij IDEA 设置"></a>Intellij IDEA 设置</h3><h4 id="编码设置"><a href="#编码设置" class="headerlink" title="编码设置"></a>编码设置</h4><blockquote><p>编码 <code>必须</code> 使用 <code>UTF-8</code>, 且 <code>必须</code> 设置为 <code>with NO BOM</code></p></blockquote><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_cnmfztvf.webp/" alt="20241229154732_cNmFzTvf.webp"></p><p><code>踩坑</code></p><p>**Windows 下请不要用记事本打开 UFT-8 编码的文本文件, 更不要保存 **</p><p>Windows 坑的很, UTF-8 编码的文本文件最前面会给你加上一个 BOM, 其他系统打开是正常显示, 但是不会显示这个 BOM, 造成文件解析出错.</p><h5 id="html-设置编码为-UTF-8"><a href="#html-设置编码为-UTF-8" class="headerlink" title="html 设置编码为 UTF-8"></a>html 设置编码为 UTF-8</h5><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>html 或者模板 <code>应该</code> 使用 html5</p></blockquote><p>html4 升级为 html5 非常简单</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span> <span class="keyword">PUBLIC</span> <span class="string">"-//W3C//DTD XHTML 1.0 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>修改为:</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>简单的升级, 就能享受 30 多个新标签带来的便捷, 何乐而不为呢?</p><p>就跟超市打折一样, 还倒送你 30 块, 跳广场舞的大妈排着队去, 你还不去?</p><h5 id="Tomcat-设置编码为-UTF-8"><a href="#Tomcat-设置编码为-UTF-8" class="headerlink" title="Tomcat 设置编码为 UTF-8"></a>Tomcat 设置编码为 UTF-8</h5><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">redirectPort</span>=<span class="string">"8443"</span>  /&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>改为:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">redirectPort</span>=<span class="string">"8443"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">URIEncoding</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>Tomcat7 默认编码为 ISO-8859-1, 到了 Tomcat8 后, 默认编码改为 UTF-8<br>因此以上修改只针对于 Tomcat7.</p><h4 id="todo-标识"><a href="#todo-标识" class="headerlink" title="todo 标识"></a>todo 标识</h4><blockquote><p><code>必须</code></p></blockquote><p>**作用: 方便搜索, 明确负责人, 说明 todo 原因 **</p><p>这里扩展了 IDEA 自带的 todo 标识, 使用 <code>todo- 负责人: (时间) [原因]</code> 来规范 <code>todo</code> 用法</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_2zrdekbj.webp/" alt="20241229154732_2ZRdEKBJ.webp"></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">todo- 负责人: ($<span class="built_in">date</span>$ $<span class="built_in">time</span>$) [$SELECTION$]</span><br></pre></td></tr></tbody></table></figure><p>**date time 设置见 类注释一节 **</p><p>效果:</p><p>![777.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h4 id="fixme-标识"><a href="#fixme-标识" class="headerlink" title="fixme 标识"></a>fixme 标识</h4><blockquote><p><code>必须</code></p></blockquote><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fixme- 负责人: ($<span class="built_in">date</span>$ $<span class="built_in">time</span>$ [$SELECTION$])</span><br></pre></td></tr></tbody></table></figure><p>设置和效果同上</p><h4 id="类注释"><a href="#类注释" class="headerlink" title="类注释"></a>类注释</h4><blockquote><p><code>必须</code> 为每个类添加必要的注释</p></blockquote><p>这里有 2 中方式:</p><p>**1. 新建类时添加注释 **</p><p>![888.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><p>设置方式:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_xjbq89wf.webp/" alt="20241229154732_xjBq89Wf.webp"></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> (${PACKAGE_NAME} &amp;&amp; ${PACKAGE_NAME} != <span class="string">""</span>)<span class="keyword">package</span> ${PACKAGE_NAME};#end</span><br><span class="line">##parse(<span class="string">"File Header.java"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Company: xxxx公司 &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Description: ${description}&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> ¶*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 你的昵称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> ${YEAR}-${MONTH}-${DAY} ${HOUR}:${MINUTE}</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@email</span> 用户名<span class="doctag">@xxxx</span>.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>{NAME} {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>**2. 为已存在的类添加注释 **</p><p>![999.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><p>设置方式:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_fmveaj28.webp/" alt="20241229154732_FMVEAJ28.webp"></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Company: xxxx公司 &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Description: $END$&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 你的昵称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $date$ $time$</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@email</span> 用户名<span class="doctag">@xxxx</span>.com</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></tbody></table></figure><h4 id="方法注释"><a href="#方法注释" class="headerlink" title="方法注释"></a>方法注释</h4><blockquote><p><code>推荐</code> 使用 JavaDoc 插件自动生成</p></blockquote><p>JavaDoc 只能自动生成非 <code>private</code> 方法和属性的注释, 如果需要生成 <code>private</code> 级的注释, 可以通过修改 <code>public</code>, 生成完成后, 再修改回来</p><h4 id="代码注释"><a href="#代码注释" class="headerlink" title="代码注释"></a>代码注释</h4><blockquote><p><code>不该</code> 使用行尾注释;<br><code>推荐</code> 使用 // 代替 <code>/*...*/</code> 多行注释;<br><code>推荐</code> 使用 <code>/**..*/</code> 对字段进行注释 (单行);<br>所有字段名, 方法名, 类名 都 <code>应该</code> 使用简单, 业界常用的单词命名, 不要为了注释而注释, 讲究个代码之美.</p></blockquote><p>在查看大段代码时, <code>推荐</code> 使用</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// region 段注释</span></span><br><span class="line">....</span><br><span class="line"><span class="comment">// endregion</span></span><br></pre></td></tr></tbody></table></figure><p>**此注释能增加代码折叠功能, 便于快速梳理代码 **</p><p>![11111.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><h3 id="Version-Control-设置"><a href="#Version-Control-设置" class="headerlink" title="Version Control 设置"></a>Version Control 设置</h3><blockquote><p><code>必须</code> 忽略 target 目录<br><code>必须</code> 忽略 .idea<br><code>必须</code> 忽略 <code>*.iml</code><br><code>必须</code> 添加 .ignore 文件</p></blockquote><p>**如果使用 git, 所有忽略文件都可以添加到 .ignore 即可 **</p><p>**提交代码时的设置 **</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_rjjbnzvs.webp/" alt="20241229154732_RjJbNzVS.webp"></p><blockquote><p><code>必须</code> 勾选 Optimize imports; (提交代码时, 自动删除不被使用的 import)<br><code>推荐</code> 取消掉默认勾选的 Perform code analysis 和 Check TODO, 会增加提交代码的时间;<br><code>不该</code> 勾选 Reformat code, 会格式化所有提交的代码, 格式化代码应该自己手动格式化, 这样能减少代码冲突的可能;</p></blockquote><h2 id="代码样式"><a href="#代码样式" class="headerlink" title="代码样式"></a>代码样式</h2><p>以 intellij-java-google-style.xml 为基础, 做了一部分修改.</p><blockquote><p>musicsearch-project <code>必须的必须</code> 使用此代码样式, 为了减少代码冲突, 同一代码样式 (同一门派, 你去修炼其他门派武功, 会被逐出师门的!).</p></blockquote><p>比如:</p><ol><li>一行的代码长度不能超过 140 宽;</li><li>等号对齐;</li><li>if 语句只有一行也 <code>必须</code> 加大括号;</li><li>所有操作符两边 <code>必须</code> 有空格;</li><li>类名, 方法名 <code>必须</code> 加空格后才跟 一个 <code>{</code>;</li><li>使用 4 个空格代替制表符 (我们这里不讨论空格好还是制表符好, 统一使用一种是最最好的);</li><li>….</li></ol><p><strong>以上列举的部分规范都可以使用格式化解决;</strong></p><p>本人对代码有着严 (变) 格(态)的要求, 严 (变) 格(态)到使用 <code>//</code> 后面 <code>必须</code> 跟一个空格, 然后才是注释内容; 英文和中文之间 <code>必须</code> 增加一个空格;<br>所有标点全部使用英文标点; 没有被使用的类, 变量都 <code>必须</code> 删除; 遇到的警告 <code>必须</code> 尽最大努力改正;</p><p>左边为重构之前的警告数量 (黄色), 右边为重构之后的</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_b8raqph9.webp/" alt="20241229154732_b8RAQPH9.webp"></p><ol><li>英文和中文之间增加空格是为了便于阅读, 方便拷贝 (双击英文即可全选, 如果不增加空格, 中文英文则会全被选中. 我变态到 chrome<br>都要安装一个叫 <code>空格之神</code> 的插件, 用于在中英文之间追加空格);</li><li>全部使用英文标点的好处不言而喻, Java 乃至所有的编程语言都不支持中文标点, 打个分号还得切换输入法, 想想都忧伤; 有时候就是因为中文标点的问题,<br>一直报错 (输入法可以设置中文时使用英文标点, <code>推荐</code> 这种设置);</li><li>符号后面喜欢追加一个空格, 是受 Markdown 语法的影响, 以前用过很多 Markdown 编辑工具, 由于解析语法不一样, 迁移时渲染不生效, 加个空格或者换行就<br>Ok 了; 😂</li><li>及时删除不需要的代码, 时刻保持代码干净 (IDEA 会帮我们检查未使用的代码).</li><li><strong>警告是 bug 的温床, 修复警告, 就是修复潜在的 bug</strong>. 修复警告, 也能学到很多东西的 (😎)</li></ol><h2 id="musicsearch-project-规范"><a href="#musicsearch-project-规范" class="headerlink" title="musicsearch-project 规范"></a>musicsearch-project 规范</h2><p>以下作为 <code>musicsearch-project</code> 规范, 制定了大部分要求.</p><p>具体设计将在 第三篇 介绍</p><h3 id="项目结构规范"><a href="#项目结构规范" class="headerlink" title="项目结构规范"></a>项目结构规范</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── musicsearch-business            # 业务主模块</span><br><span class="line">│     ├── business-common             # 业务公共类库</span><br><span class="line">│     ├── mservice-migu-game          # migu-game 业务</span><br><span class="line">│     └── service-meeting             # meeting 服务模块</span><br><span class="line">├── musicsearch-common              # musicsearch 项目 公共模块</span><br><span class="line">├── musicsearch-component           # 组件主模块</span><br><span class="line">│     ├── component-iavp              # iavp 模块, 封装 iavp 相关实体和接口, 直接注入即可</span><br><span class="line">│     ├── component-mybatis           # mybatis 模块, 提供代码生成和 mybatis 相关功能</span><br><span class="line">│     ├── component-redis             # redis 模块, 注入 RedisService 即可, 提供多种模式</span><br><span class="line">│     └── component-websocket         # websocket 模块 netty-socket.<span class="built_in">io</span> 封装</span><br><span class="line">├── musicsearch-demo                # demo 主模块</span><br><span class="line">│     ├── component-mybatis-demo</span><br><span class="line">│     └── component-redis-demo</span><br><span class="line">├── musicsearch-dependencies        # 管理第三方 jar 版本和依赖关系</span><br><span class="line">├── musicsearch-monitor             # 监控主模块</span><br><span class="line">├── musicsearch-parent              # musicsearch 工程主模块, 管理整个功能的版本及依赖</span><br><span class="line">│     └── docs                        # 放工程相关文档</span><br><span class="line">│     └── database                    # 放工程 sql</span><br><span class="line">└── musicsearch-support             # 支撑模块主模块</span><br><span class="line">    ├── musicsearch-code-generator</span><br><span class="line">    ├── musicsearch-management-system</span><br><span class="line">    └── musicsearch-timer-task</span><br></pre></td></tr></tbody></table></figure><p>目前重构后的模块, 可能还会有修改.<br>但是几个主要模块不会再修改了.</p><blockquote><p>整个项目结构采用 <code>Maven</code> 多模块的方式开发.<br>目的是为了解决 jar 依赖混乱问题.</p></blockquote><p><strong>结构规范:</strong></p><blockquote><p>所有主模块 <code>必须</code> 以 <code>musicsearch-</code> 开始.</p></blockquote><p>不为别的, 纯属统一前缀, 好看而已</p><blockquote><p>模块名 <code>必须</code> 全部使用小写, 单词之间作用 <code>-</code> 分隔;</p></blockquote><h4 id="musicsearch-parent"><a href="#musicsearch-parent" class="headerlink" title="musicsearch-parent"></a>musicsearch-parent</h4><p>作为整个项目的 灵魂 模块, 管理所有自有模块的版本和依赖关系, 以及整个项目都会使用到的依赖, 比如 <code>lombok</code>, <code>junit</code> 等.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_fnqjsndy.webp/" alt="20241229154732_FNQjsndy.webp"><br><code>dependencyManagement</code> 标签只是用于声明可能会被使用到的依赖 (就像定义变量), 不会真正添加依赖<br><code>dependency</code> 才会真正真正引入依赖</p><p>这里全部为 <code>musicsearch-project</code> 自有模块, 以后新增的模块也 <code>必须</code> 将声明添加到此标签下<br>自有模块之间依赖就可直接使用.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_vxvvcvaj.webp/" alt="20241229154732_vXVvcVaj.webp"><br>使用时, <code>一定不可</code> 添加 version 标签, 不然就会使用修改后的版本, 可能会造成依赖冲突.</p><hr><p><code>musicsearch-project</code> 模块下有一个 doc 目录, 用于保存文本文档</p><p>个人认为, 项目的 <code>技术文档</code> 跟着代码走才是最正确的做法.<br>随时修改, 随时查看, 代码和文档一起更新提交, 才是最佳实践.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_sc2zpy5k.webp/" alt="20241229154732_Sc2zPY5K.webp"><br>技术文档 <code>推荐</code> 使用 <code>Markdown</code> 语法编写, 最好是 <a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9ndWlkZXMuZ2l0aHViLmNvbS9mZWF0dXJlcy9tYXN0ZXJpbmctbWFya2Rvd24v">GitHub Markdown 语法</a>.</p><p>这里给出模块说明模板, 每个模块都 <code>必须</code> 有此文档</p><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 模块名</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 简介</span></span><br><span class="line"></span><br><span class="line">xxx</span><br><span class="line"></span><br><span class="line"><span class="section">## 打包方式</span></span><br><span class="line"></span><br><span class="line">xxx</span><br><span class="line"></span><br><span class="line"><span class="section">## 部署方式</span></span><br><span class="line"></span><br><span class="line">xxx</span><br><span class="line"></span><br><span class="line"><span class="section">## 使用说明</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> xxx</span><br><span class="line"><span class="bullet">2.</span> xxx</span><br><span class="line"><span class="bullet">3.</span> xxx</span><br><span class="line"></span><br><span class="line"><span class="section">## 注意事项</span></span><br><span class="line"></span><br><span class="line">xxx</span><br><span class="line"></span><br><span class="line"><span class="section">## 更新历史</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**更新时间 更新人 **</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> xxx</span><br><span class="line"><span class="bullet">2.</span> xxx</span><br></pre></td></tr></tbody></table></figure><hr><p><code>database</code> 用于保存需求需要更新的 sql 文件, <code>必须</code> 以 <code>.sql</code> 为后缀, <code>必须</code> 是 UTF-8 编码.</p><h4 id="musicsearch-dependencies"><a href="#musicsearch-dependencies" class="headerlink" title="musicsearch-dependencies"></a>musicsearch-dependencies</h4><p>此模块是为了方便管理第三方 jar 依赖而特意添加的, 如果没有此模块, 第三方依赖也可以添加到 <code>musicsearch-project</code> 中, 但是会造成过度臃肿,<br>因此将第三方依赖拆分到此模块中进行统一管理.</p><blockquote><p>第三方依赖 <code>必须</code> 添加到此模块, 且 <code>必须</code> 将版本号设置到 properties 标签下.<br>第三方依赖较大可能存在版本冲突, 因此此模块的版本从 <code>0.0.1</code> 开始, 不和 <code>musicsearch-parent</code> 相同, 如果此模块存在依赖问题, 修复后, 需要提升版本号,<br>并且 <code>必须</code> 写更新记录.</p></blockquote><p>此模块比较特殊, 修改会比较频繁, 依赖出错大部分出现在此模块, 因此单独写一个 <code>changes.md</code>, 用于记录更新日志.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_mphwivsa.webp/" alt="20241229154732_mPHwivSa.webp"></p><p>**引入新依赖步骤 **</p><ol><li>在 <code>musicsearch-dependencies</code> 添加新依赖;</li><li>将版本信息写入到 pom 的 properties 标签内, 进行统一管理;</li><li>在需要的模块中, 引入依赖;</li><li>最后使用 <code>Maven Helper</code> 排查是否存在依赖冲突;</li><li>如果存在冲突 需要使用 <code>&lt;exclusions&gt;</code> 排除相应的依赖;</li></ol><h4 id="musicsearch-common"><a href="#musicsearch-common" class="headerlink" title="musicsearch-common"></a>musicsearch-common</h4><p><code>musicsearch-project</code> 项目的子模块, 作为最底层的依赖, 提供了公共 util 包, core 包, base 包等基础代码.</p><blockquote><p>如果被整个项目使用到的代码, 都 <code>必须</code> 放入此模块, 比如 StringUtils 工具类, 一些加密类, 整个项目都能使用到的常量类, 枚举类等;</p></blockquote><p><strong>必须要提出的是:</strong></p><p>不要多个模块多个 StringUtils 工具类, 最佳实践 <code>应该</code> 是 <code>musicsearch-common</code> 中编写一个通用的 <code>StringUtils</code> 类,<br>继承自 <code>org.apache.commons.lang3.StringUtils</code> 类, 业务模块继承 <code>musicsearch-common</code> 模块中的 <code>StringUtils</code> 类,<br>实现业务相关的字符串处理工具类.(这种方式同样适用于其他类)</p><h4 id="musicsearch-business"><a href="#musicsearch-business" class="headerlink" title="musicsearch-business"></a>musicsearch-business</h4><p>业务模块的父模块, <code>musicsearch-parent</code> 模块的子模块.<br>用于管理业务模块共用的 jar 依赖.</p><blockquote><p>所有业务模块 <code>必须</code> 是 <code>musicsearch-business</code> 的子模块</p></blockquote><p>将业务代码全部整合在一个模块中, 使用业务名进行再分子模块的方式, 管理整个业务代码.<br>其他共用模块作为框架基础模块, 以后新项目还可以复用.</p><blockquote><p>不提供 <code>dubbo service</code> 的模块, <code>必须</code> 以 <code>service-</code> 开始.<br>提供 <code>dubbo service</code> 的模块, <code>必须</code> 以 <code>mservice-</code> 开始.</p></blockquote><p><code>mservice</code> 的意思是 <code>micro-service</code>. 这样便于区分不同的服务类型, 也方便分组.</p><p>我们现在使用 <code>dubbo</code> 服务治理框架, 如果以后有可能话, 可以很方便的迁移到 <code>SOFA</code> 或者 <code>Spring Cloud</code> (我就说说, 应该是不可能的事了).</p><p>业务子模块除了 <code>business-common</code> 模块, 其他子模块都以 Web 应用 或者 JVM 进程直接提供服务.</p><h4 id="business-common"><a href="#business-common" class="headerlink" title="business-common"></a>business-common</h4><p><code>musicsearch-business</code> 模块的子模块, 依赖于 <code>musicsearch-common</code>.</p><blockquote><p>业务模块共用的代码 <code>必须</code> 放入 <code>business-common</code> 模块.</p></blockquote><p>比如所有业务都会用到的 redis key 常量类, 则 <code>必须</code> 放在 <code>business-common</code> 模块中;<br>而 <code>service-meeting</code> 这个模块的业务用到的 redis key 常量则 <code>必须</code> 放到 <code>service-meeting</code> 模块中.</p><p>讲究职责分离, 层级分明, 互不干涉; 你走你的阳关道, 我看我的 西虹市首富.</p><h3 id="模块名"><a href="#模块名" class="headerlink" title="模块名"></a>模块名</h3><blockquote><p><code>必须</code> 全部为小写, 单词之间 <code>必须</code> 使用 <code>-</code> 分隔.</p></blockquote><p>不要随心所欲的命名, 要讲究的规则, 不然会走火入魔的.</p><blockquote><p>provider 模块名 <code>必须</code> 以 <code>mservice-</code> 开头;</p></blockquote><p>provider 模块也有可能是服务消费者, 这类的模块, 还是 <code>应该</code> 使用 <code>mservice-</code> 开头</p><p>对于 provider 模块, 至少应该分为 2 层;</p><ol><li>服务名 -interface , 提供给 consumer 的依赖模块</li><li>服务名 -service , 业务处理模块</li></ol><blockquote><p>服务名 -interface 模块 <code>必须</code> 包含用到的实体类, 接口定义, dubbo-consumer- 服务名.xml, 共用的 util 类, 枚举类等;</p></blockquote><p><strong>必须要提出的是:</strong></p><p><code>dubbo-consumer- 服务名.xml</code> 配置文件 <code>应该</code> 由 provider 来维护, 而 consumer 只需要 import 此配置文件即可, 而不是在自己的 Spring<br>配置文件或者自定义一个 dubbo 配置文件再来写引入的接口.</p><p>这就是为什么 <code>dubbo-consumer- 服务名.xml</code> <code>应该</code> 在 interface 模块的原因.</p><p>这里看看 migu-game 重构之前的结构 (有一些小改动)</p><p><strong>配置关系:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_fx0te6by.webp/" alt="20241229154732_Fx0TE6bY.webp"></p><p>这里的 dubbo.xml 即 provider 配置, 前面也说了, 这样的命名方式不够直观, 因此 <code>应该</code> 采用 <code>dubbo-provider- 服务名</code> 的方式命名;</p><p>Spring-config.xml 是主配置, 导入了其他 5 个配置;</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring/dubbo.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring/mybatis.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring/dataSource.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath*:applicationContext-jms.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath*:applicationContext-redis.xml"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><code>applicationContext-jms.xml</code> 和 <code>applicationContext-redis.xml</code> 这 2 个配置原来是放在 web.xml 中的.<br>这里迁入到 Spring-config.xml 中, 因为 web.xml 只需要负责加载 Spring-config.xml 即可, web.xml 写好之后, 基本不需要修改, 所有配置关系全部在<br>Spring-config.xml 中管理.</p><p>那么问题来了<br><strong>dubbo 的 consumer 配置在哪里呢?</strong></p><p>找了半天, 原来在 funclib 模块的 <code>applicationContext-mainflowfunc.xml</code> 配置中…</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_f89aye00.webp/" alt="20241229154732_F89Aye00.webp"></p><p>那么问题又来了</p><p>如果 migu-game 由合肥的同事开发, 需要增加几个接口, 使用 migu-game 服务的是成都的小明同学, 正在开发 funclib, 这个时候请问….</p><p><strong>小明中午吃了啥?</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_yskfqkz8.webp/" alt="20241229154732_YSkFqKZ8.webp"></p><blockquote><p>如果 dubbo consumer 配置由 funclib 维护, 那么就要修改 funclib 模块的配置;<br>如果 dubbo consumer 配置由 migu-game 维护, 合肥的同事只需要提供 migu-game-interface, funclib 只需引入 <code>dubbo-consumer-migugame.xml</code>;</p></blockquote><p><code>服务名 -interface</code> 还应该依赖 <code>dubbo</code> 相关 jar 依赖, 这样 consumer 就不需要自己引入 <code>dubbo</code> 相关依赖了;</p><p>服务行业嘛, 要做就做全套</p><p>**最佳实践 **</p><p>个人认为, 一个 <code>mservice</code> 最好分为 3 层;</p><ol><li>interface 层;</li><li>service 层;</li><li>dao 层;</li></ol><p>interface 已经说过了;<br>service 层, 作为业务层, 依赖于 dao 层和 interface 层;</p><p>各层的 pom 中只依赖每层需要的 jar 依赖. 比如 duubo 的依赖 <code>应该</code> 写在 interface 层, <code>mybatis</code> 和数据库驱动依赖 <code>应该</code> 写在 dao 层, 而<br>service 层依赖业务相关的 jar.</p><p>这样将所有依赖下放到不同层中, 以一种插件化的方式提供服务, 导入某层依赖, 连带引入了这层需要的依赖. 这样 jar 依赖关系明确, 也很好管理.</p><p><code>musicsearch-project</code> 的思想就是这样, 以 <code>分而治之</code> 的方式管理代码和依赖关系, 也就是个解耦的思想.<br>而不是将所有依赖全部扔到 common 或者 service 中, 方便是方便, 维护起来想死的心都有了.</p><p>interface 模块, 就是一个提供给 consumer 的说明, 告诉 consumer, 我这个 interface 提供了哪些功能, 没有具体实现.</p><p>而 API 全称 Application Program Interface, 即应用程序接口, 是一组定义, 程序及协议的集合.<br>因此我将 服务名 -api 用于向外提供 rest api 的模块.</p><p>相关的包名也是如此.</p><h3 id="包名"><a href="#包名" class="headerlink" title="包名"></a>包名</h3><blockquote><p>所有包名 <code>必须</code> 以 <code>com.xxxx.msearch</code> 开始</p></blockquote><p>其他规则:</p><ul><li>组件模块: <code>com.xxxx.msearch.component. 组件名</code></li><li>公共类库: <code>com.xxxx.msearch.common</code></li><li>服务模块: <code>com.xxxx.msearch. 服务名</code></li></ul><p><code>推荐</code> 几个常用的包名</p><ul><li><code>config</code> 用来放配置类</li><li><code>util</code> 工具类包</li><li><code>enums</code> 枚举类包</li><li><code>constant</code> 常量类包 (<code>推荐</code> 将常量按类别定义在不同的常量类中)</li><li><code>service</code> service 接口包</li><li><code>service.impl</code> service 接口实现类包</li><li><code>dao</code> dao 接口包</li><li><code>interfaces</code> 特指 provider 提供的接口类</li><li><code>api</code> 特指 rest api</li></ul><h3 id="类名"><a href="#类名" class="headerlink" title="类名"></a>类名</h3><p>类名 <code>必须</code> 使用 UpperCamelCase 风格 (首字母都大写)，必须遵从驼峰形式. 例如: StringUtils</p><blockquote><p>抽象类命名 <code>必须</code> 使用 Abstract 或 Base 开头;<br>异常类命名 <code>必须</code> 使用 Exception 结尾;<br>测试类命名 <code>必须</code> 以它要测试的类的名称开始，以 Test 结尾;<br>接口实现类 <code>必须</code> 以 Impl 结尾;<br>API 接口类必须以 <code>Controller</code> 结尾;<br>ORM 接口必须以 <code>Dao</code> 结尾;</p></blockquote><h3 id="方法名"><a href="#方法名" class="headerlink" title="方法名"></a>方法名</h3><p>Dao 接口名 <code>推荐</code> 使用以下命名方式</p><p>新增:</p><ul><li>add(Entity entity)</li><li>insert(Entity entity)</li><li>save(Entity entity)</li></ul><p>查询:</p><ul><li>get(Long id)</li><li>getByXxx</li><li>findByXxx</li><li>selectByXxx</li></ul><p>更新:</p><ul><li>update(Entity entity)</li><li>updateByXxx</li></ul><p>删除:</p><ul><li>delete(Long id)</li><li>deleteByXxx</li></ul><h3 id="属性名"><a href="#属性名" class="headerlink" title="属性名"></a>属性名</h3><p>这个没什么好说的, 按照 Java 推荐命名方式即可.</p><blockquote><p>常量命名 <code>必须</code> 全部大写, 单词间用下划线分隔;</p></blockquote><h2 id="数据库规范"><a href="#数据库规范" class="headerlink" title="数据库规范"></a>数据库规范</h2><p>推荐 3 篇文章, 虽然是 mysql 的, 但是都是数据库啊</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3M/X19iaXo9TWpNNU9EWXhNREE1T1E9PSZtaWQ9MjY1MTk2MDc3NSZpZHg9MSZzbj0xYTljOWY0Yjk0ZGZlNzFhZDI1MjhmYjJjODRmNWVjNyZjaGtzbT1iZDJkMDAxYjhhNWE4OTBkMzAyZDEzOWVhNDJlOWZmZGU0NDQwNzczOGE2MTg4NjU5MzRlNDBiOGUzNTQ4NmIxM2NhZmNhMjkzM2Y2Jm1wc2hhcmU9MSZzY2VuZT0xJnNyY2lkPTEyMjhNemdGdzlLTFZ6YUh0akh2cGIycCUyM3Jk">赶集 mysql 军规</a><br><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3M/X19iaXo9TWpNNU9EWXhNREE1T1E9PSZtaWQ9MjY1MTk1OTkwNiZpZHg9MSZzbj0yY2JkYzY2Y2ZiNWI1M2NmNDMyN2ExZTBkMThkOWI0YSZjaGtzbT1iZDJkMDdiZThhNWE4ZWE4NmRjM2MwNGVjZWQzZjQxMWVlNWVjMjA3ZjczZDMxNzI0NWUxZmVmZWExNjI4ZmViMDM3YWQ3MTUzMWJjJnNjZW5lPTIxI3dlY2hhdF9yZWRpcmVjdA==">58 到家数据库 30 条军规解读</a><br><a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3M/X19iaXo9TWpNNU9EWXhNREE1T1E9PSZtaWQ9MjY1MTk1OTkxMCZpZHg9MSZzbj02YjY4NTNiNzBkYmJlNmQ2ODlhMTJhNGE2MGI4NGQ4YiZjaGtzbT1iZDJkMDdiYThhNWE4ZWFjNjc4M2JhYzk1MWRiYTM0NWQ4NjVkODc1NTM4NzU1ZmU2NjVhNWRhYWYxNDJlZmU2NzBlMmMwMmI3YzcxJnNjZW5lPTIxI3dlY2hhdF9yZWRpcmVjdA==">再议数据库军规</a></p><h2 id="配置规范"><a href="#配置规范" class="headerlink" title="配置规范"></a>配置规范</h2><p>为了解决开发, 测试, 现网部署时手动对比配置, 手动切换配置, 减少人工介入出错的几率, 节约时间等问题, <code>musicsearch-project</code> 采用多环境配置.<br>一次打包, 可部署到多个环境.</p><p>意思就是: 一次打包, 到处运行.</p><h3 id="配置分类"><a href="#配置分类" class="headerlink" title="配置分类"></a>配置分类</h3><p><strong>从数据来源可分为:</strong></p><ul><li>数据库</li><li>NoSQL</li><li>文件</li><li>网络</li></ul><p><strong>从加载顺序上课分为:</strong></p><ul><li>启动时加载的配置<ul><li>dataSource 连接配置</li><li>Redis 连接配置</li><li>MQ 连接配置</li><li>日志配置</li><li>…</li></ul></li><li>运行期间动态获取<ul><li>字典数据</li></ul></li></ul><p>其实最容易出错的且影响最大的就是运行期间动态获取的配置, 字典数据改错了就会影响现网业务, 而且不好排查.<br>连接配置启动时就需要, 如果错误可能会导致启动失败, 这类问题比较容易排查.</p><h3 id="local-环境"><a href="#local-环境" class="headerlink" title="local 环境"></a>local 环境</h3><p>以前在开发时, 使用的 dev 环境. 可能会将某几个配置修改成本地环境或者 test 环境进行开发, 开发完成后, 又 <code>需要逐个改回来</code>;<br>改动的配置太多, 部分配置 <code>忘记改回来</code> 还提交了, 悲剧了;</p><p>local 环境专门解决以上问题.<br>最初是一个空配置, 我们拉取代码后根据自己的环境修改 local 配置, 然后使用 idea <code>忽略提交</code> 功能, 忽略此文件.<br>每个开发者互不影响, 开发时只需要修改 local 环境即可, <code>不该</code> 直接修改其他环境配置，避免环境问题造成线上问题</p><h3 id="dev-环境"><a href="#dev-环境" class="headerlink" title="dev 环境"></a>dev 环境</h3><p>现在的服务太多, 我们开发时不可能每个都启动起来, 这时我们可以将一些公共的服务部署到 dev 服务器, 这个配置就是 dev 环境的配置了,<br>一旦配置好, <code>不该</code> 轻易修改.</p><h3 id="test-环境"><a href="#test-环境" class="headerlink" title="test 环境"></a>test 环境</h3><p>和 dev 环境差不多, 只是一些连接配置不一样, <code>不该</code> 轻易修改.</p><h3 id="prod-环境"><a href="#prod-环境" class="headerlink" title="prod 环境"></a>prod 环境</h3><p>生产环境经常改动的就是字典数据, 现在的字段数据太复杂了.</p><p>最好的方式是通过 kv 键值对, value 只是简单的字符串而已, 不要是一个复杂的 json, 这样能非常友好的管理所有配置, 修改配置也不容易出错.</p><p>redis 构建工具我了解当的一个作用是为了防止修改出错, 做了一个保护措施.<br>先保存到数据库中, 检查一下, 确保没出错后使用构建工具同步到 redis.</p><p>如果是这个原因的话, 我想能不能使用一个弹出框显示修改前与修改后的值, 然后二次确认?<br>确认后修改数据库, 同时更新 redis.</p><p>获取动态数据的方式:</p><p>首先从 redis 中获取, 如果没有则从数据库中获取, 然后更新到 redis;<br>如果有则直接返回.</p><p>后台系统修改字典数据且二次确认后, 更新数据库和 redis.</p><p>这里有一个事务问题.<br>比如后台系统修改完字段数据后, 更新数据库成功, 但是更新 redis 失败, 这个时候 redis 中就是旧数据.</p><p><strong>解决方案:</strong></p><ol><li>后台系统二次确认修改;</li><li>更新数据库;</li><li>将 redis 相应的 key 设置为失效;</li></ol><p><strong>分析:</strong></p><ol><li>第 2 步失败, 直接返回修改失败, 不会发生事务问题, 数据也不会被修改;</li><li>第 2 步成功, 第 3 步失败;<ol><li>此时应用查询字典数据时, redis 为旧数据 (可以使用重试来解决)</li></ol></li><li>第 2 步成功, 第 3 步成功;<ol><li>此时应用查询字典数据时, redis 没有, 则去数据库中查询最新, 然后再更新到 redis 中.</li></ol></li></ol><h3 id="Dubbo-配置文件"><a href="#Dubbo-配置文件" class="headerlink" title="Dubbo 配置文件"></a>Dubbo 配置文件</h3><blockquote><p>消费者配置文件名 <code>必须</code> 以 <code>dubbo-consumer- 服务名.xml</code> 命名.<br>服务提供者配置文件名 <code>必须</code> 以 <code>dubbo-provider- 服务名.xml</code> 命名.</p></blockquote><p>配置名区分消费者和生产者, 这样职责明确, 方便搜索查看. 最操蛋的是搜索出几十个 dubbo.xml 配置, 还得一个个点进入看是消费者还是生产者配置.</p><blockquote><p>消费者配置 <code>必须</code> 单独写在 <code>dubbo-consumer- 服务名.xml</code> 中, 不要写在 Spring 配置中.</p></blockquote><p>配置尽量分开到不同到配置文件中, 最后使用 import 聚合起来. 需要修改配置时, 能明确知道去哪个配置文件中修改.<br>你见 <code>葵花宝典</code> 里面写了怎么自宫的详细教程吗? 最多也就引用一下, <code>欲练此功, 必先自宫</code>.</p><blockquote><p>引入配置不要写在 web.xml, <code>必须</code> 使用 import 在 Spring 主配置文件中引入.</p></blockquote><p><code>musicsearch-project</code> 不需要担心这个问题, 因为 web.xml 已经被干掉了 🤣</p><h3 id="Spring-配置文件"><a href="#Spring-配置文件" class="headerlink" title="Spring 配置文件"></a>Spring 配置文件</h3><ul><li>SpringMVC 配置文件统一命名: <code>spring-mvc.xml</code></li><li>Web 应用的 Spring 配置文件统一命名: <code>spring-context.xml</code></li><li>其他组件的 Spring 配置文件统一命名: 模块名.xml</li><li>Spring Boot 应用的配置文件统一使用 application.properties</li></ul><p><code>musicsearch-project</code> 使用 Spring Boot 为基础框架, 因此 <code>spring-mvc.xml</code> 和 <code>spring-context.xml</code> 已经使用 Java Config 的方式代替.</p><p>**自动配置类 <code>必须</code> 以 服务名 +Configuration 方式命名 **<br>**启动类 <code>必须</code> 以 服务名 +Application 方式命名 **<br>**单元测试主类 <code>必须</code> 以 服务名 +ApplicationTest 方式命名 **</p><h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><p>原来的项目是由多个模块由不同的 Maven 管理, 造成编译, 打包,debug 麻烦, 依赖关系复杂, 版本随意, 同一个模块多个不同版本, 维护困难.</p><p>为了解决以上问题, 现在将所有模块通过一个 主 pom 进行管理, 所有模块全部在 <code>musicsearch-porject</code> 目录下.</p><p>优点如下:</p><ul><li>debug 时方便, 想在哪儿打断点就在哪儿打断点. 随处 debug;</li><li>能借助 IDEA 进行全局重构;</li><li>jar 版本统一管理</li><li>绝对不会出现相同 jar 多个相同版本的问题.</li></ul><h3 id="pom-规范"><a href="#pom-规范" class="headerlink" title="pom 规范"></a>pom 规范</h3><blockquote><p>groupId <code>必须</code> 为 <code>com.xxx</code><br>artifactId <code>必须</code> 与 模块名相同<br>version <code>必须</code> 与 父 pom version 相同<br><code>必须</code> 显式指定 <code>packaging</code></p></blockquote><p>如果没有设置 packaging 标签, 默认打包为 jar 格式, 这里 <code>必须</code> 设置此标签, 明确指定打包格式.</p><blockquote><p><code>必须</code> 写 <code>description</code> 标签</p></blockquote><p>为此 pom 添加必要的描述信息</p><blockquote><p>第三方依赖 <code>必须</code> 添加到 <code>musicsearch-dependencies</code> pom 中;<br>如果 Maven 中央仓库没有的 jar 包, 从网上下载后, <code>必须</code> 上传到公司的 Maven, 不能直接使用 jar 包</p></blockquote><ol><li><p>搜索 Maven 中央仓库, 关键字 + maven;</p></li><li><p>搜索不到则找到 jar 上传到公司 Maven 仓库</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 安装到私服</span><br><span class="line"># DgroupId 和 DartifactId 构成了该 jar 包在 pom.xml 的坐标，项目就是依靠这两个属性定位。自己起名字也行。</span><br><span class="line"># Dfile 表示需要上传的 jar 包的绝对路径。</span><br><span class="line"># Durl 私服上仓库的位置，打开 nexus——&gt;repositories 菜单，可以看到该路径。</span><br><span class="line"># DrepositoryId 服务器的表示 id，在 nexus 的 configuration 可以看到。 要与 setting.xml 中的权限 id 一致</span><br><span class="line"># Dversion 表示版本信息</span><br><span class="line">mvn deploy:deploy-file -DgroupId=com.xxx -DartifactId=yyy -Dversion=x.x.x -Dpackaging=jar -Dfile=jar-path -Durl= 上传地址 -DrepositoryId=thirdparty</span><br></pre></td></tr></tbody></table></figure></li></ol><blockquote><p>第三方依赖 <code>必须</code> 将版本迁入 <code>musicsearch-dependencies</code> 到 properties 标签下;<br>version <code>必须</code> 以 <code>artifactId.version</code> 的方式命名;</p></blockquote><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">socket.io-client.version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">socket.io-client.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.socket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>socket.io-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${socket.io-client.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>由于 <code>musicsearch-project</code> 使用 Spring Boot 开发, 版本为 1.5.8.RELEASE.<br>Spring Boot 每个版本都有一个 <code>spring-boot-dependencies</code> 项目用来维护所有第三方 jar 版本和 Maven 插件版本.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_hijijtdi.webp/" alt="20241229154732_HijijtDI.webp"></p><p>我们直接使用 <code>spring-boot-dependencies</code> 中相关依赖的版本, 能有效减少版本冲突.</p><blockquote><p>如果我们新增的第三方包已经在 <code>spring-boot-dependencies</code> 声明, 则 <code>必须</code> 使用 <code>spring-boot-dependencies</code> 规定的版本, 即删除 version 标签.</p></blockquote><p>怎么查看新引入的依赖是否在 <code>spring-boot-dependencies</code> 被声明了呢, 很简单</p><p>比如我需要添加如下依赖到模块中</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>整个操作如下图所示:</p><p>![2222.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><p>我们新增的 lombok 版本为 1.16.14<br>但是当加入 pom 之后, 左边出现了一个向上的箭头, 点过去之后, 发现此依赖已经在 <code>spring-boot-dependencies</code> 被声明了, 并且版本为 1.16.18, 因此删除<br>version 就可以了.</p><p><strong>添加新依赖的步骤:</strong></p><ol><li>选择合适的模块, 直接粘贴 maven 依赖配置到 pom 中,</li><li>如果左边出现了向上的箭头, 则删除 version 标签, 搞定;</li><li>如果没有, 则将此依赖配置粘贴到 <code>musicsearch-dependencies</code> 中, 将 version 添加到 properties 标签中;</li><li>最后删除最开始那个配置的 version;</li></ol><p><code>spring-boot-dependencies</code> 不可能定义到所有的依赖, 因此这里就有了 <code>musicsearch-dependencies</code> 这个模块,<br>用来管理项目需要但是没有在 <code>spring-boot-dependencies</code> 中定义的 jar 依赖.</p><h2 id="日志规范"><a href="#日志规范" class="headerlink" title="日志规范"></a>日志规范</h2><blockquote><p><code>推荐</code> 使用 <code>@Slf4j</code> 获取 <code>log</code> 实例</p></blockquote><p>使用 <code>lombok</code> 插件, 直接使用 @Slf4j 代替获取 log 实例的冗余代码.</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(Xxx.class);</span><br></pre></td></tr></tbody></table></figure><blockquote><p><code>必须</code> 使用 <code>log4j2</code> 日志框架</p></blockquote><p>统一使用效率更高的 log4j2 日志框架</p><blockquote><p>日志输出到文件的编码 <code>必须</code> 为 UTF-8</p></blockquote><h3 id="日志配置名"><a href="#日志配置名" class="headerlink" title="日志配置名"></a>日志配置名</h3><blockquote><p>Web 应用或者通过 JVM 进程提供服务的应用, <code>必须</code> 使用 <code>log4j2-spring.xml</code> 命名</p></blockquote><p>Spring Boot 官方推荐优先使用带有 -spring 的文件名作为日志配置（如使用 log4j2-spring.xml，而不是 log4j2.xml）</p><p>原理可以查看<br><code>Log4J2LoggingSystem.getCurrentlySupportedConfigLocations()</code><br><code>AbstractLoggingSystem.getSpringConfigLocations()</code></p><h3 id="输出样式"><a href="#输出样式" class="headerlink" title="输出样式"></a>输出样式</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env: %d{yyyy.MM.dd HH:mm:ss.SSS} [%5p] ${sys:PID} -- [%15.15t] %-40.40c{1.} : %m%n%xwEx</span><br></pre></td></tr></tbody></table></figure><p>输出内容元素具体如下：</p><ul><li>环境名</li><li>时间日期 — 精确到毫秒</li><li>日志级别 — ERROR, WARN, INFO, DEBUG or TRACE</li><li>进程 ID</li><li>分隔符 —<code>--</code>标识实际日志的开始</li><li>线程名 — 方括号括起来（可能会截断控制台输出）</li><li>Logger 名 — 通常使用源代码的类名</li><li>日志内容</li></ul><p>效果 :</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dev: 2018.08.01 15:02:25.153  INFO 75012 -- [restartedMain] c.i.m.m.MeetingApplication : Starting MeetingApplication on dong4j with PID 75012 (/Users/codeai/Develop/work/ifly/musicsearch-project/musicsearch-business/service-meeting/target/classes started by codeai in /Users/codeai/Develop/work/ifly/musicsearch-project)</span><br><span class="line">dev: 2018.08.01 15:02:25.154 DEBUG 75012 -- [restartedMain] c.i.m.m.MeetingApplication : Running with Spring Boot v1.5.8.RELEASE, Spring v4.3.12.RELEASE</span><br><span class="line">dev: 2018.08.01 15:02:25.155  INFO 75012 -- [restartedMain] c.i.m.m.MeetingApplication : The following profiles are active: oracle</span><br></pre></td></tr></tbody></table></figure><h3 id="日志保存路径"><a href="#日志保存路径" class="headerlink" title="日志保存路径"></a>日志保存路径</h3><p>日志路径统一管理, 确保每台服务器上的日志都在同一目录下</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;property name="LOG_BASE_FOLDER"&gt;/path/to/logs/${APP_NAME}&lt;/property&gt;</span><br></pre></td></tr></tbody></table></figure><p><code>/path/to/logs/</code> 再议, 只要是一个有读写权限的目录且好记就可以了, 关键是保持统一.</p><blockquote><p>最后 <code>必须</code> 通过 APP_NAME 参数区分应用.</p></blockquote><h3 id="日志归档"><a href="#日志归档" class="headerlink" title="日志归档"></a>日志归档</h3><blockquote><p>日志文件 <code>必须</code> 1 天归档一次，压缩文件上限 <code>建议</code> 为 200MB</p></blockquote><p>每天归档日志, 方便按日志查询日志</p><h2 id="单元测试规范"><a href="#单元测试规范" class="headerlink" title="单元测试规范"></a>单元测试规范</h2><blockquote><p>所有模块都 <code>必须</code> 有单元测试, 而不是使用 <code>main()</code> 来进行测试;</p></blockquote><p>IDEA 添加单元测试类非常简单</p><p>![3333.gif](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cdn.dong4j.site/">https://cdn.dong4j.site</a></p><p>直接通过快捷键自动生成单元测试类.</p><blockquote><p>集成测试时, <code>必须</code> 继承主测试类;</p></blockquote><p>在每个 Web 模块中, 都会有一个 XxxApplicationTest 测试父类, 用于整合配置类, 测试端口随机等功能.</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_jaccqkxj.webp/" alt="20241229154732_JacCQkxj.webp"></p><p>其他集成测试类只需要继承此父类即可, 不需要写重复的注解</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site_8sa4oiu5.webp/" alt="20241229154732_8Sa4oiU5.webp"><br>默认是单元测试 <code>必须</code> 全部通过才能打包, 当往往由于单元测试编写不规范造成打包失败, 编写好的单元测试难度也非常大, 因此这里不强制要求.</p><p>使用 3 种方式忽略单元测试</p><p><strong>方式 1:</strong></p><p><code>推荐</code> 这种</p><p>使用变量</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.test.skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">maven.test.skip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>或者</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>方式 2:</strong></p><p>使用 mvn 命令</p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn <span class="built_in">package</span> -Dmaven.test.skip=<span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><p><strong>方式 3:</strong></p><p>使用插件</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>${maven-surefire-plugin.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>方式 1 与方式 2 的区别在于:</p><p><code>skipTests</code> 不执行测试用例，但编译测试用例类生成相应的 class 文件至 target/test-classes 下<br><code>maven.test.skip</code> 不但跳过单元测试的运行，也跳过测试代码的编译</p></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar1.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">dong4j</div><div class="post-copyright__author_desc">岁月静好，诗酒趁年华🍺</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.dong4j.site/posts/a29c1a98.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl(&quot;https://blog.dong4j.site/posts/a29c1a98.html&quot;)">打造高效团队：统一编码风格的重要性</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/wechat-pay.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/alipay.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.dong4j.site/posts/a29c1a98.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=打造高效团队：统一编码风格的重要性&amp;url=https://blog.dong4j.site/posts/a29c1a98.html&amp;pic=https://api.dong4j.ink:1024/cover?cgzh5kkt" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div><div class="share-link follow"><div class="share-button" id="post-share-url" title="订阅" onclick="icat.showFollowBox()"><i class="anzhiyufont anzhiyu-icon-rss"></i></div></div></div></div></div><div class="submit-box display"><form id="follow" action="https://api.follow.it/subscription-form/b29peEszNWYzK3FQbEw2dVlITEJMZ2pQRXh2dWRLVDE3SC96eFhRaGwwQWprcXpYYUp0NGFWemxVZllXRGU4Nm4yenNGSzNpV3l0Z1EwQzBXQU5xTG9pZWNzVCt5YWptWUt6TXppRXVXMXZxQTRZOGQ0NUVDRlRFOUYxSHMzMEJ8NmlodHY1VWhDQVZBaG8wM0pSV2pXSjdTNGRWS1o0RDVZbE11KzlEeWhuZz0=/8" method="post" target="_blank"><div class="follow-it-form-subscribe" style="position:relative"><div class="heading"><h5 style="font-weight:700;text-align:center">订阅本站文章：</h5></div><div class="input-field"><input type="email" id="email-input" name="email" placeholder="填入您的邮箱地址" spellcheck="false" oninput="validateEmail()"></div><div class="submit-button"><button type="submit" id="submit-button" onclick="ga(&quot;send&quot;,&quot;event&quot;,&quot;Form&quot;,&quot;Submit&quot;,&quot;Affiliate&quot;)" style="font-weight:700;font-size:14px;text-align:center" disabled="">确认订阅</button></div></div></form><style>#email-input{font-size:16px;font-weight:700;padding:10px;border:2px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}#email-input:focus{outline:0}#email-input.valid{border-color:green}#email-input.invalid{border-color:red}</style><script>function validateEmail(){var s=document.getElementById("email-input"),a=document.getElementById("submit-button"),e=s.value;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?(a.disabled=!1,s.classList.add("valid"),s.classList.remove("invalid")):(a.disabled=!0,s.classList.add("invalid"),s.classList.remove("valid"))}</script></div><script>var icat={showFollowBox:function(){var s=document.querySelector(".submit-box");s.classList.contains("display")?s.classList.remove("display"):s.classList.add("display")}}</script><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.dong4j.site" target="_blank">司机带你开车</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E6%96%B0%E6%97%B6%E4%BB%A3%E7%A0%81%E5%86%9C/"><span class="categoryes-punctuation"><i class="anzhiyufont anzhiyu-icon-inbox"></i></span>新时代码农<span class="categoryesPageCount">212</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E9%87%8D%E6%9E%84/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>重构<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83%E5%8C%96/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>项目规范化<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>阿里巴巴开发手册<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E9%9F%B3%E4%B9%90%E6%90%9C%E7%B4%A2%E9%A1%B9%E7%9B%AE/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>音乐搜索项目<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>编码规范<span class="tagsPageCount">1</span></a></div></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook a2a_counter"></a><a class="a2a_button_x"></a><a class="a2a_button_threads"></a><a class="a2a_button_pocket"></a><a class="a2a_button_email"></a><a class="a2a_button_sms"></a><a class="a2a_dd" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.addtoany.com/share"></a></div></div><script async="" src="https://static.addtoany.com/menu/page.js"></script><script>var a2a_config=a2a_config||{};a2a_config.templates=a2a_config.templates||{},a2a_config.templates.email={subject:"来自 dong4j 的分享: ${title}",body:"一篇有意思的博文:\n${link}"},a2a_config.templates.sms={body:"给你分享一篇有意思的博客:\n${title}\n${link}"}</script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/70b9e46a.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?1rg1m5ir" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Redis Sentinel 搭建指南：从入门到精通</div></div></a></div><div class="next-post pull-right"><a href="/posts/c43d4ea4.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?ikjhoy2e" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java代码审查：常见错误及改进指南</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/321ba84a.html" title="Spring Boot 3.3.x 脚手架重构：企业级应用实践"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?phut8cmw" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-06-11</div><div class="title">Spring Boot 3.3.x 脚手架重构：企业级应用实践</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" rel="external nofollow noreferrer">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" onerror="this.onerror=null,this.src=&quot;/img/friend_404.gif&quot;" alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/coding.gif" alt="status"></div></div><div class="author-info__description"><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">dong4j</h1><div class="author-info__desc">岁月静好，诗酒趁年华 🍺</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/dong4j" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fa-brands fa-github faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fa-solid fa-at faa-tada"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><div style="display:flex;align-items:center"><span>👋🏻 Hi，欢迎来到我的博客~</span><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mario.gif" width="40"></div><span>❓ 如有问题欢迎评论区交流！🎉</span><br><span>😫 页面异常？试试<kbd>Ctrl</kbd>+<kbd>F5</kbd>🙉</span><br><span>📧 如需联系：<a href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer"><b>发邮件给我吧 🚀</b></a></span><div id="welcome-info"></div><a id="my-card-info-btn" href="/subscribe/" data-pjax-state=""><i class="anzhiyufont anzhiyu-icon-rss"></i><span>订阅本站</span></a></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background:url(https://cdn.dong4j.site/source/image/63c02edf44033.webp) center center/100% no-repeat"></div><div class="back face" style="background:url(https://cdn.dong4j.site/source/image/645fa415e8694.webp) center center/100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%9F%E8%AF%9D"><span class="toc-number">1.</span> <span class="toc-text">废话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Let%E2%80%99s-go"><span class="toc-number">2.</span> <span class="toc-text">Let’s go</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E7%AF%87"><span class="toc-number">2.1.</span> <span class="toc-text">开篇</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E4%B8%AA%E6%89%8D%E6%98%AF%E5%BC%80%E7%AF%87"><span class="toc-number">2.2.</span> <span class="toc-text">这个才是开篇</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E5%AE%9A"><span class="toc-number">3.</span> <span class="toc-text">约定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">4.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Intellij-IDEA-%E6%8F%92%E4%BB%B6"><span class="toc-number">4.1.</span> <span class="toc-text">Intellij IDEA 插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Alibaba-Java-Coding-Guidelines"><span class="toc-number">4.1.1.</span> <span class="toc-text">Alibaba Java Coding Guidelines</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lombok"><span class="toc-number">4.1.2.</span> <span class="toc-text">lombok</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Maven-Helper"><span class="toc-number">4.1.3.</span> <span class="toc-text">Maven Helper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaDoc"><span class="toc-number">4.1.4.</span> <span class="toc-text">JavaDoc</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JRebel"><span class="toc-number">4.1.5.</span> <span class="toc-text">JRebel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mybatis-Plugin"><span class="toc-number">4.1.6.</span> <span class="toc-text">Mybatis Plugin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GenerateSerialVersionUID"><span class="toc-number">4.1.7.</span> <span class="toc-text">GenerateSerialVersionUID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GenerateAllSetter"><span class="toc-number">4.1.8.</span> <span class="toc-text">GenerateAllSetter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Translation"><span class="toc-number">4.1.9.</span> <span class="toc-text">Translation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Grep-Console"><span class="toc-number">4.1.10.</span> <span class="toc-text">Grep Console</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RestfulToolkit"><span class="toc-number">4.1.11.</span> <span class="toc-text">RestfulToolkit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Restore-Sql-for-iBatis-Mybatis"><span class="toc-number">4.1.12.</span> <span class="toc-text">Restore Sql for iBatis/Mybatis</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Intellij-IDEA-%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.2.</span> <span class="toc-text">Intellij IDEA 设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.2.1.</span> <span class="toc-text">编码设置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#html-%E8%AE%BE%E7%BD%AE%E7%BC%96%E7%A0%81%E4%B8%BA-UTF-8"><span class="toc-number">4.2.1.1.</span> <span class="toc-text">html 设置编码为 UTF-8</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Tomcat-%E8%AE%BE%E7%BD%AE%E7%BC%96%E7%A0%81%E4%B8%BA-UTF-8"><span class="toc-number">4.2.1.2.</span> <span class="toc-text">Tomcat 设置编码为 UTF-8</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#todo-%E6%A0%87%E8%AF%86"><span class="toc-number">4.2.2.</span> <span class="toc-text">todo 标识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fixme-%E6%A0%87%E8%AF%86"><span class="toc-number">4.2.3.</span> <span class="toc-text">fixme 标识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E6%B3%A8%E9%87%8A"><span class="toc-number">4.2.4.</span> <span class="toc-text">类注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A"><span class="toc-number">4.2.5.</span> <span class="toc-text">方法注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A"><span class="toc-number">4.2.6.</span> <span class="toc-text">代码注释</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Version-Control-%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.3.</span> <span class="toc-text">Version Control 设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%A0%B7%E5%BC%8F"><span class="toc-number">5.</span> <span class="toc-text">代码样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#musicsearch-project-%E8%A7%84%E8%8C%83"><span class="toc-number">6.</span> <span class="toc-text">musicsearch-project 规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%A7%84%E8%8C%83"><span class="toc-number">6.1.</span> <span class="toc-text">项目结构规范</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#musicsearch-parent"><span class="toc-number">6.1.1.</span> <span class="toc-text">musicsearch-parent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#musicsearch-dependencies"><span class="toc-number">6.1.2.</span> <span class="toc-text">musicsearch-dependencies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#musicsearch-common"><span class="toc-number">6.1.3.</span> <span class="toc-text">musicsearch-common</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#musicsearch-business"><span class="toc-number">6.1.4.</span> <span class="toc-text">musicsearch-business</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#business-common"><span class="toc-number">6.1.5.</span> <span class="toc-text">business-common</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%90%8D"><span class="toc-number">6.2.</span> <span class="toc-text">模块名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E5%90%8D"><span class="toc-number">6.3.</span> <span class="toc-text">包名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%90%8D"><span class="toc-number">6.4.</span> <span class="toc-text">类名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-number">6.5.</span> <span class="toc-text">方法名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E5%90%8D"><span class="toc-number">6.6.</span> <span class="toc-text">属性名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83"><span class="toc-number">7.</span> <span class="toc-text">数据库规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%A7%84%E8%8C%83"><span class="toc-number">8.</span> <span class="toc-text">配置规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%88%86%E7%B1%BB"><span class="toc-number">8.1.</span> <span class="toc-text">配置分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#local-%E7%8E%AF%E5%A2%83"><span class="toc-number">8.2.</span> <span class="toc-text">local 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dev-%E7%8E%AF%E5%A2%83"><span class="toc-number">8.3.</span> <span class="toc-text">dev 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test-%E7%8E%AF%E5%A2%83"><span class="toc-number">8.4.</span> <span class="toc-text">test 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#prod-%E7%8E%AF%E5%A2%83"><span class="toc-number">8.5.</span> <span class="toc-text">prod 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dubbo-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">8.6.</span> <span class="toc-text">Dubbo 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">8.7.</span> <span class="toc-text">Spring 配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven"><span class="toc-number">9.</span> <span class="toc-text">Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pom-%E8%A7%84%E8%8C%83"><span class="toc-number">9.1.</span> <span class="toc-text">pom 规范</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%A7%84%E8%8C%83"><span class="toc-number">10.</span> <span class="toc-text">日志规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE%E5%90%8D"><span class="toc-number">10.1.</span> <span class="toc-text">日志配置名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%A0%B7%E5%BC%8F"><span class="toc-number">10.2.</span> <span class="toc-text">输出样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E4%BF%9D%E5%AD%98%E8%B7%AF%E5%BE%84"><span class="toc-number">10.3.</span> <span class="toc-text">日志保存路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%BD%92%E6%A1%A3"><span class="toc-number">10.4.</span> <span class="toc-text">日志归档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E8%A7%84%E8%8C%83"><span class="toc-number">11.</span> <span class="toc-text">单元测试规范</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/13e613ba.html" title="Proxmox VE 8.3 安装与配置指南"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?34n7j520" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Proxmox VE 8.3 安装与配置指南"></a><div class="content"><a class="title" href="/posts/13e613ba.html" title="Proxmox VE 8.3 安装与配置指南">Proxmox VE 8.3 安装与配置指南</a><time datetime="2025-02-17T11:52:42.000Z" title="发表于 2025-02-17 19:52:42">2025-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/91f73d3b.html" title="Ubuntu 使用备忘录：好记性不如烂笔头"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?mg3iapx4" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Ubuntu 使用备忘录：好记性不如烂笔头"></a><div class="content"><a class="title" href="/posts/91f73d3b.html" title="Ubuntu 使用备忘录：好记性不如烂笔头">Ubuntu 使用备忘录：好记性不如烂笔头</a><time datetime="2025-02-15T06:37:31.000Z" title="发表于 2025-02-15 14:37:31">2025-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5fa20a9e.html" title="使用 Cloudflare 增强公网服务安全性的实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?eb4q02fh" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="使用 Cloudflare 增强公网服务安全性的实践"></a><div class="content"><a class="title" href="/posts/5fa20a9e.html" title="使用 Cloudflare 增强公网服务安全性的实践">使用 Cloudflare 增强公网服务安全性的实践</a><time datetime="2025-02-12T16:17:11.000Z" title="发表于 2025-02-13 00:17:11">2025-02-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b0f649a0.html" title="Ubuntu 系统下 LCD4Linux 的安装与配置指南"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?po6ikv1j" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Ubuntu 系统下 LCD4Linux 的安装与配置指南"></a><div class="content"><a class="title" href="/posts/b0f649a0.html" title="Ubuntu 系统下 LCD4Linux 的安装与配置指南">Ubuntu 系统下 LCD4Linux 的安装与配置指南</a><time datetime="2025-02-12T11:35:45.000Z" title="发表于 2025-02-12 19:35:45">2025-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c78c58c7.html" title="树莓派与移远EC20 4G网卡集成及自动拨号方案解析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?56t44pn3" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="树莓派与移远EC20 4G网卡集成及自动拨号方案解析"></a><div class="content"><a class="title" href="/posts/c78c58c7.html" title="树莓派与移远EC20 4G网卡集成及自动拨号方案解析">树莓派与移远EC20 4G网卡集成及自动拨号方案解析</a><time datetime="2025-02-12T06:55:16.000Z" title="发表于 2025-02-12 14:55:16">2025-02-12</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://weibo.com/u/1884084142" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.facebook.com/dsj.array" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" size="50px"><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://space.bilibili.com/1835978167" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://v.douyin.com/iUqoRYwb/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener external nofollow noreferrer" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html">开往</a><a class="footer-item" title="服务状态" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.dev/status/services">服务状态</a></div></div><div class="footer-group"><div class="footer-title">项目</div><div class="footer-links"><a class="footer-item" title="Watt.Stack" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack">Watt.Stack</a><a class="footer-item" title="MIK" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit">MIK</a><a class="footer-item" title="macOS.dev" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev">macOS.dev</a><a class="footer-item" title="更多" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.ink:1024/">更多</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="我的装备" href="/equipment/">我的装备</a><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" rel="external nofollow noreferrer" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://nonbot.org/pledged/view/9e6e360a-4834-4dd0-b672-845baa0eb4de" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="Made By Humans" title="Made By Humans"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nonbot_pledged_logo.svg" alt="Made By Humans"></a><a class="github-badge" target="_blank" href="https://notbyai.fyi/cn/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="Not By AI" title="Not By AI"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/written-by-human-not-by-ai-white.svg" alt="Not By AI"></a><a class="github-badge" target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"></a><a class="github-badge" target="_blank" href="https://github.com/dong4j" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><footer-bar-left><div id="footer-bar-tips"><div class="copyright" style="display:flex;align-items:center;gap:10px">©2013 - 2025 By <a class="footer-bar-link" href="/" title="dong4j" target="_blank">dong4j</a><span class="indicator" id="indicator" style="display:inline-block;width:8px;height:8px;border-radius:50%;background-color:green;margin-left:0;animation:subtle-breathing 1.2s infinite;box-shadow:0 0 5px rgba(255,0,0,.8)"></span><span>在线人数:</span><span id="online_user" style="font-size:1em;font-weight:700">1</span></div></div><div id="footer-type-tips"></div></footer-bar-left><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/" title="蜀ICP备2025119258号">蜀ICP备2025119258号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">258</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">1094</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">18</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" rel="external nofollow noreferrer" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.dev/status/services" title="服务状态"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.dev" title="服务面板"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.dev" title="导航页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://chat.dong4j.site/" title="Mini-Chat"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.dong4j.dev"><span>小黑屋</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size:.88rem;color:#556363;font-weight:500;color:var(--anzhiyu-lighttext)">Java<sup>48</sup></a><a href="/tags/final/" style="font-size:.88rem;color:#678a45">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:.88rem;color:#c069bc">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:.88rem;color:#714840">finally<sup>2</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:.88rem;color:#197f3d">new关键字<sup>1</sup></a><a href="/tags/static/" style="font-size:.88rem;color:#704a0d">static<sup>1</sup></a><a href="/tags/super/" style="font-size:.88rem;color:#338051">super<sup>2</sup></a><a href="/tags/this/" style="font-size:.88rem;color:#a224a6">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:.88rem;color:#334e6b">二进制<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:.88rem;color:#2dbd22">数据类型<sup>4</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:.88rem;color:#b7640c">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:.88rem;color:#0b6ab5">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:.88rem;color:#0e1424">算法<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:.88rem;color:#000592">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:.88rem;color:#56b352">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:.88rem;color:#8a3737">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:.88rem;color:#a03027">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:.88rem;color:#0d6442">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:.88rem;color:#c753c8">错误处理<sup>2</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:.88rem;color:#c14483">面向对象<sup>6</sup></a></div></div><hr></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" rel="external nofollow noreferrer" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{function o(){HoldLog.apply(console,arguments)}var c=new Date("6/28/2018 00:00:00"),c=(now1.setTime(now1.getTime()+250),(now1-c)/1e3/60/60/24),c=["Hi there 👋，I'm dong4j, Welcome to my blog","岁月静好，诗酒趁年华🍺",`
        
      +========================================================+
      |  ██████╗  ██████╗ ███╗   ██╗ ██████╗ ██╗  ██╗     ██╗  |
      |  ██╔══██╗██╔═══██╗████╗  ██║██╔════╝ ██║  ██║     ██║  |
      |  ██║  ██║██║   ██║██╔██╗ ██║██║  ███╗███████║     ██║  |
      |  ██║  ██║██║   ██║██║╚██╗██║██║   ██║╚════██║██   ██║  |
      |  ██████╔╝╚██████╔╝██║ ╚████║╚██████╔╝     ██║╚█████╔╝  |
      |  ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝ ╚═════╝      ╚═╝ ╚════╝   |
      +========================================================+
        
        `,"已上线",Math.floor(c),"天","Use 「npx dong4j」 and find me."],e=["NCC2-036","调用前置摄像头拍照成功，识别为【绝顶大佬】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`
%c${c[0]} %c ${c[1]} %c ${c[2]} %c${c[3]}%c ${c[4]}%c ${c[5]}

%c ${c[6]}
`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${e[0]} %c ${e[1]} %c 
${e[2]} %c
${e[3]}
`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，绝顶大佬.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 dong4j 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async="" src="/anzhiyu/random.js"></script><script async="">(()=>{var n,o,r,a,i,e=new Date("6/28/2018 00:00:00"),l=new Date;setInterval(()=>{var t;if(l=new Date,i=l.getHours(),t=(l-e)/1e3/60/60/24,n=Math.floor(t),t=(l-e)/1e3/60/60-24*n,o=Math.floor(t),1==String(o).length&&(o="0"+o),t=(l-e)/1e3/60-1440*n-60*o,r=Math.floor(t),1==String(r).length&&(r="0"+r),t=(l-e)/1e3-86400*n-3600*o-60*r,a=Math.round(t),1==String(a).length&&(a="0"+a),document.getElementById("footer")){let e="";e=(i<18&&9<=i||null!=(t=document.querySelector("#workboard .workSituationImg"))&&(t.src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg",t.title="下班了就该开开心心的玩耍，嘿嘿~",t.alt="下班了就该开开心心的玩耍，嘿嘿~"),`本站居然运行了 ${n} 天<span id='runtime'> ${o} 小时 ${r} 分 ${a} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`),document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=e)}},1e3)})()</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(()=>{let t=document.querySelectorAll("#article-container .mermaid-wrap");if(0!==t.length){let e=()=>{window.loadMermaid=!0;let a="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(t).forEach((e,t)=>{let d=e.firstElementChild;e="%%{init:{ 'theme':'"+a+"'}}%%\n"+d.textContent;let n=mermaid.render("mermaid-"+t,e);"string"==typeof n?(t=n,d.insertAdjacentHTML("afterend",t)):n.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})};var d=()=>{window.loadMermaid?e():getScript("https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js").then(e)};anzhiyu.addGlobalFn("themeChange",e,"mermaid"),window.pjax?d():document.addEventListener("DOMContentLoaded",d)}})()</script><script>(()=>{let t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.dong4j.ink:1024",region:"",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};var o=()=>{"object"==typeof twikoo?setTimeout(n,0):getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(n)};let e=()=>{let o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo.dong4j.ink:1024",region:"",urls:[window.location.pathname],includeReply:!1}).then(t=>{o.textContent=t[0].count}).catch(t=>{console.error(t)})},n=()=>{t(),GLOBAL_CONFIG_SITE.isPost&&e()};o()})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async="" src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{let t=e=>e=""!==e&&150<(e=(e=(e=(e=e.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length?e.substring(0,150)+"...":e,n=t=>{let n="";if(t.length)for(let e=0;e<t.length;e++)n=(n=(n+="<div class='aside-list-item'>")+`<a href='${t[e].url}' class='thumbnail'><img data-lazy-src='${t[e].avatar}' alt='${t[e].nick}'><div class='name'><span>${t[e].nick} </span></div></a>`)+`<div class='content'>
        <a class='comment' href='${t[e].url}' title='${t[e].content}'>${t[e].content}</a>
        <time datetime="${t[e].date}">${anzhiyu.diffDate(t[e].date,!0)}</time></div>
        </div>`;else n+="没有评论";var e=document.querySelector("#card-newest-comments .aside-list");e&&(e.innerHTML=n),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(e)};var e=()=>{var e;document.querySelector("#card-newest-comments .aside-list")&&((e=saveToLocal.get("twikoo-newest-comments"))?n(JSON.parse(e)):(e=()=>{twikoo.getRecentComments({envId:"https://twikoo.dong4j.ink:1024",region:"",pageSize:6,includeReply:!0}).then(function(e){e=e.map(e=>({content:t(e.comment),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(e),10/1440),n(e)}).catch(function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"})},"object"==typeof twikoo?e():getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(e)))};e(),document.addEventListener("pjax:complete",e)})</script><script>var visitorMail="996@icu.com"</script><script async="" data-pjax="" src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/subscribe.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-today.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-calendar.css" media="print" onload="this.media=&quot;all&quot;"><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/automatic-redirection.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-welcome.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-comments.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-today.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-countdown.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-calendar.js"></script><script async="" data-pjax="" src="https://open.lightxi.com/unpkg/chinese-lunar@0.1.4/lib/chinese-lunar.js"></script><script async="" data-pjax="" src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script src="https://cdn.dong4j.site/source/static/custom.js"></script><script src="https://cdn.dong4j.site/source/static/geoip2-check.js"></script><script defer="" id="fluttering_ribbon" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="永不言败,勇往直前,砥砺前行,自强不息,笃行致远,厚德载物,持之以恒,奋发有为,志在四方,拼搏进取,实事求是，为人民服务,勤劳致富，共奔小康,爱国、创新、包容、厚德,敬业乐群，诚信友善,自强不息，厚德载物,以人为本，全面协调可持续发展,建设生态文明，构建和谐社会,坚持改革开放，推动科学发展,立党为公，执政为民,实现中华民族伟大复兴的中国梦" data-fontsize="15px" data-random="true" async=""></script><script src="//code.tidio.co/14aqpkwnauu3r5ngcmspfxwelvattym5.js" async=""></script><script>(()=>{{let i=!1,o=()=>{window.tidioChatApi.hide(),i=!1,document.body.style.position="relative",document.documentElement.style.overflow="auto"};var t=()=>{window.tidioChatApi.hide(),window.tidioChatApi.on("close",o)};window.tidioChatApi?window.tidioChatApi.on("ready",t):document.addEventListener("tidioChat-ready",t),window.chatBtnFn=()=>{window.tidioChatApi&&(i?o():(window.tidioChatApi.open(),window.tidioChatApi.show(),i=!0))}}})()</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media=&quot;all&quot;"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();var e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{let t=document.createElement("script");var a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async="" data-pjax="" data-prefix="busuanzi_value" src="https://cdn.dong4j.site/source/static/busuanzi.self.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><script data-pjax="" src="https://cdn.dong4j.site/source/static/github-calendar.js"></script><script data-pjax="">function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://github-calendar.dong4j.ink:1024/api?user=dong4j",["#ebedf0","#a2f7af","#6ce480","#54ad63","#469252","#31753c","#1f5f2a","#13531f","#084111","#032b09","#000000"],"dong4j")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style></body></html>