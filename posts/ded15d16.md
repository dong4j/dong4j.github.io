<!-- markdownlint-disable-next-line MD033 -->
<meta name="referrer" content="no-referrer"/>

![random-pic-api](https://api.dong4j.ink:1024/cover?spm={{spm}})

## ç®€ä»‹

> ä¸€å¹´å‰è´­ä¹°äº†ä¸€å¼  Tesla P40, èŠ±äº† 700+, ç°åœ¨å·²ç»æ¶¨ä»·åˆ° 1500+, æ˜¾å¡çœŸçš„æ˜¯ç†è´¢äº§å“.

å¹´å‰å°†è£…åœ¨å…¬å¸æœåŠ¡å™¨ä¸Šçš„çš„ Tesla P40 å¸¦å›äº†å®¶, æƒ³ç€å¦‚ä½•åœ¨å®¶å°†è¿™å¼ å¡å†æ¬¡åˆ©ç”¨èµ·æ¥, æ‰¾äº†ä¸€åœˆäº†æœ€ç»ˆé€‰æ‹©ä½¿ç”¨çŒ›å…½å³¡è°· 11 ä»£è®¡ç®—å¡ + å¤–ç½®æœºç®±æ¥é…åˆè¿™å¼ å¡.

## ç¡¬ä»¶é…ç½®

æˆ‘æ¯”è¾ƒå–œæ¬¢å¼€æ”¾å‹æœºç®±, ç›¸æ¯”æœ‰å¤§æ¯”ç¬¨é‡çš„ä¼ ç»Ÿæœºç®±, æˆ‘æ›´å–œæ¬¢çœ‹åˆ°å†…éƒ¨çš„å…ƒå™¨ä»¶, æ‰€ä»¥è¿™æ¬¡è¿˜æ˜¯æŒ‘é€‰çš„ä¸€ä¸ªå¼€æ”¾å‹å¹³å°:

1. 1200W CSPS ç”µæº + CSPS è½¬æ¥æ¿;
2. çŒ›å…½å³¡è°· 11 ä»£, i7 11700B è®¡ç®—å¡;
3. Tesla P40 æ˜¾å¡;
4. åä¸º SP310 åŒå…‰å£ä¸‡å…†ç½‘å¡;
5. æ¸©æ§ç‰ˆ;
6. å…¶ä»–å°é…ä»¶;

### CSPS ç”µæº

ç¬¬ä¸€æ¬¡ç©å„¿ CSPS ç”µæº, å°é»„é±¼æœ‰å¤§é‡æ”¹è£…é…ç½®, ç›¸æ¯”äºä¼ ç»Ÿçš„ SFX ç”µæºä¾¿å®œçš„å¤š:

> CSPS æ˜¯ Common Slot Power Supply çš„ç¼©å†™ï¼Œå¦‚ä»Šï¼Œéšç€ CPU å’Œæ˜¾å¡é¢‘ç‡çš„å¢åŠ ï¼Œå¯¹äºç”µæºçš„éœ€æ±‚ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œè€Œç°åœ¨çš„å¥½çš„ç”µæºéå¸¸è´µï¼Œè€Œä»¥å¾€ 500 ç“¦èµ°å¤©ä¸‹çš„æ—¶ä»£å·²ç»ä¸€å»ä¸å¤è¿”äº†ï¼Œè¿™å¯¼è‡´ç©å®¶åªèƒ½ä¸€è¾¹éª‚ç”µæºå‚å•†ä¸€è¾¹å½“éŸ­èœï¼Œè€Œè¿™æ—¶ï¼ŒCSPS çš„ä¼˜ç‚¹å°±æ˜¾ç°å‡ºæ¥äº†ï¼Œç¬¬ä¸€ CSPS çš„ä½“ç§¯æ¯” SFX ç”µæºå°ï¼Œè€Œä¸”ï¼ŒåŠŸç‡è¦æ¯”éå¸¸è´µçš„ SFX ç”µæºå¤§å¾ˆå¤šï¼Œè¿™æ—¶å¯èƒ½æœ‰äººå°±è¯´æœåŠ¡å™¨ç”µæºå¤ªä¸‘äº†ï¼Œè€Œä¸”å™ªéŸ³å¾ˆå¤§ä¸è¿‡é‚£å·²ç»æ—¶å€™ 80plus é»„é‡‘æ—¶ä»£çš„è€é»„å†äº†ï¼Œéšç€é“‚é‡‘æ—¶ä»£çš„åˆ°æ¥å’Œæ¸©æ§é£æ‰‡çš„æ™®åŠï¼ŒCSPS åœ¨å™ªéŸ³ä¸Šä¹Ÿæœ‰äº†å’Œå»‰ä»·å¤§åŠŸç‡ ATX ç”µæºä¸€æˆ˜çš„èƒ½åŠ›ï¼Œæ¯•ç«Ÿä½ ä¸èƒ½è¦æ±‚è¿™ä¸ªæ¯” SFX ç”µæºçš„å°ä¸œè¥¿æ—¢èƒ½æœ‰å¤§åŠŸç‡è¾“å‡ºä¹Ÿèƒ½æ•åœ¨è€³è¾¹å…¥çœ ï¼Œä¸è¿‡å¯¹äºç”¨ N æ‰‹é£æ‰‡å’Œå‡ åå—é’±çš„æ˜¾å¡çš„åƒåœ¾ä½¬æ¥è¯´ï¼Œè¿™ä¸œè¥¿æ°¸è¿œä¸æ˜¯å™ªéŸ³çš„ä¸»è¦è´¡çŒ®è€…ï¼Œè€Œä¸”ä¸–ç•Œå¸‚åœºå‰äºŒçš„å æœ‰ç‡å³ä½¿é¢å¯¹çŸ¿æ½®ä¹Ÿæ¶¨å¹…ä¸å¤§ï¼Œè€Œä¸” 1200 ç“¦çš„åŠŸç‡ä¹Ÿè¶³ä»¥åº”å¯¹æ—©æ™šè¦å˜æˆçŸ¿æ¸£çš„ 3090,
>
> CSPS æ ‡å‡†çš„ 4.5mm è„šè·ä¹Ÿå¯ä»¥å…¼å®¹ä¾¿å®œçš„è¿æ¥å™¨ï¼Œè€Œä¸”è‹±ç‰¹å°”æœ€æ–°çš„ 12vo æ ‡å‡†æ˜¯å®Œå…¨ 12V åŒ–ï¼Œè¡¨é¢ä¸Šé«˜å…´çš„æ˜¯ç”µæºå‚å•†ï¼Œåˆå¯ä»¥æ¥ç€æ–°æ ‡å‡†å–ä¸€æ‰¹æ–°ç”µæºï¼Œè€Œæœ€å¤§çš„èµ¢å®¶å°±æ˜¯ CSPSï¼Œæ¯•ç«ŸæœåŠ¡å™¨ç”µæºæ—©å·²å®Œå…¨ 12v åŒ–ï¼Œè€Œå¯¹äºç›®å‰çš„ ATX æ ‡å‡†ï¼Œå¯ä»¥å»çœ‹ [@AlphaArea](https://space.bilibili.com/1292029/) è¿™ä¸ªè§†é¢‘ï¼š [https://www.bilibili.com/video/BV12A411N7AG](https://www.bilibili.com/video/BV12A411N7AG) é‡Œé¢è¯¦ç»†è®²è§£äº†æ”¹é€ çš„è¿‡ç¨‹

| ![20250214181102_C8y6T5RT.webp](https://cdn.dong4j.site/source/image/20250214181102_C8y6T5RT.webp) | ![20250214181103_GtjSOqGX.webp](https://cdn.dong4j.site/source/image/20250214181103_GtjSOqGX.webp) |
| :-------------------------------: | :-------------------------------: |
|              è½¬æ¥æ¿               |              æ ¸å¿ƒæ¿               |

### çŒ›å…½å³¡è°· 11 ä»£

![20250214181103_udVt3WAY.webp](https://cdn.dong4j.site/source/image/20250214181103_udVt3WAY.webp)

æˆ‘ä¹°çš„æ˜¯ IntelÂ® Coreâ„¢ i7-11700B + 16G å†…å­˜ + 500G ç¡¬ç›˜, è¿™å®¶ä¼™è‡ªå¸¦ 3 ä¸ª M.2 æ’æ§½, 11 ä»£åº•æ¿ä¸Šè¿˜æœ‰ä¸€ä¸ª, æ€»å…± 4 ä¸ª M.2 æ’æ§½, æ¯” M920x å¤šäº† 2 ä¸ª.

è¿™é‡Œæœ‰ä¸€ä»½ [è§„æ ¼ä¹¦](https://dlcdnets.asus.com/pub/ASUS/NUC/NUC_11_Extreme_Kit/NUC_11_Extreme_Kit_NUC11BT_DB_TPS.pdf):

{% pdf https://dlcdnets.asus.com/pub/ASUS/NUC/NUC_11_Extreme_Kit/NUC_11_Extreme_Kit_NUC11BT_DB_TPS.pdf %}

å¯ä»¥äº†è§£ä¸€ä¸‹è®¡ç®—å¡ä¸Šçš„æ¥å£, æ–¹ä¾¿åæœŸæ‰©å±•.

**11 ä»£åº•æ¿:**

![20250214181103_KhcGJEbM.webp](https://cdn.dong4j.site/source/image/20250214181103_KhcGJEbM.webp)

11 ä»£åº•æ¿æœ‰ 3 ä¸ª PCIe æ’æ§½, è®¡ç®—å¡å’Œæ˜¾å¡å„å ä¸€ä¸ª x16 æ’æ§½, å‰©ä¸‹çš„ä¸€ä¸ª x4 è¿˜èƒ½æ¥ç½‘å¡.

![20250214172317_uSAngBCa.webp](https://cdn.dong4j.site/source/image/20250214172317_uSAngBCa.webp)

**è®¡ç®—å¡çš„ IO æ¥å£:**

![20250214172359_AemEQ5Hi.webp](https://cdn.dong4j.site/source/image/20250214172359_AemEQ5Hi.webp)

### M.2 å›ºæ€ç¡¬ç›˜

è¿™å¼ è®¡ç®—å¡æ”¯æŒ 4 ä¸ª M.2 å›ºæ€, å…¶ä¸­ 3 ä¸ªåœ¨è®¡ç®—å¡ä¸Š, CPU å·¦è¾¹ 2 ä¸ªæ˜¯ PCIe 3 x4, å³è¾¹æ˜¯ PCIe 4 x4, å‰©ä¸‹çš„ä¸€ä¸ªåœ¨åº•æ¿ä¸Š, ä¸º PCIe 4 x4.

![20250215001939_i0v8s7dv.webp](https://cdn.dong4j.site/source/image/20250215001939_i0v8s7dv.webp)

M2 å›ºæ€å½“ç„¶è¦æ”¯æŒå›½äº§, æ‰€ä»¥ä¹°äº† 2 æ¡å…¨æ–°çš„ **è‡´æ€ Ti600 1TB** çš„ PCIe Gen4 x4 NVMe å›ºæ€ç¡¬ç›˜, ç„¶åå°é»„é±¼ä¸Šæ¡äº† 2 æ¡ **ä¸‰æ˜Ÿ PM981A 1TB** çš„ PCIe Gen3 x4 NVMe å›ºæ€ç¡¬ç›˜, æ‰“ç®—å°† 2 æ¡ **ä¸‰æ˜Ÿ PM981A**  ç»„ä¸ª RAID1, å¦å¤– 2 æ¡ PCIe Gen4 x4 NVMe ç‹¬ç«‹ä½¿ç”¨.



todo



> ä¸‰æ˜Ÿçš„ M.2 NVMe å›ºæ€ç¡¬ç›˜å‘½åä¸€ç›´åˆ†ä¸æ¸…, æŸ¥äº†ä¸‹èµ„æ–™:
>
> 9 å­—å¼€å¤´çš„éƒ½æ˜¯ M.2 æ”¯æŒ NVMe çš„ PCIe å›ºæ€ï¼Œå‰é¢å¸¦ PM çš„æ˜¯ OEM äº§å“ï¼ˆé€šä¿—ç‚¹è®²è¿™æ˜¯ä¸ªæ‰¹å‘è´§ï¼Œæ‰¹ç»™ç”µè„‘å‚å•†çš„ï¼‰æœ‰ PM981ã€PM961 ç­‰ï¼›9 åé¢ä¸¤ä¸ªæ•°å­—å¯ä»¥çœ‹æˆæ˜¯ä»£æ•°ï¼Œè¶Šå¤§è¶Šæ–°ï¼Œå‡ºçš„æ—¶é—´è¶Šæ™šã€‚é’ˆå¯¹æ°‘ç”¨é›¶å”®ç‰ˆæœ¬åé¢è¿˜æœ‰åç¼€å¦‚ 970 Proã€970 Evo ç”šè‡³è¿˜ä¼šæœ‰ Qvoï¼Œè¿™ä¸‰ä¸ªå­—æ¯ä»£è¡¨ç­‰çº§ï¼Œä¸»è¦æ˜¯é¢—ç²’ä¸Šçš„åŒºåˆ«ï¼šPro æ˜¯ MLC çš„é¢—ç²’ï¼ŒEvo æ˜¯ TLC é¢—ç²’ï¼ŒQvo æ˜¯ QLC çš„é¢—ç²’ï¼Œä»·æ ¼ä¸€èˆ¬æ˜¯è¿™ä¸ªæ’åºï¼Œæ€§èƒ½ä¹Ÿæ˜¯è¿™ä¸ªæ’åºã€‚

**éœ€è¦æ³¨æ„çš„æ˜¯**, å½“ä½¿ç”¨åº•æ¿ä¸Šçš„ M.2 æ’æ§½æ—¶, åº•æ¿ä¸Šçš„ PCIe x16 ä¼šè¢«æ‹†åˆ†æˆ **x8 + 2 x4**:

![20250215001717_0OnZmq7b.webp](https://cdn.dong4j.site/source/image/20250215001717_0OnZmq7b.webp)

### å†…å­˜

å†…å­˜åŸè£…ç»™äº† 2 å¼  8G çš„, ç°åœ¨éƒ½ 2025 å¹´äº†, 16G å¤Ÿè°ç”¨å•Š, æ‰€ä»¥å¦è´­äº† 2 å¼  32G DDR4 3200 çš„æµ·åŠ›å£«ç¬”è®°æœ¬å†…å­˜, ç»„æˆåŒé€šé“ 64G å†…å­˜:

todo

### SP310 åŒå…‰å£ä¸‡å…†ç½‘å¡

å°é»„é±¼æŒ‘äº†å¼ ä¾¿å®œçš„ä¸‡å…†ç½‘å¡:

![20250214181105_AJD5pEp6.webp](https://cdn.dong4j.site/source/image/20250214181105_AJD5pEp6.webp)

æœ¬æ‰“ç®—ä¹°å¼  Mellanox CX4121A çš„, ä¸è¿‡å…‰æ¨¡å—éƒ½å¿«èµ¶ä¸Š SP310 äº†, è€Œä¸”å®¶é‡Œä¸»è¦è¿˜æ˜¯ 10G çš„è®¾å¤‡å±…å¤š, æ‰€ä»¥è¿˜æ˜¯å…ˆä¹°å¼  10G çš„å…ˆç”¨ç€, ç­‰ 25G çš„ä»·æ ¼å†è…°æ–©çš„æ—¶å€™å†å‡çº§åˆ° 25G.

è¿™æ¬¡è´­ä¹°çš„æ˜¯åˆ†å¼€çš„ LC-LC å…‰çº¤, è¿æ¥çš„æ—¶å€™éœ€è¦æ³¨æ„çš„æ˜¯ 2 ä¸ªå…‰æ¨¡å—çš„å…‰çº¤çº¿è¦äº¤å‰, æ¯”å¦‚ä¸Šé¢æ¥çš„æ˜¯é»„è‰²çš„, é‚£ä¹ˆæ¥å…¥è·¯ç”±å™¨çš„é‚£ä¸€ç«¯ä¸Šé¢å°±è¦æ¥ç™½è‰²çš„.

![20250214181105_4eqE2nrz.webp](https://cdn.dong4j.site/source/image/20250214181105_4eqE2nrz.webp)

#### æ•£çƒ­

æˆ‘ä½ä¼°äº† SP310 çš„å‘çƒ­é‡, å› ä¸ºæ˜¯å¼€æ”¾å‹æœºç®±æ²¡æœ‰é£é“, ç§¯çƒ­ä¸¥é‡, æ‰€ä»¥ä¸å¾—ä¸åŠ ä¸Šä¸€ä¸ªæ•£çƒ­é£æ‰‡.

todo



### æ¸©æ§ç‰ˆ

![20250214181105_Z5US99QL.webp](https://cdn.dong4j.site/source/image/20250214181105_Z5US99QL.webp)

P40 çš„æ¶¡è½®é£æ‰‡å™ªéŸ³å¤ªå¤§, æ‰€ä»¥åŠ äº†ä¸ªæ¸©æ§ç‰ˆæ¥æ§åˆ¶å¯æ¶¡è½®é£æ‰‡çš„å¯åœ.

è¿™ä¸ªæ¸©æ§ç‰ˆéå¸¸å¥½ç”¨, æ‰€ä»¥ä¸€æ¬¡æ€§ä¹°äº† 5 ä¸ª, å®ƒå¯ä»¥è®¾ç½®å¼€å¯é£æ‰‡çš„æ¸©åº¦èŒƒå›´, è¿™æ · P40 çš„æ¶¡è½®é£æ‰‡å°±ä¸ç”¨ä¸€ç›´è½¬äº†, æ¯•ç«Ÿå™ªéŸ³è¿˜æ˜¯æŒºå¤§çš„.

![20250214181105_x9N79aS2.webp](https://cdn.dong4j.site/source/image/20250214181105_x9N79aS2.webp)

æˆ‘å°†æ¸©åº¦æ¢å¤´å®‰è£…åˆ°äº†æ˜¾å¡èƒŒæ¿ä¸Š, æ¸©æ§ç‰ˆè®¾ç½®ä¸º 35 åº¦å¼€,30 åº¦å…³, è¿™æ ·æ˜¾å¡æ¸©åº¦åŸºæœ¬ä¸Šèƒ½å¤Ÿå¾ˆå¥½æ§åˆ¶åœ¨ç†æƒ³èŒƒå›´å†….

### æœ€ç»ˆæ•ˆæœ

æ¥äº†ä¸ªåŸæ¥å‰©ä¸‹çš„ LCD, æ‹¿æ¥æ˜¾ç¤º CPU å’Œ RAM çš„ä½¿ç”¨æƒ…å†µ.

![20250214181106_qdjsM4Li.webp](https://cdn.dong4j.site/source/image/20250214181106_qdjsM4Li.webp)

å¤–æ¥äº†æ•£çƒ­é£æ‰‡, USB è½¬ 2.5G ç½‘å¡å’Œä¸€ä¸ª 4G æ¨¡å—.

![20250214181106_l9U422bW.webp](https://cdn.dong4j.site/source/image/20250214181106_l9U422bW.webp)

**ä¸Šç”µå¼€æœº**

æ­£é¢ç…§:

åŠ äº†ä¸ªç”µå‹æ˜¾ç¤ºæ¨¡å—, ä¸å¾—ä¸è¯´è¿™ä¸ª CSPS è½¬æ¥æ¿è¾“å‡ºçš„ç”µå‹çœŸç¨³å®š, ä¸€ç›´ 12.2V æ²¡æœ‰è·³åŠ¨è¿‡.

![20250214181106_Htk7JHbD.webp](https://cdn.dong4j.site/source/image/20250214181106_Htk7JHbD.webp)

ä¾§é¢ç…§:

ç½‘å¡åˆšå¥½èƒ½å¤Ÿå¡çš„ä¸‹, æ‰€ä»¥ä¸è¦ä¹°é‚£ç§æ•£çƒ­ç‰‡ä¸Šé¢å¸¦é£æ‰‡çš„ç½‘å¡, å®½åº¦ä¸å¤Ÿ.

![20250214181106_8JnrW2th.webp](https://cdn.dong4j.site/source/image/20250214181106_8JnrW2th.webp)

---

## å®‰è£…ç³»ç»Ÿ

æ­£å¥½æ‰‹ä¸Šæœ‰ä¸€ä¸ª Ubuntu Server 22.04 TLS çš„å¯åŠ¨ U ç›˜, æ‰€ä»¥è¿™é‡Œå…ˆå®‰è£… 22.04, ç„¶åå†å‡çº§åˆ° 24.04 TLS.

è¿™é‡Œå…ˆè¿› BIOS ä¿®æ”¹è§†é¢‘è¾“å‡º, **IGFX** æ˜¯é›†æ˜¾, **PEG Slot** æ˜¯ç‹¬æ˜¾, åŸæ¥æ˜¯ç‹¬æ˜¾è¾“å‡º, è¿™é‡Œä¿®æ”¹ä¸º **IGFX**:

![20250211194210_DKLLC8uq.webp](https://cdn.dong4j.site/source/image/20250211194210_DKLLC8uq.webp)

Ubuntu çš„å®‰è£…å°±ä¸èµ˜è¿°äº†, ç½‘ä¸Šä¸€å¤§å †æ•™ç¨‹.

### ç½‘å¡é—®é¢˜

ç³»ç»Ÿå®‰è£…å®Œæˆå, é‡å¯æ’ä¸Š Tesla P40, å‡†å¤‡å‡çº§ç³»ç»Ÿå¹¶å®‰è£…æ˜¾å¡é©±åŠ¨å’Œ CUDA.

é‡ç‚¹æ¥äº†, è¿›å…¥ç³»ç»Ÿåå‘ç°ç½‘å¡ç¯ç­äº†, æ— æ³•è·å–åˆ° IP, ä¹Ÿå°±æ— æ³•åœ¨çº¿å‡çº§äº†, æ‰€ä»¥éœ€è¦å…ˆè§£å†³è¿™ä¸ªé—®é¢˜.

å…ˆé—®äº†ä¸€ä¸‹ ChatGPT å¯èƒ½çš„åŸå› :

1. **PCIe èµ„æºå†²çª**

   çŒ›å…½å³¡è°·ï¼ˆIntel NUC 11 Extremeï¼‰å¯èƒ½åœ¨æ’ä¸Šç‹¬ç«‹æ˜¾å¡åï¼Œä¸»æ¿çš„ PCIe èµ„æºé‡æ–°åˆ†é…ï¼Œå¯¼è‡´æŸäº›è®¾å¤‡ï¼ˆå¦‚å†…ç½®ç½‘å¡ï¼‰å¤±æ•ˆã€‚

2. **BIOS è®¾ç½®é—®é¢˜**

   éƒ¨åˆ† BIOS å¯èƒ½ä¼šåœ¨æ’å…¥ç‹¬ç«‹æ˜¾å¡åï¼Œè°ƒæ•´ PCIe é€šé“åˆ†é…ï¼Œä»è€Œç¦ç”¨æŸäº›è®¾å¤‡ï¼ŒåŒ…æ‹¬ç½‘å¡ã€‚

3. **ä¾›ç”µæˆ–ç¡¬ä»¶å†²çª**

   éƒ¨åˆ†ä¸»æ¿åœ¨æ’å…¥ç‹¬ç«‹æ˜¾å¡åå¯èƒ½ä¼šä¼˜å…ˆä¸ºæ˜¾å¡ä¾›ç”µï¼Œè€Œå¯¼è‡´æŸäº›è®¾å¤‡ï¼ˆå¦‚ç½‘å¡ï¼‰æ— æ³•æ­£å¸¸å·¥ä½œã€‚

4. **Linux è®¾å¤‡é©±åŠ¨é—®é¢˜**

   Ubuntu å¯èƒ½æ²¡æœ‰æ­£ç¡®åŠ è½½ç½‘å¡é©±åŠ¨ï¼Œæˆ–è€…æ’å…¥æ˜¾å¡åï¼Œç½‘å¡çš„ PCIe ID å‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´å†…æ ¸æ²¡æœ‰è¯†åˆ«åˆ°ç½‘å¡ã€‚

ç½‘å¡åœ¨è¿›å…¥ BIOS ä¸”åœ¨è¿›å…¥ç³»ç»Ÿå‰éƒ½æ˜¯æ²¡é—®é¢˜çš„, ä½†æ˜¯è¿›å…¥ç³»ç»Ÿåç½‘å¡å°±ç­äº†, å› ä¸ºæ˜¯åœ¨æ’å…¥æ˜¾å¡åå‡ºç°çš„é—®é¢˜, æ‰€ä»¥é¦–å…ˆæ€€ç–‘æ˜¯ PCIe èµ„æºå†²çªå¯¼è‡´çš„,

æ‰€ä»¥å…ˆæ£€æŸ¥äº†ä¸€ä¸‹ PCIe èµ„æº:

```bash
$ lspci
00:00.0 Host bridge: Intel Corporation 11th Gen Core Processor Host Bridge/DRAM Registers (rev 05)
00:01.0 PCI bridge: Intel Corporation 11th Gen Core Processor PCIe Controller #1 (rev 05)
00:02.0 VGA compatible controller: Intel Corporation TigerLake-H GT1 [UHD Graphics] (rev 01)
00:06.0 PCI bridge: Intel Corporation 11th Gen Core Processor PCIe Controller #0 (rev 05)
00:07.0 PCI bridge: Intel Corporation Tiger Lake-H Thunderbolt 4 PCI Express Root Port #1 (rev 05)
00:07.2 PCI bridge: Intel Corporation Tiger Lake-H Thunderbolt 4 PCI Express Root Port #2 (rev 05)
00:08.0 System peripheral: Intel Corporation GNA Scoring Accelerator module (rev 05)
00:0d.0 USB controller: Intel Corporation Tiger Lake-H Thunderbolt 4 USB Controller (rev 05)
00:0d.2 USB controller: Intel Corporation Tiger Lake-H Thunderbolt 4 NHI #0 (rev 05)
00:0d.3 USB controller: Intel Corporation Tiger Lake-H Thunderbolt 4 NHI #1 (rev 05)
00:14.0 USB controller: Intel Corporation Tiger Lake-H USB 3.2 Gen 2x1 xHCI Host Controller (rev 11)
00:14.2 RAM memory: Intel Corporation Tiger Lake-H Shared SRAM (rev 11)
00:16.0 Communication controller: Intel Corporation Tiger Lake-H Management Engine Interface (rev 11)
00:1b.0 PCI bridge: Intel Corporation Device 43c2 (rev 11)
00:1b.3 PCI bridge: Intel Corporation Device 43c3 (rev 11)
00:1f.0 ISA bridge: Intel Corporation WM590 LPC/eSPI Controller (rev 11)
00:1f.3 Audio device: Intel Corporation Tiger Lake-H HD Audio Controller (rev 11)
00:1f.4 SMBus: Intel Corporation Tiger Lake-H SMBus Controller (rev 11)
00:1f.5 Serial bus controller: Intel Corporation Tiger Lake-H SPI Controller (rev 11)
01:00.0 3D controller: NVIDIA Corporation GP102GL [Tesla P40] (rev a1)
02:00.0 Non-Volatile memory controller: Silicon Motion, Inc. SM2263EN/SM2263XT (DRAM-less) NVMe SSD Controllers (rev 03)
59:00.0 Network controller: Intel Corporation Wi-Fi 6E(802.11ax) AX210/AX1675* 2x2 [Typhoon Peak] (rev 1a)
5a:00.0 Ethernet controller: Intel Corporation Ethernet Controller I225-LM (rev 03)
```

çœ‹ç€æ²¡å•¥é—®é¢˜, ç½‘å¡å’Œæ˜¾å¡éƒ½è¯†åˆ«åˆ°äº†, æ‰€ä»¥ä¸æ˜¯ PCIe çš„é—®é¢˜.

åæ¥æ’ä»¶ç½‘å¡æ‰å‘ç°é—®é¢˜:

```bash
$ ip link show enp90s0

2: enp90s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
```

è¾“å‡ºä¸­ **state DOWN**ï¼Œè¯´æ˜ç½‘å¡æ˜¯è¢«ç¦ç”¨çš„, æ‰‹åŠ¨å¯åŠ¨å¹¶é‡æ–°è·å– IP å°±å¯ä»¥äº†:

```bash
$ sudo ip link set enp90s0 up
$ sudo dhclient enp90s0
```

å› ä¸º Ubuntu Server ç‰ˆæœ¬ï¼ˆç‰¹åˆ«æ˜¯ 22.04+ï¼‰é»˜è®¤ä½¿ç”¨ systemd-networkd è¿›è¡Œç½‘ç»œç®¡ç†ï¼Œè€Œä¸æ˜¯ NetworkManagerã€‚å¦‚æœ systemd-networkd æ²¡æœ‰æ­£ç¡®é…ç½®ï¼Œç½‘å¡å¯èƒ½ä¸ä¼šè‡ªåŠ¨å¯ç”¨ã€‚ä¸”åœ¨ `/etc/systemd/network/` ä¸‹æ²¡æœ‰å‘ç°ä»»ä½•ç½‘ç»œé…ç½®, å› æ­¤å¯ä»¥æ–­å®šæ˜¯è¿™ä¸ªåŸå› äº†.

é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯é…ç½®ç½‘å¡:

```bash
sudo vim /etc/systemd/network/10-enp90s0.network

[Match]
Name=enp90s0

[Network]
DHCP=yes
IPv6AcceptRA=yes
```

```bash
# é‡å¯ systemd-networkd
sudo systemctl restart systemd-networkd
sudo systemctl enable systemd-networkd
```

### é…ç½® WiFi ç½‘å¡

å› ä¸ºä½¿ç”¨ `wpa_supplicant` é…ç½® WiFi ä¸€ç›´æŠ¥é”™, æ‰€ä»¥è¿™é‡Œæ‰“ç®—ä½¿ç”¨ `NetworkManager` ä»£æ›¿ `systemd-networkd` æ¥ç®¡ç†ç½‘ç»œ.

```bash
sudo apt update \
	&& sudo apt install network-manager \
	&& sudo systemctl enable NetworkManager \
	&& sudo systemctl start NetworkManager \
	&& sudo systemctl status NetworkManager
```

**æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£ï¼š**:

```bash
$ nmcli device
DEVICE           TYPE      STATE         CONNECTION
enp91s0          ethernet  unmanaged     --							# è‡ªå¸¦ç½‘å¡
enx00e04c68bbcf  ethernet  unmanaged     --							# USB è½¬ 2.5G ç½‘å¡
wlp90s0          wifi      unmanaged     --							# è‡ªå¸¦ WiFi ç½‘å¡
enp2s0f0         ethernet  unmanaged     --							# 10G å…‰å£ 1
enp2s0f1         ethernet  unmanaged     --							# 10G å…‰å£ 2
lo               loopback  unmanaged     --
```

`enp90s0` å’Œæ–°å¢çš„ USB è½¬ 2.5G ç½‘å¡ `enx00e04c68bbcf` åˆå¾—é‡æ–°é…ç½®äº†. å› ä¸ºç°åœ¨ä½¿ç”¨ SSH é“¾æ¥çš„æœåŠ¡å™¨, ä¸ºäº†é¿å…é…ç½®æœ‰çº¿ç½‘å¡æ—¶æ–­å¼€è¿æ¥, è¿™é‡Œå…ˆé…ç½®å¥½ WiFi ç½‘å¡.

```bash
nmcli device wifi list  # æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„ WiFi ç½‘ç»œ
sudo nmcli device wifi connect "WiFi_SSID" password "WiFi_Password"
```

é¡ºåˆ©çš„è¯åº”è¯¥å°±èƒ½ç›´æ¥è¿ä¸Šäº†:

```bash
Device 'wlp89s0' successfully activated with '83298781-7335-4b6e-b293-676411eaa1df'.
```

é…ç½®è‡ªåŠ¨è¿æ¥ WiFi:

```bash
sudo nmcli connection modify "WiFi_SSID" connection.autoconnect yes
nmcli connection show "WiFi_SSID"
```

> åœ¨è¾“å‡ºä¸­ï¼Œç¡®ä¿ connection.autoconnect è®¾ç½®ä¸º yes
>
> **æ–­å¼€å¹¶é‡æ–°è¿æ¥**
>
> å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥æ–­å¼€å½“å‰ Wi-Fi è¿æ¥å¹¶é€šè¿‡å‘½ä»¤é‡æ–°è¿æ¥ï¼š
>
> ```bash
> nmcli connection down "WiFi_SSID"
> nmcli connection up "WiFi_SSID"
> ```

---

æ¥ä¸‹æ¥æ˜¯é…ç½® 2 å¼ æœ‰çº¿ç½‘å¡å’Œä¸‡å…†ç½‘å¡, ç¦ç”¨ `systemd-networkd` å¹¶åˆ‡æ¢åˆ° `NetworkManager`. é¦–å…ˆé€šè¿‡ WiFi é“¾æ¥æœåŠ¡å™¨, ç„¶åå†è¿›è¡Œä¸‹é¢çš„æ“ä½œ.

```bash
# åˆ é™¤ `/etc/systemd/network/` ç›®å½•ä¸‹çš„ç½‘ç»œé…ç½®æ–‡ä»¶
sudo rm -rf /etc/systemd/network/*.network

sudo systemctl stop systemd-networkd
sudo systemctl disable systemd-networkd
```

### ä½¿ç”¨ NetworkManager

```bash
# æ£€æŸ¥ç½‘å¡
nmcli device

# é€šè¿‡ nmcli é…ç½®æœ‰çº¿ç½‘å¡
sudo nmcli connection add type ethernet ifname enp90s0 con-name "2.5G.T" autoconnect yes
sudo nmcli connection add type ethernet ifname enx00e04c68bbcf con-name "2.5G.U" autoconnect yes
sudo nmcli connection add type ethernet ifname enp2s0f0 con-name "10G.T" autoconnect yes
sudo nmcli connection add type ethernet ifname enp2s0f1 con-name "10G.U" autoconnect yes
# è¿™ä¸€æ­¥ä¼šæŠ¥é”™, æ‰€æœ‰æˆ‘è¿™é‡Œé‡å¯äº†æœåŠ¡å™¨, ç„¶åä½¿ç”¨ wifi é“¾æ¥
sudo nmcli connection up "2.5G.T"
sudo nmcli connection up "2.5G.U"
sudo nmcli connection up "10G.T"
sudo nmcli connection up "10G.U"

# æŸ¥çœ‹è¿æ¥ä¿¡æ¯
nmcli connection show
```

### è®¾ç½® MTU

ä¸‡å…†ç½‘å¡éœ€è¦å°† MTU è®¾ç½®ä¸º `9000`:

```bash
sudo nmcli connection modify "10G.T" 802-3-ethernet.mtu 9000
sudo nmcli connection modify "10G.U" 802-3-ethernet.mtu 9000

sudo nmcli connection up "10G.T"
sudo nmcli connection up "10G.U"
```

éªŒè¯:

```bash
$ ip link show enp2s0f0
3: enp2s0f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9000 qdisc mq state UP mode DEFAULT group default qlen 1000
    link/ether 18:9b:a5:80:5a:05 brd ff:ff:ff:ff:ff:ff
```

## å‡çº§ç³»ç»Ÿ

å‡çº§ç³»ç»Ÿåˆ°æœ€æ–°çš„ 24.04 TLS

```bash
sudo apt upgrade -y
do-release-upgrade
```

### å®‰è£… docker

```bash
sudo apt update && sudo apt upgrade -y \
	&& sudo apt install -y ca-certificates curl gnupg \
	&& sudo install -m 0755 -d /etc/apt/keyrings \
  && curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo tee /etc/apt/keyrings/docker.asc > /dev/null \
	&& sudo chmod a+r /etc/apt/keyrings/docker.asc \
	&& echo "deb [signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu noble stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null \
	&& sudo apt update \
	&& sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

**éªŒè¯ Docker æ˜¯å¦å®‰è£…æˆåŠŸ**:

```bash
sudo systemctl enable --now docker \
	&& sudo docker version
```

**éªŒè¯ Docker Compose**:

```bash
docker compose version
```

**æ™®é€šç”¨æˆ·è¿è¡Œ Docker**:

```bash
sudo usermod -aG docker $USER \
	&& newgrp docker
```

### å®‰è£… Node å’Œ pm2

```bash
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash - \
	&& sudo apt install -y nodejs \
	&& sudo npm install -g pm2 \
	&& pm2 -v
```

## å®‰è£…æ˜¾å¡é©±åŠ¨

```bash
$ ubuntu-drivers devices

...
vendor   : NVIDIA Corporation
model    : GP102GL [Tesla P40]
driver   : nvidia-driver-550 - distro non-free recommended
driver   : nvidia-driver-535-server - distro non-free
driver   : nvidia-driver-470-server - distro non-free
driver   : nvidia-driver-535 - distro non-free
...
```

æ¨èçš„ç‰ˆæœ¬æ˜¯ `nvidia-driver-550`, å®‰è£…å®ƒ:

```bash
sudo apt install nvidia-driver-550
```

é‡å¯åå¯ä½¿ç”¨ `nvidia-smi` æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯:

```bash
+-----------------------------------------------------------------------------------------+
| NVIDIA-SMI 550.120                Driver Version: 550.120        CUDA Version: 12.4     |
|-----------------------------------------+------------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |
|                                         |                        |               MIG M. |
|=========================================+========================+======================|
|   0  Tesla P40                      Off |   00000000:01:00.0 Off |                  Off |
| N/A   37C    P8             11W /  250W |       0MiB /  24576MiB |      0%      Default |
|                                         |                        |                  N/A |
+-----------------------------------------+------------------------+----------------------+

+-----------------------------------------------------------------------------------------+
| Processes:                                                                              |
|  GPU   GI   CI        PID   Type   Process name                              GPU Memory |
|        ID   ID                                                               Usage      |
|=========================================================================================|
|  No running processes found                                                             |
+-----------------------------------------------------------------------------------------+
```

### å…³é—­ ECC

Tesla ç³»åˆ— GPU é»˜è®¤å¼€å¯äº† ECC(error correcting code, é”™è¯¯æ£€æŸ¥å’Œçº æ­£)åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å¯ä»¥æé«˜æ•°æ®çš„æ­£ç¡®æ€§ï¼Œéšä¹‹è€Œæ¥çš„æ˜¯å¯ç”¨å†…å­˜çš„å‡å°‘å’Œæ€§èƒ½ä¸Šçš„æŸå¤±ã€‚

ECC å†…å­˜æ”¯æŒï¼šP4 æ”¯æŒ ECC æ ¡éªŒï¼Œå¼€å¯åä¼šæŸå¤±ä¸€éƒ¨åˆ†æ˜¾å­˜

å¼€å¯è¿‡åï¼Œæ˜¾å­˜å¯ç”¨ä¸º 7611MBï¼Œå…³é—­åå¯ç”¨ä¸º 8121MBã€‚

é€šè¿‡`nvidia-smi | grep Tesla`æŸ¥çœ‹å‰é¢ GPU ç¼–å·ï¼š0

```
$ nvidia-smi | grep Tesla
|   0  Tesla P40                      Off |   00000000:01:00.0 Off |                  Off |
-----------------------------------------------------------------------------------------

nvidia-smi -i n -e 0/1 å¯å…³é—­(0)/å¼€å¯(1) , næ˜¯GPUçš„ç¼–å·
```

æ‰§è¡Œå…³é—­ ECC `sudo nvidia-smi -i 0 -e 0`, é‡å¯åè¯¥è®¾ç½®ç”Ÿæ•ˆã€‚

> **å€¼å¾—æ³¨æ„çš„æ˜¯å¼€å¯ ECC å…³é—­ ECC è¿™ä¸ªæ“ä½œæ˜¯æœ‰å¯¿å‘½çš„ï¼Œå¼€å…³å‡ åƒæ¬¡å°±ä¸èƒ½å†ç»§ç»­å¼€å…³äº†ã€‚**

---

## å®‰è£… CUDA

> æ›´æ–°å®‰è£…æ–¹å¼: https://docs.nvidia.com/cuda/cuda-installation-guide-linux/#network-repo-installation-for-ubuntu

`nvidia-smi` ä¿¡æ¯ä¸­æœ‰ä¸ªéå¸¸é‡è¦çš„å¯èƒ½äº§ç”Ÿè¯¯å¯¼çš„é—®é¢˜ï¼Œåˆ—è¡¨ä¸­çš„ **CUDA Version: 12.4**ï¼Œåªæ˜¯ä»£è¡¨è¯¥æ˜¾å¡æ”¯æŒçš„ CUDA æœ€é«˜ç‰ˆæœ¬æ˜¯ 12.4ï¼Œå³è¯¥æ˜¾å¡åªèƒ½å®‰è£…**12.4** ä»¥ä¸‹ç‰ˆæœ¬çš„ CUDAã€‚å¹¶ä¸æ˜¯è¯´å·²ç»å®‰è£…äº†è¯¥ç‰ˆæœ¬ï¼Œä¸‹ä¸€æ­¥æ ¹æ®æœ¬æ­¥éª¤çš„ä¿¡æ¯ï¼Œå®‰è£… CUDA 12.4ã€‚ä¸ºäº†é¿å…å…¼å®¹æ€§ï¼Œè¿™é‡Œå®‰è£… 12.4.0ï¼Œæ²¡æœ‰å®‰è£… update çš„ç‰ˆæœ¬ã€‚

[è®¿é—® NVIDIA å¼€å‘è€…ç½‘ç«™ CUDA ä¸‹è½½é¡µé¢](https://developer.nvidia.com/cuda-downloads?target_os=Linux), é»˜è®¤æ˜¯æœ€æ–°ç‰ˆæœ¬, é€šè¿‡ `Archive of Previous CUDA Releases` é€‰æ‹©å…¶ä»–ç‰ˆæœ¬:

![20250210003613_tmki4llf.webp](https://cdn.dong4j.site/source/image/20250210003613_tmki4llf.webp)

[CUDA Toolkit 12.4.0 Downloads](https://developer.nvidia.com/cuda-12-4-0-download-archive?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu&target_version=22.04&target_type=deb_local):

![20250211194215_YLSZBV30.webp](https://cdn.dong4j.site/source/image/20250211194215_YLSZBV30.webp)

ä¾æ¬¡é€‰æ‹©æ“ä½œç³»ç»ŸåŠå…¶ç‰ˆæœ¬, ç„¶åæŒ‰ç…§å®‰è£…æ­¥éª¤å¤åˆ¶ç²˜è´´å›è½¦å³å¯.

CUDA 12.4.0 æ”¯æŒçš„ Ubuntu æœ€é«˜ç‰ˆæœ¬ä¸º 22.04ï¼Œå¦‚æœç³»ç»Ÿä¸º 24.04ï¼Œåˆ™åœ¨å®‰è£…æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚

### é—®é¢˜

```
$ sudo apt-get -y install cuda-toolkit-12-4
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 nsight-systems-2023.4.4 : Depends: libtinfo5 but it is not installable
E: Unable to correct problems, you have held broken packages.
```

è¿™æ˜¯å› ä¸º Ubuntu 24.04 é»˜è®¤ä½¿ç”¨ `libtinfo6`ï¼Œè€ŒæŸäº›è½¯ä»¶åŒ…ä»ä¾èµ–äºæ—§ç‰ˆæœ¬çš„ `libtinfo5`ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£… `libtinfo5`ã€‚ ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š

1. **ä¸‹è½½ `libtinfo5` åŒ…**ï¼š æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ `wget` å‘½ä»¤ä¸‹è½½é€‚ç”¨äº Ubuntu 24.04 çš„ `libtinfo5` åŒ…ï¼š

   ```bash
   wget http://security.ubuntu.com/ubuntu/pool/universe/n/ncurses/libtinfo5_6.3-2ubuntu0.1_amd64.deb
   ```

   è¯·æ³¨æ„ï¼Œ`libtinfo5` åŒ…çš„ç‰ˆæœ¬å¯èƒ½ä¼šéšç€æ—¶é—´æ›´æ–°ï¼Œå»ºè®®è®¿é—® [Ubuntu å®˜æ–¹è½¯ä»¶åŒ…å­˜æ¡£](http://security.ubuntu.com/ubuntu/pool/universe/n/ncurses/) è·å–æœ€æ–°ç‰ˆæœ¬çš„ä¸‹è½½é“¾æ¥ã€‚

2. **å®‰è£… `libtinfo5` åŒ…**ï¼š ä¸‹è½½å®Œæˆåï¼Œä½¿ç”¨ `dpkg` å‘½ä»¤å®‰è£…è¯¥åŒ…ï¼š

   ```bash
   sudo dpkg -i libtinfo5_6.3-2ubuntu0.1_amd64.deb
   ```

   å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°ä¾èµ–é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®å¤ï¼š

   ```bash
   sudo apt --fix-broken install
   ```

3. **å®‰è£… CUDA Toolkit 12.4**ï¼š å®‰è£… `libtinfo5` åï¼Œæ‚¨å¯ä»¥ç»§ç»­å®‰è£… CUDA Toolkit 12.4ï¼š

   ```bash
   sudo apt-get -y install cuda-toolkit-12-4
   ```

### éªŒè¯

å®‰è£…å®Œæˆå, æ‰§è¡Œ `nvcc -V`:

```bash
Command 'nvcc' not found, but can be installed with:
sudo apt install nvidia-cuda-toolkit
```

è¿™æ˜¯å› ä¸º cuda çš„è·¯å¾„æ²¡æœ‰é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­, æˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡ `dpkg -l | grep cuda` éªŒè¯ cuda æ˜¯å¦å®‰è£…æˆåŠŸ:

```bash
ii  cuda-cccl-12-4                       12.4.99-1                               amd64        CUDA CCCL
ii  cuda-command-line-tools-12-4         12.4.0-1                                amd64        CUDA command-line tools
ii  cuda-compiler-12-4                   12.4.0-1                                amd64        CUDA compiler
ii  cuda-crt-12-4                        12.4.99-1                               amd64        CUDA crt
ii  cuda-cudart-12-4                     12.4.99-1                               amd64        CUDA Runtime native Libraries
ii  cuda-cudart-dev-12-4                 12.4.99-1                               amd64        CUDA Runtime native dev links, headers
ii  cuda-cuobjdump-12-4                  12.4.99-1                               amd64        CUDA cuobjdump
ii  cuda-cupti-12-4                      12.4.99-1                               amd64        CUDA profiling tools runtime libs.
ii  cuda-cupti-dev-12-4                  12.4.99-1                               amd64        CUDA profiling tools interface.
ii  cuda-cuxxfilt-12-4                   12.4.99-1                               amd64        CUDA cuxxfilt
ii  cuda-documentation-12-4              12.4.99-1                               amd64        CUDA documentation
ii  cuda-driver-dev-12-4                 12.4.99-1                               amd64        CUDA Driver native dev stub library
ii  cuda-gdb-12-4                        12.4.99-1                               amd64        CUDA-GDB
ii  cuda-libraries-12-4                  12.4.0-1                                amd64        CUDA Libraries 12.4 meta-package
ii  cuda-libraries-dev-12-4              12.4.0-1                                amd64        CUDA Libraries 12.4 development meta-package
ii  cuda-nsight-12-4                     12.4.99-1                               amd64        CUDA nsight
ii  cuda-nsight-compute-12-4             12.4.0-1                                amd64        NVIDIA Nsight Compute
ii  cuda-nsight-systems-12-4             12.4.0-1                                amd64        NVIDIA Nsight Systems
ii  cuda-nvcc-12-4                       12.4.99-1                               amd64        CUDA nvcc
ii  cuda-nvdisasm-12-4                   12.4.99-1                               amd64        CUDA disassembler
ii  cuda-nvml-dev-12-4                   12.4.99-1                               amd64        NVML native dev links, headers
ii  cuda-nvprof-12-4                     12.4.99-1                               amd64        CUDA Profiler tools
ii  cuda-nvprune-12-4                    12.4.99-1                               amd64        CUDA nvprune
ii  cuda-nvrtc-12-4                      12.4.99-1                               amd64        NVRTC native runtime libraries
ii  cuda-nvrtc-dev-12-4                  12.4.99-1                               amd64        NVRTC native dev links, headers
ii  cuda-nvtx-12-4                       12.4.99-1                               amd64        NVIDIA Tools Extension
ii  cuda-nvvm-12-4                       12.4.99-1                               amd64        CUDA nvvm
ii  cuda-nvvp-12-4                       12.4.99-1                               amd64        CUDA Profiler tools
ii  cuda-opencl-12-4                     12.4.99-1                               amd64        CUDA OpenCL native Libraries
ii  cuda-opencl-dev-12-4                 12.4.99-1                               amd64        CUDA OpenCL native dev links, headers
ii  cuda-profiler-api-12-4               12.4.99-1                               amd64        CUDA Profiler API
ii  cuda-repo-ubuntu2204-12-4-local      12.4.0-550.54.14-1                      amd64        cuda repository configuration files
ii  cuda-sanitizer-12-4                  12.4.99-1                               amd64        CUDA Sanitizer
ii  cuda-toolkit-12-4                    12.4.0-1                                amd64        CUDA Toolkit 12.4 meta-package
ii  cuda-toolkit-12-4-config-common      12.4.99-1                               all          Common config package for CUDA Toolkit 12.4.
ii  cuda-toolkit-12-config-common        12.4.99-1                               all          Common config package for CUDA Toolkit 12.
ii  cuda-toolkit-config-common           12.4.99-1                               all          Common config package for CUDA Toolkit.
ii  cuda-tools-12-4                      12.4.0-1                                amd64        CUDA Tools meta-package
ii  cuda-visual-tools-12-4               12.4.0-1                                amd64        CUDA visual tools
```

çœ‹æ ·å­æ˜¯å®‰è£…æˆåŠŸäº†, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡:

```bash
$ vim ~/.bashrc

export PATH=/usr/local/cuda-12.4/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda-12.4/lib64:$LD_LIBRARY_PATH

$ source ~/.bashrc
```

ç°åœ¨æ‰§è¡Œ `nvcc -V` å°±æ²¡é—®é¢˜äº†:

```bash
$ nvcc -V
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2024 NVIDIA Corporation
Built on Tue_Feb_27_16:19:38_PST_2024
Cuda compilation tools, release 12.4, V12.4.99
Build cuda_12.4.r12.4/compiler.33961263_0
```

## å®‰è£… CuDNN

CuDNNï¼ˆCUDA Deep Neural Network libraryï¼‰æ˜¯ç”± NVIDIA æä¾›çš„é«˜æ€§èƒ½æ·±åº¦å­¦ä¹ åº“ï¼Œå®ƒä¸“é—¨ä¸ºæ·±åº¦å­¦ä¹ åº”ç”¨ç¨‹åºï¼ˆå¦‚å·ç§¯ç¥ç»ç½‘ç»œã€é€’å½’ç¥ç»ç½‘ç»œç­‰ï¼‰ä¼˜åŒ–äº† GPU åŠ é€Ÿçš„è®¡ç®—æ“ä½œã€‚CuDNN æ˜¯åŸºäº CUDAï¼ˆNVIDIA çš„å¹¶è¡Œè®¡ç®—å¹³å°ï¼‰æ„å»ºçš„ï¼Œæ—¨åœ¨åŠ é€Ÿæ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­çš„ç¥ç»ç½‘ç»œè®¡ç®—ï¼Œæä¾›é«˜æ•ˆçš„è®¡ç®—æ€§èƒ½ã€‚

### CuDNN çš„ä¸»è¦åŠŸèƒ½

CuDNN ä¸»è¦æä¾›ä»¥ä¸‹å‡ ç§åŠŸèƒ½ï¼š

1. **å·ç§¯æ“ä½œï¼ˆConvolutional Operationsï¼‰**ï¼šCuDNN é’ˆå¯¹å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰çš„æ ¸å¿ƒæ“ä½œè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ”¯æŒå¸¸è§çš„å·ç§¯è®¡ç®—ã€åå·ç§¯ï¼ˆè½¬ç½®å·ç§¯ï¼‰ç­‰æ“ä½œã€‚å®ƒä¼˜åŒ–äº†åœ¨ GPU ä¸Šæ‰§è¡Œè¿™äº›æ“ä½œçš„é€Ÿåº¦ï¼Œé€‚åˆç”¨äºå›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰ç­‰ä»»åŠ¡ã€‚
2. **æ± åŒ–æ“ä½œï¼ˆPooling Operationsï¼‰**ï¼šCuDNN æä¾›äº†ä¼˜åŒ–çš„æ± åŒ–æ“ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨ max-pooling å’Œ average-pooling è®¡ç®—æ–¹é¢ï¼Œæé«˜äº†æ‰§è¡Œæ•ˆç‡ã€‚
3. **å½’ä¸€åŒ–æ“ä½œï¼ˆNormalization Operationsï¼‰**ï¼šå¦‚æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰ç­‰ï¼ŒCuDNN æä¾›äº†é«˜æ•ˆçš„å®ç°ã€‚
4. **æ¿€æ´»å‡½æ•°ï¼ˆActivation Functionsï¼‰**ï¼šCuDNN æä¾›äº†å¤šç§æ¿€æ´»å‡½æ•°ï¼ˆå¦‚ ReLUã€Sigmoidã€Tanh ç­‰ï¼‰ä»¥åŠå®ƒä»¬çš„åå‘ä¼ æ’­è®¡ç®—ï¼Œæ‰€æœ‰è¿™äº›éƒ½è¿›è¡Œäº† GPU ä¼˜åŒ–ã€‚
5. **RNN æ“ä½œï¼ˆRecurrent Neural Network Operationsï¼‰**ï¼šCuDNN è¿˜æä¾›äº†å¯¹ RNNï¼ˆé€’å½’ç¥ç»ç½‘ç»œï¼‰æ“ä½œçš„æ”¯æŒï¼ŒåŒ…æ‹¬ LSTMï¼ˆé•¿çŸ­æœŸè®°å¿†ï¼‰å’Œ GRUï¼ˆé—¨æ§é€’å½’å•å…ƒï¼‰çš„é«˜æ•ˆå®ç°ã€‚
6. **å¼ é‡è®¡ç®—ï¼ˆTensor Operationsï¼‰**ï¼šCuDNN æä¾›å¯¹å¼ é‡è¿ç®—çš„é«˜æ•ˆæ”¯æŒï¼Œå¸®åŠ©æ·±åº¦å­¦ä¹ æ¡†æ¶åœ¨ GPU ä¸Šæ‰§è¡Œå¤æ‚çš„çŸ©é˜µè¿ç®—ã€‚

### ä¸ºä»€ä¹ˆä½¿ç”¨ CuDNNï¼Ÿ

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šCuDNN å¯¹æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­çš„è®¸å¤šå¸¸è§æ“ä½œï¼ˆå¦‚å·ç§¯ã€æ± åŒ–ã€æ¿€æ´»ç­‰ï¼‰è¿›è¡Œäº†ä¸“é—¨ä¼˜åŒ–ï¼Œåˆ©ç”¨ GPU å¹¶è¡Œè®¡ç®—çš„ä¼˜åŠ¿æ˜¾è‘—æé«˜äº†è®¡ç®—é€Ÿåº¦ï¼Œå°¤å…¶åœ¨å¤§è§„æ¨¡è®­ç»ƒä¸­èƒ½å¤Ÿå¤§å¹…ç¼©çŸ­è®­ç»ƒæ—¶é—´ã€‚
2. **ä¸æ·±åº¦å­¦ä¹ æ¡†æ¶å…¼å®¹**ï¼šCuDNN ä¸å¤§å¤šæ•°ä¸»æµæ·±åº¦å­¦ä¹ æ¡†æ¶å…¼å®¹ï¼Œå¦‚ TensorFlowã€PyTorchã€Caffe ç­‰ã€‚è¿™äº›æ¡†æ¶éƒ½åˆ©ç”¨ CuDNN æ¥åŠ é€Ÿè®¡ç®—ï¼Œä»è€Œå¤§å¤§æé«˜äº†è®­ç»ƒå’Œæ¨ç†çš„æ•ˆç‡ã€‚
3. **GPU åŠ é€Ÿ**ï¼šç”±äº CuDNN åŸºäº NVIDIA çš„ CUDA æ„å»ºï¼Œå®ƒèƒ½å¤Ÿå……åˆ†å‘æŒ¥ NVIDIA GPU çš„è®¡ç®—èƒ½åŠ›ï¼Œæå¤§æå‡æ·±åº¦å­¦ä¹ åº”ç”¨çš„æ€§èƒ½ã€‚
4. **æ˜“äºé›†æˆ**ï¼šå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼ŒCuDNN æä¾›äº†ç®€å•çš„ APIï¼Œå¯ä»¥æ–¹ä¾¿åœ°é›†æˆåˆ°ç°æœ‰çš„æ·±åº¦å­¦ä¹ é¡¹ç›®ä¸­ï¼Œæå¤§å‡å°‘äº†ä¼˜åŒ–å’Œè°ƒè¯•çš„å·¥ä½œé‡ã€‚

### CuDNN ä¸ CUDA çš„å…³ç³»

CuDNN æ˜¯æ„å»ºåœ¨ CUDA ä¸Šçš„åº“ï¼Œå®ƒåˆ©ç”¨ CUDA æä¾›çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›æ¥åŠ é€Ÿæ·±åº¦å­¦ä¹ è®¡ç®—ã€‚CUDA æä¾›äº†åº•å±‚çš„ç¡¬ä»¶åŠ é€Ÿæ¥å£ï¼Œè€Œ CuDNN åˆ™åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†é’ˆå¯¹æ·±åº¦å­¦ä¹ æ“ä½œçš„ä¼˜åŒ–ã€‚å› æ­¤ï¼ŒCuDNN éœ€è¦ä¸ CUDA ä¸€èµ·ä½¿ç”¨ã€‚

### å¦‚ä½•å®‰è£… CuDNN

> æ›´æ–°å®‰è£…æ–¹å¼: https://docs.nvidia.com/deeplearning/cudnn/installation/latest/linux.html#
>
> ```bash
> sudo apt-get install zlib1g
> sudo apt-get -y install cudnn9-cuda-12
> ```

è®¿é—® [CuDNN ç½‘ç«™](https://developer.nvidia.com/rdp/cudnn-archive)ã€‚éœ€è¦æ³¨å†Œä¸€ä¸ª NVIDIA å¼€å‘è€…è´¦å·æ‰å¯ä»¥ä¸‹è½½ã€‚

![20250210010433_BrMD7eJW.webp](https://cdn.dong4j.site/source/image/20250210010433_BrMD7eJW.webp)

> deb æ–‡ä»¶ä»…æä¾›æœ¬åœ°æºï¼Œå®‰è£…æ—¶ä»éœ€ä»ç½‘ç»œä¸‹è½½ç›¸åº”çš„åŒ…æ–‡ä»¶ã€‚éœ€è¦å…ˆå®‰è£…æœ¬åœ°æºï¼š `sudo dpkg -i cudnn-local-repo-ubuntu2204-8.9.7.29_1.0-1_amd64.deb`ï¼Œæ ¹æ®è¾“å‡ºä¸­çš„æç¤ºå®‰è£… GPG keyï¼Œå†ä½¿ç”¨ apt å·¥å…·æ›´æ–°å’Œå®‰è£…ä¾èµ–åŒ…ã€‚

Tar åŒ…æ˜¯å®Œæ•´çš„å®‰è£…æ–‡ä»¶, ä¸ºäº†é¿å…ç½‘ç»œå®‰è£…çš„ä¸ç¨³å®šæ€§, è¿™é‡Œé€‰æ‹©ä¸‹è½½å…¨éƒ¨æ–‡ä»¶åˆ°æœ¬åœ°å®‰è£….

```bash
tar -xvJf cudnn-linux-x86_64-8.9.7.29_cuda12-archive.tar.xz \
	&& sudo cp cudnn-linux-x86_64-8.9.7.29_cuda12-archive/include/cudnn.h /usr/local/cuda/include \
	&& sudo cp -P cudnn-linux-x86_64-8.9.7.29_cuda12-archive/lib/libcudnn* /usr/local/cuda-12.4/lib64 \
	&& sudo chmod a+r /usr/local/cuda/include/cudnn.h \
	&& sudo chmod a+r /usr/local/cuda/lib64/libcudnn* \
  && sudo dpkg -i cudnn-local-repo-ubuntu2204-8.9.7.29_1.0-1_amd64.deb \
	&& sudo apt-get install libcudnn8 \
	&& sudo apt-get install libcudnn8-dev \
	&& sudo apt-get install libcudnn8-samples
```

#### éªŒè¯

```bash
$ sudo ldconfig

$ sudo ldconfig -p | grep cudnn
	libcudnn_ops_train.so.8 (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_ops_train.so.8
	libcudnn_ops_train.so.8 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_ops_train.so.8
	libcudnn_ops_train.so (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_ops_train.so
	libcudnn_ops_train.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_ops_train.so
	libcudnn_ops_infer.so.8 (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_ops_infer.so.8
	libcudnn_ops_infer.so.8 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8
	libcudnn_ops_infer.so (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_ops_infer.so
	libcudnn_ops_infer.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_ops_infer.so
	libcudnn_cnn_train.so.8 (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_cnn_train.so.8
	libcudnn_cnn_train.so.8 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8
	libcudnn_cnn_train.so (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_cnn_train.so
	libcudnn_cnn_train.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_cnn_train.so
	libcudnn_cnn_infer.so.8 (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_cnn_infer.so.8
	libcudnn_cnn_infer.so.8 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8
	libcudnn_cnn_infer.so (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_cnn_infer.so
	libcudnn_cnn_infer.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_cnn_infer.so
	libcudnn_adv_train.so.8 (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_adv_train.so.8
	libcudnn_adv_train.so.8 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_adv_train.so.8
	libcudnn_adv_train.so (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_adv_train.so
	libcudnn_adv_train.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_adv_train.so
	libcudnn_adv_infer.so.8 (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_adv_infer.so.8
	libcudnn_adv_infer.so.8 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8
	libcudnn_adv_infer.so (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_adv_infer.so
	libcudnn_adv_infer.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn_adv_infer.so
	libcudnn.so.8 (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn.so.8
	libcudnn.so.8 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn.so.8
	libcudnn.so (libc6,x86-64) => /usr/local/cuda/targets/x86_64-linux/lib/libcudnn.so
	libcudnn.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libcudnn.so
```

## å®‰è£… Conda

```bash
mkdir -p ~/miniconda3 \
	&& wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh \
	&& bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3 \
	&& rm ~/miniconda3/miniconda.sh \
	&& source ~/miniconda3/bin/activate \
	&& conda init --all
```

### éªŒè¯

```bash
conda create -n ai_base python=3.12
conda activate ai_base
pip install torch torchvision
```

python è„šæœ¬:

```python
import torch
# ç”Ÿæˆä¸€ä¸ª5x3çš„éšæœºçŸ©é˜µ
print(torch.rand(5, 3))
# æ£€æŸ¥CUDAæ˜¯å¦å¯ç”¨
print(torch.cuda.is_available())
# å¦‚æœCUDAå¯ç”¨ï¼Œè·å–æ›´å¤šæ˜¾å¡ä¿¡æ¯
if torch.cuda.is_available():
    # è·å–CUDAè®¾å¤‡æ•°é‡
    print('CUDA device count:', torch.cuda.device_count())
    # è·å–å½“å‰è®¾å¤‡çš„åç§°
    print('Device name:', torch.cuda.get_device_name(0))
    # è·å–å½“å‰è®¾å¤‡çš„æ€»å†…å­˜
    print('Device total memory (GB):', torch.cuda.get_device_properties(0).total_memory / 1e9)
    # è·å–å½“å‰è®¾å¤‡çš„CUDAç‰ˆæœ¬
    print('CUDA version:', torch.version.cuda)
    # è·å–å½“å‰è®¾å¤‡çš„è®¡ç®—èƒ½åŠ›
    print('Compute capability:', torch.cuda.get_device_properties(0).major, '.', torch.cuda.get_device_properties(0).minor)
    # æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„GPU
    print('GPU available:', torch.cuda.is_available())
    # è·å–å½“å‰è®¾å¤‡çš„ç´¢å¼•
    print('Current device index:', torch.cuda.current_device())
```

```
$ python gpu.py
tensor([[0.7034, 0.4482, 0.1233],
        [0.2208, 0.0810, 0.9165],
        [0.9785, 0.3103, 0.5675],
        [0.1876, 0.9308, 0.2961],
        [0.6886, 0.5146, 0.2812]])
True
CUDA device count: 1
Device name: Tesla P40
Device total memory (GB): 25.62588672
CUDA version: 12.4
Compute capability: 6 . 1
GPU available: True
Current device index: 0
```

## æ·»åŠ åˆ°ç›‘æ§é¢æ¿

![20250211194220_zb6fDv7h.webp](https://cdn.dong4j.site/source/image/20250211194220_zb6fDv7h.webp)

1. å¼€å¯ GPU ç›‘æ§
2. å¼€å¯æ¸©åº¦ç›‘æ§

## é€šè¿‡é›·é›³æ¥å£äº macOS è¿æ¥

NUC11 è‡ªå¸¦2ä¸ªé›·é›³4æ¥å£, æ‰€ä»¥ç©ä¸€ä¸‹ Linux å¦‚ä½•é€šè¿‡é›·é›³æ¥å£äº macOS å»ºç«‹è¿æ¥.

### macOS é…ç½®

> åœ¨ [[homelab-upgrade-to-10g|HomeLab ç½‘ç»œç»­é›†ï¼šå‡çº§ 10G ç½‘ç»œ-å†æˆ˜ 10 å¹´]] ä¸­çš„ ã€Œå¤šå° Mac äº’è”ã€ä¸€èŠ‚ä¸­è¯¦ç»†è®²è§£äº†å¦‚ä½•é€šè¿‡é›·é›³æ¥å£è¿æ¥å¤šå° macOS.

é¦–å…ˆéœ€è¦ç¡®å®šè¿æ¥çš„å“ªä¸ªé›·é›³æ¥å£:

![20250216223015_r1hcUdNe.webp](https://cdn.dong4j.site/source/image/20250216223015_r1hcUdNe.webp)

macOS äº NUC è¿æ¥å, ç›´æ¥è¯†åˆ«åˆ°å¯¹ç«¯ä¸º **nuc(æˆ‘è®¾ç½®çš„ hostname)**, æ’å­”æ˜¾ç¤ºä¸º **1**.

ç„¶åéœ€è¦æ–°å»ºä¸€ä¸ªé›·é›³ç½‘æ¡¥, é€‰æ‹©é›·é›³ 1 æ¥å£:

![20250216223016_Jm6IfLe4.webp](https://cdn.dong4j.site/source/image/20250216223016_Jm6IfLe4.webp)

æœ€åå°±æ˜¯ **æ·»åŠ æœåŠ¡**:

![20250216223017_Yuhowi8h.webp](https://cdn.dong4j.site/source/image/20250216223017_Yuhowi8h.webp)

æ‰‹åŠ¨ä¿®æ”¹ IP:

![20250216223018_99XYwggY.webp](https://cdn.dong4j.site/source/image/20250216223018_99XYwggY.webp)

### NUC é…ç½®

```bash
sudo nmcli connection add type ethernet ifname thunderbolt0 con-name to.mbp ipv4.method manual ipv4.addresses 1.1.1.9/24
```

NUC çš„ IP è®¾ç½®ä¸º `1.1.1.9`, ç„¶åæ˜¯å–œé—»ä¹è§çš„æµ‹é€Ÿç¯èŠ‚:

```bash
$ iperf3 -c 1.1.1.9
Connecting to host 1.1.1.9, port 5201
[  5] local 1.1.1.8 port 61027 connected to 1.1.1.9 port 5201
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-1.00   sec  1.62 GBytes  13.8 Gbits/sec
[  5]   1.00-2.00   sec  1.72 GBytes  14.8 Gbits/sec
[  5]   2.00-3.00   sec  1.72 GBytes  14.8 Gbits/sec
[  5]   3.00-4.01   sec  1.73 GBytes  14.8 Gbits/sec
[  5]   4.01-5.00   sec  1.72 GBytes  14.8 Gbits/sec
[  5]   5.00-6.00   sec  1.73 GBytes  14.8 Gbits/sec
[  5]   6.00-7.01   sec  1.73 GBytes  14.8 Gbits/sec
[  5]   7.01-8.00   sec  1.72 GBytes  14.8 Gbits/sec
[  5]   8.00-9.00   sec  1.73 GBytes  14.8 Gbits/sec
[  5]   9.00-10.00  sec  1.73 GBytes  14.8 Gbits/sec
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec  17.1 GBytes  14.7 Gbits/sec                  sender
[  5]   0.00-10.01  sec  17.1 GBytes  14.7 Gbits/sec                  receiver

iperf Done.
```

ç†è®ºä¸Šåº”è¯¥æœ‰ 20Gbit/sec, æ²¡æœ‰æˆ‘ macOS äº macOS è¿æ¥å¿«:

```bash
$ iperf3 -c 1.0.0.4
Connecting to host 1.0.0.4, port 5201
[  5] local 1.0.0.5 port 65277 connected to 1.0.0.4 port 5201
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-1.00   sec  2.30 GBytes  19.8 Gbits/sec
[  5]   1.00-2.00   sec  2.17 GBytes  18.7 Gbits/sec
[  5]   2.00-3.00   sec  2.22 GBytes  19.1 Gbits/sec
[  5]   3.00-4.00   sec  2.17 GBytes  18.6 Gbits/sec
[  5]   4.00-5.00   sec  2.24 GBytes  19.2 Gbits/sec
[  5]   5.00-6.00   sec  2.20 GBytes  18.9 Gbits/sec
[  5]   6.00-7.00   sec  2.20 GBytes  18.9 Gbits/sec
[  5]   7.00-8.00   sec  2.23 GBytes  19.1 Gbits/sec
[  5]   8.00-9.00   sec  2.11 GBytes  18.1 Gbits/sec
[  5]   9.00-10.00  sec  2.21 GBytes  19.0 Gbits/sec
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec  22.0 GBytes  18.9 Gbits/sec                  sender
[  5]   0.00-10.00  sec  22.0 GBytes  18.9 Gbits/sec                  receiver

iperf Done.
```

#### å‚è€ƒ

- [Linuxç½‘ç»œç®¡ç†å·¥å…·-netplan](https://zoe.red/2024/254.html)
- [é›·ç”µå±€åŸŸç½‘æ­å»º](https://zoe.red/2024/169.html/comment-page-1)

## æµ‹è¯•

### CPU æµ‹è¯•

åœ¨ Ubuntu ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ apt-get å‘½ä»¤æ¥å®‰è£… Stress å·¥å…·ã€‚é¦–å…ˆï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ï¼š

```
sudo apt-get update
sudo apt-get install stress
```

å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­ç›´æ¥è¿è¡Œ Stress å·¥å…·äº†ã€‚

1. æ¨¡æ‹Ÿ CPU å‹åŠ›

   ä½¿ç”¨ Stress å·¥å…·æ¨¡æ‹Ÿ CPU å‹åŠ›éå¸¸ç®€å•ã€‚ä»¥ä¸‹å‘½ä»¤å°†åœ¨ 8 ä¸ªå·¥ä½œçº¿ç¨‹ä¸Šæ¨¡æ‹Ÿ CPU å‹åŠ›ï¼š

   ```bash
   # è¿™å°†ä½¿CPUä¿æŒé«˜è´Ÿè½½çŠ¶æ€ï¼Œä»¥æµ‹è¯•ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
   stress --cpu 8
   ```

2. æ¨¡æ‹Ÿå†…å­˜å‹åŠ›

   ä¸ºäº†æ¨¡æ‹Ÿå†…å­˜å‹åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

   ```bash
   # è¿™å°†ä½¿ç³»ç»Ÿåˆ†é…128MBçš„å†…å­˜ï¼Œå¹¶æŒç»­è¿›è¡Œè¯»å†™æ“ä½œï¼Œä»¥æ¨¡æ‹Ÿå†…å­˜å‹åŠ›ã€‚
   stress --vm 1 --vm-bytes 128M
   ```

3. æ¨¡æ‹Ÿ I/O å‹åŠ›

   è¦æ¨¡æ‹Ÿ I/O å‹åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

   ```bash
   # è¿™å°†ä½¿ç³»ç»ŸåŒæ—¶æ‰§è¡Œ4ä¸ªI/Oæ“ä½œï¼Œä»¥æ¨¡æ‹Ÿç£ç›˜è¯»å†™å‹åŠ›ã€‚
   stress --io 4
   ```

ä»¥ä¸Šä»…æ˜¯ Stress å·¥å…·çš„éƒ¨åˆ†ç¤ºä¾‹ï¼Œå®ƒè¿˜æ”¯æŒæ¨¡æ‹Ÿç£ç›˜ç©ºé—´å‹åŠ›ç­‰å¤šç§åœºæ™¯ã€‚å…·ä½“ç”¨æ³•å’Œå‚æ•°å¯ä»¥å‚è€ƒ Stress å·¥å…·çš„å®˜æ–¹[æ–‡æ¡£](https://cloud.baidu.com/product/doc.html)ã€‚

### GPU æµ‹è¯•

è¿™é‡Œä½¿ç”¨ **[gpu-burn](https://github.com/wilicc/gpu-burn)** æ¥æµ‹è¯•:

```bash
git clone https://github.com/wilicc/gpu-burn \
	&& cd gpu-burn \
	&& make && make clean
```

```bash
$ ./gpu_burn -h
GPU Burn
Usage: gpu-burn [OPTIONS] [TIME]

-m X	Use X MB of memory.
-m N%	Use N% of the available GPU memory.  Default is 90%
-d	Use doubles
-tc	Try to use Tensor cores
-l	Lists all GPUs in the system
-i N	Execute only on GPU N
-c FILE	Use FILE as compare kernel.  Default is compare.ptx
-stts T	Set timeout threshold to T seconds for using SIGTERM to abort child processes before using SIGKILL.  Default is 30
-h	Show this help message

Examples:
  gpu-burn -d 3600 # burns all GPUs with doubles for an hour
  gpu-burn -m 50% # burns using 50% of the available GPU memory
  gpu-burn -l # list GPUs
  gpu-burn -i 2 # burns only GPU of index 2
```

æˆ‘ä»¬ä½¿ç”¨ `gpu-burn -d 600` æ¥è·‘ 10 åˆ†é’Ÿæµ‹è¯•:

```bash
$ ./gpu_burn -d 600
Using compare file: compare.ptx
Burning for 600 seconds.
GPU 0: Tesla P40 (UUID: GPU-14413e65-6006-ecbe-19fb-de88575d8a3e)
Initialized device 0 with 24438 MB of memory (24278 MB available, using 21850 MB of it), using DOUBLES
Results are 536870912 bytes each, thus performing 40 iterations
```

å› ä¸ºæˆ‘çš„æ¶¡è½®é£æ‰‡ä½¿ç”¨æ¸©åº¦ä¼ æ„Ÿå™¨æ£€æµ‹æ˜¾å¡èƒŒæ¿æ¸©åº¦, å¦‚æœé«˜äº 30 åº¦å°±å¼€å§‹å·¥ä½œ, åˆšè·‘äº† 30 ç§’é’Ÿå°±å¼€å§‹å…¨åŠŸç‡è¿è¡Œäº†, ä½¿ç”¨ `watch nvidia-smi` è§‚å¯Ÿæ˜¾å¡çš„æ•°æ®å˜åŒ–:

```bash
+-----------------------------------------------------------------------------------------+
| NVIDIA-SMI 550.120                Driver Version: 550.120        CUDA Version: 12.4     |
|-----------------------------------------+------------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |
|                                         |                        |               MIG M. |
|=========================================+========================+======================|
|   0  Tesla P40                      Off |   00000000:01:00.0 Off |                  Off |
| N/A   28C    P0             53W /  250W |   21665MiB /  24576MiB |    100%      Default |
|                                         |                        |                  N/A |
+-----------------------------------------+------------------------+----------------------+

+-----------------------------------------------------------------------------------------+
| Processes:                                                                              |
|  GPU   GI   CI        PID   Type   Process name                              GPU Memory |
|        ID   ID                                                               Usage      |
|=========================================================================================|
|    0   N/A  N/A     13338      C   ./gpu_burn                                  21662MiB |
+-----------------------------------------------------------------------------------------+
```

åŸºæœ¬ä¸Šæ²¡æœ‰è¶…è¿‡ 30 åº¦, è¿™å°±å°´å°¬äº†, ä¸æ™“å¾— GPU ä¼šä¸ä¼šæ„Ÿå†’ ğŸ™‰.

### AI æ¨ç†

è¿™é‡Œä½¿ç”¨æœ€ç®€å•çš„ Ollama è¿›è¡Œå¿«é€Ÿæµ‹è¯•:

```bash
curl https://ollama.ai/install.sh | sh
```

```bash
>>> Creating ollama user...
>>> Adding ollama user to render group...
>>> Adding ollama user to video group...
>>> Adding current user to ollama group...
>>> Creating ollama systemd service...
>>> Enabling and starting ollama service...
Created symlink /etc/systemd/system/default.target.wants/ollama.service â†’ /etc/systemd/system/ollama.service.
>>> NVIDIA GPU installed.
```

Ollama ç›´æ¥æ·»åŠ è‡ªå¯åŠ¨, ä½†æ˜¯æˆ‘ä¸éœ€è¦, æ‰€ä»¥ç¦ç”¨äº†:

```bash
sudo systemctl disable ollama
```

å¦‚ä½•éœ€è¦å¼€æ”¾å±€åŸŸç½‘è®¿é—®, éœ€è¦ä¿®æ”¹ `/etc/systemd/system/ollama.service`

```bash
...
Environment="OLLAMA_HOST=0.0.0.0:11434"
...
```

```bash
sudo systemctl daemon-reload \
	&& sudo systemctl restart ollama
```

ä½¿ç”¨ `llama3.2` æ¥æµ‹è¯•:

```bash
ollama run llama3.2
```

```bash
./llava-v1.5-7b-q4.llamafile --server --gpu NVIDIA --host 0.0.0.0
```

### Stable Diffusion WebUI

```basj
mkdir -p ~/miniconda3
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
conda init --all
conda create -n sdwebui python=3.10
conda activate sdwebui
pip install torch torchvision torchaudio
```



```basj
git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git
cd stable-diffusion-webui

vim webui.sh
```

```bash
#!/bin/bash
#########################################################
# Uncomment and change the variables below to your need:#
#########################################################

# Install directory without trailing slash
#install_dir="/home/$(whoami)"

# Name of the subdirectory
#clone_dir="stable-diffusion-webui"

# Commandline arguments for webui.py, for example: export COMMANDLINE_ARGS="--medvram --opt-split-attention"
export COMMANDLINE_ARGS="--api --listen --port 7860 --gradio-auth user:password --enable-insecure-extension-access"

# python3 executable
python_cmd="/home/dong4j/miniconda3/envs/sdwebui/bin/python3.10"

# git executable
#export GIT="git"

# python3 venv without trailing slash (defaults to ${install_dir}/${clone_dir}/venv)
venv_dir="-"

# script to launch to start the app
#export LAUNCH_SCRIPT="launch.py"

# install command for torch
#export TORCH_COMMAND="pip install torch==1.12.1+cu113 --extra-index-url https://download.pytorch.org/whl/cu113"

# Requirements file to use for stable-diffusion-webui
#export REQS_FILE="requirements_versions.txt"

# Fixed git repos
#export K_DIFFUSION_PACKAGE=""
#export GFPGAN_PACKAGE=""

# Fixed git commits
#export STABLE_DIFFUSION_COMMIT_HASH=""
#export CODEFORMER_COMMIT_HASH=""
#export BLIP_COMMIT_HASH=""

# Uncomment to enable accelerated launch
#export ACCELERATE="True"

# Uncomment to disable TCMalloc
#export NO_TCMALLOC="True"

###########################################
```

```bash
bash webui.sh
```

#### é—®é¢˜

```
  Ã— Building wheel for tokenizers (pyproject.toml) did not run successfully.
  â”‚ exit code: 1
  â•°â”€> [49 lines of output]
      running bdist_wheel
      running build
      running build_py
      creating build/lib.linux-x86_64-cpython-312/tokenizers
      copying py_src/tokenizers/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers
      creating build/lib.linux-x86_64-cpython-312/tokenizers/models
      copying py_src/tokenizers/models/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/models
      creating build/lib.linux-x86_64-cpython-312/tokenizers/decoders
      copying py_src/tokenizers/decoders/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/decoders
      creating build/lib.linux-x86_64-cpython-312/tokenizers/normalizers
      copying py_src/tokenizers/normalizers/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/normalizers
      creating build/lib.linux-x86_64-cpython-312/tokenizers/pre_tokenizers
      copying py_src/tokenizers/pre_tokenizers/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/pre_tokenizers
      creating build/lib.linux-x86_64-cpython-312/tokenizers/processors
      copying py_src/tokenizers/processors/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/processors
      creating build/lib.linux-x86_64-cpython-312/tokenizers/trainers
      copying py_src/tokenizers/trainers/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/trainers
      creating build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      copying py_src/tokenizers/implementations/sentencepiece_unigram.py -> build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      copying py_src/tokenizers/implementations/sentencepiece_bpe.py -> build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      copying py_src/tokenizers/implementations/base_tokenizer.py -> build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      copying py_src/tokenizers/implementations/char_level_bpe.py -> build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      copying py_src/tokenizers/implementations/byte_level_bpe.py -> build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      copying py_src/tokenizers/implementations/bert_wordpiece.py -> build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      copying py_src/tokenizers/implementations/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/implementations
      creating build/lib.linux-x86_64-cpython-312/tokenizers/tools
      copying py_src/tokenizers/tools/__init__.py -> build/lib.linux-x86_64-cpython-312/tokenizers/tools
      copying py_src/tokenizers/tools/visualizer.py -> build/lib.linux-x86_64-cpython-312/tokenizers/tools
      copying py_src/tokenizers/__init__.pyi -> build/lib.linux-x86_64-cpython-312/tokenizers
      copying py_src/tokenizers/models/__init__.pyi -> build/lib.linux-x86_64-cpython-312/tokenizers/models
      copying py_src/tokenizers/decoders/__init__.pyi -> build/lib.linux-x86_64-cpython-312/tokenizers/decoders
      copying py_src/tokenizers/normalizers/__init__.pyi -> build/lib.linux-x86_64-cpython-312/tokenizers/normalizers
      copying py_src/tokenizers/pre_tokenizers/__init__.pyi -> build/lib.linux-x86_64-cpython-312/tokenizers/pre_tokenizers
      copying py_src/tokenizers/processors/__init__.pyi -> build/lib.linux-x86_64-cpython-312/tokenizers/processors
      copying py_src/tokenizers/trainers/__init__.pyi -> build/lib.linux-x86_64-cpython-312/tokenizers/trainers
      copying py_src/tokenizers/tools/visualizer-styles.css -> build/lib.linux-x86_64-cpython-312/tokenizers/tools
      running build_ext
      running build_rust
      error: can't find Rust compiler
      
      If you are using an outdated pip version, it is possible a prebuilt wheel is available for this package but pip is not able to install from it. Installing from the wheel would avoid the need for a Rust compiler.
      
      To update pip, run:
      
          pip install --upgrade pip
      
      and then retry package installation.
      
      If you did intend to build this package from source, try installing a Rust compiler from your system package manager and ensure it is on the PATH during installation. Alternatively, rustup (available at https://rustup.rs) is the recommended way to download and update the Rust compiler toolchain.
      [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
  ERROR: Failed building wheel for tokenizers
ERROR: Failed to build installable wheels for some pyproject.toml based projects (Pillow, tokenizers)
```

**é—®é¢˜å¤„ç†**

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env
pip install --no-cache-dir tokenizers
```



```
        Could not find openssl via pkg-config:
      
        pkg-config exited with status code 1
        > PKG_CONFIG_ALLOW_SYSTEM_CFLAGS=1 pkg-config --libs --cflags openssl
      
        The system library openssl required by crate openssl-sys was not found.
        The file openssl.pc needs to be installed and the PKG_CONFIG_PATH environment variable must contain its parent directory.
        The PKG_CONFIG_PATH environment variable is not set.
      
        HINT: if you have installed the library, try setting PKG_CONFIG_PATH to the directory containing openssl.pc.
      
      
        cargo:warning=Could not find directory of OpenSSL installation, and this -sys crate cannot proceed without this knowledge. If OpenSSL is installed and this crate had trouble finding it,  you can set the OPENSSL_DIR environment variable for the compilation process. See stderr section below for further information.
      
        --- stderr
      
      
        Could not find directory of OpenSSL installation, and this -sys crate cannot
        proceed without this knowledge. If OpenSSL is installed and this crate had
        trouble finding it,  you can set the OPENSSL_DIR environment variable for the
        compilation process.
      
        Make sure you also have the development packages of openssl installed.
        For example, libssl-dev on Ubuntu or openssl-devel on Fedora.
      
        If you're in a situation where you think the directory *should* be found
        automatically, please open a bug at https://github.com/sfackler/rust-openssl
        and include information about your system as well as this message.
      
        $HOST = x86_64-unknown-linux-gnu
        $TARGET = x86_64-unknown-linux-gnu
        openssl-sys = 0.9.106
      
      
      warning: build failed, waiting for other jobs to finish...
      error: cargo rustc --lib --message-format=json-render-diagnostics --manifest-path Cargo.toml --release -v --features pyo3/extension-module --crate-type cdylib -- failed with code 101
      [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
  ERROR: Failed building wheel for tokenizers
ERROR: Failed to build installable wheels for some pyproject.toml based projects (Pillow, tokenizers)
```

**é—®é¢˜å¤„ç†**

```bash
sudo apt install -y libssl-dev pkg-config
```



```
      error: could not compile tokenizers (lib) due to 1 previous error; 3 warnings emitted
      
      Caused by:
        process didn't exit successfully: /home/dong4j/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/bin/rustc --crate-name tokenizers --edition=2018 tokenizers-lib/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no --cfg 'feature="cached-path"' --cfg 'feature="clap"' --cfg 'feature="cli"' --cfg 'feature="default"' --cfg 'feature="dirs"' --cfg 'feature="esaxx_fast"' --cfg 'feature="http"' --cfg 'feature="indicatif"' --cfg 'feature="onig"' --cfg 'feature="progressbar"' --cfg 'feature="reqwest"' --check-cfg 'cfg(docsrs,test)' --check-cfg 'cfg(feature, values("cached-path", "clap", "cli", "default", "dirs", "esaxx_fast", "fancy-regex", "http", "indicatif", "onig", "progressbar", "reqwest", "unstable_wasm"))' -C metadata=dcfeed9efd370df2 -C extra-filename=-6d0cff9823c410a3 --out-dir /tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps -C strip=debuginfo -L dependency=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps --extern aho_corasick=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libaho_corasick-806902cb00c4532e.rmeta --extern cached_path=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libcached_path-140c0420b639fee2.rmeta --extern clap=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libclap-f0a196de7c2c2d55.rmeta --extern derive_builder=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libderive_builder-2c35d20c5dcdd1b2.rmeta --extern dirs=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libdirs-2a450a96233c46e8.rmeta --extern esaxx_rs=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libesaxx_rs-14b460a83d36cffb.rmeta --extern getrandom=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libgetrandom-e4e984aab09fca54.rmeta --extern indicatif=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libindicatif-4bd79d992ed7623e.rmeta --extern itertools=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libitertools-d3748b68b90d39fc.rmeta --extern lazy_static=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/liblazy_static-293673978ef0d67b.rmeta --extern log=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/liblog-eeeeba1bbfa2ffb1.rmeta --extern macro_rules_attribute=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libmacro_rules_attribute-d837ae137eb1c6b5.rmeta --extern monostate=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libmonostate-ee413b2bc414638b.rmeta --extern onig=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libonig-fdcb261852f9dd25.rmeta --extern paste=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libpaste-e8c11b814c73abf8.so --extern rand=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/librand-1a565600c8701f83.rmeta --extern rayon=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/librayon-327814f00a0af0eb.rmeta --extern rayon_cond=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/librayon_cond-4c94b6c4149cf439.rmeta --extern regex=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libregex-b19fe03f86732b4c.rmeta --extern regex_syntax=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libregex_syntax-2d5a08e62adc8bc5.rmeta --extern reqwest=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libreqwest-2e0f1b3d46ba2d8c.rmeta --extern serde=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libserde-09bbdc6f8d206673.rmeta --extern serde_json=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libserde_json-f9dd1e99e29af66a.rmeta --extern spm_precompiled=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libspm_precompiled-b00102097bfa2810.rmeta --extern thiserror=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libthiserror-533f4e0aa82c3f92.rmeta --extern unicode_normalization_alignments=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libunicode_normalization_alignments-9913c65b13ec4f88.rmeta --extern unicode_segmentation=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libunicode_segmentation-175194bc41713dcf.rmeta --extern unicode_categories=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/deps/libunicode_categories-fb12b97a420ed313.rmeta -L native=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/build/bzip2-sys-1373a3f19d1e511d/out/lib -L native=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/build/zstd-sys-6d5eafba8c9430e7/out -L native=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/build/esaxx-rs-9028bfd7929bddde/out -L native=/tmp/pip-install-dnunfm0j/tokenizers_40edca6a2fef4b23bfab7d044c44a2a3/target/release/build/onig_sys-9ef1a52efbdf7afc/out (exit status: 1)
      warning: build failed, waiting for other jobs to finish...
      error: cargo rustc --lib --message-format=json-render-diagnostics --manifest-path Cargo.toml --release -v --features pyo3/extension-module --crate-type cdylib -- failed with code 101
      [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
  ERROR: Failed building wheel for tokenizers
ERROR: Failed to build installable wheels for some pyproject.toml based projects (Pillow, tokenizers)
```

**é—®é¢˜å¤„ç†**

```bash
sudo apt update && sudo apt install -y build-essential cmake
sudo apt install -y python3-dev
```

æœ€ç»ˆé—®é¢˜æ˜¯æˆ‘ä½¿ç”¨äº† python3.12, åˆ‡æ¢åˆ° 3.10 å³å¯.



```
OSError: Can't load tokenizer for 'openai/clip-vit-large-patch14'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'openai/clip-vit-large-patch14' is the correct path to a directory containing all relevant files for a CLIPTokenizer tokenizer.

```









**å‚è€ƒ**

- [ç©è½¬ AIGCï¼šUbuntu 24.04 LTS å®‰è£…é…ç½® Stable Diffusion WebUI](https://cloud.tencent.com/developer/article/2416536)



<!--

#### Mac mini M2

ç¡¬ä»¶é…ç½®:

#### AI.Station

ç¡¬ä»¶é…ç½®:

#### NUC11

ç¡¬ä»¶é…ç½®:

-->

## å‚è€ƒèµ„æ–™

- [Tesla P40 æŠ€æœ¯è§„æ ¼]([GeForce GTX 1080 Ti ä¸ P40 æ¯”è¾ƒï¼Ÿ](https://www.zhihu.com/question/267786456))
- [Tesla P40 å‘å¸ƒèµ„æ–™]([NVIDIA å‘å¸ƒ AI è®¡ç®—å¡ Tesla P40ï¼šå®Œæ•´ç‰ˆ GP102 å¤§æ ¸å¿ƒï¼Œ24GB æ˜¾å­˜](https://www.expreview.com/49499.html))
- [Tesla P40 ä¸ GTX 1080TI å¯¹æ¯”]([GeForce GTX 1080 Ti ä¸ P40 æ¯”è¾ƒï¼Ÿ](https://www.zhihu.com/question/267786456))
- [NVIDIA CUDA åˆ—è¡¨]([CUDA Toolkit Archive](https://link.zhihu.com/?target=https%3A//developer.nvidia.com/cuda-toolkit-archive))