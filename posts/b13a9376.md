<!-- markdownlint-disable-next-line MD033 -->
<meta name="referrer" content="no-referrer"/>

![random-pic-api](https://api.dong4j.ink:1024/cover?spm={{spm}})

## 简介

今天折腾一下使用 TTL 连接到树莓派 Zero 2W.

> 串口连接是一种常用的通信方式，通常用于计算机与外部设备之间的数据传输。它是通过一根或多根电缆将设备通过串行接口连接起来，数据一位一位地按顺序传输。串口通信可以分为两种类型：RS-232 和 TTL，分别代表不同的电气标准和通信协议。

## 开启串口

```bash
sudo raspi-config->Interfacing options-> Serial->Yes
```

## 安装驱动

macOS 14+ 后自带 CH340X 驱动, 因此直接用就可以了:

```bash
ls /dev/cu.*

输出:
cu.usbmodem57590428591
```

## screen

```bash
brew install screen
# 这里的 11520 是波特率，在树莓派上的 /boot/cmdline.txt 进行设置
screen /dev/cu.usbmodem57590428591 115200
```

## Notice

执行完会进入一个空界面，此时按 Enter 键，就会出现 Raspberry Pi 的登录提示了。

将树莓派进行 shutdown 之后，如果想再次连接，需要将数据线拔掉，然后再插上。此时可以再次连接，否则可能会出现 could not find PTY 的错误提示。
终端退出的时候不会自动断开与树莓派的连接：
这时如果直接拔掉 USB 串口板，会造成系统重启。需要执行：ps -x|grep tty，得到串口连接的进程号，然后：kill 进程号。
如果只是不小心给关了，需要再次连接，同样需要 kill 一下，然后再 screen 进行连接，否则也可能会出现 could not find PTY 的错误提示。

```bash
ps -ef | grep -v grep | grep --color=auto /dev/cu.usbmodem57590428591
```

## screen

```bash
按 ctrl + a ，ctrl不放，再按 d 键暂时退出终端

# 查看会话
screen -ls

There is a screen on:
	1995.ttys000.hepingdeMacBookPro1	(Detached)
1 Socket in /var/folders/gl/843qz1j92z5gh6j25h_r09vh0000gn/T/.screen.


screen -r 1995 #-r就是指定会话id

按 ctrl + a ，ctrl不放，再按 k 键干掉screen进程
按k的时候，会询问要不要干掉这个会话，直接打y即可
```

![20250212192829_bhkQZP09.webp](https://cdn.dong4j.site/source/image/20250212192829_bhkQZP09.webp)

## USB 端

![20250212192830_YllQTeNl.webp](https://cdn.dong4j.site/source/image/20250212192830_YllQTeNl.webp)

## 设备端

![20250212192830_Met2hLTd.webp](https://cdn.dong4j.site/source/image/20250212192830_Met2hLTd.webp)

## 树莓派 4B 连接 Zero 2W

- [树莓派 4B 安装 CH340 驱动](https://blog.csdn.net/qq_18677445/article/details/131191383)
- [树莓派安装 CH340 驱动（USB 转串口）](https://blog.csdn.net/lwpo2008/article/details/103802483)
- [Linux 笔记 | CH340/CH34x 驱动安装笔记-ROS 技术空间](http://keaa.net/linux-ch34x-driver.html)
- [使用 USB 转 UART 串行线登录树莓派 5 | 树莓派实验室](https://shumeipai.nxez.com/2024/05/07/login-to-your-raspberry-pi-5-using-a-usb-to-uart-cable.html)

## 参考

- [Mac 上使用串口登陆树莓派 3](https://www.yanxurui.cc/posts/project/2017-08-28-login-raspberry3-via-uart-on-mac/)