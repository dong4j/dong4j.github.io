<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>JDK 从5 到 10 的新特性介绍 | 司机带你开车</title><meta name="keywords" content="Java5,泛型,枚举,自动拆箱装箱,可变参数,注解,增强for循环,静态导入,print输出格式化,并发支持（JUC）,Arrays,Queue,线程安全StringBuilder,Java10,本地变量类型推断,字符串加强,集合加强,Stream加强,Optional加强,InputStream加强,HTTPClientAPI,化繁为简的命令编译运行源代码"><meta name="author" content="dong4j"><meta name="copyright" content="dong4j"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="JDK 从5 到 10 的新特性介绍"><meta name="application-name" content="JDK 从5 到 10 的新特性介绍"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="JDK 从5 到 10 的新特性介绍"><meta property="og:url" content="https://blog.dong4j.site/posts/9c7f49a2.html"><meta property="og:site_name" content="司机带你开车"><meta property="og:description" content="Java 5 到 Java 9 的更新历史回顾，涵盖了泛型、枚举、自动拆箱装箱、可变参数、注解、增强 for 循环、静态导入、print 输出格式化、并发支持（JUC）、Arrays、Queue、线程安全 StringBuilder 等新特性。Java 10 到 Java 11 的更新历史回顾，包括"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://api.dong4j.ink:1024/cover?hf76jw4o"><meta property="article:author" content="dong4j"><meta property="article:tag" content="dong4j, Java, Python, Golang, HomeLab, SpringBoot, 架构"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://api.dong4j.ink:1024/cover?hf76jw4o"><meta name="description" content="Java 5 到 Java 9 的更新历史回顾，涵盖了泛型、枚举、自动拆箱装箱、可变参数、注解、增强 for 循环、静态导入、print 输出格式化、并发支持（JUC）、Arrays、Queue、线程安全 StringBuilder 等新特性。Java 10 到 Java 11 的更新历史回顾，包括"><link rel="shortcut icon" href="https://cdn.dong4j.site/source/image/favicon.ico"><link rel="canonical" href="https://blog.dong4j.site/posts/9c7f49a2.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//hm.baidu.com"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="codeva-D4HsBP841S"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media=&quot;all&quot;"><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?61a751ac36d18d3ba293fe8ef3ec53eb",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script><script>let GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"与数百名博主无限进步",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"Local",mode:"online",switchBtn:!0,btnLink:"https://github.com/dong4j/blog-summary-assistant-server",randomNum:3,basicWordCount:1999,key:"84yT3Gkl6fp",Referer:"https://blog.dong4j.site:1024",apiUrl:"https://oneapi.dong4j.ink:1024/api/summary",audioUrl:"https://api.dong4j.ink:1024/audio"},diytitle:{enable:!0,leaveTitle:"兄台留步 🙏",backTitle:"兄台,别来无恙 👋"},LA51:{enable:!0,ck:"3Ki5mmyy6E5xtXuf",LingQueMonitorID:"3Ki5mmyy6E5xtXuf"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.dong4j.ink:1024",commentBarrageConfig:{enable:!0,maxBarrage:1,barrageTime:4e3,accessToken:"3a358103e6024cfb97546ec8f8408f5a",mailMd5:"3435c7a74ba1cad3f5d57b0b61b9b25cee221b97599c47b32edbdb36038c5411"},music_page_default:"nav_music",root:"/",preloader:{source:"car"},friends_vue_info:{apiurl:"https://friends.dong4j.ink:1024/"},navMusic:!0,mainTone:{mode:"both",api:"https://img2color.dong4j.ink:1024/api?img=",cover_change:!0},authorStatus:{skills:["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","😎 HomeLab 折腾专家","🏃 脚踏实地行动派","🧱 团队小组发动机","👶 尿不湿更换专家"]},algolia:{appId:"JFMEP32WXP",apiKey:"8e3acd038435dda872706ba6777a54b3",indexName:"blog-index",hits:{per_page:10},languages:{input_placeholder:"输入关键词后按下回车查找",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"该内容距离上次更新已经过了",messageNext:"天，文章内容可能已经过时。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!0},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: dong4j",link:"链接: ",source:"来源: 司机带你开车",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"mediumZoom",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!0,shortcutKey:{enable:!0,delay:100,shiftDelay:200},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"司机带你开车",title:"JDK 从5 到 10 的新特性介绍",postAI:"Java 5 到 Java 9 的更新历史回顾，涵盖了泛型、枚举、自动拆箱装箱、可变参数、注解、增强 for 循环、静态导入、print 输出格式化、并发支持（JUC）、Arrays、Queue、线程安全 StringBuilder 等新特性。Java 10 到 Java 11 的更新历史回顾，包括本地变量类型推断、字符串加强、集合加强、Stream 加强、Optional 加强、InputStream 加强、HTTP Client API、化繁为简的命令编译运行源代码等新特性。同时，还提到了 Java 9 和 Java 11 的移除项和废弃项。",pageFillDescription:"JDK5 新特性, 1、泛型, 2、枚举, 3、自动拆箱x2F装箱, 4、可变参数, 5、注解, 6、增强 for 循环 forx2Fin, 7. 静态导入, 8. print 输出格式化, 9. 并发支持（JUC）, 10. Arrays、Queue、线程安全 StringBuilder, JDK6 新特性, JDK7 新特性, 1. switch 中添加对 String 类型的支持, 2. 数字字面量的改进, 3. 异常处理（捕获多个异常） try-with-resources, catch 子句能够同一时候捕获多个异常, try-with-resources 语句, 4. 增强泛型推断, 5. NIO2.0（AIO）新 IO 的支持, 6. JSR292 与 InvokeDynamic, 7. Path 接口(重要接口更新), 8. forkx2Fjoin 计算框架, JDK8 新特性, 1. Lambda 表达式, 2. 接口的默认方法与静态方法, 3. 方法引用（含构造方法引用）, 4. 重复注解, 5. 扩展注解的支持（类型注解）, 6. Optional, 7. Stream, 8. Datex2FTime API (JSR 310), 9. JavaScript 引擎 Nashorn, 10. Base64, 11. JVM 的 PermGen 空间被移除, 12. HashMap 改进, JDK9 新特性, 1 Java 平台模块化系统, 模块描述器, jlinkJava 连接器, 2 新工具, 2.1 JShell, 2.2 更多的诊断命令, 3 多版本兼容 Jar, 4 新的安全性, 4.1 数据报传输层安全性(DTLS）, 4.2 禁用 sha - 1 证书, 5 核心库新内容, 5.1 轻量级的 json 文本处理 api, 5.2 多线程新内容, Publish-Subscribe Framework, 5.3 基础类新内容, 增强的弃用标记, Thread.onSpinWait, 6 私有接口方法, 7 java.net 新内容, httpx2F2, 8 其他, 8.1 Try-With-Resources 的改变, 8.2 Unsafe 类的命运, 8.3 Мulti-Resolution Image API, 9 JVM 优化, 9.1 使用 G1 垃圾回收器作为默认的垃圾回收器, 1. 本地变量类型推断, 2. 字符串加强, 3. 集合加强, 4. Stream 加强, 5. Optional 加强, 6. InputStream 加强, 7. HTTP Client API(重磅), 8. 化繁为简一个命令编译运行源代码, 9. 移除项, 10. 废弃项新特性开发代号为老虎于发行泛型所谓类型擦除指的就是源码中的范型信息只允许停留在编译前期而编译后的字节码文件中将不再保留任何的范型信息也就是说范型信息在编译时将会被全部删除其中范型类型的类型参数则会被替换为类型并在实际使用时强制转换为指定的目标数据类型而中的模板则会在编译时将模板类型中的类型参数根据所传递的指定数据类型生成相对应的目标代码通配符类型避免警告问号表示任何类型都可以接受限制类型枚举枚举自动拆箱装箱将类型转换成对应的类型可变参数注解表示该注解是否对类的子类继承的方法等起作用类型表示是否保留在编译过的文件中还是在运行时可读增强循环循环办不到的事情遍历同时获取集合逗号拼接时去掉最后一个遍历的同时删除元素静态导入输出格式化并发支持线程池可以抓住多线程内的异常类库线程安全工具类接口与同一级别都是继承了接口实现了接口避开集合的操作使用操作不抛异常采用它来实现返回类型单线程是史上最重要的升级之一具有非常重要的意义虽然语法糖非常多但可以使得我们的代码更加健壮更加优雅新特性开发代号为野马于发行优先支持编写客户端程序你可以用过简单的将你的发布成交互的添加了新的解析和在中之前只在平台实现或者中提供开启的支持算是比较有用的现在你可以在源代码中混入了这对开发原型很有有用你也可以插入自己的脚本引擎将联合绑定增加了许多特性例如支持作为数据类型更好的集成和开发者可以有更多的技巧来使用以帮助应用中的多线程分类和过滤以及添加闪屏很显然这对于主攻服务器开发的来说并没有太多吸引力绑定了不是很知名的分析工具来查看内核导出这个很厉害提供编程访问可以实现进程内编译动态产生代码拥有更好的文本呈现整体性能的提升应用程序可以和本地平台更好的集成例如访问平台的系统托盘和开始菜单将插件技术和引擎统一了起来数字签名用于创建和操纵数字签名新的方法来访问本地平台的安全服务很好的习惯质量兼容性稳定性和数百万行测试代码只是测试活动中的一个方面的快照发布已经被下载个月了每一步中的都被修复了表现比还要好新特性开发代号是海豚于发行中添加对类型的支持男先生女女士编译器在编译时先做处理仅仅有一种情况直接转成假设仅仅有一个和则直接转换为有多个先将转换为然后相应的进行处理在底层兼容曾经版本号数字字面量的改进前支持十进制八进制十六进制添加二进制表示数字中可加入分隔符中支持在数字量中间添加作为分隔符更直观如下划线仅仅能在数字中间编译时编译器自己主动删除数字中的下划线异常处理捕获多个异常子句能够同一时候捕获多个异常使用切割多个类型一个对象语句之前须要在中关闭文件数据库连接等资源中在语句中申请资源实现资源的自己主动释放资源类必须实现接口一般的文件数据库连接等均已实现该接口方法将被自己主动调用增强泛型推断之前之后新的支持值为值为值为与支持在上运行动态类型语言在字节码层面支持了方法句柄使用传统的反射使用代理类使用的新动态绑定后调用静态绑定后调用调用如果被继承还能在静态上下文寻找正确的接口重要接口更新使用计算框架提供的一个用于并行执行任务的框架是一个把大任务分割成若干个小任务最终汇总每个小任务结果后得到大任务结果的框架该框架为的并行流打下了坚实的基础新特性开发代号为老虎于发行表达式表达式也可称为闭包它是推动发布的最重要新特性允许把函数作为一个方法的参数函数作为参数传递进方法中使用表达式可以使代码变的更加简洁紧凑表达式可以说是最大的卖点她将函数式编程引入了允许把函数作为一个方法的参数或者把代码看成数据一个表达式可以由用逗号分隔的参数列表符号与函数体三部分表示例如为了使现有函数更好的支持表达式引入了函数式接口的概念函数式接口就是只有一个方法的普通接口与是函数式接口最典型的例子为此增加了一种特殊的注解接口的默认方法与静态方法我们可以在接口中定义默认方法使用关键字并提供默认的实现所有实现这个接口的类都会接受默认方法的实现除非子类提供的自己的实现例如我们还可以在接口中定义静态方法使用关键字也可以提供实现例如接口的默认方法和静态方法的引入其实可以认为引入了中抽象类的理念以后我们再也不用在每个实现类中都写重复的代码了方法引用含构造方法引用通常与表达式联合使用可以直接引用已有类或对象的方法一般有四种不同的方法引用构造器引用语法是或者更一般的要求构造器方法是没有参数静态方法引用语法是要求接受一个类型的参数特定类的任意对象方法引用它的语法是要求方法是没有参数的特定对象的方法引用它的语法是要求方法接受一个参数与不同的地方在于是在列表元素上分别调用方法而是在某个对象上调用方法将列表元素作为参数传入重复注解在中使用注解有一个限制即相同的注解在同一位置只能声明一次引入重复注解这样相同的注解在同一地方也可以声明多次重复注解机制本身需要用注解在编译器层做了优化相同注解会以集合的方式保存因此底层的原理并没有变化扩展注解的支持类型注解扩展了注解的上下文几乎可以为任何东西添加注解包括局部变量泛型类父类与接口的实现连方法的异常也能添加注解引入类来防止空指针异常类最先是由的项目引入的类实际上是个容器它可以保存类型的值或者保存使用类我们就不用显式进行空指针检查了可以通过以下实例来更好的了解类的使用允许传递为参数如果传递的参数是抛出异常判断值是否存在第一个参数值存在第二个参数值存在如果值存在返回它否则返回默认值获取值值需要存在输出第一个参数值存在第二个参数值存在是把真正的函数式编程风格引入到中其实简单来说可以把理解为当然的的灵感也是来自函数式编程她其实是一连串支持连续并行聚集操作的元素从语法上看也很像的管道或者链式编程代码写起来简洁明了非常酷帅新的受的影响提供了新的包可以用来替代和一般会用到这些类对于时间日期的改进还是非常不错的引擎允许在上开发运行应用允许与相互调用在中编码成为了类库的标准类同时还提供了对友好的编码器与解码器以下实例演示了的使用使用基本编码编码字符串基本解码原始字符串输出编码字符串基本原始字符串的空间被移除取代它的是是一次变化巨大的更新耗费了工程师大量的时间还借鉴了很多其它语言和类库我们无法在这里一一详细列举以后有机会一定给大家详细解读一下改进新特性平台模块化系统该特性是最大的一个特性起初的代号就叫最近被更改为提供了类似于框架的功能模块之间存在相互的依赖关系可以导出一个公共的并且隐藏实现的细节提供该功能的主要的动机在于减少内存的开销我们大家都知道在启动的时候至少会有的内存加载主要原因是需要加载不管其中的类是否被加载第一步整个都会被加载到内存当中去模块化可以根据模块的需要加载程序运行需要的那么是如何知道需要加载那些的呢这就是在中引入的一个新的文件我们大致来看一下一个例子模块描述器模块化的文件都包含一个额外的模块描述器在这个模块描述器中对其它模块的依赖是通过来表示的另外语句控制着内部的哪些包是可以被其它模块访问到的所有不被导出的包默认都封装在模块的里面如下是一个模块描述器的示例存在于文件中连接器新工具首次为语言提供了工具名为我们可以在命令行或者在的终端中运行该在出来的时候很多人都喊着这是要抢夺等基于动态语言的市场啊其中有人给出了一个做不到的方向那就是可以当作脚本语言可以么很明显在此之前不行也不具备动态性但是此次却让也可以像脚本语言一样来运行了主要得益于我们来看一下这个演示这是我们在这个控制台下运行我们如何运行脚本文件呢更多的诊断命令记得在中放弃了这个命令但是很快在中增加了一些新的命令比如我们要介绍到的借助它你可以很好的看到类之间的依赖关系多版本兼容我们最后要来着重介绍的这个特性对于库的维护者而言是个特别好的消息当一个新版本的出现的时候你的库用户要花费数年时间才会切换到这个新的版本这就意味着库得去向后兼容你想要支持的最老的版本许多情况下就是或者这实际上意味着未来的很长一段时间你都不能在库中运用所提供的新特性幸运的是多版本兼容功能能让你创建仅在特定版本的环境中运行库程序时选择使用的版本在上述场景中可以在中使用不过这个类使用的不是顶层的这个而是处在下面的这个这是特别为准备的版本可以运用所提供的特性和库同时在早期的诸版本中使用这个也是能运行的因为较老版本的只会看到顶层的这个类新的安全性数据报传输层安全性禁用证书引入了的算法核心库新内容轻量级的文本处理多线程新内容新增类该类提供进程的本地进程参数命令启动时间累计时间用户父进程和子进程这个类还可以监控进程的活力和破坏进程方法当进程退出时复杂未来类的异步机制可以执行一个操作包括一个可互操作的发布订阅框架以及对的增强在很早的版本中提供了这样的可以获得进程的一些信息包括甚至是用它来执行当前主机的一些命令但是请大家思考一个问题你如何获得你当前运行程序的很显然通过是无法获得的需要借助于才能得到但是在这一次的增强中你将会很轻松的得到这样的信息我们来看一个简单的例子已经获取到了的进程我们该如何将该进程优雅的停掉呢下面的代码给出了答案通过上面的一小段代码我们也发现了对断言机制同样增加了一些增强多说一些题外话我们目前的系统中运行一个严重依赖于的程序不是很稳定经常出现卡顿甚至假死假死后也不回复的问题这样就导致我们的程序也会出现卡顿如果运维人员不对其进行清理系统运行几个月之后会发现很多僵尸进程于是增加一个获取当前的功能然后判断到超过给定的时间对其进行主动杀死完全是程序内部的行为但是获取就必须借助于的动作另外杀死它也必须借助于操作系统的命令诸如这样的命令显得非常的麻烦但是的方式明显要优雅方便许多在新版的中提供了消息发布订阅的框架该框架主要是由这个类提供的他同样会在中出现并且提供了编程模式基础类新内容用少量的元素创建集合和映射的实例更容易在列表设置和映射接口上的新静态工厂方法使创建这些集合的不可变实例变得更加简单例子长期以来都是标准库最好的改进之一通过这套可以在集合上建立用于转换的申明管道在中它会变得更好接口中添加了个新的方法还有个方法的新重载方法可以让你提供一个判断条件来指定什么时候结束迭代第二个参数是一个它会在当前中的元素到达的时候返回因此这个简单的示例是向控制台打印到除了对本身的扩展和之间的结合也得到了改进现在可以通过的新方法将一个对象转换为一个可能是空的对象在组合复杂的管道时将转换为非常有用增强的弃用标记提供了另外一个看起来很小的特性那就是增强的弃用标记能够让开发人员更好地理解代码的影响以前我们只能将代码标记为并在中添加一些原因说明的文档现在新增了两个有用的属性和允许我们为提供一些提示信息便于实现性能的提升具体来讲如果你的代码需要在一个循环中等待某个条件发生的话那么可以使用让运行时环境了解到这一点私有接口方法为我们带来了接口的默认方法接口现在也可以包含行为而不仅仅是方法签名但是如果在接口上有几个默认方法代码几乎相同会发生什么情况通常您将重构这些方法调用一个可复用的私有方法但默认方法不能是私有的将复用代码创建为一个默认方法不是一个解决方案因为该辅助方法会成为公共的一部分使用您可以向接口添加私有辅助方法来解决此问题如果您使用默认方法开发那么私有接口方法可能有助于构建其实现该特性完全是为了中方法和方法服务的新内容就目前而言提供的访问功能几乎都需要依赖于但是这个类大家在写代码的时候很少使用我们一般都会选择的此次在的版本中引入了一个新的里面提供了对访问很好的支持不仅支持而且还支持以及据说性能可以超过中有新的方式来处理调用这个迟到的特性用于代替老旧的并提供对和的支持注意新的在中以所谓的孵化器模块交付也就是说这套不能保证完成不过你可以在中开始使用这套除了这个简单的请求响应模型之外还提供了新的来处理的特性比如流和服务端推送其他的改变我们都知道是从中引入的一项重要特征只要接口继承了就可以使用减少语句块的编写在中会更加的方便这一特征我们的完全不用写在中类的命运很早之前就传言会将这一个类屏蔽掉不给大家使用这次看他的官方文档貌似所有已开头的包都将不能在中使用但是提供了新的供大家使用在中提供了一个新的包叫做里面有一系列很重要的类比如和提供了类似于原子操作以及操作的功能接口封装了一系列的不同分辨率图像到一个单独对象的我么可以根据给定的矩阵获取关于的东西本人几乎不怎么接触如果有用到的朋友等出来之后自己体会使用一下吧优化使用垃圾回收器作为默认的垃圾回收器移除很多已经被过期的回收器是移除哦因为在中只是加了过期的标记本地变量类型推断什么是局部变量类型推断大家看出来了局部变量类型推断就是左边的类型直接使用定义而不用写具体的类型编译器能根据右边的表达式自动推断类型如上面的就等于字符串加强增加了一系列的字符串处理方法如以下所示判断字符串是否为空白去除首尾空格去除尾部空格去除首部空格复制字符串行数统计集合加强自开始里面为集合都添加了和方法它们两个都用来创建不可变的集合来看下它们的使用和区别示例示例示例和代码差不多为什么一个为一个为来看下它们的源码可以看出方法会先判断来源集合是不是类型的如果是就直接返回如果不是则调用创建一个新的集合示例因为用的创建的集合不属于不可变类的子类所以方法又创建了一个新的实例所以为使用和创建的集合为不可变集合不能进行添加删除替换排序等操作不然会报异常上面演示了的和方法和接口都有之前我们只能这么写之后可以直接这么写了在接口中添加了一个新的默认方法此方法允许将集合的元素传输到新创建的所需运行时类型的数组之前我们只能这么写之后可以直接这么写了新方法是现有方法的重载该方法将数组实例作为参数添加重载方法会导致次要源不兼容以前形式为的代码将始终解析为现有的方法使用新的重载方法此代码现在不明确将导致编译时错误这只是源不兼容现有的二进制文件不受影响应该更改模糊代码以将转换为所需的数组类型例如或其他一些数组类型请注意将传递给方法指定为抛出加强是中的新特性开始对增加了以下个新方法增加单个参数构造方法可为木有方法哦源码可看看增加和方法表示从开始计算当时就截止这个和上面的相反一旦不成立就开始计算重载这个方法的新重载方法可以让你提供一个判断条件来指定什么时候结束迭代这构造的是无限流开始这构造的是小于就结束的流开始加强也增加了几个非常酷的方法现在可以很方便的将一个转换成一个或者当一个空时给它一个替代的方法和方法显然都是新增的加强终于有了一个非常有用的方法可以用来将数据直接传输到这是在处理原始数据流时非常常见的一种用法如下示例重磅在及被标记的模块在被标记为正式改为模块这是开始引入的一个处理请求的的孵化该支持同步和异步而在中已经为正式可用状态你可以在包中找到这个来看一下的用法同步异步上面的可以省略默认请求方式为更多使用示例可以看这个后续有机会再做演示现在自带了这个我们以后还有必要用的工具包吗我觉得没啥必要了化繁为简一个命令编译运行源代码看下面代码编译运行在我们的认知里面要运行一个源代码必须先编译再运行两步执行动作而在未来的版本中通过一个命令就直接搞定了如以下所示移除项移除了移除了使用来替代移除了以及方法移除了属性移除了模块移除了估计是从版本就移除了还尚未移除而版本则的版本也移除了移除了从中移除之后需要自己单独下载移除了这些废弃项废弃了废弃了选项以及选项也不再需要废弃了工具及其",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-02-07 21:48:04",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{var o;0!==a&&(o=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:o+864e5*a})))},get:e=>{var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!(Date.now()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=(o,c={})=>new Promise((t,e)=>{let a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},Object.keys(c).forEach(e=>{a.setAttribute(e,c[e])}),document.head.appendChild(a)}),e.getCSS=(o,c=!1)=>new Promise((t,e)=>{let a=document.createElement("link");a.rel="stylesheet",a.href=o,c&&(a.id=c),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,c=!t&&!a&&!o,t=(void 0===e?(a?activateLightMode():t?activateDarkMode():(o||c)&&((a=(new Date).getHours())<=8||22<=a?activateDarkMode:activateLightMode)(),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})):("light"===e?activateLightMode:activateDarkMode)(),saveToLocal.get("aside-status"));void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/medium.css"><script src="https://cdn.dong4j.site/source/static/echarts.min.js"></script><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/core.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/footer.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/index-imgloaded.css"><script src="https://cdn.dong4j.site/source/static/index-imgloaded.js"></script><script src="https://cdn.dong4j.site/source/static/detect-devtools.js"></script><script defer="" src="https://cdn.dong4j.site/source/static/umami.self.js" data-host-url="https://umami.dong4j.ink:1024" data-website-id="bd4721b7-a43f-4161-83ed-51c148a7ca9d"></script><script defer="" src="https://cdn.dong4j.site/source/static/counter.js" async="" id="online-counter" interval="60000" api="https://umami.dong4j.ink:1024/counter" room="000000001"></script><script src="https://cdn.dong4j.site/source/static/confetti.browser.min.js"></script><script src="https://cdn.dong4j.site/source/static/confetti.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="司机带你开车" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="司机带你开车" type="application/rss+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box"><div class="carplay"></div></div><script>let preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout(function(){preloader.endLoading()},2e3),document.getElementById("loading-box").addEventListener("click",()=>{preloader.endLoading()}),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async="" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.ink:1024/status/services" title="服务状态"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.ink:1024?f=blog" title="服务面板"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.ink:1024/" title="导航页"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="http://chat.dong4j.ink:1024/chat" title="Mini-Chat"><img class="back-menu-item-icon" src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">司机带你开车</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://cdn.dong4j.site/source/image/wechat-pay.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://cdn.dong4j.site/source/image/alipay.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E8%BF%90%E7%AE%97%E7%AC%A6/" style="font-size:1.05rem;color:#0b673b">+运算符<sup>1</sup></a><a href="/tags/checkedexception/" style="font-size:1.05rem;color:#3e9b0a">CheckedException<sup>1</sup></a><a href="/tags/error/" style="font-size:1.05rem;color:#33b1bf">Error<sup>1</sup></a><a href="/tags/exception/" style="font-size:1.05rem;color:#b83165">Exception<sup>1</sup></a><a href="/tags/java/" style="font-size:1.05rem;color:#336726">Java<sup>48</sup></a><a href="/tags/javabean/" style="font-size:1.05rem;color:#081d9f">JavaBean<sup>1</sup></a><a href="/tags/oop/" style="font-size:1.05rem;color:#aca690">OOP<sup>1</sup></a><a href="/tags/runtimeexception/" style="font-size:1.05rem;color:#b44b76">RuntimeException<sup>1</sup></a><a href="/tags/throwable/" style="font-size:1.05rem;color:#0821a4">Throwable<sup>1</sup></a><a href="/tags/final/" style="font-size:1.05rem;color:#2fc1b6">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:1.05rem;color:#28b07b">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:1.05rem;color:#ae771e">finally<sup>2</sup></a><a href="/tags/getter/" style="font-size:1.05rem;color:#3d7b5d">getter<sup>1</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:1.05rem;color:#535353">new关键字<sup>1</sup></a><a href="/tags/setter/" style="font-size:1.05rem;color:#746b4e">setter<sup>1</sup></a><a href="/tags/static/" style="font-size:1.05rem;color:#541232">static<sup>1</sup></a><a href="/tags/super/" style="font-size:1.05rem;color:#88861e">super<sup>2</sup></a><a href="/tags/this/" style="font-size:1.05rem;color:#9339c2">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:1.05rem;color:#9483b3">二进制<sup>1</sup></a><a href="/tags/%E5%B0%81%E8%A3%85/" style="font-size:1.05rem;color:#1b420f">封装<sup>3</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#45c53b">异常处理<sup>3</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" style="font-size:1.05rem;color:#1d04c3">抽象类<sup>1</sup></a><a href="/tags/%E6%8E%A5%E5%8F%A3/" style="font-size:1.05rem;color:#041328">接口<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:1.05rem;color:#4096a9">数据类型<sup>4</sup></a><a href="/tags/%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD/" style="font-size:1.05rem;color:#45905a">方法重载<sup>1</sup></a><a href="/tags/%E6%9D%A1%E4%BB%B6%E8%BF%90%E7%AE%97%E7%AC%A6/" style="font-size:1.05rem;color:#15bea8">条件运算符<sup>1</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:1.05rem;color:#459d99">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:1.05rem;color:#410bba">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:1.05rem;color:#9c121a">算法<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size:1.05rem;color:#777091">类型转换<sup>3</sup></a><a href="/tags/%E7%BB%A7%E6%89%BF/" style="font-size:1.05rem;color:#6a5bba">继承<sup>2</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:1.05rem;color:#116aa7">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:1.05rem;color:#ba377b">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:1.05rem;color:#8821c4">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:1.05rem;color:#b90a07">设计模式<sup>3</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:1.05rem;color:#380340">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:1.05rem;color:#39ab64">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:1.05rem;color:#62a971">错误处理<sup>2</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:1.05rem;color:#9945bc">面向对象<sup>6</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/" style="font-size:1.05rem;color:#3051ad">面向对象编程<sup>4</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);" rel="external nofollow noreferrer"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%96%B0%E6%97%B6%E4%BB%A3%E7%A0%81%E5%86%9C/" itemprop="url">新时代码农</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/arrays/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>Arrays</span></a><a class="article-meta__tags" href="/tags/%E6%B3%9B%E5%9E%8B/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>泛型</span></a><a class="article-meta__tags" href="/tags/%E6%B3%A8%E8%A7%A3/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>注解</span></a><a class="article-meta__tags" href="/tags/java5/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>Java5</span></a><a class="article-meta__tags" href="/tags/%E6%9E%9A%E4%B8%BE/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>枚举</span></a><a class="article-meta__tags" href="/tags/%E8%87%AA%E5%8A%A8%E6%8B%86%E7%AE%B1%E8%A3%85%E7%AE%B1/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>自动拆箱装箱</span></a><a class="article-meta__tags" href="/tags/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>可变参数</span></a><a class="article-meta__tags" href="/tags/%E5%A2%9E%E5%BC%BAfor%E5%BE%AA%E7%8E%AF/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>增强for循环</span></a><a class="article-meta__tags" href="/tags/%E9%9D%99%E6%80%81%E5%AF%BC%E5%85%A5/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>静态导入</span></a><a class="article-meta__tags" href="/tags/print%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E5%8C%96/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>print输出格式化</span></a><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91%E6%94%AF%E6%8C%81%EF%BC%88juc%EF%BC%89/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>并发支持（JUC）</span></a><a class="article-meta__tags" href="/tags/queue/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>Queue</span></a><a class="article-meta__tags" href="/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8stringbuilder/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>线程安全StringBuilder</span></a><a class="article-meta__tags" href="/tags/java10/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>Java10</span></a><a class="article-meta__tags" href="/tags/%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>本地变量类型推断</span></a><a class="article-meta__tags" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>字符串加强</span></a><a class="article-meta__tags" href="/tags/%E9%9B%86%E5%90%88%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>集合加强</span></a><a class="article-meta__tags" href="/tags/stream%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>Stream加强</span></a><a class="article-meta__tags" href="/tags/optional%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>Optional加强</span></a><a class="article-meta__tags" href="/tags/inputstream%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>InputStream加强</span></a><a class="article-meta__tags" href="/tags/httpclientapi/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>HTTPClientAPI</span></a><a class="article-meta__tags" href="/tags/%E5%8C%96%E7%B9%81%E4%B8%BA%E7%AE%80%E7%9A%84%E5%91%BD%E4%BB%A4%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C%E6%BA%90%E4%BB%A3%E7%A0%81/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>化繁为简的命令编译运行源代码</span></a></span></div></div><h1 class="post-title" itemprop="name headline">JDK 从5 到 10 的新特性介绍</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2019-05-15T16:00:00.000Z" title="发表于 2019-05-16 00:00:00">2019-05-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-02-07T13:48:04.568Z" title="更新于 2025-02-07 21:48:04">2025-02-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">10k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>41分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="JDK 从5 到 10 的新特性介绍"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/9c7f49a2.html#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://api.dong4j.ink:1024/cover?hf76jw4o"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="fa-regular fa-robot fa-fade"></i><div class="ai-title-text">摘要助手</div><div id="ai-Toggle">切换</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">SummaryGPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item">前往订阅 💥</div><div class="ai-btn-item" id="go-comment">前往评论 💬</div><div class="ai-btn-item" id="go-tianli-blog">👀 部署教程</div></div><script data-pjax="" src="https://cdn.dong4j.site/source/static/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope="" itemtype="https://blog.dong4j.site/posts/9c7f49a2.html"><header><a class="post-meta-categories" href="/categories/%E6%96%B0%E6%97%B6%E4%BB%A3%E7%A0%81%E5%86%9C/" itemprop="url">新时代码农</a><a href="/tags/arrays/" tabindex="-1" itemprop="url">Arrays</a><a href="/tags/%E6%B3%9B%E5%9E%8B/" tabindex="-1" itemprop="url">泛型</a><a href="/tags/%E6%B3%A8%E8%A7%A3/" tabindex="-1" itemprop="url">注解</a><a href="/tags/java5/" tabindex="-1" itemprop="url">Java5</a><a href="/tags/%E6%9E%9A%E4%B8%BE/" tabindex="-1" itemprop="url">枚举</a><a href="/tags/%E8%87%AA%E5%8A%A8%E6%8B%86%E7%AE%B1%E8%A3%85%E7%AE%B1/" tabindex="-1" itemprop="url">自动拆箱装箱</a><a href="/tags/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0/" tabindex="-1" itemprop="url">可变参数</a><a href="/tags/%E5%A2%9E%E5%BC%BAfor%E5%BE%AA%E7%8E%AF/" tabindex="-1" itemprop="url">增强for循环</a><a href="/tags/%E9%9D%99%E6%80%81%E5%AF%BC%E5%85%A5/" tabindex="-1" itemprop="url">静态导入</a><a href="/tags/print%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E5%8C%96/" tabindex="-1" itemprop="url">print输出格式化</a><a href="/tags/%E5%B9%B6%E5%8F%91%E6%94%AF%E6%8C%81%EF%BC%88juc%EF%BC%89/" tabindex="-1" itemprop="url">并发支持（JUC）</a><a href="/tags/queue/" tabindex="-1" itemprop="url">Queue</a><a href="/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8stringbuilder/" tabindex="-1" itemprop="url">线程安全StringBuilder</a><a href="/tags/java10/" tabindex="-1" itemprop="url">Java10</a><a href="/tags/%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD/" tabindex="-1" itemprop="url">本地变量类型推断</a><a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url">字符串加强</a><a href="/tags/%E9%9B%86%E5%90%88%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url">集合加强</a><a href="/tags/stream%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url">Stream加强</a><a href="/tags/optional%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url">Optional加强</a><a href="/tags/inputstream%E5%8A%A0%E5%BC%BA/" tabindex="-1" itemprop="url">InputStream加强</a><a href="/tags/httpclientapi/" tabindex="-1" itemprop="url">HTTPClientAPI</a><a href="/tags/%E5%8C%96%E7%B9%81%E4%B8%BA%E7%AE%80%E7%9A%84%E5%91%BD%E4%BB%A4%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C%E6%BA%90%E4%BB%A3%E7%A0%81/" tabindex="-1" itemprop="url">化繁为简的命令编译运行源代码</a><h1 id="CrawlerTitle" itemprop="name headline">JDK 从5 到 10 的新特性介绍</h1><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">dong4j</span><time itemprop="dateCreated datePublished" datetime="2019-05-15T16:00:00.000Z" title="发表于 2019-05-16 00:00:00">2019-05-16</time><time itemprop="dateCreated datePublished" datetime="2025-02-07T13:48:04.568Z" title="更新于 2025-02-07 21:48:04">2025-02-07</time></header><meta name="referrer" content="no-referrer"><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?spm=u7aq77xp" alt="random-pic-api"></p><h2 id="JDK5-新特性"><a href="#JDK5-新特性" class="headerlink" title="JDK5 新特性"></a>JDK5 新特性</h2><p>Java5 开发代号为 Tiger(老虎),于 2004-09-30 发行</p><h3 id="1、泛型"><a href="#1、泛型" class="headerlink" title="1、泛型"></a>1、泛型</h3><p>所谓类型擦除指的就是 Java 源码中的范型信息只允许停留在编译前期，而编译后的字节码文件中将不再保留任何的范型信息。也就是说，范型信息在编译时将会被全部删除，其中范型类型的类型参数则会被替换为 Object 类型，并在实际使用时强制转换为指定的目标数据类型。而 C++中的模板则会在编译时将模板类型中的类型参数根据所传递的指定数据类型生成相对应的目标代码。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Integer, Integer&gt; squares = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Integer&gt;();</span><br></pre></td></tr></tbody></table></figure><ul><li>通配符类型：避免 unchecked 警告，问号表示任何类型都可以接受</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printList</span><span class="params">(List&lt;?&gt; list, PrintStream out)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="keyword">for</span> (Iterator&lt;?&gt; i = list.iterator(); i.hasNext(); ) {</span><br><span class="line">      out.println(i.next().toString());</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><ul><li>限制类型</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;A <span class="keyword">extends</span> <span class="title class_">Number</span>&gt; <span class="type">double</span> <span class="title function_">sum</span><span class="params">(Box&lt;A&gt; box1,Box&lt;A&gt; box2)</span>{</span><br><span class="line">    <span class="type">double</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (Iterator&lt;A&gt; i = box1.contents.iterator(); i.hasNext(); ) {</span><br><span class="line">      total = total + i.next().doubleValue();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (Iterator&lt;A&gt; i = box2.contents.iterator(); i.hasNext(); ) {</span><br><span class="line">      total = total + i.next().doubleValue();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><h3 id="2、枚举"><a href="#2、枚举" class="headerlink" title="2、枚举"></a>2、枚举</h3><ul><li>EnumMap</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEnumMap</span><span class="params">(PrintStream out)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// Create a map with the key and a String message</span></span><br><span class="line">    EnumMap&lt;AntStatus, String&gt; antMessages =</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">EnumMap</span>&lt;AntStatus, String&gt;(AntStatus.class);</span><br><span class="line">    <span class="comment">// Initialize the map</span></span><br><span class="line">    antMessages.put(AntStatus.INITIALIZING, <span class="string">"Initializing Ant..."</span>);</span><br><span class="line">    antMessages.put(AntStatus.COMPILING,    <span class="string">"Compiling Java classes..."</span>);</span><br><span class="line">    antMessages.put(AntStatus.COPYING,      <span class="string">"Copying files..."</span>);</span><br><span class="line">    antMessages.put(AntStatus.JARRING,      <span class="string">"JARring up files..."</span>);</span><br><span class="line">    antMessages.put(AntStatus.ZIPPING,      <span class="string">"ZIPping up files..."</span>);</span><br><span class="line">    antMessages.put(AntStatus.DONE,         <span class="string">"Build complete."</span>);</span><br><span class="line">    antMessages.put(AntStatus.ERROR,        <span class="string">"Error occurred."</span>);</span><br><span class="line">    <span class="comment">// Iterate and print messages</span></span><br><span class="line">    <span class="keyword">for</span> (AntStatus status : AntStatus.values() ) {</span><br><span class="line">      out.println(<span class="string">"For status "</span> + status + <span class="string">", message is: "</span> +</span><br><span class="line">                  antMessages.get(status));</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>switch 枚举</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">switch</span>(<span class="built_in">this</span>) {</span><br><span class="line">      <span class="keyword">case</span> ROSEWOOD:      <span class="keyword">return</span> <span class="string">"Rosewood back and sides"</span>;</span><br><span class="line">      <span class="keyword">case</span> MAHOGANY:      <span class="keyword">return</span> <span class="string">"Mahogany back and sides"</span>;</span><br><span class="line">      <span class="keyword">case</span> ZIRICOTE:      <span class="keyword">return</span> <span class="string">"Ziricote back and sides"</span>;</span><br><span class="line">      <span class="keyword">case</span> SPRUCE:        <span class="keyword">return</span> <span class="string">"Sitka Spruce top"</span>;</span><br><span class="line">      <span class="keyword">case</span> CEDAR:         <span class="keyword">return</span> <span class="string">"Wester Red Cedar top"</span>;</span><br><span class="line">      <span class="keyword">case</span> AB_ROSETTE:    <span class="keyword">return</span> <span class="string">"Abalone rosette"</span>;</span><br><span class="line">      <span class="keyword">case</span> AB_TOP_BORDER: <span class="keyword">return</span> <span class="string">"Abalone top border"</span>;</span><br><span class="line">      <span class="keyword">case</span> IL_DIAMONDS:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Diamonds and squares fretboard inlay"</span>;</span><br><span class="line">      <span class="keyword">case</span> IL_DOTS:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Small dots fretboard inlay"</span>;</span><br><span class="line">      <span class="keyword">default</span>: <span class="keyword">return</span> <span class="string">"Unknown feature"</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="3、自动拆箱-装箱"><a href="#3、自动拆箱-装箱" class="headerlink" title="3、自动拆箱/装箱"></a>3、自动拆箱/装箱</h2><p>将 primitive 类型转换成对应的 wrapper 类型：Boolean、Byte、Short、Character、Integer、Long、Float、Double</p><h2 id="4、可变参数"><a href="#4、可变参数" class="headerlink" title="4、可变参数"></a>4、可变参数</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">print</span><span class="params">(Object... values)</span> {</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (Object o : values) {</span><br><span class="line">      sb.append(o.toString())</span><br><span class="line">        .append(<span class="string">" "</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">  }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="5、注解"><a href="#5、注解" class="headerlink" title="5、注解"></a>5、注解</h2><ul><li>Inherited 表示该注解是否对类的子类继承的方法等起作用</li><li>Target 类型</li><li>Rentation 表示 annotation 是否保留在编译过的 class 文件中还是在运行时可读。</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> InProgress { }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="6、增强-for-循环-for-in"><a href="#6、增强-for-循环-for-in" class="headerlink" title="6、增强 for 循环 for/in"></a>6、增强 for 循环 for/in</h2><p>for/in 循环办不到的事情：<br>（1）遍历同时获取 index<br>（2）集合逗号拼接时去掉最后一个<br>（3）遍历的同时删除元素</p><h2 id="7-静态导入"><a href="#7-静态导入" class="headerlink" title="7. 静态导入"></a>7. 静态导入</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.err;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.out;</span><br><span class="line"></span><br><span class="line">err.println(msg);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="8-print-输出格式化"><a href="#8-print-输出格式化" class="headerlink" title="8. print 输出格式化"></a>8. print 输出格式化</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"Line %d: %s%n"</span>, i++, line);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="9-并发支持（JUC）"><a href="#9-并发支持（JUC）" class="headerlink" title="9. 并发支持（JUC）"></a>9. 并发支持（JUC）</h2><ul><li>线程池</li><li>uncaught exception（可以抓住多线程内的异常）</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleThreadExceptionHandler</span> <span class="keyword">implements</span></span><br><span class="line">    <span class="title class_">Thread</span>.UncaughtExceptionHandler {</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">uncaughtException</span><span class="params">(Thread t, Throwable e)</span> {</span><br><span class="line">    System.err.printf(<span class="string">"%s: %s at line %d of %s%n"</span>,</span><br><span class="line">        t.getName(),</span><br><span class="line">        e.toString(),</span><br><span class="line">        e.getStackTrace()[<span class="number">0</span>].getLineNumber(),</span><br><span class="line">        e.getStackTrace()[<span class="number">0</span>].getFileName());</span><br><span class="line">  }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>blocking queue(BlockingQueue)</li><li>JUC 类库</li></ul><h2 id="10-Arrays、Queue、线程安全-StringBuilder"><a href="#10-Arrays、Queue、线程安全-StringBuilder" class="headerlink" title="10. Arrays、Queue、线程安全 StringBuilder"></a>10. Arrays、Queue、线程安全 StringBuilder</h2><ul><li>Arrays 工具类</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Arrays.sort(myArray);</span><br><span class="line">Arrays.toString(myArray)</span><br><span class="line">Arrays.binarySearch(myArray, <span class="number">98</span>)</span><br><span class="line">Arrays.deepToString(ticTacToe)</span><br><span class="line">Arrays.deepEquals(ticTacToe, ticTacToe3)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>Queue(Queue 接口与 List、Set 同一级别，都是继承了 Collection 接口。LinkedList 实现了 Deque 接 口。)<br>避开集合的 add/remove 操作，使用 offer、poll 操作（不抛异常）</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Queue</span> <span class="variable">q</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>(); <span class="comment">//采用它来实现queue</span></span><br></pre></td></tr></tbody></table></figure><ul><li>Override 返回类型</li><li>单线程 StringBuilder</li><li>java.lang.instrument</li></ul><p>JDK5 是 java 史上最重要的升级之一，具有非常重要的意义，虽然语法糖非常多。但可以使得我们的代码更加健壮，更加优雅。</p><h2 id="JDK6-新特性"><a href="#JDK6-新特性" class="headerlink" title="JDK6 新特性"></a>JDK6 新特性</h2><p>Java6 开发代号为 Mustang(野马),于 2006-12-11 发行.</p><p>1、Web Services<br>优先支持编写 XML web service 客户端程序。你可以用过简单的 annotaion 将你的 API 发布成.NET 交互的 web services. Mustang 添加了新的解析和 XML 在 Java object-mapping APIs 中, 之前只在 Java EE 平台实现或者 Java Web Services Pack 中提供.</p><p>2、Scripting（开启 JS 的支持，算是比较有用的）<br>现在你可以在 Java 源代码中混入 JavaScript 了，这对开发原型很有有用，你也可以插入自己的脚本引擎。</p><p>3、Database<br>Mustang 将联合绑定 Java DB (Apache Derby). JDBC 4.0 增加了许多特性例如支持 XML 作为 SQL 数据类型，更好的集成 Binary Large OBjects (BLOBs) 和 Character Large OBjects (CLOBs) .</p><p>4、More Desktop APIs<br>GUI 开发者可以有更多的技巧来使用 SwingWorker utility ，以帮助 GUI 应用中的多线程。, JTable 分类和过滤，以及添加 splash 闪屏。</p><p>很显然，这对于主攻服务器开发的 Java 来说，并没有太多吸引力</p><p>5、Monitoring and Management.<br>绑定了不是很知名的 memory-heap 分析工具 Jhat 来查看内核导出。</p><p>6、Compiler Access（这个很厉害）<br>compiler API 提供编程访问 javac，可以实现进程内编译，动态产生 Java 代码。</p><p>7、Pluggable Annotation<br>8、Desktop Deployment.<br>Swing 拥有更好的 look-and-feel , LCD 文本呈现, 整体 GUI 性能的提升。Java 应用程序可以和本地平台更好的集成，例如访问平台的系统托盘和开始菜单。Mustang 将 Java 插件技术和 Java Web Start 引擎统一了起来。</p><p>9、Security<br>XML-数字签名(XML-DSIG) APIs 用于创建和操纵数字签名); 新的方法来访问本地平台的安全服务</p><p>10、The -ilities（很好的习惯）<br>质量，兼容性，稳定性。 80,000 test cases 和数百万行测试代码(只是测试活动中的一个方面). Mustang 的快照发布已经被下载 15 个月了，每一步中的 Bug 都被修复了，表现比 J2SE 5 还要好。</p><h2 id="JDK7-新特性"><a href="#JDK7-新特性" class="headerlink" title="JDK7 新特性"></a>JDK7 新特性</h2><p>Java7 开发代号是 Dolphin(海豚),于 2011-07-28 发行.</p><h3 id="1-switch-中添加对-String-类型的支持"><a href="#1-switch-中添加对-String-类型的支持" class="headerlink" title="1. switch 中添加对 String 类型的支持"></a>1. switch 中添加对 String 类型的支持</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">generate</span><span class="params">(String name, String gender)</span> {</span><br><span class="line">       <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> <span class="string">""</span>;</span><br><span class="line">       <span class="keyword">switch</span> (gender) {</span><br><span class="line">           <span class="keyword">case</span> <span class="string">"男"</span>:</span><br><span class="line">               title = name + <span class="string">" 先生"</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> <span class="string">"女"</span>:</span><br><span class="line">               title = name + <span class="string">" 女士"</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">default</span>:</span><br><span class="line">               title = name;</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">return</span> title;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>编译器在编译时先做处理：<br>①case 仅仅有一种情况。直接转成 if。<br>② 假设仅仅有一个 case 和 default，则直接转换为 if…else…。<br>③ 有多个 case。先将 String 转换为 hashCode，然后相应的进行处理，JavaCode 在底层兼容 Java7 曾经版本号。</p><h3 id="2-数字字面量的改进"><a href="#2-数字字面量的改进" class="headerlink" title="2. 数字字面量的改进"></a>2. 数字字面量的改进</h3><p>Java7 前支持十进制（123）、八进制（0123）、十六进制（0X12AB）<br>Java7 添加二进制表示（0B11110001、0b11110001）<br>数字中可加入分隔符<br>Java7 中支持在数字量中间添加 <code>_</code> 作为分隔符。更直观，如（12_123_456）。下划线仅仅能在数字中间。编译时编译器自己主动删除数字中的下划线。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">one_million</span> <span class="operator">=</span> <span class="number">1_000_000</span>;</span><br></pre></td></tr></tbody></table></figure><h3 id="3-异常处理（捕获多个异常）-try-with-resources"><a href="#3-异常处理（捕获多个异常）-try-with-resources" class="headerlink" title="3. 异常处理（捕获多个异常） try-with-resources"></a>3. 异常处理（捕获多个异常） try-with-resources</h3><h4 id="catch-子句能够同一时候捕获多个异常"><a href="#catch-子句能够同一时候捕获多个异常" class="headerlink" title="catch 子句能够同一时候捕获多个异常"></a>catch 子句能够同一时候捕获多个异常</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSequence</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        Integer.parseInt(<span class="string">"Hello"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">catch</span> (NumberFormatException | RuntimeException e) {  <span class="comment">//使用'|'切割，多个类型，一个对象e</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="try-with-resources-语句"><a href="#try-with-resources-语句" class="headerlink" title="try-with-resources 语句"></a>try-with-resources 语句</h4><p>Java7 之前须要在 finally 中关闭 socket、文件、数据库连接等资源；<br>Java7 中在 try 语句中申请资源，实现资源的自己主动释放（资源类必须实现 java.lang.AutoCloseable 接口，一般的文件、数据库连接等均已实现该接口，close 方法将被自己主动调用）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">(String filename)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">     <span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(filename))) {</span><br><span class="line">         <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">while</span>((line=reader.readLine())!=<span class="literal">null</span>){</span><br><span class="line">    builder.append(line);</span><br><span class="line">    builder.append(String.format(<span class="string">"%n"</span>));</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> builder.toString();</span><br><span class="line">     }</span><br><span class="line"> }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="4-增强泛型推断"><a href="#4-增强泛型推断" class="headerlink" title="4. 增强泛型推断"></a>4. 增强泛型推断</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 之前</span></span><br><span class="line">Map&lt;String, List&lt;String&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, List&lt;String&gt;&gt;();</span><br><span class="line"><span class="comment">// 之后</span></span><br><span class="line">Map&lt;String, List&lt;String&gt;&gt; anagrams = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="5-NIO2-0（AIO）新-IO-的支持"><a href="#5-NIO2-0（AIO）新-IO-的支持" class="headerlink" title="5. NIO2.0（AIO）新 IO 的支持"></a>5. NIO2.0（AIO）新 IO 的支持</h3><ul><li>bytebuffer</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ByteBufferUsage</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">useByteBuffer</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">32</span>);</span><br><span class="line">        buffer.put((<span class="type">byte</span>)<span class="number">1</span>);</span><br><span class="line">        buffer.put(<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">3</span>]);</span><br><span class="line">        buffer.putChar(<span class="string">'A'</span>);</span><br><span class="line">        buffer.putFloat(<span class="number">0.0f</span>);</span><br><span class="line">        buffer.putLong(<span class="number">10</span>, <span class="number">100L</span>);</span><br><span class="line">        System.out.println(buffer.getChar(<span class="number">4</span>));</span><br><span class="line">        System.out.println(buffer.remaining());</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">byteOrder</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">4</span>);</span><br><span class="line">        buffer.putInt(<span class="number">1</span>);</span><br><span class="line">        buffer.order(ByteOrder.LITTLE_ENDIAN);</span><br><span class="line">        buffer.getInt(<span class="number">0</span>); <span class="comment">//值为16777216</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">compact</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">32</span>);</span><br><span class="line">        buffer.put(<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">16</span>]);</span><br><span class="line">        buffer.flip();</span><br><span class="line">        buffer.getInt();</span><br><span class="line">        buffer.compact();</span><br><span class="line">        <span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> buffer.position();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">viewBuffer</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">32</span>);</span><br><span class="line">        buffer.putInt(<span class="number">1</span>);</span><br><span class="line">        <span class="type">IntBuffer</span> <span class="variable">intBuffer</span> <span class="operator">=</span> buffer.asIntBuffer();</span><br><span class="line">        intBuffer.put(<span class="number">2</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> buffer.getInt(); <span class="comment">//值为2</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args the command line arguments</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ByteBufferUsage</span> <span class="variable">bbu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteBufferUsage</span>();</span><br><span class="line">        bbu.useByteBuffer();</span><br><span class="line">        bbu.byteOrder();</span><br><span class="line">        bbu.compact();</span><br><span class="line">        bbu.viewBuffer();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>filechannel</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileChannelUsage</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">openAndWrite</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">FileChannel</span> <span class="variable">channel</span> <span class="operator">=</span> FileChannel.open(Paths.get(<span class="string">"my.txt"</span>), StandardOpenOption.CREATE, StandardOpenOption.WRITE);</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">64</span>);</span><br><span class="line">        buffer.putChar(<span class="string">'A'</span>).flip();</span><br><span class="line">        channel.write(buffer);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readWriteAbsolute</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">FileChannel</span> <span class="variable">channel</span> <span class="operator">=</span> FileChannel.open(Paths.get(<span class="string">"absolute.txt"</span>), StandardOpenOption.READ, StandardOpenOption.CREATE, StandardOpenOption.WRITE);</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">writeBuffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">4</span>).putChar(<span class="string">'A'</span>).putChar(<span class="string">'B'</span>);</span><br><span class="line">        writeBuffer.flip();</span><br><span class="line">        channel.write(writeBuffer, <span class="number">1024</span>);</span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">readBuffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">2</span>);</span><br><span class="line">        channel.read(readBuffer, <span class="number">1026</span>);</span><br><span class="line">        readBuffer.flip();</span><br><span class="line">        <span class="type">char</span> <span class="variable">result</span> <span class="operator">=</span> readBuffer.getChar(); <span class="comment">//值为'B'</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args the command line arguments</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">FileChannelUsage</span> <span class="variable">fcu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileChannelUsage</span>();</span><br><span class="line">        fcu.openAndWrite();</span><br><span class="line">        fcu.readWriteAbsolute();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="6-JSR292-与-InvokeDynamic"><a href="#6-JSR292-与-InvokeDynamic" class="headerlink" title="6. JSR292 与 InvokeDynamic"></a>6. JSR292 与 InvokeDynamic</h3><p>JSR 292: Supporting Dynamically Typed Languages on the JavaTM Platform，支持在 JVM 上运行动态类型语言。在字节码层面支持了 InvokeDynamic。</p><ul><li>方法句柄 MethodHandle</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolManager</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ScheduledExecutorService</span> <span class="variable">stpe</span> <span class="operator">=</span> Executors</span><br><span class="line">            .newScheduledThreadPool(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BlockingQueue&lt;WorkUnit&lt;String&gt;&gt; lbq;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ThreadPoolManager</span><span class="params">(BlockingQueue&lt;WorkUnit&lt;String&gt;&gt; lbq_)</span> {</span><br><span class="line">        lbq = lbq_;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> ScheduledFuture&lt;?&gt; run(QueueReaderTask msgReader) {</span><br><span class="line">        msgReader.setQueue(lbq);</span><br><span class="line">        <span class="keyword">return</span> stpe.scheduleAtFixedRate(msgReader, <span class="number">10</span>, <span class="number">10</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cancel</span><span class="params">(<span class="keyword">final</span> ScheduledFuture&lt;?&gt; hndl)</span> {</span><br><span class="line">        stpe.schedule(<span class="keyword">new</span> <span class="title class_">Runnable</span>() {</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">                hndl.cancel(<span class="literal">true</span>);</span><br><span class="line">            }</span><br><span class="line">        }, <span class="number">10</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用传统的反射api</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Method <span class="title function_">makeReflective</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">Method</span> <span class="variable">meth</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Class&lt;?&gt;[] argTypes = <span class="keyword">new</span> <span class="title class_">Class</span>[]{ScheduledFuture.class};</span><br><span class="line">            meth = ThreadPoolManager.class.getDeclaredMethod(<span class="string">"cancel"</span>, argTypes);</span><br><span class="line">            meth.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (IllegalArgumentException | NoSuchMethodException</span><br><span class="line">                | SecurityException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> meth;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用代理类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> CancelProxy <span class="title function_">makeProxy</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CancelProxy</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用Java7的新api，MethodHandle</span></span><br><span class="line"><span class="comment">     * invoke virtual 动态绑定后调用 obj.xxx</span></span><br><span class="line"><span class="comment">     * invoke special 静态绑定后调用 super.xxx</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> MethodHandle <span class="title function_">makeMh</span><span class="params">()</span> {</span><br><span class="line">        MethodHandle mh;</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">desc</span> <span class="operator">=</span> MethodType.methodType(<span class="keyword">void</span>.class, ScheduledFuture.class);</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            mh = MethodHandles.lookup().findVirtual(ThreadPoolManager.class,</span><br><span class="line">                    <span class="string">"cancel"</span>, desc);</span><br><span class="line">        } <span class="keyword">catch</span> (NoSuchMethodException | IllegalAccessException e) {</span><br><span class="line">            <span class="keyword">throw</span> (AssertionError) <span class="keyword">new</span> <span class="title class_">AssertionError</span>().initCause(e);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> mh;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CancelProxy</span> {</span><br><span class="line">        <span class="keyword">private</span> <span class="title function_">CancelProxy</span><span class="params">()</span> {</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invoke</span><span class="params">(ThreadPoolManager mae_, ScheduledFuture&lt;?&gt; hndl_)</span> {</span><br><span class="line">            mae_.cancel(hndl_);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>调用 invoke</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolMain</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果被继承，还能在静态上下文寻找正确的class</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());</span><br><span class="line">    <span class="keyword">private</span> ThreadPoolManager manager;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ThreadPoolMain</span> <span class="variable">main</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolMain</span>();</span><br><span class="line">        main.run();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cancelUsingReflection</span><span class="params">(ScheduledFuture&lt;?&gt; hndl)</span> {</span><br><span class="line">        <span class="type">Method</span> <span class="variable">meth</span> <span class="operator">=</span> manager.makeReflective();</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            System.out.println(<span class="string">"With Reflection"</span>);</span><br><span class="line">            meth.invoke(hndl);</span><br><span class="line">        } <span class="keyword">catch</span> (IllegalAccessException | IllegalArgumentException</span><br><span class="line">                | InvocationTargetException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cancelUsingProxy</span><span class="params">(ScheduledFuture&lt;?&gt; hndl)</span> {</span><br><span class="line">        <span class="type">CancelProxy</span> <span class="variable">proxy</span> <span class="operator">=</span> manager.makeProxy();</span><br><span class="line">        System.out.println(<span class="string">"With Proxy"</span>);</span><br><span class="line">        proxy.invoke(manager, hndl);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cancelUsingMH</span><span class="params">(ScheduledFuture&lt;?&gt; hndl)</span> {</span><br><span class="line">        <span class="type">MethodHandle</span> <span class="variable">mh</span> <span class="operator">=</span> manager.makeMh();</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            System.out.println(<span class="string">"With Method Handle"</span>);</span><br><span class="line">            mh.invokeExact(manager, hndl);</span><br><span class="line">        } <span class="keyword">catch</span> (Throwable e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">        BlockingQueue&lt;WorkUnit&lt;String&gt;&gt; lbq = <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;();</span><br><span class="line">        manager = <span class="keyword">new</span> <span class="title class_">ThreadPoolManager</span>(lbq);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">QueueReaderTask</span> <span class="variable">msgReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueueReaderTask</span>(<span class="number">100</span>) {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAction</span><span class="params">(String msg_)</span> {</span><br><span class="line">                <span class="keyword">if</span> (msg_ != <span class="literal">null</span>)</span><br><span class="line">                    System.out.println(<span class="string">"Msg recvd: "</span> + msg_);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">        ScheduledFuture&lt;?&gt; hndl = manager.run(msgReader);</span><br><span class="line">        cancelUsingMH(hndl);</span><br><span class="line">        <span class="comment">// cancelUsingProxy(hndl);</span></span><br><span class="line">        <span class="comment">// cancelUsingReflection(hndl);</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="7-Path-接口-重要接口更新"><a href="#7-Path-接口-重要接口更新" class="headerlink" title="7. Path 接口(重要接口更新)"></a>7. Path 接口(重要接口更新)</h3><ul><li>Path</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PathUsage</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">usePath</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">Path</span> <span class="variable">path1</span> <span class="operator">=</span> Paths.get(<span class="string">"folder1"</span>, <span class="string">"sub1"</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">path2</span> <span class="operator">=</span> Paths.get(<span class="string">"folder2"</span>, <span class="string">"sub2"</span>);</span><br><span class="line">        path1.resolve(path2); <span class="comment">//folder1\sub1\folder2\sub2</span></span><br><span class="line">        path1.resolveSibling(path2); <span class="comment">//folder1\folder2\sub2</span></span><br><span class="line">        path1.relativize(path2); <span class="comment">//..\..\folder2\sub2</span></span><br><span class="line">        path1.subpath(<span class="number">0</span>, <span class="number">1</span>); <span class="comment">//folder1</span></span><br><span class="line">        path1.startsWith(path2); <span class="comment">//false</span></span><br><span class="line">        path1.endsWith(path2); <span class="comment">//false</span></span><br><span class="line">        Paths.get(<span class="string">"folder1/./../folder2/my.text"</span>).normalize(); <span class="comment">//folder2\my.text</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args the command line arguments</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">PathUsage</span> <span class="variable">usage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PathUsage</span>();</span><br><span class="line">        usage.usePath();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>DirectoryStream</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListFile</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listFiles</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(<span class="string">""</span>);</span><br><span class="line">        <span class="keyword">try</span> (DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(path, <span class="string">"*.*"</span>)) {</span><br><span class="line">            <span class="keyword">for</span> (Path entry: stream) {</span><br><span class="line">                <span class="comment">//使用entry</span></span><br><span class="line">                System.out.println(entry);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args the command line arguments</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">ListFile</span> <span class="variable">listFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListFile</span>();</span><br><span class="line">        listFile.listFiles();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>Files</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FilesUtils</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">manipulateFiles</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">Path</span> <span class="variable">newFile</span> <span class="operator">=</span> Files.createFile(Paths.get(<span class="string">"new.txt"</span>).toAbsolutePath());</span><br><span class="line">        List&lt;String&gt; content = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        content.add(<span class="string">"Hello"</span>);</span><br><span class="line">        content.add(<span class="string">"World"</span>);</span><br><span class="line">        Files.write(newFile, content, Charset.forName(<span class="string">"UTF-8"</span>));</span><br><span class="line">        Files.size(newFile);</span><br><span class="line">        <span class="type">byte</span>[] bytes = Files.readAllBytes(newFile);</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        Files.copy(newFile, output);</span><br><span class="line">        Files.delete(newFile);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args the command line arguments</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">FilesUtils</span> <span class="variable">fu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilesUtils</span>();</span><br><span class="line">        fu.manipulateFiles();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li>WatchService</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WatchAndCalculate</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">calculate</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException {</span><br><span class="line">        <span class="type">WatchService</span> <span class="variable">service</span> <span class="operator">=</span> FileSystems.getDefault().newWatchService();</span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(<span class="string">""</span>).toAbsolutePath();</span><br><span class="line">        path.register(service, StandardWatchEventKinds.ENTRY_CREATE);</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) {</span><br><span class="line">            <span class="type">WatchKey</span> <span class="variable">key</span> <span class="operator">=</span> service.take();</span><br><span class="line">            <span class="keyword">for</span> (WatchEvent&lt;?&gt; event : key.pollEvents()) {</span><br><span class="line">                <span class="type">Path</span> <span class="variable">createdPath</span> <span class="operator">=</span> (Path) event.context();</span><br><span class="line">                createdPath = path.resolve(createdPath);</span><br><span class="line">                <span class="type">long</span> <span class="variable">size</span> <span class="operator">=</span> Files.size(createdPath);</span><br><span class="line">                System.out.println(createdPath + <span class="string">" ==&gt; "</span> + size);</span><br><span class="line">            }</span><br><span class="line">            key.reset();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args the command line arguments</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable {</span><br><span class="line">        <span class="type">WatchAndCalculate</span> <span class="variable">wc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WatchAndCalculate</span>();</span><br><span class="line">        wc.calculate();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="8-fork-join-计算框架"><a href="#8-fork-join-计算框架" class="headerlink" title="8. fork/join 计算框架"></a>8. fork/join 计算框架</h3><p>Java7 提供的一个用于并行执行任务的框架，是一个把大任务分割成若干个小任务，最终汇总每个小任务结果后得到大任务结果的框架。</p><p>该框架为 Java8 的并行流打下了坚实的基础</p><h2 id="JDK8-新特性"><a href="#JDK8-新特性" class="headerlink" title="JDK8 新特性"></a>JDK8 新特性</h2><p>Java5 开发代号为 Tiger(老虎),于 2004-09-30 发行</p><h3 id="1-Lambda-表达式"><a href="#1-Lambda-表达式" class="headerlink" title="1. Lambda 表达式"></a>1. Lambda 表达式</h3><p>Lambda 表达式，也可称为闭包，它是推动 Java 8 发布的最重要新特性。<br>Lambda 允许把函数作为一个方法的参数（函数作为参数传递进方法中）。<br>使用 Lambda 表达式可以使代码变的更加简洁紧凑。</p><p>Lambda 表达式可以说是 Java 8 最大的卖点，她将函数式编程引入了 Java。Lambda 允许把函数作为一个方法的参数，或者把代码看成数据。</p><p>一个 Lambda 表达式可以由用逗号分隔的参数列表、–&gt;符号与函数体三部分表示。例如：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.asList( <span class="string">"p"</span>, <span class="string">"k"</span>, <span class="string">"u"</span>,<span class="string">"f"</span>, <span class="string">"o"</span>, <span class="string">"r"</span>,<span class="string">"k"</span>).forEach( e -&gt; System.out.println( e ) );</span><br></pre></td></tr></tbody></table></figure><p>为了使现有函数更好的支持 Lambda 表达式，Java 8 引入了函数式接口的概念。函数式接口就是只有一个方法的普通接口。java.lang.Runnable 与 java.util.concurrent.Callable 是函数式接口最典型的例子。为此，Java 8 增加了一种特殊的注解@FunctionalInterface</p><h3 id="2-接口的默认方法与静态方法"><a href="#2-接口的默认方法与静态方法" class="headerlink" title="2. 接口的默认方法与静态方法"></a>2. 接口的默认方法与静态方法</h3><p>我们可以在接口中定义默认方法，使用 default 关键字，并提供默认的实现。所有实现这个接口的类都会接受默认方法的实现，除非子类提供的自己的实现。例如：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DefaultFunctionInterface</span> {</span><br><span class="line">    <span class="keyword">default</span> String <span class="title function_">defaultFunction</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"default function"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>我们还可以在接口中定义静态方法，使用 static 关键字，也可以提供实现。例如：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StaticFunctionInterface</span> {</span><br><span class="line">    <span class="keyword">static</span> String <span class="title function_">staticFunction</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"static function"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>接口的默认方法和静态方法的引入，其实可以认为引入了 C ＋＋中抽象类的理念，以后我们再也不用在每个实现类中都写重复的代码了。</p><h3 id="3-方法引用（含构造方法引用）"><a href="#3-方法引用（含构造方法引用）" class="headerlink" title="3. 方法引用（含构造方法引用）"></a>3. 方法引用（含构造方法引用）</h3><p>通常与 Lambda 表达式联合使用，可以直接引用已有 Java 类或对象的方法。一般有四种不同的方法引用：</p><ol><li>构造器引用。语法是 Class::new，或者更一般的 Class&lt; T &gt;::new，要求构造器方法是没有参数；</li><li>静态方法引用。语法是 Class::static_method，要求接受一个 Class 类型的参数；</li><li>特定类的任意对象方法引用。它的语法是 Class::method。要求方法是没有参数的；</li><li>特定对象的方法引用，它的语法是 instance::method。要求方法接受一个参数，与 3 不同的地方在于，3 是在列表元素上分别调用方法，而 4 是在某个对象上调用方法，将列表元素作为参数传入；</li></ol><h3 id="4-重复注解"><a href="#4-重复注解" class="headerlink" title="4. 重复注解"></a>4. 重复注解</h3><p>在 Java 5 中使用注解有一个限制，即相同的注解在同一位置只能声明一次。Java 8 引入重复注解，这样相同的注解在同一地方也可以声明多次。重复注解机制本身需要用@Repeatable 注解。Java 8 在编译器层做了优化，相同注解会以集合的方式保存，因此底层的原理并没有变化。</p><h3 id="5-扩展注解的支持（类型注解）"><a href="#5-扩展注解的支持（类型注解）" class="headerlink" title="5. 扩展注解的支持（类型注解）"></a>5. 扩展注解的支持（类型注解）</h3><p>Java 8 扩展了注解的上下文，几乎可以为任何东西添加注解，包括局部变量、泛型类、父类与接口的实现，连方法的异常也能添加注解</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="meta">@NotNull</span> String name;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="6-Optional"><a href="#6-Optional" class="headerlink" title="6. Optional"></a>6. Optional</h3><p>Java 8 引入 Optional 类来防止空指针异常，Optional 类最先是由 Google 的 Guava 项目引入的。Optional 类实际上是个容器：它可以保存类型 T 的值，或者保存 null。使用 Optional 类我们就不用显式进行空指针检查了</p><p>可以通过以下实例来更好的了解 Optional 类的使用：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> {</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">value1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">value2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="comment">// 允许传递为null参数</span></span><br><span class="line">    Optional&lt;Integer&gt; a = Optional.ofNullable(value1);</span><br><span class="line">    <span class="comment">// 如果传递的参数是null，抛出异常NullPointerException</span></span><br><span class="line">    Optional&lt;Integer&gt; b = Optional.of(value2);</span><br><span class="line">    System.out.println(sum(a, b));</span><br><span class="line">}</span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">sum</span><span class="params">(Optional&lt;Integer&gt;a, Optional&lt;Integer&gt;b)</span> {</span><br><span class="line">    <span class="comment">// 判断值是否存在</span></span><br><span class="line">    System.out.println(<span class="string">"第一个参数值存在:"</span> + a.isPresent());</span><br><span class="line">    System.out.println(<span class="string">"第二个参数值存在:"</span> + b.isPresent());</span><br><span class="line">    <span class="comment">// 如果值存在，返回它，否则返回默认值</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">value1</span> <span class="operator">=</span> a.orElse(<span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">0</span>));</span><br><span class="line">    <span class="comment">// 获取值，值需要存在</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">value2</span> <span class="operator">=</span> b.get();</span><br><span class="line">    <span class="keyword">return</span> value1 + value2;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>输出</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">第一个参数值存在: false</span><br><span class="line">第二个参数值存在: true</span><br><span class="line">10</span><br></pre></td></tr></tbody></table></figure><h3 id="7-Stream"><a href="#7-Stream" class="headerlink" title="7. Stream"></a>7. Stream</h3><p>Stream API 是把真正的函数式编程风格引入到 Java 中。其实简单来说可以把 Stream 理解为 MapReduce，当然 Google 的 MapReduce 的灵感也是来自函数式编程。她其实是一连串支持连续、并行聚集操作的元素。从语法上看，也很像 linux 的管道、或者链式编程，代码写起来简洁明了，非常酷帅！</p><h3 id="8-Date-Time-API-JSR-310"><a href="#8-Date-Time-API-JSR-310" class="headerlink" title="8. Date/Time API (JSR 310)"></a>8. Date/Time API (JSR 310)</h3><p>Java 8 新的 Date-Time API (JSR 310)受 Joda-Time 的影响，提供了新的 java.time 包，可以用来替代 java.util.Date 和 java.util.Calendar。一般会用到 Clock、LocaleDate、LocalTime、LocaleDateTime、ZonedDateTime、Duration 这些类，对于时间日期的改进还是非常不错的。</p><h3 id="9-JavaScript-引擎-Nashorn"><a href="#9-JavaScript-引擎-Nashorn" class="headerlink" title="9. JavaScript 引擎 Nashorn"></a>9. JavaScript 引擎 Nashorn</h3><p>Nashorn 允许在 JVM 上开发运行 JavaScript 应用，允许 Java 与 JavaScript 相互调用。</p><h3 id="10-Base64"><a href="#10-Base64" class="headerlink" title="10. Base64"></a>10. Base64</h3><p>在 Java 8 中，Base64 编码成为了 Java 类库的标准。Base64 类同时还提供了对 URL、MIME 友好的编码器与解码器。</p><p>以下实例演示了 Base64 的使用:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">base64Test</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException {</span><br><span class="line">    <span class="comment">// 使用基本编码</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">base64encodedString</span> <span class="operator">=</span> Base64.getEncoder().encodeToString(<span class="string">"java@crankz"</span>.getBytes(<span class="string">"utf-8"</span>));</span><br><span class="line">    System.out.println(<span class="string">"Base64 编码字符串 (基本) :"</span> + base64encodedString);</span><br><span class="line">    <span class="comment">// 解码</span></span><br><span class="line">    <span class="type">byte</span>[] base64decodedBytes = Base64.getDecoder().decode(base64encodedString);</span><br><span class="line">    System.out.println(<span class="string">"原始字符串: "</span> + <span class="keyword">new</span> <span class="title class_">String</span>(base64decodedBytes, <span class="string">"utf-8"</span>));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>输出</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base64 编码字符串 (基本) :amF2YUBjcmFua3o=</span><br><span class="line">原始字符串: java@crankz</span><br></pre></td></tr></tbody></table></figure><h3 id="11-JVM-的-PermGen-空间被移除"><a href="#11-JVM-的-PermGen-空间被移除" class="headerlink" title="11. JVM 的 PermGen 空间被移除"></a>11. JVM 的 PermGen 空间被移除</h3><p>取代它的是 <a href="../jvm/metaspace.md">Metaspace(JEP 122)</a></p><p>Java 8 是一次变化巨大的更新，耗费了工程师大量的时间，还借鉴了很多其它语言和类库。我们无法在这里一一详细列举，以后有机会一定给大家详细解读一下。</p><h3 id="12-HashMap-改进"><a href="#12-HashMap-改进" class="headerlink" title="12. HashMap 改进"></a>12. HashMap 改进</h3><h2 id="JDK9-新特性"><a href="#JDK9-新特性" class="headerlink" title="JDK9 新特性"></a>JDK9 新特性</h2><h1 id="1-Java-平台模块化系统"><a href="#1-Java-平台模块化系统" class="headerlink" title="1 Java 平台模块化系统"></a>1 Java 平台模块化系统</h1><p>该特性是 Java 9 最大的一个特性，Java 9 起初的代号就叫 Jigsaw，最近被更改为 Modularity，Modularity 提供了类似于 OSGI 框架的功能，模块之间存在相互的依赖关系，可以导出一个公共的 API，并且隐藏实现的细节，Java 提供该功能的主要的动机在于，减少内存的开销，我们大家都知道，在 JVM 启动的时候，至少会有 30 ～ 60MB 的内存加载，主要原因是 JVM 需要加载 rt.jar，不管其中的类是否被 classloader 加载，第一步整个 jar 都会被 JVM 加载到内存当中去，模块化可以根据模块的需要加载程序运行需要的 class，那么 JVM 是如何知道需要加载那些 class 的呢？这就是在 Java 9 中引入的一个新的文件 module.java 我们大致来看一下一个例子（module-info.java）</p><h2 id="模块描述器"><a href="#模块描述器" class="headerlink" title="模块描述器"></a>模块描述器</h2><p>模块化的 JAR 文件都包含一个额外的模块描述器。在这个模块描述器中, 对其它模块的依赖是通过 “requires” 来表示的。另外, “exports” 语句控制着内部的哪些包是可以被其它模块访问到的。所有不被导出的包默认都封装在模块的里面。如下是一个模块描述器的示例，存在于 “module-info.java” 文件中</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module blog {</span><br><span class="line"> exports com.pluralsight.blog;</span><br><span class="line"></span><br><span class="line"> requires cms;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_TMNcVlSD.webp" alt="20241229154732_TMNcVlSD.webp"></p><h2 id="jlink-Java-连接器"><a href="#jlink-Java-连接器" class="headerlink" title="jlink:Java 连接器"></a>jlink:Java 连接器</h2><h1 id="2-新工具"><a href="#2-新工具" class="headerlink" title="2 新工具"></a>2 新工具</h1><h2 id="2-1-JShell"><a href="#2-1-JShell" class="headerlink" title="2.1 JShell"></a>2.1 JShell</h2><p>Java 9 首次为 Java 语言提供了 REPL 工具，名为 JShell。我们可以在命令行或者在 IntelliJ IDEA 的终端中运行该 REPL。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20241229154732_ixluTsKJ.webp" alt="20241229154732_ixluTsKJ.webp"></p><p>115-1506508766622.gif</p><p>在 Java 8 出来的时候，很多人都喊着，这是要抢夺 Scala 等基于 JVM 动态语言的市场啊，其中有人给出了一个 Java 做不到的方向，那就是 Scala 可以当作脚本语言，Java 可以么？很明显在此之前 Java 不行，ta 也不具备动态性，但是此次 Java 9 却让 Java 也可以像脚本语言一样来运行了，主要得益于 JShell，我们来看一下这个演示</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jdk-9\bin&gt;jshell.exe</span><br><span class="line">|  Welcome to JShell -- Version 9</span><br><span class="line">|  For an introduction type: /help intro</span><br><span class="line">jshell&gt; "This is my long string. I want a part of it".substring(8,19);</span><br><span class="line">$5 ==&gt; "my long string"</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>这是我们在 Jshell 这个控制台下运行，我们如何运行脚本文件呢？</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jshell&gt; /save c:\develop\JShell_hello_world.txt</span><br><span class="line">jshell&gt; /open c:\develop\JShell_hello_world.txt</span><br><span class="line">Hello JShell!</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="2-2-更多的诊断命令"><a href="#2-2-更多的诊断命令" class="headerlink" title="2.2 更多的诊断命令"></a>2.2 更多的诊断命令</h2><p>记得在 Java 8 中，放弃了 Jhat 这个命令，但是很快在 Java 9 中增加了一些新的命令，比如我们要介绍到的 jcmd,借助它你可以很好的看到类之间的依赖关系</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">jdk-9\bin&gt;jcmd 14056 VM.class_hierarchy -i -s java.net.Socket</span><br><span class="line">14056:</span><br><span class="line">java.lang.Object/null</span><br><span class="line">|--java.net.Socket/null</span><br><span class="line">|  implements java.io.Closeable/null (declared intf)</span><br><span class="line">|  implements java.lang.AutoCloseable/null (inherited intf)</span><br><span class="line">|  |--org.eclipse.ecf.internal.provider.filetransfer.httpclient4.CloseMonitoringSocket</span><br><span class="line">|  |  implements java.lang.AutoCloseable/null (inherited intf)</span><br><span class="line">|  |  implements java.io.Closeable/null (inherited intf)</span><br><span class="line">|  |--javax.net.ssl.SSLSocket/null</span><br><span class="line">|  |  implements java.lang.AutoCloseable/null (inherited intf)</span><br><span class="line">|  |  implements java.io.Closeable/null (inherited intf)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h1 id="3-多版本兼容-Jar"><a href="#3-多版本兼容-Jar" class="headerlink" title="3 多版本兼容 Jar"></a>3 多版本兼容 Jar</h1><p>我们最后要来着重介绍的这个特性对于库的维护者而言是个特别好的消息。当一个新版本的 Java 出现的时候，你的库用户要花费数年时间才会切换到这个新的版本。这就意味着库得去向后兼容你想要支持的最老的 Java 版本 (许多情况下就是 Java 6 或者 7)。这实际上意味着未来的很长一段时间，你都不能在库中运用 Java 9 所提供的新特性。幸运的是，多版本兼容 JAR 功能能让你创建仅在特定版本的 Java 环境中运行库程序时选择使用的 class 版本：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">multirelease.jar</span><br><span class="line">├── META-INF</span><br><span class="line">│  └── versions</span><br><span class="line">│    └── 9</span><br><span class="line">│      └── multirelease</span><br><span class="line">│        └── Helper.class</span><br><span class="line">├── multirelease</span><br><span class="line">  ├── Helper.class</span><br><span class="line">  └── Main.class</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>在上述场景中， multirelease.jar 可以在 Java 9 中使用, 不过 Helper 这个类使用的不是顶层的 multirelease.Helper 这个 class, 而是处在“META-INF/versions/9”下面的这个。这是特别为 Java 9 准备的 class 版本，可以运用 Java 9 所提供的特性和库。同时，在早期的 Java 诸版本中使用这个 JAR 也是能运行的，因为较老版本的 Java 只会看到顶层的这个 Helper 类。</p><h1 id="4-新的安全性"><a href="#4-新的安全性" class="headerlink" title="4 新的安全性"></a>4 新的安全性</h1><h2 id="4-1-数据报传输层安全性-DTLS）"><a href="#4-1-数据报传输层安全性-DTLS）" class="headerlink" title="4.1 数据报传输层安全性(DTLS）"></a>4.1 数据报传输层安全性(DTLS）</h2><h2 id="4-2-禁用-sha-1-证书"><a href="#4-2-禁用-sha-1-证书" class="headerlink" title="4.2 禁用 sha - 1 证书"></a>4.2 禁用 sha - 1 证书</h2><p>引入了 SHA-3 的 hash 算法</p><h1 id="5-核心库新内容"><a href="#5-核心库新内容" class="headerlink" title="5 核心库新内容"></a>5 核心库新内容</h1><h2 id="5-1-轻量级的-json-文本处理-api"><a href="#5-1-轻量级的-json-文本处理-api" class="headerlink" title="5.1 轻量级的 json 文本处理 api"></a>5.1 轻量级的 json 文本处理 api</h2><h2 id="5-2-多线程新内容"><a href="#5-2-多线程新内容" class="headerlink" title="5.2 多线程新内容"></a>5.2 多线程新内容</h2><p>新增 ProcessHandle 类，该类提供进程的本地进程 ID、参数、命令、启动时间、累计 CPU 时间、用户、父进程和子进程。这个类还可以监控进程的活力和破坏进程。ProcessHandle。onExit 方法，当进程退出时，复杂未来类的异步机制可以执行一个操作。<br>包括一个可互操作的发布-订阅框架，以及对 CompletableFuture API 的增强。<br>在 Java 很早的版本中，提供了 Process 这样的 API 可以获得进程的一些信息，包括 runtime，甚至是用它来执行当前主机的一些命令，但是请大家思考一个问题，你如何获得你当前 Java 运行程序的 PID？很显然通过 Process 是无法获得的，需要借助于 JMX 才能得到，但是在这一次的增强中，你将会很轻松的得到这样的信息，我们来看一个简单的例子</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ProcessHandle self = ProcessHandle.current();</span><br><span class="line">long PID = self.getPid();</span><br><span class="line">ProcessHandle.Info procInfo = self.info();</span><br><span class="line"></span><br><span class="line">Optional&lt;String[]&gt; args = procInfo.arguments();</span><br><span class="line">Optional&lt;String&gt; cmd =  procInfo.commandLine();</span><br><span class="line">Optional&lt;Instant&gt; startTime = procInfo.startInstant();</span><br><span class="line">Optional&lt;Duration&gt; cpuUsage = procInfo.totalCpuDuration();</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>已经获取到了 JVM 的进程，我们该如何将该进程优雅的停掉呢？下面的代码给出了答案</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">childProc = ProcessHandle.current().children();</span><br><span class="line">childProc.forEach(procHandle -&gt; {</span><br><span class="line">    assertTrue("Could not kill process " + procHandle.getPid(), procHandle.destroy());</span><br><span class="line">});</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>通过上面的一小段代码，我们也发现了 Java 9 对断言机制同样增加了一些增强，多说一些题外话，我们目前的系统中运行一个严重依赖于 Hive beelineServer 的程序，beeline server 不是很稳定，经常出现卡顿，甚至假死，假死后也不回复的问题，这样就导致我们的程序也会出现卡顿，如果运维人员不对其进行清理，系统运行几个月之后会发现很多僵尸进程，于是增加一个获取当前 JVM PID 的功能，然后判断到超过给定的时间对其进行主动杀死，完全是程序内部的行为，但是获取 PID 就必须借助于 JMX 的动作，另外杀死它也必须借助于操作系统的命令，诸如 kill 这样的命令，显得非常的麻烦，但是 Java 9 的方式明显要优雅方便许多。</p><h3 id="Publish-Subscribe-Framework"><a href="#Publish-Subscribe-Framework" class="headerlink" title="Publish-Subscribe Framework"></a>Publish-Subscribe Framework</h3><p>在新版的 JDK 9 中提供了消息发布订阅的框架，该框架主要是由 Flow 这个类提供的，他同样会在 java.util.concurrent 中出现，并且提供了 Reactive 编程模式。</p><h2 id="5-3-基础类新内容"><a href="#5-3-基础类新内容" class="headerlink" title="5.3 基础类新内容"></a>5.3 基础类新内容</h2><p>用少量的元素创建集合和映射的实例更容易。在列表、设置和映射接口上的新静态工厂方法使创建这些集合的不可变实例变得更加简单 例子：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; alphabet = Set.of("a", "b", "c");</span><br><span class="line">List&lt;String&gt; strings = List.of("first", "second");</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>长期以来，Stream API 都是 Java 标准库最好的改进之一。通过这套 API 可以在集合上建立用于转换的申明管道。在 Java 9 中它会变得更好。Stream 接口中添加了 4 个新的方法：dropWhile, takeWhile, ofNullable。还有个 iterate 方法的新重载方法，可以让你提供一个 Predicate (判断条件)来指定什么时候结束迭代：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntStream.iterate(1, i -&gt; i &lt; 100, i -&gt; i + 1).forEach(System.out::println);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>第二个参数是一个 Lambda，它会在当前 IntStream 中的元素到达 100 的时候返回 true。因此这个简单的示例是向控制台打印 1 到 99。<br>除了对 Stream 本身的扩展，Optional 和 Stream 之间的结合也得到了改进。现在可以通过 Optional 的新方法 <code>stram</code> 将一个 Optional 对象转换为一个(可能是空的) Stream 对象：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; s = Optional.of(1).stream();</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>在组合复杂的 Stream 管道时，将 Optional 转换为 Stream 非常有用。</p><h3 id="增强的弃用标记"><a href="#增强的弃用标记" class="headerlink" title="增强的弃用标记"></a>增强的弃用标记</h3><p>Java 9 提供了另外一个看起来很小的特性，那就是增强的弃用标记，能够让开发人员更好地理解代码的影响。以前，我们只能将代码标记为 deprecated 并在 Javadoc 中添加一些原因说明的文档，现在@Deprecated 新增了两个有用的属性：since 和 orRemoval。</p><h3 id="Thread-onSpinWait"><a href="#Thread-onSpinWait" class="headerlink" title="Thread.onSpinWait"></a>Thread.onSpinWait</h3><p>Java 9 允许我们为 JVM 提供一些提示信息，便于实现性能的提升。具体来讲，如果你的代码需要在一个循环中等待某个条件发生的话，那么可以使用<a target="_blank" rel="external nofollow noopener noreferrer" href="/goto.html?u=aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHA6Ly9kb3dubG9hZC5qYXZhLm5ldC9qYXZhL2pkazkvZG9jcy9hcGkvamF2YS9sYW5nL1RocmVhZC5odG1sJTIzb25TcGluV2FpdC0t">Thread.onSpinWait</a>让运行时环境了解到这一点。</p><h1 id="6-私有接口方法"><a href="#6-私有接口方法" class="headerlink" title="6 私有接口方法"></a>6 私有接口方法</h1><p>Java 8 为我们带来了接口的默认方法。 接口现在也可以包含行为，而不仅仅是方法签名。 但是，如果在接口上有几个默认方法，代码几乎相同，会发生什么情况？ 通常，您将重构这些方法，调用一个可复用的私有方法。 但默认方法不能是私有的。 将复用代码创建为一个默认方法不是一个解决方案，因为该辅助方法会成为公共 API 的一部分。 使用 Java 9，您可以向接口添加私有辅助方法来解决此问题：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyInterface</span> {</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">normalInterfaceMethod</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">interfaceMethodWithDefault</span><span class="params">()</span> { init(); }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">anotherDefaultMethod</span><span class="params">()</span> { init(); }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// This method is not part of the public API exposed by MyInterface</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> { System.out.println(<span class="string">"Initializing"</span>); }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>如果您使用默认方法开发 API ，那么私有接口方法可能有助于构建其实现。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceWithPrivateMethods</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">staticPrivate</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"static private"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">instancePrivate</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"instance private"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">check</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> staticPrivate();</span><br><span class="line">        <span class="type">InterfaceWithPrivateMethods</span> <span class="variable">pvt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InterfaceWithPrivateMethods</span>() {</span><br><span class="line">            <span class="comment">// anonymous class</span></span><br><span class="line">        };</span><br><span class="line">        result = pvt.instancePrivate();</span><br><span class="line">    }</span><br><span class="line">}}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>该特性完全是为了 Java 8 中 default 方法和 static 方法服务的。</p><h1 id="7-java-net-新内容"><a href="#7-java-net-新内容" class="headerlink" title="7 java.net 新内容"></a>7 java.net 新内容</h1><p>就目前而言，JDK 提供的 Http 访问功能，几乎都需要依赖于 HttpURLConnection，但是这个类大家在写代码的时候很少使用，我们一般都会选择 Apache 的 Http Client，此次在 Java 9 的版本中引入了一个新的 package:java.net.http，里面提供了对 Http 访问很好的支持，不仅支持 Http1.1 而且还支持 HTTP2，以及 WebSocket，据说性能可以超过 Apache HttpClient，Netty，Jetty</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">URI httpURI = new URI("http://www.94jiankang.com");</span><br><span class="line">HttpRequest request = HttpRequest.create(httpURI).GET();</span><br><span class="line">HttpResponse response = request.response();</span><br><span class="line">String responseBody = response.body(HttpResponse.asString());</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="http-2"><a href="#http-2" class="headerlink" title="http/2"></a>http/2</h2><p>Java 9 中有新的方式来处理 HTTP 调用。这个迟到的特性用于代替老旧的 <code>HttpURLConnection</code> API，并提供对 WebSocket 和 HTTP/2 的支持。注意：新的 HttpClient API 在 Java 9 中以所谓的孵化器模块交付。也就是说，这套 API 不能保证 100% 完成。不过你可以在 Java 9 中开始使用这套 API：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpClient</span> <span class="variable">client</span> <span class="operator">=</span> HttpClient.newHttpClient();</span><br><span class="line"></span><br><span class="line"><span class="type">HttpRequest</span> <span class="variable">req</span> <span class="operator">=</span> HttpRequest.newBuilder(URI.create(``<span class="string">"[http://www.google.com](http://www.google.com/)"</span>``)).header(``<span class="string">"User-Agent"</span>``,``<span class="string">"Java"</span>``)</span><br><span class="line">.GET().build();</span><br><span class="line"></span><br><span class="line">HttpResponse&lt;String&gt; resp = client.send(req, HttpResponse.BodyHandler.asString());</span><br></pre></td></tr></tbody></table></figure><p>除了这个简单的请求/响应模型之外，HttpClient 还提供了新的 API 来处理 HTTP/2 的特性，比如流和服务端推送。</p><h1 id="8-其他"><a href="#8-其他" class="headerlink" title="8 其他"></a>8 其他</h1><h2 id="8-1-Try-With-Resources-的改变"><a href="#8-1-Try-With-Resources-的改变" class="headerlink" title="8.1 Try-With-Resources 的改变"></a>8.1 Try-With-Resources 的改变</h2><p>我们都知道，Try-With-Resources 是从 JDK 7 中引入的一项重要特征，只要接口继承了 Closable 就可以使用 Try-With-Resources，减少 finally 语句块的编写，在 Java 9 中会更加的方便这一特征</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MyAutoCloseable mac = new MyAutoCloseable();</span><br><span class="line">try (mac) {</span><br><span class="line">    // do some stuff with mac</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">try (new MyAutoCloseable() { }.finalWrapper.finalCloseable) {</span><br><span class="line">   // do some stuff with finalCloseable</span><br><span class="line">} catch (Exception ex) { }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>我们的 Closeable 完全不用写在 try（）中。</p><h2 id="8-2-Unsafe-类的命运"><a href="#8-2-Unsafe-类的命运" class="headerlink" title="8.2 Unsafe 类的命运"></a>8.2 Unsafe 类的命运</h2><p>很早之前就传言 Java 会将 unsafe 这一个类屏蔽掉，不给大家使用，这次看他的官方文档，貌似所有已 sun 开头的包都将不能在 application 中使用，但是 java 9 提供了新的 API 供大家使用。<br>在 JDK 9 中提供了一个新的包，叫做 java.lang.invoke 里面有一系列很重要的类比如 VarHandler 和 MethodHandles，提供了类似于原子操作以及 Unsafe 操作的功能。</p><h2 id="8-3-Мulti-Resolution-Image-API"><a href="#8-3-Мulti-Resolution-Image-API" class="headerlink" title="8.3 Мulti-Resolution Image API"></a>8.3 Мulti-Resolution Image API</h2><p>接口 java.awt.image.MultiResolutionImage 封装了一系列的不同分辨率图像到一个单独对象的 API，我么可以根据给定的 DPI 矩阵获取 resolution-specific。<br>关于 AWT 的东西，本人几乎不怎么接触，如果有用到的朋友，等 JDK 9 出来之后，自己体会使用一下吧。</p><h1 id="9-JVM-优化"><a href="#9-JVM-优化" class="headerlink" title="9 JVM 优化"></a>9 JVM 优化</h1><h2 id="9-1-使用-G1-垃圾回收器作为默认的垃圾回收器"><a href="#9-1-使用-G1-垃圾回收器作为默认的垃圾回收器" class="headerlink" title="9.1 使用 G1 垃圾回收器作为默认的垃圾回收器"></a>9.1 使用 G1 垃圾回收器作为默认的垃圾回收器</h2><p>移除很多已经被过期的 GCC 回收器（是移除哦，因为在 Jdk 8 中只是加了过期的标记）</p><h3 id="1-本地变量类型推断"><a href="#1-本地变量类型推断" class="headerlink" title="1. 本地变量类型推断"></a>1. 本地变量类型推断</h3><p>什么是局部变量类型推断？</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">javastack</span> <span class="operator">=</span> <span class="string">"javastack"</span>;</span><br><span class="line">System.out.println(javastack);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>大家看出来了，局部变量类型推断就是左边的类型直接使用 var 定义，而不用写具体的类型，编译器能根据右边的表达式自动推断类型，如上面的 String 。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">javastack</span> <span class="operator">=</span> <span class="string">"javastack"</span>;</span><br><span class="line">就等于：</span><br><span class="line"><span class="type">String</span> <span class="variable">javastack</span> <span class="operator">=</span> <span class="string">"javastack"</span>;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="2-字符串加强"><a href="#2-字符串加强" class="headerlink" title="2. 字符串加强"></a>2. 字符串加强</h3><p>Java 11 增加了一系列的字符串处理方法，如以下所示。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断字符串是否为空白</span></span><br><span class="line"><span class="string">" "</span>.isBlank(); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 去除首尾空格</span></span><br><span class="line"><span class="string">" Javastack "</span>.strip(); <span class="comment">// "Javastack"</span></span><br><span class="line"><span class="comment">// 去除尾部空格</span></span><br><span class="line"><span class="string">" Javastack "</span>.stripTrailing(); <span class="comment">// " Javastack"</span></span><br><span class="line"><span class="comment">// 去除首部空格</span></span><br><span class="line"><span class="string">" Javastack "</span>.stripLeading(); <span class="comment">// "Javastack "</span></span><br><span class="line"><span class="comment">// 复制字符串</span></span><br><span class="line"><span class="string">"Java"</span>.repeat(<span class="number">3</span>);<span class="comment">// "JavaJavaJava"</span></span><br><span class="line"><span class="comment">// 行数统计</span></span><br><span class="line"><span class="string">"A\nB\nC"</span>.lines().count(); <span class="comment">// 3</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="3-集合加强"><a href="#3-集合加强" class="headerlink" title="3. 集合加强"></a>3. 集合加强</h3><p>自 Java 9 开始，Jdk 里面为集合（List/ Set/ Map）都添加了 of 和 copyOf 方法，它们两个都用来创建不可变的集合，来看下它们的使用和区别。<br>示例 1：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">list</span> <span class="operator">=</span> List.of(<span class="string">"Java"</span>, <span class="string">"Python"</span>, <span class="string">"C"</span>);</span><br><span class="line"><span class="type">var</span> <span class="variable">copy</span> <span class="operator">=</span> List.copyOf(list);</span><br><span class="line">System.out.println(list == copy); <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>示例 2:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="type">var</span> <span class="variable">copy</span> <span class="operator">=</span> List.copyOf(list);</span><br><span class="line">System.out.println(list == copy); <span class="comment">// false</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>示例 1 和 2 代码差不多，为什么一个为 true,一个为 false?<br>来看下它们的源码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">of</span><span class="params">(E... elements)</span> {</span><br><span class="line">  <span class="keyword">switch</span> (elements.length) { <span class="comment">// implicit null check of elements</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> ImmutableCollections.emptyList();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ImmutableCollections</span>.List12&lt;&gt;(elements[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ImmutableCollections</span>.List12&lt;&gt;(elements[<span class="number">0</span>], elements[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ImmutableCollections</span>.ListN&lt;&gt;(elements);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">static</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">copyOf</span><span class="params">(Collection&lt;? extends E&gt; coll)</span> {</span><br><span class="line">    <span class="keyword">return</span> ImmutableCollections.listCopy(coll);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">static</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">listCopy</span><span class="params">(Collection&lt;? extends E&gt; coll)</span> {</span><br><span class="line">    <span class="keyword">if</span> (coll <span class="keyword">instanceof</span> AbstractImmutableList &amp;&amp; coll.getClass() != SubList.class) {</span><br><span class="line">        <span class="keyword">return</span> (List&lt;E&gt;)coll;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> (List&lt;E&gt;)List.of(coll.toArray());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>可以看出 copyOf 方法会先判断来源集合是不是 AbstractImmutableList 类型的，如果是，就直接返回，如果不是，则调用 of 创建一个新的集合。</p><p>示例 2 因为用的 new 创建的集合，不属于不可变 AbstractImmutableList 类的子类，所以 copyOf 方法又创建了一个新的实例，所以为 false.</p><p>使用 of 和 copyOf 创建的集合为不可变集合，不能进行添加、删除、替换、排序等操作，不然会报 java.lang.UnsupportedOperationException 异常。</p><p>上面演示了 List 的 of 和 copyOf 方法，Set 和 Map 接口都有。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    Set&lt;String&gt; names = Set.of(<span class="string">"Fred"</span>, <span class="string">"Wilma"</span>, <span class="string">"Barney"</span>, <span class="string">"Betty"</span>);</span><br><span class="line">    <span class="comment">//JDK11之前我们只能这么写</span></span><br><span class="line">    System.out.println(Arrays.toString(names.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[names.size()])));</span><br><span class="line">    <span class="comment">//JDK11之后  可以直接这么写了</span></span><br><span class="line">    System.out.println(Arrays.toString(names.toArray(size -&gt; <span class="keyword">new</span> <span class="title class_">String</span>[size])));</span><br><span class="line">    System.out.println(Arrays.toString(names.toArray(String[]::<span class="keyword">new</span>)));</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>Collection.toArray(IntFunction)</strong></p><p>在 java.util.Collection 接口中添加了一个新的默认方法 toArray（IntFunction）。此方法允许将集合的元素传输到新创建的所需运行时类型的数组</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">       Set&lt;String&gt; names = Set.of(<span class="string">"Fred"</span>, <span class="string">"Wilma"</span>, <span class="string">"Barney"</span>, <span class="string">"Betty"</span>);</span><br><span class="line">       <span class="comment">//JDK11之前我们只能这么写</span></span><br><span class="line">       System.out.println(Arrays.toString(names.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[names.size()])));</span><br><span class="line">       <span class="comment">//JDK11之后  可以直接这么写了</span></span><br><span class="line">       System.out.println(Arrays.toString(names.toArray(size -&gt; <span class="keyword">new</span> <span class="title class_">String</span>[size])));</span><br><span class="line">       System.out.println(Arrays.toString(names.toArray(String[]::<span class="keyword">new</span>)));</span><br><span class="line">   }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>新方法是现有 toArray（T []）方法的重载，该方法将数组实例作为参数。添加重载方法会导致次要源不兼容。以前，形式为 coll.toArray（null）的代码将始终解析为现有的 toArray 方法。使用新的重载方法，此代码现在不明确，将导致编译时错误。 （这只是源不兼容。现有的二进制文件不受影响。）应该更改模糊代码以将 null 转换为所需的数组类型，例如 toArray（（Object []）null）或其他一些数组类型。请注意，将 null 传递给 toArray 方法指定为抛出 NullPointerException</p><h3 id="4-Stream-加强"><a href="#4-Stream-加强" class="headerlink" title="4. Stream 加强"></a>4. Stream 加强</h3><p>Stream 是 Java 8 中的新特性，Java 9 开始对 Stream 增加了以下 4 个新方法。</p><ol><li>增加单个参数构造方法，可为 null</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream.ofNullable(<span class="literal">null</span>).count(); <span class="comment">// 0</span></span><br><span class="line"><span class="comment">//JDK8木有ofNullable方法哦</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>源码可看看：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 9</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; Stream&lt;T&gt; <span class="title function_">ofNullable</span><span class="params">(T t)</span> {</span><br><span class="line">     <span class="keyword">return</span> t == <span class="literal">null</span> ? Stream.empty()</span><br><span class="line">                      : StreamSupport.stream(<span class="keyword">new</span> <span class="title class_">Streams</span>.StreamBuilderImpl&lt;&gt;(t), <span class="literal">false</span>);</span><br><span class="line"> }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>增加 takeWhile 和 dropWhile 方法</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">    .takeWhile(n -&gt; n &lt; <span class="number">3</span>)</span><br><span class="line">    .collect(Collectors.toList()); <span class="comment">// [1, 2]</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>takeWhile 表示从开始计算，当 n &lt; 3 时就截止。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">    .dropWhile(n -&gt; n &lt; <span class="number">3</span>)</span><br><span class="line">    .collect(Collectors.toList()); <span class="comment">// [3, 2, 1]</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>dropWhile 这个和上面的相反，一旦 n &lt; 3 不成立就开始计算</p><ol start="3"><li>iterate 重载</li></ol><p>这个 iterate 方法的新重载方法，可以让你提供一个 Predicate (判断条件)来指定什么时候结束迭代。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    <span class="comment">// 这构造的是无限流  JDK8开始</span></span><br><span class="line">    Stream.iterate(<span class="number">0</span>, (x) -&gt; x + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// 这构造的是小于10就结束的流  JDK9开始</span></span><br><span class="line">    Stream.iterate(<span class="number">0</span>, x -&gt; x &lt; <span class="number">10</span>, x -&gt; x + <span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="5-Optional-加强"><a href="#5-Optional-加强" class="headerlink" title="5. Optional 加强"></a>5. Optional 加强</h3><p>Opthonal 也增加了几个非常酷的方法，现在可以很方便的将一个 Optional 转换成一个 Stream, 或者当一个空 Optional 时给它一个替代的。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Optional.of(<span class="string">"javastack"</span>).orElseThrow(); <span class="comment">// javastack</span></span><br><span class="line">Optional.of(<span class="string">"javastack"</span>).stream().count(); <span class="comment">// 1</span></span><br><span class="line">Optional.ofNullable(<span class="literal">null</span>)</span><br><span class="line">.or(() -&gt; Optional.of(<span class="string">"javastack"</span>))</span><br><span class="line">.get(); <span class="comment">// javastack</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>or 方法和 stream 方法显然都是新增的</p><h3 id="6-InputStream-加强"><a href="#6-InputStream-加强" class="headerlink" title="6. InputStream 加强"></a>6. InputStream 加强</h3><p>InputStream 终于有了一个非常有用的方法：transferTo，可以用来将数据直接传输到 OutputStream，这是在处理原始数据流时非常常见的一种用法，如下示例。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">classLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader();</span><br><span class="line"><span class="type">var</span> <span class="variable">inputStream</span> <span class="operator">=</span> classLoader.getResourceAsStream(<span class="string">"javastack.txt"</span>);</span><br><span class="line"><span class="type">var</span> <span class="variable">javastack</span> <span class="operator">=</span> File.createTempFile(<span class="string">"javastack2"</span>, <span class="string">"txt"</span>);</span><br><span class="line"><span class="keyword">try</span> (<span class="type">var</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(javastack)) {</span><br><span class="line">    inputStream.transferTo(outputStream);</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="7-HTTP-Client-API-重磅"><a href="#7-HTTP-Client-API-重磅" class="headerlink" title="7. HTTP Client API(重磅)"></a>7. HTTP Client API(重磅)</h3><p>在 java9 及 10 被标记 incubator 的模块 jdk.incubator.httpclient，在 java11 被标记为正式，改为 java.net.http 模块。<br>这是 Java 9 开始引入的一个处理 HTTP 请求的的孵化 HTTP Client API，该 API 支持同步和异步，而在 Java 11 中已经为正式可用状态，你可以在 java.net 包中找到这个 API。</p><p>来看一下 HTTP Client 的用法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">request</span> <span class="operator">=</span> HttpRequest.newBuilder()</span><br><span class="line">.uri(URI.create(<span class="string">"https://javastack.cn"</span>))</span><br><span class="line">.GET()</span><br><span class="line">.build();</span><br><span class="line"><span class="type">var</span> <span class="variable">client</span> <span class="operator">=</span> HttpClient.newHttpClient();</span><br><span class="line"><span class="comment">// 同步</span></span><br><span class="line">HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());</span><br><span class="line">System.out.println(response.body());</span><br><span class="line"><span class="comment">// 异步</span></span><br><span class="line">client.sendAsync(request, HttpResponse.BodyHandlers.ofString())</span><br><span class="line">.thenApply(HttpResponse::body)</span><br><span class="line">.thenAccept(System.out::println);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>上面的 .GET() 可以省略，默认请求方式为 Get！</p><p>更多使用示例可以看这个 API，后续有机会再做演示。</p><p>现在 Java 自带了这个 HTTP Client API，我们以后还有必要用 Apache 的 HttpClient 工具包吗？我觉得没啥必要了</p><h3 id="8-化繁为简，一个命令编译运行源代码"><a href="#8-化繁为简，一个命令编译运行源代码" class="headerlink" title="8. 化繁为简，一个命令编译运行源代码"></a>8. 化繁为简，一个命令编译运行源代码</h3><p>看下面代码</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 编译</span><br><span class="line">javac Javastack.java</span><br><span class="line">// 运行</span><br><span class="line">java Javastack</span><br></pre></td></tr></tbody></table></figure><p>在我们的认知里面，要运行一个 Java 源代码必须先编译，再运行，两步执行动作。而在未来的 Java 11 版本中，通过一个 java 命令就直接搞定了，如以下所示。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java Javastack.java</span><br></pre></td></tr></tbody></table></figure><h3 id="9-移除项"><a href="#9-移除项" class="headerlink" title="9. 移除项"></a>9. 移除项</h3><ol><li>移除了 com.sun.awt.AWTUtilities</li><li>移除了 sun.misc.Unsafe.defineClass，使用 java.lang.invoke.MethodHandles.Lookup.defineClass 来替代</li><li>移除了 Thread.destroy()以及 Thread.stop(Throwable)方法</li><li>移除了<a href="mailto:sun.nio.ch.disableSystarraydsj@163.comWideOverlappingFileLockCheck" rel="external nofollow noreferrer">sun.nio.ch.disableSystarraydsj@163.comWideOverlappingFileLockCheck</a>、sun.locale.formatasdefault 属性</li><li>移除了 jdk.snmp 模块</li><li>移除了 javafx，openjdk 估计是从 java10 版本就移除了，oracle jdk10 还尚未移除 javafx，而 java11 版本则 oracle 的 jdk 版本也移除了 javafx</li><li>移除了 Java Mission Control，从 JDK 中移除之后，需要自己单独下载</li><li>移除了这些 Root Certificates ：Baltimore Cybertrust Code Signing CA，SECOM ，AOL and Swisscom</li></ol><h3 id="10-废弃项"><a href="#10-废弃项" class="headerlink" title="10. 废弃项"></a>10. 废弃项</h3><ol><li>废弃了 Nashorn JavaScript Engine</li><li>废弃了-XX+AggressiveOpts 选项</li><li>-XX:+UnlockCommercialFeatures 以及-XX:+LogCommercialFeatures 选项也不- 再需要</li><li>废弃了 Pack200 工具及其 API</li></ol></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar1.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">dong4j</div><div class="post-copyright__author_desc">岁月静好，诗酒趁年华🍺</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.dong4j.site/posts/9c7f49a2.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl(&quot;https://blog.dong4j.site/posts/9c7f49a2.html&quot;)">JDK 从5 到 10 的新特性介绍</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/wechat-pay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/wechat-pay.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.dong4j.site/source/image/alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/alipay.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.dong4j.site/posts/9c7f49a2.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=JDK 从5 到 10 的新特性介绍&amp;url=https://blog.dong4j.site/posts/9c7f49a2.html&amp;pic=https://api.dong4j.ink:1024/cover?hf76jw4o" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div><div class="share-link follow"><div class="share-button" id="post-share-url" title="订阅" onclick="icat.showFollowBox()"><i class="anzhiyufont anzhiyu-icon-rss"></i></div></div></div></div></div><div class="submit-box hidden"><form id="follow" action="https://api.follow.it/subscription-form/b29peEszNWYzK3FQbEw2dVlITEJMZ2pQRXh2dWRLVDE3SC96eFhRaGwwQWprcXpYYUp0NGFWemxVZllXRGU4Nm4yenNGSzNpV3l0Z1EwQzBXQU5xTG9pZWNzVCt5YWptWUt6TXppRXVXMXZxQTRZOGQ0NUVDRlRFOUYxSHMzMEJ8NmlodHY1VWhDQVZBaG8wM0pSV2pXSjdTNGRWS1o0RDVZbE11KzlEeWhuZz0=/8" method="post" target="_blank"><div class="follow-it-form-subscribe" style="position:relative"><div class="heading"><h5 style="font-weight:700;text-align:center">订阅本站文章：</h5></div><div class="input-field"><input type="email" id="email-input" name="email" placeholder="填入您的邮箱地址" spellcheck="false" oninput="validateEmail()"></div><div class="submit-button"><button type="submit" id="submit-button" onclick="ga(&quot;send&quot;,&quot;event&quot;,&quot;Form&quot;,&quot;Submit&quot;,&quot;Affiliate&quot;)" style="font-weight:700;font-size:14px;text-align:center" disabled="">确认订阅</button></div></div></form><style>#email-input{font-size:16px;font-weight:700;padding:10px;border:2px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}#email-input:focus{outline:0}#email-input.valid{border-color:green}#email-input.invalid{border-color:red}</style><script>function validateEmail(){var s=document.getElementById("email-input"),a=document.getElementById("submit-button"),e=s.value;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?(a.disabled=!1,s.classList.add("valid"),s.classList.remove("invalid")):(a.disabled=!0,s.classList.add("invalid"),s.classList.remove("valid"))}</script></div><script>var icat={showFollowBox:function(){var s=document.querySelector(".submit-box");s.classList.contains("display")?s.classList.remove("display"):s.classList.add("display")}}</script><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.dong4j.site" target="_blank">司机带你开车</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E6%96%B0%E6%97%B6%E4%BB%A3%E7%A0%81%E5%86%9C/"><span class="categoryes-punctuation"><i class="anzhiyufont anzhiyu-icon-inbox"></i></span>新时代码农<span class="categoryesPageCount">201</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/arrays/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>Arrays<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/%E6%B3%9B%E5%9E%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>泛型<span class="tagsPageCount">4</span></a><a class="post-meta__box__tags" href="/tags/%E6%B3%A8%E8%A7%A3/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>注解<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/java5/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Java5<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E6%9E%9A%E4%B8%BE/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>枚举<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E8%87%AA%E5%8A%A8%E6%8B%86%E7%AE%B1%E8%A3%85%E7%AE%B1/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>自动拆箱装箱<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>可变参数<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E5%A2%9E%E5%BC%BAfor%E5%BE%AA%E7%8E%AF/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>增强for循环<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E9%9D%99%E6%80%81%E5%AF%BC%E5%85%A5/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>静态导入<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/print%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E5%8C%96/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>print输出格式化<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E5%B9%B6%E5%8F%91%E6%94%AF%E6%8C%81%EF%BC%88juc%EF%BC%89/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>并发支持（JUC）<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/queue/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Queue<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8stringbuilder/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>线程安全StringBuilder<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/java10/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Java10<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>本地变量类型推断<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8A%A0%E5%BC%BA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>字符串加强<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E9%9B%86%E5%90%88%E5%8A%A0%E5%BC%BA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>集合加强<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/stream%E5%8A%A0%E5%BC%BA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Stream加强<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/optional%E5%8A%A0%E5%BC%BA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Optional加强<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/inputstream%E5%8A%A0%E5%BC%BA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>InputStream加强<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/httpclientapi/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>HTTPClientAPI<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E5%8C%96%E7%B9%81%E4%B8%BA%E7%AE%80%E7%9A%84%E5%91%BD%E4%BB%A4%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C%E6%BA%90%E4%BB%A3%E7%A0%81/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>化繁为简的命令编译运行源代码<span class="tagsPageCount">1</span></a></div></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_x"></a><a class="a2a_button_twitter"></a><a class="a2a_button_threads"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_pocket"></a><a class="a2a_button_instapaper"></a><a class="a2a_button_email"></a><a class="a2a_button_sms"></a><a class="a2a_dd" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.addtoany.com/share"></a></div></div><script async="" src="https://static.addtoany.com/menu/page.js"></script><script>var a2a_config=a2a_config||{};a2a_config.templates=a2a_config.templates||{},a2a_config.templates.email={subject:"来自 dong4j 的分享: ${title}",body:"一篇有意思的博文:\n${link}"},a2a_config.templates.sms={body:"给你分享一篇有意思的博客:\n${title}\n${link}"}</script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/8366ec74.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?ys9nndvd" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JetBrains IDEA插件开发：核心API与工具详解</div></div></a></div><div class="next-post pull-right"><a href="/posts/ea742350.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?8yutly2u" onerror="onerror=null,src=&quot;/img/404.webp&quot;" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring提供的不同序列化方式大对比</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/d366874c.html" title="Java编程进阶之路：学习Collections和Arrays的强大功能"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?03noljoi" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2012-05-30</div><div class="title">Java编程进阶之路：学习Collections和Arrays的强大功能</div></div></a></div><div><a href="/posts/b3298821.html" title="Java基础：一些常用代码片段"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?ku22z8jz" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2015-01-05</div><div class="title">Java基础：一些常用代码片段</div></div></a></div><div><a href="/posts/28ed4a7f.html" title="掌握Java泛型的力量：从基础到高级用法"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?b0qkuld2" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2014-09-20</div><div class="title">掌握Java泛型的力量：从基础到高级用法</div></div></a></div><div><a href="/posts/220ed6be.html" title="HashSet、TreeSet、HashMap：Java集合类的核心"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?x6anjt6s" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2012-05-31</div><div class="title">HashSet、TreeSet、HashMap：Java集合类的核心</div></div></a></div><div><a href="/posts/68dfa52e.html" title="MyBatis CRUD操作指南"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?t03p20o5" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2013-04-16</div><div class="title">MyBatis CRUD操作指南</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" rel="external nofollow noreferrer">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" onerror="this.onerror=null,this.src=&quot;/img/friend_404.gif&quot;" alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/coding.gif" alt="status"></div></div><div class="author-info__description"><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">dong4j</h1><div class="author-info__desc">岁月静好，诗酒趁年华 🍺</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/dong4j" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fa-brands fa-github faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fa-solid fa-at faa-tada"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><div style="display:flex;align-items:center"><span>👋🏻 Hi，欢迎来到我的博客~</span><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mario.gif" width="40"></div><span>❓ 如有问题欢迎评论区交流！🎉</span><br><span>😫 页面异常？试试<kbd>Ctrl</kbd>+<kbd>F5</kbd>🙉</span><br><span>📧 如需联系：<a href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer"><b>发邮件给我吧 🚀</b></a></span><div id="welcome-info"></div><a id="my-card-info-btn" href="/subscribe/" data-pjax-state=""><i class="anzhiyufont anzhiyu-icon-rss"></i><span>订阅本站</span></a></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background:url(https://cdn.dong4j.site/source/image/63c02edf44033.webp) center center/100% no-repeat"></div><div class="back face" style="background:url(https://cdn.dong4j.site/source/image/645fa415e8694.webp) center center/100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JDK5-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">1.</span> <span class="toc-text">JDK5 新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%B3%9B%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1、泛型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%9E%9A%E4%B8%BE"><span class="toc-number">1.2.</span> <span class="toc-text">2、枚举</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E8%87%AA%E5%8A%A8%E6%8B%86%E7%AE%B1-%E8%A3%85%E7%AE%B1"><span class="toc-number">2.</span> <span class="toc-text">3、自动拆箱/装箱</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">4、可变参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.</span> <span class="toc-text">5、注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E5%A2%9E%E5%BC%BA-for-%E5%BE%AA%E7%8E%AF-for-in"><span class="toc-number">5.</span> <span class="toc-text">6、增强 for 循环 for/in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E9%9D%99%E6%80%81%E5%AF%BC%E5%85%A5"><span class="toc-number">6.</span> <span class="toc-text">7. 静态导入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-print-%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">8. print 输出格式化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%B9%B6%E5%8F%91%E6%94%AF%E6%8C%81%EF%BC%88JUC%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">9. 并发支持（JUC）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Arrays%E3%80%81Queue%E3%80%81%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8-StringBuilder"><span class="toc-number">9.</span> <span class="toc-text">10. Arrays、Queue、线程安全 StringBuilder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDK6-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">10.</span> <span class="toc-text">JDK6 新特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDK7-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">11.</span> <span class="toc-text">JDK7 新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-switch-%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%AF%B9-String-%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">11.1.</span> <span class="toc-text">1. switch 中添加对 String 类型的支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E5%AD%97%E5%AD%97%E9%9D%A2%E9%87%8F%E7%9A%84%E6%94%B9%E8%BF%9B"><span class="toc-number">11.2.</span> <span class="toc-text">2. 数字字面量的改进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%EF%BC%88%E6%8D%95%E8%8E%B7%E5%A4%9A%E4%B8%AA%E5%BC%82%E5%B8%B8%EF%BC%89-try-with-resources"><span class="toc-number">11.3.</span> <span class="toc-text">3. 异常处理（捕获多个异常） try-with-resources</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#catch-%E5%AD%90%E5%8F%A5%E8%83%BD%E5%A4%9F%E5%90%8C%E4%B8%80%E6%97%B6%E5%80%99%E6%8D%95%E8%8E%B7%E5%A4%9A%E4%B8%AA%E5%BC%82%E5%B8%B8"><span class="toc-number">11.3.1.</span> <span class="toc-text">catch 子句能够同一时候捕获多个异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#try-with-resources-%E8%AF%AD%E5%8F%A5"><span class="toc-number">11.3.2.</span> <span class="toc-text">try-with-resources 语句</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A2%9E%E5%BC%BA%E6%B3%9B%E5%9E%8B%E6%8E%A8%E6%96%AD"><span class="toc-number">11.4.</span> <span class="toc-text">4. 增强泛型推断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-NIO2-0%EF%BC%88AIO%EF%BC%89%E6%96%B0-IO-%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">11.5.</span> <span class="toc-text">5. NIO2.0（AIO）新 IO 的支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-JSR292-%E4%B8%8E-InvokeDynamic"><span class="toc-number">11.6.</span> <span class="toc-text">6. JSR292 与 InvokeDynamic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Path-%E6%8E%A5%E5%8F%A3-%E9%87%8D%E8%A6%81%E6%8E%A5%E5%8F%A3%E6%9B%B4%E6%96%B0"><span class="toc-number">11.7.</span> <span class="toc-text">7. Path 接口(重要接口更新)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-fork-join-%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6"><span class="toc-number">11.8.</span> <span class="toc-text">8. fork/join 计算框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDK8-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">12.</span> <span class="toc-text">JDK8 新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">12.1.</span> <span class="toc-text">1. Lambda 表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A5%E5%8F%A3%E7%9A%84%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95%E4%B8%8E%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-number">12.2.</span> <span class="toc-text">2. 接口的默认方法与静态方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8%EF%BC%88%E5%90%AB%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8%EF%BC%89"><span class="toc-number">12.3.</span> <span class="toc-text">3. 方法引用（含构造方法引用）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%87%8D%E5%A4%8D%E6%B3%A8%E8%A7%A3"><span class="toc-number">12.4.</span> <span class="toc-text">4. 重复注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%89%A9%E5%B1%95%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%88%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3%EF%BC%89"><span class="toc-number">12.5.</span> <span class="toc-text">5. 扩展注解的支持（类型注解）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Optional"><span class="toc-number">12.6.</span> <span class="toc-text">6. Optional</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Stream"><span class="toc-number">12.7.</span> <span class="toc-text">7. Stream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Date-Time-API-JSR-310"><span class="toc-number">12.8.</span> <span class="toc-text">8. Date/Time API (JSR 310)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-JavaScript-%E5%BC%95%E6%93%8E-Nashorn"><span class="toc-number">12.9.</span> <span class="toc-text">9. JavaScript 引擎 Nashorn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-Base64"><span class="toc-number">12.10.</span> <span class="toc-text">10. Base64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-JVM-%E7%9A%84-PermGen-%E7%A9%BA%E9%97%B4%E8%A2%AB%E7%A7%BB%E9%99%A4"><span class="toc-number">12.11.</span> <span class="toc-text">11. JVM 的 PermGen 空间被移除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-HashMap-%E6%94%B9%E8%BF%9B"><span class="toc-number">12.12.</span> <span class="toc-text">12. HashMap 改进</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDK9-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">13.</span> <span class="toc-text">JDK9 新特性</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Java-%E5%B9%B3%E5%8F%B0%E6%A8%A1%E5%9D%97%E5%8C%96%E7%B3%BB%E7%BB%9F"><span class="toc-number"></span> <span class="toc-text">1 Java 平台模块化系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E6%8F%8F%E8%BF%B0%E5%99%A8"><span class="toc-number">1.</span> <span class="toc-text">模块描述器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jlink-Java-%E8%BF%9E%E6%8E%A5%E5%99%A8"><span class="toc-number">2.</span> <span class="toc-text">jlink:Java 连接器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%96%B0%E5%B7%A5%E5%85%B7"><span class="toc-number"></span> <span class="toc-text">2 新工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-JShell"><span class="toc-number">1.</span> <span class="toc-text">2.1 JShell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%9B%B4%E5%A4%9A%E7%9A%84%E8%AF%8A%E6%96%AD%E5%91%BD%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">2.2 更多的诊断命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%A4%9A%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9-Jar"><span class="toc-number"></span> <span class="toc-text">3 多版本兼容 Jar</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E6%96%B0%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number"></span> <span class="toc-text">4 新的安全性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E6%95%B0%E6%8D%AE%E6%8A%A5%E4%BC%A0%E8%BE%93%E5%B1%82%E5%AE%89%E5%85%A8%E6%80%A7-DTLS%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">4.1 数据报传输层安全性(DTLS）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%A6%81%E7%94%A8-sha-1-%E8%AF%81%E4%B9%A6"><span class="toc-number">2.</span> <span class="toc-text">4.2 禁用 sha - 1 证书</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E6%A0%B8%E5%BF%83%E5%BA%93%E6%96%B0%E5%86%85%E5%AE%B9"><span class="toc-number"></span> <span class="toc-text">5 核心库新内容</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9A%84-json-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86-api"><span class="toc-number">1.</span> <span class="toc-text">5.1 轻量级的 json 文本处理 api</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%96%B0%E5%86%85%E5%AE%B9"><span class="toc-number">2.</span> <span class="toc-text">5.2 多线程新内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Publish-Subscribe-Framework"><span class="toc-number">2.1.</span> <span class="toc-text">Publish-Subscribe Framework</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E5%9F%BA%E7%A1%80%E7%B1%BB%E6%96%B0%E5%86%85%E5%AE%B9"><span class="toc-number">3.</span> <span class="toc-text">5.3 基础类新内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A2%9E%E5%BC%BA%E7%9A%84%E5%BC%83%E7%94%A8%E6%A0%87%E8%AE%B0"><span class="toc-number">3.1.</span> <span class="toc-text">增强的弃用标记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thread-onSpinWait"><span class="toc-number">3.2.</span> <span class="toc-text">Thread.onSpinWait</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E7%A7%81%E6%9C%89%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">6 私有接口方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-java-net-%E6%96%B0%E5%86%85%E5%AE%B9"><span class="toc-number"></span> <span class="toc-text">7 java.net 新内容</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#http-2"><span class="toc-number">1.</span> <span class="toc-text">http/2</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E5%85%B6%E4%BB%96"><span class="toc-number"></span> <span class="toc-text">8 其他</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-Try-With-Resources-%E7%9A%84%E6%94%B9%E5%8F%98"><span class="toc-number">1.</span> <span class="toc-text">8.1 Try-With-Resources 的改变</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-Unsafe-%E7%B1%BB%E7%9A%84%E5%91%BD%E8%BF%90"><span class="toc-number">2.</span> <span class="toc-text">8.2 Unsafe 类的命运</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%D0%9Culti-Resolution-Image-API"><span class="toc-number">3.</span> <span class="toc-text">8.3 Мulti-Resolution Image API</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-JVM-%E4%BC%98%E5%8C%96"><span class="toc-number"></span> <span class="toc-text">9 JVM 优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E4%BD%BF%E7%94%A8-G1-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8"><span class="toc-number">1.</span> <span class="toc-text">9.1 使用 G1 垃圾回收器作为默认的垃圾回收器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD"><span class="toc-number">1.1.</span> <span class="toc-text">1. 本地变量类型推断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8A%A0%E5%BC%BA"><span class="toc-number">1.2.</span> <span class="toc-text">2. 字符串加强</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%9B%86%E5%90%88%E5%8A%A0%E5%BC%BA"><span class="toc-number">1.3.</span> <span class="toc-text">3. 集合加强</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Stream-%E5%8A%A0%E5%BC%BA"><span class="toc-number">1.4.</span> <span class="toc-text">4. Stream 加强</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Optional-%E5%8A%A0%E5%BC%BA"><span class="toc-number">1.5.</span> <span class="toc-text">5. Optional 加强</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-InputStream-%E5%8A%A0%E5%BC%BA"><span class="toc-number">1.6.</span> <span class="toc-text">6. InputStream 加强</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-HTTP-Client-API-%E9%87%8D%E7%A3%85"><span class="toc-number">1.7.</span> <span class="toc-text">7. HTTP Client API(重磅)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%8C%96%E7%B9%81%E4%B8%BA%E7%AE%80%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%91%BD%E4%BB%A4%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">1.8.</span> <span class="toc-text">8. 化繁为简，一个命令编译运行源代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E7%A7%BB%E9%99%A4%E9%A1%B9"><span class="toc-number">1.9.</span> <span class="toc-text">9. 移除项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%BA%9F%E5%BC%83%E9%A1%B9"><span class="toc-number">1.10.</span> <span class="toc-text">10. 废弃项</span></a></li></ol></li></ol></li></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/b902d8fd.html" title="从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://api.dong4j.ink:1024/cover?lbi2q79v" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例"></a><div class="content"><a class="title" href="/posts/b902d8fd.html" title="从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例">从零开始开发一个 Hexo 插件：以 hexo-plugin-llmstxt 为例</a><time datetime="2025-01-30T03:34:10.000Z" title="发表于 2025-01-30 11:34:10">2025-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bb4018e9.html" title="使用 Node.js 开发数字名片并集成 Chat 服务"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250115192416_nhXEcB8o.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="使用 Node.js 开发数字名片并集成 Chat 服务"></a><div class="content"><a class="title" href="/posts/bb4018e9.html" title="使用 Node.js 开发数字名片并集成 Chat 服务">使用 Node.js 开发数字名片并集成 Chat 服务</a><time datetime="2025-01-15T02:47:34.000Z" title="发表于 2025-01-15 10:47:34">2025-01-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/621bb677.html" title="从零开始开发 VSCode 插件：从 Hello World 到图片处理工具"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250114004440_j6VHuwA4.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="从零开始开发 VSCode 插件：从 Hello World 到图片处理工具"></a><div class="content"><a class="title" href="/posts/621bb677.html" title="从零开始开发 VSCode 插件：从 Hello World 到图片处理工具">从零开始开发 VSCode 插件：从 Hello World 到图片处理工具</a><time datetime="2025-01-13T15:54:10.000Z" title="发表于 2025-01-13 23:54:10">2025-01-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/af11d9f5.html" title="Chrome 插件开发实战：从零开始开发一个图片上传工具"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250113235017_acCTt6s4.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="Chrome 插件开发实战：从零开始开发一个图片上传工具"></a><div class="content"><a class="title" href="/posts/af11d9f5.html" title="Chrome 插件开发实战：从零开始开发一个图片上传工具">Chrome 插件开发实战：从零开始开发一个图片上传工具</a><time datetime="2025-01-10T16:48:57.000Z" title="发表于 2025-01-11 00:48:57">2025-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f5478013.html" title="利用 AI 对博客文章进行智能分类"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/20250103004028_E1ep6rty.webp" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" alt="利用 AI 对博客文章进行智能分类"></a><div class="content"><a class="title" href="/posts/f5478013.html" title="利用 AI 对博客文章进行智能分类">利用 AI 对博客文章进行智能分类</a><time datetime="2024-12-31T16:00:00.000Z" title="发表于 2025-01-01 00:00:00">2025-01-01</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:dong4j@gmail.com" rel="external nofollow noreferrer" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://weibo.com/u/1884084142" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.facebook.com/dsj.array" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/avatar.webp" size="50px"><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://space.bilibili.com/1835978167" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://v.douyin.com/iUqoRYwb/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener external nofollow noreferrer" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html">开往</a><a class="footer-item" title="服务状态" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.ink:1024/status/services">服务状态</a></div></div><div class="footer-group"><div class="footer-title">项目</div><div class="footer-links"><a class="footer-item" title="Watt.Stack" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack">Watt.Stack</a><a class="footer-item" title="MIK" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit">MIK</a><a class="footer-item" title="macOS.dev" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev">macOS.dev</a><a class="footer-item" title="更多" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.ink:1024/">更多</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="我的装备" href="/equipment/">我的装备</a><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" rel="external nofollow noreferrer" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"></a><a class="github-badge" target="_blank" href="https://github.com/dong4j" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><footer-bar-left><div id="footer-bar-tips"><div class="copyright" style="display:flex;align-items:center;gap:10px">©2013 - 2025 By <a class="footer-bar-link" href="/" title="dong4j" target="_blank">dong4j</a><span class="indicator" id="indicator" style="display:inline-block;width:8px;height:8px;border-radius:50%;background-color:green;margin-left:0;animation:subtle-breathing 1.2s infinite;box-shadow:0 0 5px rgba(255,0,0,.8)"></span><span>在线人数:</span><span id="online_user" style="font-size:1em;font-weight:700">1</span></div></div><div id="footer-type-tips"></div></footer-bar-left><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/" title="蜀ICP备2025119258号">蜀ICP备2025119258号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">240</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">1088</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" rel="external nofollow noreferrer" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://home.dong4j.site" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/homepage.webp" alt="个人主页"><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://blog.dong4j.site" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/blog.webp" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.dong4j.site" title="简历"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/resume.webp" alt="简历"><span class="back-menu-item-text">简历</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://npx-card.dong4j.site" title="npx-card"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/npx-card.webp" alt="npx-card"><span class="back-menu-item-text">npx-card</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/watt-stack" title="Watt.Stack"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/watt.webp" alt="Watt.Stack"><span class="back-menu-item-text">Watt.Stack</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/markdown-image-kit" title="MIK"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mik.webp" alt="MIK"><span class="back-menu-item-text">MIK</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dong4j/macOS-dev" title="macOS.dev"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/mac.webp" alt="macOS.dev"><span class="back-menu-item-text">macOS.dev</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://project.dong4j.site/" title="更多"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/project.webp" alt="更多"><span class="back-menu-item-text">更多</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://uptime.dong4j.ink:1024/status/services" title="服务状态"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/uptime-kuma.svg" alt="服务状态"><span class="back-menu-item-text">服务状态</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nezha.dong4j.ink:1024?f=blog" title="服务面板"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nezha.webp" alt="服务面板"><span class="back-menu-item-text">服务面板</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.dong4j.ink:1024/" title="导航页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/nav.webp" alt="导航页"><span class="back-menu-item-text">导航页</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://umami.dong4j.ink:1024/share/V7Rat8DdVw4npjl2/blog.dong4j.site" title="Umami"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/umami.webp" alt="Umami"><span class="back-menu-item-text">Umami</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://muselink.cc/dong4j 👈这是我的MuseLink数字名片！" title="数字名片"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/muse.lin.webp" alt="数字名片"><span class="back-menu-item-text">数字名片</span></a><a class="back-menu-item" href="/ai/deepseek-r1-webgpu/" title="DeepSeek"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/deepseek.webp" alt="DeepSeek"><span class="back-menu-item-text">DeepSeek</span></a><a class="back-menu-item" href="/ai/rmbg/playground/" title="RMBG"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/rmbg.webp" alt="RMBG"><span class="back-menu-item-text">RMBG</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="http://chat.dong4j.ink:1024/chat" title="Mini-Chat"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.webp&quot;" data-lazy-src="https://cdn.dong4j.site/source/image/emoji1.webp" alt="Mini-Chat"><span class="back-menu-item-text">Mini-Chat</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messages/"><i class="fa fa-comments faa-tada"></i><span> 最新评论</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-line-chart faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/memos/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i><span> 备忘录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><i class="fa-solid fa-map faa-tada"></i><span> 折腾清单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/stars/"><i class="fa-brands fa-github faa-tada"></i><span> Star 清单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size:.88rem;color:#9b7e27;font-weight:500;color:var(--anzhiyu-lighttext)">Java<sup>48</sup></a><a href="/tags/final/" style="font-size:.88rem;color:#4e5ca8">final<sup>2</sup></a><a href="/tags/finalize/" style="font-size:.88rem;color:#63728c">finalize<sup>1</sup></a><a href="/tags/finally/" style="font-size:.88rem;color:#0b49c5">finally<sup>2</sup></a><a href="/tags/new%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:.88rem;color:#384b4d">new关键字<sup>1</sup></a><a href="/tags/static/" style="font-size:.88rem;color:#74528f">static<sup>1</sup></a><a href="/tags/super/" style="font-size:.88rem;color:#05322e">super<sup>2</sup></a><a href="/tags/this/" style="font-size:.88rem;color:#2f931c">this<sup>1</sup></a><a href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/" style="font-size:.88rem;color:#1c4e9b">二进制<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size:.88rem;color:#c0aba8">数据类型<sup>4</sup></a><a href="/tags/%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" style="font-size:.88rem;color:#b55038">构造方法<sup>1</sup></a><a href="/tags/%E6%BA%A2%E5%87%BA/" style="font-size:.88rem;color:#4bb108">溢出<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:.88rem;color:#7c8f52">算法<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size:.88rem;color:#b24ec1">编程实践<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F/" style="font-size:.88rem;color:#c11f0b">计算机程序<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AF%AD%E8%A8%80/" style="font-size:.88rem;color:#bc5f25">计算机语言<sup>1</sup></a><a href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" style="font-size:.88rem;color:#879abe">访问控制<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size:.88rem;color:#153344">软件<sup>1</sup></a><a href="/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" style="font-size:.88rem;color:#9ab688">错误处理<sup>2</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size:.88rem;color:#4d09a0">面向对象<sup>6</sup></a></div></div><hr></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" rel="external nofollow noreferrer" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{function o(){HoldLog.apply(console,arguments)}var c=new Date("6/28/2018 00:00:00"),c=(now1.setTime(now1.getTime()+250),(now1-c)/1e3/60/60/24),c=["Hi there 👋，I'm dong4j, Welcome to my blog","岁月静好，诗酒趁年华🍺",`
        
      +========================================================+
      |  ██████╗  ██████╗ ███╗   ██╗ ██████╗ ██╗  ██╗     ██╗  |
      |  ██╔══██╗██╔═══██╗████╗  ██║██╔════╝ ██║  ██║     ██║  |
      |  ██║  ██║██║   ██║██╔██╗ ██║██║  ███╗███████║     ██║  |
      |  ██║  ██║██║   ██║██║╚██╗██║██║   ██║╚════██║██   ██║  |
      |  ██████╔╝╚██████╔╝██║ ╚████║╚██████╔╝     ██║╚█████╔╝  |
      |  ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝ ╚═════╝      ╚═╝ ╚════╝   |
      +========================================================+
        
        `,"已上线",Math.floor(c),"天","Use 「npx dong4j」 and find me."],e=["NCC2-036","调用前置摄像头拍照成功，识别为【绝顶大佬】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`
%c${c[0]} %c ${c[1]} %c ${c[2]} %c${c[3]}%c ${c[4]}%c ${c[5]}

%c ${c[6]}
`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${e[0]} %c ${e[1]} %c 
${e[2]} %c
${e[3]}
`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，绝顶大佬.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 dong4j 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async="" src="/anzhiyu/random.js"></script><script async="">(()=>{var n,o,r,a,i,e=new Date("6/28/2018 00:00:00"),l=new Date;setInterval(()=>{var t;if(l=new Date,i=l.getHours(),t=(l-e)/1e3/60/60/24,n=Math.floor(t),t=(l-e)/1e3/60/60-24*n,o=Math.floor(t),1==String(o).length&&(o="0"+o),t=(l-e)/1e3/60-1440*n-60*o,r=Math.floor(t),1==String(r).length&&(r="0"+r),t=(l-e)/1e3-86400*n-3600*o-60*r,a=Math.round(t),1==String(a).length&&(a="0"+a),document.getElementById("footer")){let e="";e=(i<18&&9<=i||null!=(t=document.querySelector("#workboard .workSituationImg"))&&(t.src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg",t.title="下班了就该开开心心的玩耍，嘿嘿~",t.alt="下班了就该开开心心的玩耍，嘿嘿~"),`本站居然运行了 ${n} 天<span id='runtime'> ${o} 小时 ${r} 分 ${a} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`),document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=e)}},1e3)})()</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(()=>{let t=document.querySelectorAll("#article-container .mermaid-wrap");if(0!==t.length){let e=()=>{window.loadMermaid=!0;let a="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(t).forEach((e,t)=>{let d=e.firstElementChild;e="%%{init:{ 'theme':'"+a+"'}}%%\n"+d.textContent;let n=mermaid.render("mermaid-"+t,e);"string"==typeof n?(t=n,d.insertAdjacentHTML("afterend",t)):n.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})};var d=()=>{window.loadMermaid?e():getScript("https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js").then(e)};anzhiyu.addGlobalFn("themeChange",e,"mermaid"),window.pjax?d():document.addEventListener("DOMContentLoaded",d)}})()</script><script>(()=>{let t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.dong4j.ink:1024",region:"",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};var o=()=>{"object"==typeof twikoo?setTimeout(n,0):getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(n)};let e=()=>{let o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo.dong4j.ink:1024",region:"",urls:[window.location.pathname],includeReply:!1}).then(t=>{o.textContent=t[0].count}).catch(t=>{console.error(t)})},n=()=>{t(),GLOBAL_CONFIG_SITE.isPost&&e()};o()})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async="" src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{let t=e=>e=""!==e&&150<(e=(e=(e=(e=e.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length?e.substring(0,150)+"...":e,n=t=>{let n="";if(t.length)for(let e=0;e<t.length;e++)n=(n=(n+="<div class='aside-list-item'>")+`<a href='${t[e].url}' class='thumbnail'><img data-lazy-src='${t[e].avatar}' alt='${t[e].nick}'><div class='name'><span>${t[e].nick} </span></div></a>`)+`<div class='content'>
        <a class='comment' href='${t[e].url}' title='${t[e].content}'>${t[e].content}</a>
        <time datetime="${t[e].date}">${anzhiyu.diffDate(t[e].date,!0)}</time></div>
        </div>`;else n+="没有评论";var e=document.querySelector("#card-newest-comments .aside-list");e&&(e.innerHTML=n),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(e)};var e=()=>{var e;document.querySelector("#card-newest-comments .aside-list")&&((e=saveToLocal.get("twikoo-newest-comments"))?n(JSON.parse(e)):(e=()=>{twikoo.getRecentComments({envId:"https://twikoo.dong4j.ink:1024",region:"",pageSize:6,includeReply:!0}).then(function(e){e=e.map(e=>({content:t(e.comment),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(e),10/1440),n(e)}).catch(function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"})},"object"==typeof twikoo?e():getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(e)))};e(),document.addEventListener("pjax:complete",e)})</script><script>var visitorMail="996@icu.com"</script><script async="" data-pjax="" src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/subscribe.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-today.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.dong4j.site/source/static/card-widget-calendar.css" media="print" onload="this.media=&quot;all&quot;"><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/automatic-redirection.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-welcome.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-comments.js"></script><script async="" data-pjax="" src="https://cdn.dong4j.site/source/static/card-widget-today.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-countdown.js"></script><script src="https://cdn.dong4j.site/source/static/card-widget-calendar.js"></script><script async="" data-pjax="" src="https://open.lightxi.com/unpkg/chinese-lunar@0.1.4/lib/chinese-lunar.js"></script><script async="" data-pjax="" src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script src="https://cdn.dong4j.site/source/static/custom.js"></script><script src="https://cdn.dong4j.site/source/static/geoip2-check.js"></script><script defer="" id="fluttering_ribbon" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="永不言败,勇往直前,砥砺前行,自强不息,笃行致远,厚德载物,持之以恒,奋发有为,志在四方,拼搏进取,实事求是，为人民服务,勤劳致富，共奔小康,爱国、创新、包容、厚德,敬业乐群，诚信友善,自强不息，厚德载物,以人为本，全面协调可持续发展,建设生态文明，构建和谐社会,坚持改革开放，推动科学发展,立党为公，执政为民,实现中华民族伟大复兴的中国梦" data-fontsize="15px" data-random="true" async=""></script><script src="//code.tidio.co/14aqpkwnauu3r5ngcmspfxwelvattym5.js" async=""></script><script>(()=>{{let i=!1,o=()=>{window.tidioChatApi.hide(),i=!1,document.body.style.position="relative",document.documentElement.style.overflow="auto"};var t=()=>{window.tidioChatApi.hide(),window.tidioChatApi.on("close",o)};window.tidioChatApi?window.tidioChatApi.on("ready",t):document.addEventListener("tidioChat-ready",t),window.chatBtnFn=()=>{window.tidioChatApi&&(i?o():(window.tidioChatApi.open(),window.tidioChatApi.show(),i=!0))}}})()</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media=&quot;all&quot;"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();var e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{let t=document.createElement("script");var a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async="" data-pjax="" data-prefix="busuanzi_value" src="https://cdn.dong4j.site/source/static/busuanzi.self.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><script data-pjax="" src="https://cdn.jsdelivr.net/gh/barry-flynn/hexo-github-calendar/hexo_githubcalendar.js"></script><script data-pjax="">function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://github-calendar.dong4j.ink:1024/api?user=dong4j",["#ebedf0","#a2f7af","#6ce480","#54ad63","#469252","#31753c","#1f5f2a","#13531f","#084111","#032b09","#000000"],"dong4j")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style></body></html>